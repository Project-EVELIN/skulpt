Sk.builtinFiles={"files": {"src/lib/pythonds/trees/binheap.py": "# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\n# this heap takes key value pairs, we will assume that the keys are integers\nclass BinHeap:\n    def __init__(self):\n        self.heapList = [0]\n        self.currentSize = 0\n\n\n    def buildHeap(self,alist):\n        i = len(alist) // 2\n        self.currentSize = len(alist)\n        self.heapList = [0] + alist[:]\n        print(len(self.heapList), i)\n        while (i > 0):\n            print(self.heapList, i)\n            self.percDown(i)\n            i = i - 1\n        print(self.heapList,i)\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapList[i] > self.heapList[mc]:\n                tmp = self.heapList[i]\n                self.heapList[i] = self.heapList[mc]\n                self.heapList[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i * 2 + 1 > self.currentSize:\n            return i * 2\n        else:\n            if self.heapList[i * 2] < self.heapList[i * 2 + 1]:\n                return i * 2\n            else:\n                return i * 2 + 1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapList[i] < self.heapList[i//2]:\n               tmp = self.heapList[i // 2]\n               self.heapList[i // 2] = self.heapList[i]\n               self.heapList[i] = tmp\n            i = i // 2\n \n    def insert(self,k):\n        self.heapList.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapList[1]\n        self.heapList[1] = self.heapList[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapList.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if currentSize == 0:\n            return True\n        else:\n            return False\n", "src/lib/pythonds/basic/stack.py": "# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#stack.py\n\nclass Stack:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def push(self, item):\n        self.items.append(item)\n\n    def pop(self):\n        return self.items.pop()\n\n    def peek(self):\n        return self.items[len(self.items)-1]\n\n    def size(self):\n        return len(self.items)\n\n", "src/lib/pythonds/trees/bst.py": "#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nclass BinarySearchTree:\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n                  in\n                  del <==> \n    '''\n\n    def __init__(self):\n        self.root = None\n        self.size = 0\n    \n    def put(self,key,val):\n        if self.root:\n            self._put(key,val,self.root)\n        else:\n            self.root = TreeNode(key,val)\n        self.size = self.size + 1\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n            \n    def __setitem__(self,k,v):\n        self.put(k,v)\n\n    def get(self,key):\n        if self.root:\n            res = self._get(key,self.root)\n            if res:\n                return res.payload\n            else:\n                return None\n        else:\n            return None\n        \n    def _get(self,key,currentNode):\n        if not currentNode:\n            return None\n        elif currentNode.key == key:\n            return currentNode\n        elif key < currentNode.key:\n            return self._get(key,currentNode.leftChild)\n        else:\n            return self._get(key,currentNode.rightChild)\n            \n        \n    def __getitem__(self,key):\n        res = self.get(key)\n        if res:\n            return res\n        else:\n            raise KeyError('Error, key not in tree')\n            \n\n    def __contains__(self,key):\n        if self._get(key,self.root):\n            return True\n        else:\n            return False\n        \n    def length(self):\n        return self.size\n\n    def __len__(self):\n        return self.size\n\n    def __iter__(self):\n        return self.root.__iter__()\n    \n    def delete(self,key):\n        if self.size > 1:\n            nodeToRemove = self._get(key,self.root)\n            if nodeToRemove:\n                self.remove(nodeToRemove)\n                self.size = self.size-1\n            else:\n                raise KeyError('Error, key not in tree')\n        elif self.size == 1 and self.root.key == key:\n            self.root = None\n            self.size = self.size - 1\n        else:\n            raise KeyError('Error, key not in tree')\n\n    def __delitem__(self,key):\n        self.delete(key)\n    \n    def remove(self,currentNode):\n        if currentNode.isLeaf(): #leaf\n            if currentNode == currentNode.parent.leftChild:\n                currentNode.parent.leftChild = None\n            else:\n                currentNode.parent.rightChild = None\n        elif currentNode.hasBothChildren(): #interior\n            succ = currentNode.findSuccessor()\n            succ.spliceOut()\n            currentNode.key = succ.key\n            currentNode.payload = succ.payload\n        else: # this node has one child\n            if currentNode.hasLeftChild():\n                if currentNode.isLeftChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.leftChild\n                elif currentNode.isRightChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.leftChild\n                else:\n                    currentNode.replaceNodeData(currentNode.leftChild.key,\n                                       currentNode.leftChild.payload,\n                                       currentNode.leftChild.leftChild,\n                                       currentNode.leftChild.rightChild)\n            else:\n                if currentNode.isLeftChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.rightChild\n                elif currentNode.isRightChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.rightChild\n                else:\n                    currentNode.replaceNodeData(currentNode.rightChild.key,\n                                       currentNode.rightChild.payload,\n                                       currentNode.rightChild.leftChild,\n                                       currentNode.rightChild.rightChild)\n\n    def inorder(self):\n        self._inorder(self.root)\n\n    def _inorder(self,tree):\n        if tree != None:\n            self._inorder(tree.leftChild)\n            print(tree.key)\n            self._inorder(tree.rightChild)\n\n    def postorder(self):\n        self._postorder(self.root)\n\n    def _postorder(self, tree):\n        if tree:\n            self._postorder(tree.rightChild)\n            self._postorder(tree.leftChild)\n            print(tree.key)            \n\n    def preorder(self):\n        self._preorder(self,self.root)\n\n    def _preorder(self,tree):\n        if tree:\n            print(tree.key)            \n            self._preorder(tree.leftChild)\n            self._preorder(tree.rightChild)\n\n                \nclass TreeNode:\n    def __init__(self,key,val,left=None,right=None,parent=None):\n        self.key = key\n        self.payload = val\n        self.leftChild = left\n        self.rightChild = right\n        self.parent = parent\n        self.balanceFactor = 0\n        \n    def hasLeftChild(self):\n        return self.leftChild\n\n    def hasRightChild(self):\n        return self.rightChild\n    \n    def isLeftChild(self):\n        return self.parent and self.parent.leftChild == self\n\n    def isRightChild(self):\n        return self.parent and self.parent.rightChild == self\n\n    def isRoot(self):\n        return not self.parent\n\n    def isLeaf(self):\n        return not (self.rightChild or self.leftChild)\n\n    def hasAnyChildren(self):\n        return self.rightChild or self.leftChild\n\n    def hasBothChildren(self):\n        return self.rightChild and self.leftChild\n    \n    def replaceNodeData(self,key,value,lc,rc):\n        self.key = key\n        self.payload = value\n        self.leftChild = lc\n        self.rightChild = rc\n        if self.hasLeftChild():\n            self.leftChild.parent = self\n        if self.hasRightChild():\n            self.rightChild.parent = self\n        \n    def findSuccessor(self):\n        succ = None\n        if self.hasRightChild():\n            succ = self.rightChild.findMin()\n        else:\n            if self.parent:\n                if self.isLeftChild():\n                    succ = self.parent\n                else:\n                    self.parent.rightChild = None\n                    succ = self.parent.findSuccessor()\n                    self.parent.rightChild = self\n        return succ\n\n\n    def spliceOut(self):\n        if self.isLeaf():\n            if self.isLeftChild():\n                self.parent.leftChild = None\n            else:\n                self.parent.rightChild = None\n        elif self.hasAnyChildren():\n            if self.hasLeftChild():\n                if self.isLeftChild():\n                    self.parent.leftChild = self.leftChild\n                else:\n                    self.parent.rightChild = self.leftChild\n                self.leftChild.parent = self.parent\n            else:\n                if self.isLeftChild():\n                    self.parent.leftChild = self.rightChild\n                else:\n                    self.parent.rightChild = self.rightChild\n                self.rightChild.parent = self.parent\n\n    def findMin(self):\n        current = self\n        while current.hasLeftChild():\n            current = current.leftChild\n        return current\n\n    def __iter__(self):\n        \"\"\"The standard inorder traversal of a binary tree.\"\"\"\n        if self:\n            if self.hasLeftChild():\n                for elem in self.leftChild:\n                    yield elem\n            yield self.key\n            if self.hasRightChild():\n                for elem in self.rightChild:\n                    yield elem\n\n            \n", "src/lib/time/__init__.js": "/*\n\tBarebones implementation of the Python time package.\n\n\tImplements a few of the internal time methods. However timezones are not working\n  currently.\n\thttps://github.com/pyjs/pyjs/blob/master/pyjs/lib/time.py\n*/\n\nvar $builtinmodule = function (name) {\n  var mod = {};\n\n  // struct_time class definition\n  var CLASS_TIME_STRUCT = \"time.struct_time\";\n\n  var wday_name = [];\n  wday_name[0] = \"Sun\";\n  wday_name[1] = \"Mon\";\n  wday_name[2] = \"Tue\";\n  wday_name[3] = \"Wed\";\n  wday_name[4] = \"Thu\";\n  wday_name[5] = \"Fri\";\n  wday_name[6] = \"Sat\";\n\n  var mon_name = [];\n  mon_name[0] = \"Jan\";\n  mon_name[1] = \"Feb\";\n  mon_name[2] = \"Mar\";\n  mon_name[3] = \"Apr\";\n  mon_name[4] = \"May\";\n  mon_name[5] = \"Jun\";\n  mon_name[6] = \"Jul\";\n  mon_name[7] = \"Aug\";\n  mon_name[8] = \"Sep\";\n  mon_name[9] = \"Oct\";\n  mon_name[10] = \"Nov\";\n  mon_name[11] = \"Dec\";\n\n  /**\n    Pads the given string (str) with given length (l) and character (c) on the left\n  **/\n  function padleft(str, l, c) {\n    var _str = str.toString();\n    return Array(l - _str.length + 1).join(c || \" \") + _str;\n  }\n\n  /**\n    Calculates the day light saving\n  **/\n  function dst(date) {\n    var stdoffset = Math.max(new Date(date.getFullYear(), 0, 1).getTimezoneOffset(), new Date(date.getFullYear(), 6, 1).getTimezoneOffset());\n\n    return date.getTimezoneOffset() - stdoffset;\n  }\n\n  /**\n    Returns an array from given js Date object, use UTC methods when set to true\n    Usefull for gmtime...\n  **/\n  function datetoarray(date, utc) {\n    var v = [];\n    utc = utc || false;\n\n    v[0] = utc ? date.getUTCFullYear() : date.getFullYear(); // returns years in \"yyyy\"\n    v[1] = (utc ? date.getUTCMonth() : date.getMonth()) + 1; // want January == 1\n    v[2] = utc ? date.getUTCDate() : date.getDate();\n    v[3] = utc ? date.getUTCHours() : date.getHours();\n    v[4] = utc ? date.getUTCMinutes() : date.getMinutes();\n    v[5] = utc ? date.getUTCSeconds() : date.getSeconds();\n    v[6] = ((utc ? date.getUTCDay() : date.getDay()) + 6) % 7; // Want Monday == 0\n    v[7] = Math.ceil((date - new Date(utc ? date.getUTCFullYear() : date.getFullYear(),0,1)) / 86400000); // Want January, 1 == 1\n    v[8] = utc ? 0 : dst(date);\n\n    return v;\n  }\n\n  /**\n    Expects time_struct js repr and returns tuple containing the values\n  **/\n  function tmtotuple(tm) {\n    var v = [];\n\n    v[0] = tm.tm_year + 1900;\n    v[1] = tm.tm_mon + 1; // want January == 1\n    v[2] = tm.tm_mday;\n    v[3] = tm.tm_hour;\n    v[4] = tm.tm_min;\n    v[5] = tm.tm_sec;\n    v[6] = (tm.tm_wday + 6) % 7; // Want Monday == 0\n    v[7] = tm.tm_yday + 1; // Want January, 1 == 1\n    v[8] = tm.tm_isdst;\n\n    v = v.map(function(x){return Sk.ffi.remapToPy(x);});\n\n    return new Sk.builtin.tuple(v);\n  }\n\n  /**\n    Expects and sequence/tuple (js type) containing all relevant time data\n  **/\n  function gettmarg(tm, args) {\n\n    var y = args[0];        // 0 for exampel 1993\n    tm.tm_mon = args[1];    // 1 range [1,12]\n    tm.tm_mday = args[2];   // 2 range [1,31]\n    tm.tm_hour = args[3];   // 3 range [0, 23]\n    tm.tm_min = args[4];    // 4 range [0, 59]\n    tm.tm_sec = args[5];    // 5 range [0, 61], special case\n    tm.tm_wday = args[6];   // 6 range [0, 6]\n    tm.tm_yday = args[7];   // 7 range [1, 366]\n    tm.tm_isdst = args[8];  // 8 0,1 or -1\n\n    tm.tm_year = y - 1900;\n    tm.tm_mon--;\n    tm.tm_wday = (tm.tm_wday+1) % 7;\n    tm.tm_yday--;\n    // not support for TM_ZONE currently\n    tm.tm_gmtoff = 0;\n  }\n\n  /** Check values of the struct tm fields before it is passed to strftime() and\n   *  asctime().  Return 1 if all values are valid, otherwise set an exception\n   *  and returns 0.\n   **/\n  function checktm(struct_time) {\n    /* includes checks for strftime() and asctime() */\n    if(Sk.abstr.typeName(struct_time) !== CLASS_TIME_STRUCT) {\n      throw new Sk.builtin.TypeError(\"Required argument 'struct_time' must be of type: '\" + CLASS_TIME_STRUCT + \"'\");\n    }\n\n    var timeJs = struct_time.v; // all internal data is stored as js types\n\n    if(timeJs.tm_mon === -1) {\n      timeJs.tm_mon = 0;\n    } else if(timeJs.tm_mon < 0 || timeJs.tm_mon > 11) {\n      throw new Sk.builtin.ValueError(\"month out of range\");\n    }\n\n    if(timeJs.tm_mday === 0) {\n      timeJs.tm_mday = 1;\n    } else if(timeJs.tm_mday < 0 || timeJs.tm_mday > 31) {\n      throw new Sk.builtin.ValueError(\"day of month out of range\");\n    }\n\n    if(timeJs.tm_hour < 0 || timeJs.tm_hour > 23) {\n      throw new Sk.builtin.ValueError(\"hour out of range\");\n    }\n\n    if(timeJs.tm_min < 0 || timeJs.tm_min > 59) {\n      throw new Sk.builtin.ValueError(\"minute out of range\");\n    }\n\n    if(timeJs.tm_sec < 0 || timeJs.tm_sec > 61) {\n      throw new Sk.builtin.ValueError(\"seconds out of range\");\n    }\n\n    /* tm_wday does not need checking of its upper-bound since taking\n    ``% 7`` in gettmarg() automatically restricts the range. */\n    if(timeJs.tm_wday < 0) {\n      throw new Sk.builtin.ValueError(\"day of week out of range\");\n    }\n\n    if(timeJs.tm_yday === -1) {\n      timeJs.tm_yday = 0;\n    } else if(timeJs.tm_yday < 0 || timeJs.tm_yday > 365) {\n      throw new Sk.builtin.ValueError(\"day of year out of range\");\n    }\n  }\n\n  var struct_time_f = function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, sequence){\n      var timeJs = {}; // internal js repr\n      if(!sequence) {\n        throw new Sk.builtin.TypeError(\"Required argument 'sequence' (pos 1) not found\");\n      }\n\n      if(!Sk.builtin.checkSequence(sequence) || !(sequence instanceof Sk.builtin.tuple)) {\n        throw new Sk.builtin.TypeError('constructor requires a sequence');\n      }\n\n      var _seq = Sk.ffi.remapToJs(sequence);\n\n      if(_seq.length != 9) {\n        throw new Sk.builtin.TypeError(\"time.struct_time() takes a 9-sequence (\" + _seq.length + \"-sequence given)\");\n      }\n\n      gettmarg(timeJs, _seq);\n\n      Sk.abstr.sattr(self, 'tm_year', Sk.ffi.remapToPy(timeJs.tm_year));\n      Sk.abstr.sattr(self, 'tm_mon', Sk.ffi.remapToPy(timeJs.tm_mon));\n      Sk.abstr.sattr(self, 'tm_mday', Sk.ffi.remapToPy(timeJs.tm_mday));\n      Sk.abstr.sattr(self, 'tm_hour', Sk.ffi.remapToPy(timeJs.tm_hour));\n      Sk.abstr.sattr(self, 'tm_min', Sk.ffi.remapToPy(timeJs.tm_min));\n      Sk.abstr.sattr(self, 'tm_sec', Sk.ffi.remapToPy(timeJs.tm_sec));\n      Sk.abstr.sattr(self, 'tm_wday', Sk.ffi.remapToPy(timeJs.tm_wday));\n      Sk.abstr.sattr(self, 'tm_yday', Sk.ffi.remapToPy(timeJs.tm_yday));\n      Sk.abstr.sattr(self, 'tm_isdst', Sk.ffi.remapToPy(timeJs.tm_isdst));\n\n      self.v = timeJs; // value holding the actual js object and array\n      self.tp$name = CLASS_TIME_STRUCT; // set class name\n    });\n\n    $loc.__repr__ = new Sk.builtin.func(function (self) {\n      var timeJs = Sk.ffi.remapToJs(self);\n\n      var repr = CLASS_TIME_STRUCT;\n      repr += \"(\";\n      repr += \"tm_year=\"+ (timeJs.tm_year + 1900) +\", \";\n      repr += \"tm_mon=\"+ (timeJs.tm_mon + 1) +\", \";\n      repr += \"tm_mday=\"+ timeJs.tm_mday +\", \";\n      repr += \"tm_hour=\"+ timeJs.tm_hour +\", \";\n      repr += \"tm_min=\"+ timeJs.tm_min +\", \";\n      repr += \"tm_sec=\"+ timeJs.tm_sec +\", \";\n      repr += \"tm_wday=\"+ ((timeJs.tm_wday + 6) % 7) +\", \";\n      repr += \"tm_yday=\"+ (timeJs.tm_yday + 1) +\", \";\n      repr += \"tm_isdst=\"+ timeJs.tm_isdst;\n      repr += \")\";\n\n      return new Sk.builtin.str(repr);\n    });\n  };\n\n  mod[CLASS_TIME_STRUCT] = Sk.misceval.buildClass(mod, struct_time_f, CLASS_TIME_STRUCT, []);\n\n  // normal time functions\n\n  mod.time = new Sk.builtin.func(function () {\n    return Sk.builtin.assk$(new Date()\n      .getTime() / 1000, undefined);\n  });\n\n  var ctime_f = function (sec) {\n    Sk.builtin.pyCheckArgs(\"ctime\", arguments, 0, 1);\n    var _date;\n    var _sec;\n\n    if (!sec || Sk.builtin.checkNone(sec)) { // allows none to be passed\n      _date = new Date(); // same call as time.time();\n    } else {\n      if (!Sk.builtin.checkNumber(sec)) {\n        throw new Sk.builtin.TypeError('Invalid type provided for argument \"sec\"');\n      } else {\n        _sec = Sk.ffi.remapToJs(sec);\n        _date = new Date(_sec * 1000); // in ms\n      }\n    }\n\n    var _tuple = datetoarray(_date).map(function(x){return Sk.ffi.remapToPy(x);});\n    _tuple = new Sk.builtin.tuple(_tuple);\n    return Sk.misceval.callsim(mod.asctime, _tuple);\n  };\n\n  mod.ctime = new Sk.builtin.func(ctime_f);\n\n  var mktime_f = function (t) {\n    var flt;\n    var _date = new Date();\n\n    if(!t) {\n      throw new Sk.builtin.TypeError('mktime() takes exactly one argument ('+ arguments.length +' given)');\n    }\n\n    if(t && Sk.abstr.typeName(t) !== CLASS_TIME_STRUCT && !Sk.builtin.checkSequence(t) && !(t instanceof Sk.builtin.tuple)) { // t omitted, create new time()\n      throw new Sk.builtin.TypeError('Tuple or struct_time argument required');\n    }\n\n    // ToDo: fix correct parsing of tuples\n    // seems that month--, date--\n    var _v;\n    if(Sk.abstr.typeName(t) === CLASS_TIME_STRUCT) {\n      // must have four digit years\n      _v = Sk.ffi.remapToJs(tmtotuple(t.v));\n    } else {\n      _v = Sk.ffi.remapToJs(t);\n\n      // years can be 2 digits\n      if(Sk.ffi.remapToJs(mod.accept2dyear) != 0) {\n        if(_v[0] >= 69 && _v[0] <= 99) {\n          _v[0] += 1900;\n        } else if (_v[0] >= 0 && _v[0] <= 68) {\n          _v[0] += 2000;\n        } else if(_v[0] >= 100 && _v[0] <= 1899) {\n          throw new Sk.builtin.OverflowError('Illegal value for year, value between 100-1988 not allowed');\n        }\n      }\n    }\n\n    if(_v) {\n      // create date\n      _date.setYear(_v[0]);\n      _date.setMonth(_v[1] - 1); // Date() expects 0-11\n      _date.setDate(_v[2]);\n      _date.setHours(_v[3]);\n      _date.setMinutes(_v[4]);\n      _date.setSeconds(_v[5]);\n    }\n\n    // return seconds! since epoch\n    flt = new Sk.builtin.nmber(Math.floor(_date.getTime() / 1000), Sk.builtin.nmber.float$);\n    //flt = new Sk.builtin.float_(_date.getTime());\n    return flt;\n  };\n\n  mod.mktime = new Sk.builtin.func(mktime_f);\n\n  var asctime_f = function (t) {\n    var _tup;\n    var _buf = {};\n\n    if(t && (Sk.builtin.checkSequence(t) || (t instanceof Sk.builtin.tuple))) { // t is tuple or seq\n      _tup = t;\n    }\n\n    if(t && Sk.abstr.typeName(t) === CLASS_TIME_STRUCT) {\n      //_tup = Sk.ffi.remapToJs(tmtotuple(t.v)); // manuel unwrap :(\n      _buf = t; // avoid double remap and object creation, just pass time_struct to checktm\n    } else {\n\n      if(!_tup) { // create time()\n        _tup = datetoarray(new Date()).map(function(x){return Sk.ffi.remapToPy(x);});\n        _tup = new Sk.builtin.tuple(_tup);\n      }\n\n      _buf = Sk.misceval.callsim(mod[CLASS_TIME_STRUCT], _tup); // creates tm\n    }\n\n    // check if _buf has valid ranges\n    checktm(_buf);\n\n    // format \"%s %s%3d %.2d:%.2d:%.2d %d\"\n    // wday, mon_name, mday, hour, min, sec, year\n\n    var _fmstr = \"\";\n    _fmstr += wday_name[_buf.v.tm_wday];\n    _fmstr += \" \";\n    _fmstr += mon_name[_buf.v.tm_mon];\n    _fmstr += \" \";\n    _fmstr += padleft(_buf.v.tm_mday, 2, \"0\");\n    _fmstr += \" \";\n    _fmstr += padleft(_buf.v.tm_hour, 2, \"0\");\n    _fmstr += \":\";\n    _fmstr += padleft(_buf.v.tm_min, 2, \"0\");\n    _fmstr += \":\";\n    _fmstr += padleft(_buf.v.tm_sec, 2, \"0\");\n    _fmstr += \" \";\n    _fmstr += (1900 + _buf.v.tm_year);\n\n    return new Sk.builtin.str(_fmstr);\n  };\n\n  /**\n    Convert a tuple or struct_time representing a time as returned by gmtime() or\n    localtime() to a 24-character string of the following form:\n    'Sun Jun 20 23:21:05 1993'.\n    If t is not provided, the current time as returned by localtime() is used.\n    Locale information is not used by asctime().\n  **/\n  mod.asctime = new Sk.builtin.func(asctime_f);\n\n  // ToDo: time.gmtime(1), should return: time.struct_time(tm_year=1970, tm_mon=1, tm_mday=1, tm_hour=0, tm_min=0, tm_sec=1, tm_wday=3, tm_yday=1, tm_isdst=0)\n  var gmtime_f = function(secs) {\n    if(secs && !Sk.builtin.checkNumber(secs) && !Sk.builtin.checkNone(secs)) {\n      throw new Sk.builtin.TypeError('an integer is required (got type ' + Sk.abstr.typeName(secs) + ')');\n    }\n\n    var _date;\n\n    if(Sk.builtin.checkNumber(secs)) {\n      _date = new Date(Sk.ffi.remapToJs(secs) * 1000); // Date() requires ms\n    } else {\n      _date = new Date();\n    }\n\n    var _tup = datetoarray(_date, true).map(function(x){return Sk.ffi.remapToPy(x);});\n    _tup = new Sk.builtin.tuple(_tup);\n\n    return Sk.misceval.callsim(mod[CLASS_TIME_STRUCT], _tup); // creates tm\n  };\n\n  /**\n    Convert a time expressed in seconds since the epoch to a struct_time in UTC\n    in which the dst flag is always zero. If secs is not provided or None, the\n    current time as returned by time() is used. Fractions of a second are\n    ignored. See above for a description of the struct_time object.\n    See calendar.timegm() for the inverse of this function.\n\n    Changed in version 2.1: Allowed secs to be omitted.\n\n    Changed in version 2.4: If secs is None, the current time is used.\n  **/\n  mod.gmtime = new Sk.builtin.func(gmtime_f);\n\n  var localtime_f = function(secs) {\n    if(secs && !Sk.builtin.checkNumber(secs) && !Sk.builtin.checkNone(secs)) {\n      throw new Sk.builtin.TypeError('an integer is required (got type ' + Sk.abstr.typeName(secs) + ')');\n    }\n\n    var _date;\n\n    if(Sk.builtin.checkNumber(secs)) {\n      _date = new Date(Sk.ffi.remapToJs(secs) * 1000); // Date() requires ms\n    } else {\n      _date = new Date();\n    }\n\n    var _tup = datetoarray(_date, false).map(function(x){return Sk.ffi.remapToPy(x);});\n    _tup = new Sk.builtin.tuple(_tup);\n\n    return Sk.misceval.callsim(mod[CLASS_TIME_STRUCT], _tup); // creates tm\n  };\n  mod.localtime = new Sk.builtin.func(localtime_f);\n\n  mod.sleep = new Sk.builtin.func(function (secs) {\n    Sk.builtin.pyCheckArgs(\"sleep\", arguments, 1, 1);\n    if (!Sk.builtin.checkNumber(secs)) {\n      throw new TypeError('a float is required');\n    }\n\n    var _secs = Sk.ffi.remapToJs(secs);\n\n    if(_secs < 0) {\n      throw new Sk.builtin.ValueError('sleep length must be non-negative');\n    }\n\n    var delay = _secs * 1000;\n    var start = new Date().getTime();\n    while (new Date().getTime() < start + delay);\n\n  });\n\n  mod.accept2dyear = new Sk.builtin.bool(true);\n\n\n  mod.tzset = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"tzset is not yet implemented\");\n  });\n\n  mod.tzname = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"tzname is not yet implemented\");\n  });\n\n  mod.timezone = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"timezone is not yet implemented\");\n  });\n\n  mod.strptime = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"strptime is not yet implemented\");\n  });\n\n  mod.strftime = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"strftime is not yet implemented\");\n  });\n\n  mod.clock = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"clock is not yet implemented\");\n  });\n\n  mod.daylight = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"daylight is not yet implemented\");\n  });\n\n  mod.altzone = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"altzone is not yet implemented\");\n  });\n\n  return mod;\n};\n", "src/lib/operator/__init__.js": "/*\n *  __author__: Isaac Dontje Lindell (i@isaacdontjelindell.com)\n *\n *  Implementation of the Python operator module.\n */\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.lt = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Lt')); });\n    mod.__lt__ = mod.lt;\n\n    mod.le = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'LtE')); });\n    mod.__le__ = mod.le;\n\n    mod.eq = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Eq')); });\n    mod.__eq__ = mod.eq;\n\n    mod.ne = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'NotEq')); });\n    mod.__ne__ = mod.ne;\n\n    mod.ge = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'GtE')); });\n    mod.__ge__ = mod.ge;\n\n    mod.gt = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Gt')); });\n    mod.__gt__ = mod.gt;\n\n    mod.not_ = new Sk.builtin.func(function (obj) { throw new Sk.builtin.NotImplementedError(\"operator.not_() is not yet implemented in Skulpt\"); });\n\n    mod.truth = new Sk.builtin.func(function(obj) { return Sk.builtin.bool(obj); });\n\n    mod.is_ = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Is')); });\n\n    mod.is_not = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'IsNot')); });\n\n    mod.abs = new Sk.builtin.func(function(obj) { return Sk.misceval.callsim(Sk.builtin.abs, obj); });\n    mod.__abs__ = mod.abs;\n\n    // The documentation says that operator.add() is defined for a and b numbers, but\n    // CPython (2.6) allows a and b to be other types (e.g. str)\n    mod.add = new Sk.builtin.func(function (a, b) { return Sk.abstr.objectAdd(a, b); });\n    mod.__add__ = mod.add;\n\n    mod.and_ = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$and'].call(a, b); });\n    mod.__and__ = mod.and_;\n\n    mod.div = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$divide'].call(a, b); });\n    mod.__div__ = mod.div;\n\n    mod.floordiv = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$floor_divide'].call(a, b); });\n    mod.__floordiv__ = mod.floordiv;\n\n    // Doesn't look like anything has the __index__ magic function anyway\n    mod.index = new Sk.builtin.func(function (a) { throw new Sk.builtin.NotImplementedError(\"operator.index() is not yet implemented in Skulpt\"); });\n    mod.__index__ = mod.index;\n\n    // Note: Sk.abstr.numberUnaryOp(obj, 'Invert') looks for the function nb$invert() on obj.\n    // However, it doesn't look like that function has been implemented for any existing object types.\n    // I've gone ahead and created this function for completeness' sake, but expect any use of it to\n    // result in an error.\n    mod.inv = new Sk.builtin.func(function (obj) { return Sk.abstr.numberUnaryOp(obj, 'Invert'); });\n    mod.__inv__ = mod.inv;\n    mod.invert = mod.inv;\n    mod.__invert__ = mod.inv;\n\n    mod.lshift = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$lshift'].call(a, b); });\n    mod.__lshift__ = mod.lshift;\n\n    mod.mod = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$remainder'].call(a, b); });\n    mod.__mod__ = mod.mod;\n\n    mod.mul = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$multiply'].call(a, b); });\n    mod.__mul__ = mod.mul;\n\n    mod.neg = new Sk.builtin.func(function (obj) { return Sk.abstr.objectNegative(obj); });\n    mod.__neg__ = mod.neg;\n\n    mod.or_ = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$or'].call(a, b); });\n    mod.__or__ = mod.or_;\n\n    mod.pos = new Sk.builtin.func(function (obj) { return Sk.abstr.objectPositive(obj); });\n    mod.__pos__ = mod.pos;\n\n    mod.pow = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$power'].call(a, b); });\n    mod.__pow__ = mod.pow;\n\n    mod.rshift = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$rshift'].call(a, b); });\n    mod.__rshift__ = mod.rshift;\n\n    mod.sub = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$subtract'].call(a, b); });\n    mod.__sub__ = mod.sub;\n\n    mod.truediv = mod.div;\n    mod.__truediv__ = mod.div;\n\n    mod.xor = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$xor'].call(a, b); });\n    mod.__xor__ = mod.xor;\n\n    mod.concat = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceConcat(a, b); });\n    mod.__concat__ = mod.concat;\n\n    mod.contains = new Sk.builtin.func(function (a, b) { return Sk.builtin.bool(Sk.abstr.sequenceContains(a, b)); });\n    mod.__contains__ = mod.contains;\n\n    mod.countOf = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceGetCountOf(a, b); });\n\n    mod.delitem = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceDelItem(a, b); });\n    mod.__delitem__ = mod.delitem;\n\n    mod.getitem = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceGetItem(a, b); });\n    mod.__getitem__ = mod.getitem;\n\n    mod.indexOf = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceGetIndexOf(a, b); });\n\n    mod.setitem = new Sk.builtin.func(function (a, b, c) { return Sk.abstr.sequenceSetItem(a, b, c); });\n    mod.__setitem__ = mod.setitem;\n\n    return mod;\n};\n", "src/lib/image/__init__.js": "var ImageMod; // the single identifier needed in the global scope\n\nif (! ImageMod) {\n    ImageMod = { };\n    ImageMod.canvasLib = [];\n}\n\n//  todo create an empty image by reading image data from a blank canvas of the appropriate size\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    var image = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,imageId) {\n            self.image = document.getElementById(imageId.v);\n            if (self.image == null) {\n                throw \"There is no image on this page named: \" + imageId.v;\n            }\n            self.width = self.image.width;\n            self.height = self.image.height;\n            self.canvas = document.createElement(\"canvas\");\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.ctx = self.canvas.getContext(\"2d\");\n            self.ctx.drawImage(self.image,0,0)\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n        $loc.getPixel = new Sk.builtin.func(function(self,x,y) {\n\t\t\tx = Sk.builtin.asnum$(x);\n\t\t\ty = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            var red = self.imagedata.data[index]\n            var green = self.imagedata.data[index+1]\n            var blue = self.imagedata.data[index+2]\n            return Sk.misceval.callsim(mod.Pixel,red,green,blue);\n        });\n\n        $loc.setPixel = new Sk.builtin.func(function(self, x, y, pix) {\n\t\t\tx = Sk.builtin.asnum$(x);\n\t\t\ty = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            self.imagedata.data[index] = Sk.misceval.callsim(pix.getRed,pix);\n            self.imagedata.data[index+1] = Sk.misceval.callsim(pix.getGreen,pix);\n            self.imagedata.data[index+2] = Sk.misceval.callsim(pix.getBlue,pix);\n            self.imagedata.data[index+3] = 255;\n        });\n\n        $loc.getHeight = new Sk.builtin.func(function(self) {\n            return self.image.height;\n        });\n\n        $loc.getWidth = new Sk.builtin.func(function(self,titlestring) {\n            return self.image.width;\n        });\n\n        $loc.draw = new Sk.builtin.func(function(self,win,ulx,uly) {\n\t\t\twin = Sk.builtin.asnum$(win);\n\t\t\tulx = Sk.builtin.asnum$(ulx);\n\t\t\tuly = Sk.builtin.asnum$(uly);\n            var can = Sk.misceval.callsim(win.getWin,win);\n            var ctx = can.getContext(\"2d\");\n            //ctx.putImageData(self.imagedata,0,0,0,0,self.imagedata.width,self.imagedata.height);\n            if (! ulx) {\n                ulx = 0;\n                uly = 0;\n            }\n            ctx.putImageData(self.imagedata,ulx,uly);\n        });\n\n        // toList\n\n    }\n\n    mod.Image = Sk.misceval.buildClass(mod, image, 'Image', []);\n\n    var eImage = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            self.width = Sk.builtin.asnum$(width);\n            self.height = Sk.builtin.asnum$(height);\n            self.canvas = document.createElement(\"canvas\");\n            self.ctx = self.canvas.getContext('2d');\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n    }\n\n    mod.EmptyImage = Sk.misceval.buildClass(mod, eImage, 'EmptyImage', [mod.Image]);\n\n    // create a ListImage object\n\n    \n    var pixel = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,r,g,b) {\n            self.red = Sk.builtin.asnum$(r);\n            self.green = Sk.builtin.asnum$(g);\n            self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.getRed = new Sk.builtin.func(function(self) {\n           return self.red;\n        });\n\n        $loc.getGreen = new Sk.builtin.func(function(self) {\n           return self.green;\n        });\n\n        $loc.getBlue = new Sk.builtin.func(function(self) {\n           return self.blue;\n        });\n\n        $loc.setRed = new Sk.builtin.func(function(self,r) {\n           self.red = Sk.builtin.asnum$(r);\n        });\n\n        $loc.setGreen = new Sk.builtin.func(function(self,g) {\n           self.green = Sk.builtin.asnum$(g);\n        });\n\n        $loc.setBlue = new Sk.builtin.func(function(self,b) {\n           self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.__getitem__ = new Sk.builtin.func(function(self,k) {\n\t\t   k = Sk.builtin.asnum$(k);\n           if(k == 0) {\n               return self.red;\n           } else if (k == 1) {\n               return self.green;\n           } else if (k == 2) {\n               return self.blue;\n           }\n        });\n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            return \"[\" + self.red + \",\" + self.green + \",\" + self.blue + \"]\"\n        });\n        \n        //getColorTuple\n        $loc.getColorTuple = new Sk.builtin.func(function(self,x,y) {\n\n        });\n\n        //setRange -- change from 0..255 to 0.0 .. 1.0\n        $loc.setRange = new Sk.builtin.func(function(self,mx) {\n            self.max = Sk.builtin.asnum$(mx);\n        });\n\n    }\n    mod.Pixel = Sk.misceval.buildClass(mod, pixel, 'Pixel', []);\n\n\n\n    var screen = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            var currentCanvas = ImageMod.canvasLib[Sk.canvas];\n            if (currentCanvas === undefined) {\n                self.theScreen = document.getElementById(Sk.canvas);\n                if (width !== undefined) {\n                    self.theScreen.height = height;\n                    self.theScreen.width = width;\n                }\n\n                ImageMod.canvasLib[Sk.canvas] = self.theScreen;\n            } else {\n                self.theScreen = currentCanvas;\n                self.theScreen.height = self.theScreen.height;\n            }\n            self.theScreen.style.display = \"block\";\n        });\n\n        $loc.getWin = new Sk.builtin.func(function(self) {\n           return self.theScreen;\n        });\n\n        // exitonclick\n        $loc.exitonclick = new Sk.builtin.func(function(self) {\n            var canvas_id = self.theScreen.id;\n            self.theScreen.onclick = function() {\n                document.getElementById(canvas_id).style.display = 'none';\n                document.getElementById(canvas_id).onclick = null;\n                delete ImageMod.canvasLib[canvas_id];\n            }\n\n        });\n        //getMouse\n    }\n\n    mod.ImageWin = Sk.misceval.buildClass(mod, screen, 'ImageWin', []);\n\n    return mod\n}\n", "src/lib/pythonds/basic/__init__.py": "\n#__all__ = [\"stack\"]\n\n\n#from .stack import Stack\n#from .queue import Queue\n\n\n\n", "src/lib/led_matrix/__init__.js": "/**\n\tCircuit board class, retrieves an circuit board and provides mechanisms to animate LEDs\n\n**/\nvar $builtinmodule = function (name) {\n  var mod = {};\n\n  var crboard = {};\n  crboard.matrix = [];\n\tcrboard.queue = [];\n\tcrboard.position = 0;\n\tcrboard.mode = \"NONE\";\n\t\n\tfunction render() {\n\t\tvar item = crboard.queue[crboard.position];\n\t\n\t\tvar i;\n    for (i = 0; i < item.g.children.length; i++) {\n      if (item.g.children[i].nodeName === \"circle\") {\n        item.g.children[i].setAttribute(\"fill\", item.fill);\n        if (!item.g.children[i].classList.contains(\"crledbase\")) {\n          item.g.children[i].setAttribute(\"visibility\", item.visibility);\n          item.g.children[i].setAttribute(\"fill\", \"whitesmoke\");\n          item.g.children[i].setAttribute(\"fill-opacity\", \"0.6\");\n        }\n      }\n    }\n\t\t\n\t\tcrboard.position++;\n\t\tif(crboard.position < crboard.queue.length) {\n\t\t\tsetTimeout(render, item.delay);\n\t\t} else {\n\t\t\t// clear queue and exit\n\t\t\tcrboard.queue = [];\n\t\t\tcrboard.position = 0\n\t\t}\n\t}\n\t\n  var setup_f = function (name) {\n    // retrievs all leds and puts them into an array for controlling\n    if (!name || !Sk.builtin.checkString(name)) {\n      throw new TypeError('Invalid type for argument \"name\" provided: ' +\n        Sk.abstr.typeName(name));\n    }\n\n    var name_s = Sk.ffi.remapToJs(name);\n\n    // get the leds\n    crboard.LEDs = document.getElementsByClassName(name_s);\n    if (crboard.LEDs.length <= 0) {\n      throw new Sk.builtin.ValueError(\n        \"No LEDs found for specified matrix identifier: \" + name_s);\n    }\n    crboard.parent = crboard.LEDs[0].parentNode;\n    crboard.rows = crboard.parent.getAttribute(\"rows\");\n    crboard.columns = crboard.parent.getAttribute(\"cols\");\n    var i, j;\n\n    // create undefined matrix\n    for (i = 0; i < crboard.rows; i++) {\n      crboard.matrix[i] = [];\n      for (j = 0; j < crboard.columns; j++) {\n        crboard.matrix[i][j] = undefined;\n      }\n    }\n\n    // read the rows and columns for individual LEDs and stores the svg:group in it\n    for (i = 0; i < crboard.LEDs.length; i++) {\n      crboard.matrix[crboard.LEDs[i].getAttribute(\"x\") - 1][crboard.LEDs[i].getAttribute(\n        \"y\") - 1] = crboard.LEDs[i];\n    }\n  };\n\n  setup_f.co_varnames = ['name'];\n  setup_f.$defaults = [new Sk.builtin.str('io_com1')];\n  mod.setup = new Sk.builtin.func(setup_f);\n\n  var digital_write_f = function (row, column, high_or_low, color, delay) {\n    Sk.builtin.pyCheckArgs(\"digital_write\", arguments, 3, 5, false);\n\t\t\n\t\tif(crboard.mode !== \"READ\") {\n\t\t\tthrow new Sk.builtin.IOError(\"Can not write in currently set IO Port mode: \" + crboard.mode);\n\t\t}\n\t\t\n    if (!Sk.builtin.checkNumber(row)) {\n      throw new TypeError('Invalid type provided for argument \"row\"');\n    }\n\n    if (!Sk.builtin.checkNumber(column)) {\n      throw new TypeError('Invalid type provided for argument \"column\"');\n    }\n\n    if (!Sk.builtin.checkNumber(high_or_low) && !Sk.builtin.checkBool(\n      high_or_low)) {\n      throw new TypeError('Invalid type provided for argument \"high_or_low\"');\n    }\n\n    if (color && !Sk.builtin.checkString(color)) {\n      throw new TypeError('Invalid type provided for argument \"color\"');\n    }\n\t\t\n    var _row = Sk.ffi.remapToJs(row);\n    var _column = Sk.ffi.remapToJs(column);\n    var _high_or_low = Sk.ffi.remapToJs(high_or_low);\n    var _color = color ? Sk.ffi.remapToJs(color) : \"lime\";\n\t\tvar _delay = delay ? Sk.ffi.remapToJs(delay) : 10;\n\n    // check if row or column is out of bounds\n    if (_row < 0 || _row >= crboard.rows) {\n      throw new Sk.builtin.IndexError(\n        'Tried to access undefined output pin row: ' + _row);\n    }\n\n    // check if row or column is out of bounds\n    if (_column < 0 || _column >= crboard.columns) {\n      throw new Sk.builtin.IndexError(\n        'Tried to access undefined output pin row: ' + _column);\n    }\n\n    var g = crboard.matrix[_row][_column];\n\n    var fill = \"grey\";\n    var visibility = \"hidden\";\n\n    // high output, set visibility and color\n    if (_high_or_low) {\n      fill = _color;\n      visibility = \"visible\";\n    }\n\t\t\n\t\tvar queueItem = {};\n\t\tqueueItem.g = g;\n\t\tqueueItem.fill = fill;\n\t\tqueueItem.visibility = visibility;\n\t\tqueueItem.delay = _delay //ms\n\t\t\n\t\tcrboard.queue.push(queueItem);\n  };\n\n  digital_write_f.co_varnames = ['row', 'column', 'high_or_low', 'color', 'delay'];\n  digital_write_f.$defaults = [Sk.builtin.none.none$, Sk.builtin.none.none$,\n    Sk.builtin.none.none$, new Sk.builtin.str(\"white\"), new Sk.builtin.int_(10)\n  ];\n  mod.digital_write = new Sk.builtin.func(digital_write_f);\n\t\n\tvar flush_f = function() {\n\t\tif(crboard.queue.length > 0) {\n\t\t\trender();\n\t\t} else {\n\t\t\tthrow new Sk.builtin.ValueError(\"No writing operations available for flushing to matrix.\");\n\t\t}\n\t};\n\tmod.flush = new Sk.builtin.func(flush_f);\n\t\n\tvar set_pinmode_f = function(mode) {\n\t\tSk.builtin.pyCheckArgs(\"set_pinmode\", arguments, 1, 1, false);\n\t\t\n\t\tif (mode && !Sk.builtin.checkString(mode)) {\n      throw new TypeError('Expected type string for argument \"mode\"');\n    }\n\t\t\n\t\tvar _mode = Sk.ffi.remapToJs(mode);\n\t\t\n\t\tif(_mode.toUpperCase() === \"READ\" || _mode.toUpperCase() === \"R\") {\n\t\t\tcrboard.mode = \"READ\";\n\t\t} else if(_mode.toUpperCase() === \"WRITE\" || _mode.toUpperCase() === \"W\") {\n\t\t\tcrboard.mode = \"Write\";\n\t\t} else {\n\t\t\tthrow new Sk.builtin.ValueError('Unexpected value for argument \"mode\": ' + _mode);\n\t\t}\n\t\t\n\t};\n\tmod.set_pinmode = new Sk.builtin.func(set_pinmode_f);\n\t\n\tvar get_pinmode_f = function() {\n\t\treturn new Sk.builtin.str(crboard.mode);\n\t};\n\tmod.get_pinmode = new Sk.builtin.func(get_pinmode_f);\n\t\n  return mod;\n};\n", "src/lib/unittest/__init__.py": "__author__ = 'bmiller'\n'''\nThis is the start of something that behaves like\nthe unittest module from cpython.\n\n'''\n\n\nclass TestCase:\n    def __init__(self):\n        self.numPassed = 0\n        self.numFailed = 0\n\n        self.tlist = []\n        testNames = {}\n        for name in dir(self):\n            if name[:4] == 'test' and name not in testNames:\n                self.tlist.append(getattr(self,name))\n                testNames[name]=True\n\n    def setup(self):\n        pass\n\n    def tearDown(self):\n        pass\n\n    def main(self):\n\n        for func in self.tlist:\n            try:\n                self.setup()\n                func()\n                self.tearDown()\n            except:\n                self.appendResult('Error',None,None,None)\n                self.numFailed += 1\n        self.showSummary()\n\n    def assertEqual(self, actual, expected, feedback=\"\"):\n        res = actual==expected\n        self.appendResult(res,str(actual)+' to be equal to ',expected, feedback)\n\n    def assertNotEqual(actual, expected, feedback=\"\"):\n        res = actual != expected\n        self.appendResult(res,str(actual)+' to not equal ',expected,feedback)\n\n    def assertTrue(self,x, feedback=\"\"):\n        res = x\n        self.appendResult(res,str(x)+' to be ',True,feedback)\n\n    def assertFalse(self,x, feedback=\"\"):\n        res = not x\n        self.appendResult(res,str(x)+' to be ',False,feedback)\n\n    def assertIs(self,a,b, feedback=\"\"):\n        res = a is b\n        self.appendResult(res,str(a)+' to be the same object as ',b,feedback)\n\n    def assertIsNot(self,a,b, feedback=\"\"):\n        res = a is not b\n        self.appendResult(res,str(a)+' to not be the same object as ',b,feedback)\n\n    def assertIsNone(self,x, feedback=\"\"):\n        res = x is None\n        self.appendResult(res,x,None,feedback)\n\n    def assertIsNotNone(self,x, feedback=\"\"):\n        res = x is not None\n        self.appendResult(res,str(x)+' to not be ',None,feedback)\n\n    def assertIn(self,a,b, feedback=\"\"):\n        res = a in b\n        self.appendResult(res,str(a)+' to be in ',b,feedback)\n\n    def assertNotIn(self,a,b, feedback=\"\"):\n        res = a not in b\n        self.appendResult(res,str(a)+' to not be in ',b,feedback)\n\n    def assertIsInstance(self,a,b, feedback=\"\"):\n        res = isinstance(a,b)\n        self.appendResult(res,str(a)+' to be an instance of ',b,feedback)\n\n    def assertNotIsInstance(self,a,b, feedback=\"\"):\n        res = not isinstance(a,b)\n        self.appendResult(res,str(a)+' to not be an instance of ',b,feedback)\n\n    def assertAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) == 0\n        self.appendResult(res,str(a)+' to equal ',b,feedback)\n\n    def assertNotAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) != 0\n        self.appendResult(res,str(a)+' to not equal ',b,feedback)\n\n    def assertGreater(self,a,b, feedback=\"\"):\n        res = a > b\n        self.appendResult(res,str(a)+' to be greater than ',b,feedback)\n\n    def assertGreaterEqual(self,a,b, feedback=\"\"):\n        res = a >= b\n        self.appendResult(res,str(a)+' to be greater than or equal to ',b,feedback)\n\n    def assertLess(self,a,b, feedback=\"\"):\n        res = a < b\n        self.appendResult(res,str(a)+' to be less than ',b,feedback)\n\n    def assertLessEqual(self,a,b, feedback=\"\"):\n        res = a <= b\n        self.appendResult(res,str(a)+' to be less than or equal to ',b,feedback)\n\n    def appendResult(self,res,actual,expected,feedback):\n        if res == 'Error':\n            msg = 'Error'\n        elif res:\n            msg = 'Pass'\n            self.numPassed += 1\n        else:\n            msg = 'Fail: expected %s  %s ' % (str(actual),str(expected)) + feedback\n            self.numFailed += 1\n\n    def showSummary(self):\n        pct = self.numPassed / (self.numPassed+self.numFailed) * 100\n        print \"ran %d tests, passed %d \\n\" % (self.numPassed+self.numFailed, self.numPassed)\n\n\n\ndef main():\n    glob = globals()  # globals() still needs work\n    for name in glob:\n        if issubclass(glob[name],TestCase):\n            glob[name]().main()  \n\n", "src/lib/test/__init__.py": "__author__ = 'bmiller'\n\ndef testEqual(actual, expected):\n    if type(expected) == type(1):\n        if actual == expected:\n            print('Pass')\n            return True\n    elif type(expected) == type(1.11):\n        if abs(actual-expected) < 0.00001:\n            print('Pass')\n            return True\n    else:\n        if actual == expected:\n            print('Pass')\n            return True\n    print('Test Failed: expected ' + str(expected) + ' but got ' + str(actual))\n    return False\n\ndef testNotEqual(actual, expected):\n    pass\n\n", "src/lib/math/math.0.19.0.min.js": "/**\n * math.js\n * https://github.com/josdejong/mathjs\n *\n * Math.js is an extensive math library for JavaScript and Node.js,\n * It features real and complex numbers, units, matrices, a large set of\n * mathematical functions, and a flexible expression parser.\n *\n * @version 0.19.0\n * @date    2014-03-30\n *\n * @license\n * Copyright (C) 2013-2014 Jos de Jong <wjosdejong@gmail.com>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy\n * of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n!function(e,r){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=r():\"function\"==typeof define&&define.amd?define(r):\"object\"==typeof exports?exports.mathjs=r():e.mathjs=r()}(this,function(){return function(e){function r(t){if(n[t])return n[t].exports;var i=n[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var n={};return r.m=e,r.c=n,r.p=\"\",r(0)}([function(e,r,n){e.exports=n(1)},function(e,r,n){function t(e){if(\"function\"!=typeof Object.create)throw new Error(\"ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.\");var r={},t={matrix:\"matrix\",number:\"number\"};return r.config=function(e){var r=n(111);if(e){if(i.deepExtend(t,e),e.decimals&&r.config({DECIMAL_PLACES:e.decimals}),e.number&&e.number.defaultType)throw new Error(\"setting `number.defaultType` is deprecated. Use `number` instead.\");if(e.number&&e.number.precision)throw new Error(\"setting `number.precision` is deprecated. Use `decimals` instead.\");if(e.matrix&&e.matrix.defaultType)throw new Error(\"setting `matrix.defaultType` is deprecated. Use `matrix` instead.\");if(e.matrix&&e.matrix[\"default\"])throw new Error(\"setting `matrix.default` is deprecated. Use `matrix` instead.\")}var o=i.clone(t);return o.decimals=r.config().DECIMAL_PLACES,o},r.config(e),r.expression={},r.expression.node=n(6),r.expression.parse=n(4),r.expression.Scope=function(){throw new Error(\"Scope is deprecated. Use a regular Object instead\")},r.expression.Parser=n(5),r.expression.docs=n(7),r.type={},r.type.BigNumber=n(111),r.type.Complex=n(8),r.type.Range=n(9),r.type.Index=n(10),r.type.Matrix=n(11),r.type.Unit=n(12),r.type.Help=n(13),r.collection=n(14),n(15)(r),n(17)(r,t),n(18)(r,t),n(19)(r,t),n(20)(r,t),n(21)(r,t),n(22)(r,t),n(23)(r,t),n(24)(r,t),n(25)(r,t),n(26)(r,t),n(27)(r,t),n(28)(r,t),n(29)(r,t),n(30)(r,t),n(31)(r,t),n(32)(r,t),n(33)(r,t),n(34)(r,t),n(35)(r,t),n(36)(r,t),n(37)(r,t),n(38)(r,t),n(39)(r,t),n(40)(r,t),n(41)(r,t),n(42)(r,t),n(43)(r,t),n(44)(r,t),n(45)(r,t),n(46)(r,t),n(47)(r,t),n(48)(r,t),n(49)(r,t),n(50)(r,t),n(51)(r,t),n(52)(r,t),n(53)(r,t),n(54)(r,t),n(55)(r,t),n(56)(r,t),n(57)(r,t),n(58)(r,t),n(59)(r,t),n(60)(r,t),n(61)(r,t),n(62)(r,t),n(63)(r,t),n(64)(r,t),n(65)(r,t),n(66)(r,t),n(67)(r,t),n(68)(r,t),n(69)(r,t),n(70)(r,t),n(71)(r,t),n(72)(r,t),n(73)(r,t),n(74)(r,t),n(75)(r,t),n(76)(r,t),n(77)(r,t),n(78)(r,t),n(79)(r,t),n(80)(r,t),n(81)(r,t),n(82)(r,t),n(83)(r,t),n(84)(r,t),n(85)(r,t),n(86)(r,t),n(87)(r,t),n(88)(r,t),n(89)(r,t),n(90)(r,t),n(91)(r,t),n(92)(r,t),n(93)(r,t),n(94)(r,t),n(95)(r,t),n(96)(r,t),n(97)(r,t),n(98)(r,t),n(99)(r,t),n(100)(r,t),n(101)(r,t),n(102)(r,t),n(103)(r,t),n(104)(r,t),n(105)(r,t),n(106)(r,t),n(107)(r,t),n(108)(r,t),n(109)(r,t),n(110)(r,t),n(2)(r,t),r.chaining={},r.chaining.Selector=n(16)(r,t),r}var i=n(3);e.exports=t},function(e,r,n){e.exports=function(e){var r=n(8);e.pi=Math.PI,e.e=Math.E,e.tau=2*Math.PI,e.i=new r(0,1),e.Infinity=1/0,e.NaN=0/0,e[\"true\"]=!0,e[\"false\"]=!1,e.E=Math.E,e.LN2=Math.LN2,e.LN10=Math.LN10,e.LOG2E=Math.LOG2E,e.LOG10E=Math.LOG10E,e.PI=Math.PI,e.SQRT1_2=Math.SQRT1_2,e.SQRT2=Math.SQRT2}},function(e,r){r.clone=function n(e){var r=typeof e;if(\"number\"===r||\"string\"===r||\"boolean\"===r||null===e||void 0===e)return e;if(\"function\"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map(function(e){return n(e)});if(e instanceof Number)return new Number(e.valueOf());if(e instanceof String)return new String(e.valueOf());if(e instanceof Boolean)return new Boolean(e.valueOf());if(e instanceof Date)return new Date(e.valueOf());if(e instanceof RegExp)throw new TypeError(\"Cannot clone \"+e);var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=n(e[i]));return t},r.extend=function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e},r.deepExtend=function t(e,r){if(Array.isArray(r))throw new TypeError(\"Arrays are not supported by deepExtend\");for(var n in r)if(r.hasOwnProperty(n))if(r[n]&&r[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n].constructor===Object?t(e[n],r[n]):e[n]=r[n];else{if(Array.isArray(r[n]))throw new TypeError(\"Arrays are not supported by deepExtend\");e[n]=r[n]}return e},r.deepEqual=function(e,n){var t,i,o;if(Array.isArray(e)){if(!Array.isArray(n))return!1;if(e.length!=n.length)return!1;for(i=0,o=e.length;o>i;i++)if(!r.deepEqual(e[i],n[i]))return!1;return!0}if(e instanceof Object){if(Array.isArray(n)||!(n instanceof Object))return!1;for(t in e)if(!r.deepEqual(e[t],n[t]))return!1;for(t in n)if(!r.deepEqual(e[t],n[t]))return!1;return!0}return typeof e==typeof n&&e==n}},function(e,r,n){function t(e,r){if(1!=arguments.length&&2!=arguments.length)throw new SyntaxError(\"Wrong number of arguments: 1 or 2 expected\");if(sr=\"object\"===D(r)?r:{},F(e))return ur=e,m();if(G(e)||e instanceof H)return V.deepMap(e,function(e){if(!F(e))throw new TypeError(\"String expected\");return ur=e,m()});throw new TypeError(\"String or matrix expected\")}function i(){fr=0,cr=ur.charAt(0)}function o(){fr++,cr=ur.charAt(fr)}function a(){return ur.charAt(fr+1)}function s(){for(mr=ir.NULL,lr=\"\";\" \"==cr||\"\t\"==cr;)o();if(\"#\"==cr)for(;\"\\n\"!=cr&&\"\"!=cr;)o();if(\"\"==cr)return void(mr=ir.DELIMITER);var e=cr+a();if(or[e])return mr=ir.DELIMITER,lr=e,o(),void o();if(or[cr])return mr=ir.DELIMITER,lr=cr,void o();if(!c(cr)){if(f(cr)){for(;f(cr)||l(cr);)lr+=cr,o();return void(mr=ar[lr]?ir.DELIMITER:ir.SYMBOL)}for(mr=ir.UNKNOWN;\"\"!=cr;)lr+=cr,o();throw j('Syntax error in part \"'+lr+'\"')}if(mr=ir.NUMBER,\".\"==cr)lr+=cr,o(),l(cr)||(mr=ir.UNKNOWN);else{for(;l(cr);)lr+=cr,o();\".\"==cr&&(lr+=cr,o())}for(;l(cr);)lr+=cr,o();if(\"E\"==cr||\"e\"==cr)for(lr+=cr,o(),(\"+\"==cr||\"-\"==cr)&&(lr+=cr,o()),l(cr)||(mr=ir.UNKNOWN);l(cr);)lr+=cr,o()}function u(){for(;\"\\n\"==lr;)s()}function f(e){return e>=\"a\"&&\"z\">=e||e>=\"A\"&&\"Z\">=e||\"_\"==e}function c(e){return e>=\"0\"&&\"9\">=e||\".\"==e}function l(e){return e>=\"0\"&&\"9\">=e}function m(){i(),s();var e=p();if(\"\"!=lr)throw mr==ir.DELIMITER?P(\"Unknown operator \"+lr):j('Unexpected part \"'+lr+'\"');return e}function p(){var e,r,n;if(\"\"==lr)return new Q(\"undefined\",\"undefined\");for(\"\\n\"!=lr&&\";\"!=lr&&(e=h());\"\\n\"==lr||\";\"==lr;)r||(r=new Z,e&&(n=\";\"!=lr,r.add(e,n))),s(),\"\\n\"!=lr&&\";\"!=lr&&\"\"!=lr&&(e=h(),n=\";\"!=lr,r.add(e,n));return r?r:e}function h(){var e=g(),r=\"ans\";return new Y(r,e)}function g(){if(mr==ir.SYMBOL&&\"function\"==lr)throw new Error('Deprecated keyword \"function\". Functions can now be assigned without it, like \"f(x) = x^2\".');return d()}function d(){var e,r,n,t=x();if(\"=\"==lr){if(t instanceof rr)return e=t.name,s(),n=d(),new Y(e,n);if(t instanceof $)return s(),n=d(),new tr(t,n);if(t instanceof J){var i=!0;if(r=[],t.object instanceof rr?(e=t.object.name,t.params.forEach(function(e,n){e instanceof rr?r[n]=e.name:i=!1})):i=!1,i)return s(),n=d(),new K(e,r,n)}throw j(\"Invalid left hand side of assignment operator =\")}return t}function x(){var e,r=[];if(e=\":\"==lr?new Q(\"number\",\"1\"):w(),\":\"==lr){for(r.push(e);\":\"==lr;)s(),r.push(\")\"==lr||\"]\"==lr||\",\"==lr||\"\"==lr?new rr(\"end\"):w());if(3==r.length){var n=r[2];r[2]=r[1],r[1]=n}e=new er(r)}return e}function w(){var e=v();return e}function v(){var e,r,n,t,i;for(e=y(),r={\"==\":\"equal\",\"!=\":\"unequal\",\"<\":\"smaller\",\">\":\"larger\",\"<=\":\"smallereq\",\">=\":\"largereq\"};lr in r;)n=lr,t=r[n],s(),i=[e,y()],e=new X(n,t,i);return e}function y(){var e,r,n,t,i;for(e=b(),r={to:\"to\",\"in\":\"to\"};lr in r;)n=lr,t=r[n],s(),i=[e,b()],e=new X(n,t,i);return e}function b(){var e,r,n,t,i;for(e=E(),r={\"+\":\"add\",\"-\":\"subtract\"};lr in r;)n=lr,t=r[n],s(),i=[e,E()],e=new X(n,t,i);return e}function E(){var e,r,n,t,i;for(e=N(),r={\"*\":\"multiply\",\".*\":\"emultiply\",\"/\":\"divide\",\"./\":\"edivide\",\"%\":\"mod\",mod:\"mod\"};lr in r;)n=lr,t=r[n],s(),i=[e,N()],e=new X(n,t,i);return e}function N(){var e,r;return e=M(),(mr==ir.SYMBOL||\"in\"==lr)&&(r=lr,s(),e=new nr(e,r)),e}function M(){var e,r,n;return\"-\"==lr?(e=lr,r=\"unary\",s(),n=[M()],new X(e,r,n)):A()}function A(){var e,r,n,t,i,o,a;for(n=[T()],t=[];\"^\"==lr||\".^\"==lr;)t.push(lr),s(),n.push(T());for(e=n.pop();n.length;)r=n.pop(),i=t.pop(),o=\"^\"==i?\"pow\":\"epow\",a=[r,e],e=new X(i,o,a);return e}function T(){var e,r,n,t,i;for(e=O(),r={\"!\":\"factorial\",\"'\":\"transpose\"};lr in r;)n=lr,t=r[n],s(),i=[e],e=new X(n,t,i);return e}function O(){var e,r=[];if(mr==ir.SYMBOL&&sr[lr]){if(e=sr[lr],s(),\"(\"==lr){if(r=[],s(),\")\"!=lr)for(r.push(x());\",\"==lr;)s(),r.push(x());if(\")\"!=lr)throw j(\"Parenthesis ) expected\");s()}return new e(r)}return S()}function S(){var e,r;return mr==ir.SYMBOL||mr==ir.DELIMITER&&lr in ar?(r=lr,s(),e=new rr(r),C(e)):U()}function C(e){for(var r,n;\"(\"==lr||\"[\"==lr;){if(r=lr,n=[],s(),\")\"!=lr&&\"]\"!=lr)for(n.push(x());\",\"==lr;)s(),n.push(x());if(\"(\"==r&&\")\"!=lr)throw j(\"Parenthesis ) expected\");if(\"[\"==r&&\"]\"!=lr)throw j(\"Parenthesis ] expected\");s(),e=\"(\"==r?new J(e,n):new $(e,n)}return e}function U(){var e,r,n;if('\"'==lr){for(r=\"\",n=\"\";\"\"!=cr&&('\"'!=cr||\"\\\\\"==n);)r+=cr,n=cr,o();if(s(),'\"'!=lr)throw j('End of string \" expected');return s(),e=new Q(\"string\",r),e=C(e)}return q()}function q(){var e,r,n,t;if(\"[\"==lr){if(s(),u(),\"]\"!=lr){var i=z();if(\";\"==lr){for(n=1,r=[i];\";\"==lr;)s(),u(),r[n]=z(),n++,u();if(\"]\"!=lr)throw j(\"End of matrix ] expected\");s(),t=r[0].nodes.length;for(var o=1;n>o;o++)if(r[o].nodes.length!=t)throw P(\"Column dimensions mismatch (\"+r[o].nodes.length+\" != \"+t+\")\");e=new W(r)}else{if(\"]\"!=lr)throw j(\"End of matrix ] expected\");s(),e=i}}else s(),e=new W([]);return e=C(e)}return R()}function z(){for(var e=[d()],r=1;\",\"==lr;)s(),u(),e[r]=d(),r++,u();return new W(e)}function R(){var e,r;return mr==ir.NUMBER?(r=lr,s(),\"i\"==lr||\"I\"==lr?(s(),e=new Q(\"complex\",r)):e=new Q(\"number\",r),e=C(e)):I()}function I(){var e;if(\"(\"==lr){if(s(),e=d(),\")\"!=lr)throw j(\"Parenthesis ) expected\");return s(),e=C(e)}return _()}function _(){throw j(\"\"==lr?\"Unexpected end of expression\":\"Value expected\")}function L(){return fr-lr.length+1}function B(e){return e+\" (char \"+L()+\")\"}function j(e){return new SyntaxError(B(e))}function P(e){return new Error(B(e))}var k=n(112),F=(k.number.toNumber,k.string.isString),G=Array.isArray,D=k.types.type,H=(n(8),n(11)),V=(n(12),n(14)),W=n(113),Y=n(114),Z=n(115),Q=n(116),K=n(117),$=n(118),X=n(119),J=n(120),er=n(121),rr=n(122),nr=n(123),tr=n(124),ir={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},or={\",\":!0,\"(\":!0,\")\":!0,\"[\":!0,\"]\":!0,'\"':!0,\"\\n\":!0,\";\":!0,\"+\":!0,\"-\":!0,\"*\":!0,\".*\":!0,\"/\":!0,\"./\":!0,\"%\":!0,\"^\":!0,\".^\":!0,\"!\":!0,\"'\":!0,\"=\":!0,\":\":!0,\"==\":!0,\"!=\":!0,\"<\":!0,\">\":!0,\"<=\":!0,\">=\":!0},ar={mod:!0,to:!0,\"in\":!0},sr={},ur=\"\",fr=0,cr=\"\",lr=\"\",mr=ir.NULL;e.exports=t},function(e,r,n){function t(e){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(\"object\"!=typeof e)throw new TypeError(\"Object expected as parameter math\");this.math=e,this.scope={}}var i=n(4);t.prototype.parse=function(e){return i(e)},t.prototype.compile=function(e){return i(e).compile(this.math)},t.prototype.eval=function(e){return i(e).compile(this.math).eval(this.scope)},t.prototype.get=function(e){return this.scope[e]},t.prototype.set=function(e,r){return this.scope[e]=r},t.prototype.remove=function(e){delete this.scope[e]},t.prototype.clear=function(){for(var e in this.scope)this.scope.hasOwnProperty(e)&&delete this.scope[e]},e.exports=t},function(e,r,n){r.ArrayNode=n(113),r.AssignmentNode=n(114),r.BlockNode=n(115),r.ConstantNode=n(116),r.IndexNode=n(118),r.FunctionNode=n(117),r.Node=n(125),r.OperatorNode=n(119),r.ParamsNode=n(120),r.RangeNode=n(121),r.SymbolNode=n(122),r.UnitNode=n(123),r.UpdateNode=n(124)},function(e,r,n){r.e=n(128),r.E=n(128),r[\"false\"]=n(129),r.i=n(130),r.Infinity=n(131),r.LN2=n(132),r.LN10=n(133),r.LOG2E=n(134),r.LOG10E=n(135),r.NaN=n(136),r.pi=n(137),r.PI=n(137),r.SQRT1_2=n(138),r.SQRT2=n(139),r.tau=n(140),r[\"true\"]=n(141),r.abs=n(145),r.add=n(146),r.ceil=n(147),r.compare=n(148),r.cube=n(149),r.divide=n(150),r.edivide=n(151),r.emultiply=n(152),r.epow=n(153),r.equal=n(154),r.exp=n(155),r.fix=n(156),r.floor=n(157),r.gcd=n(158),r.larger=n(159),r.largereq=n(160),r.lcm=n(161),r.log=n(162),r.log10=n(163),r.mod=n(164),r.multiply=n(165),r.pow=n(166),r.round=n(167),r.sign=n(168),r.smaller=n(169),r.smallereq=n(170),r.sqrt=n(171),r.square=n(172),r.subtract=n(173),r.unary=n(174),r.unequal=n(175),r.xgcd=n(176),r.arg=n(177),r.conj=n(178),r.re=n(179),r.im=n(180),r.bignumber=n(181),r[\"boolean\"]=n(182),r.complex=n(183),r.index=n(184),r.matrix=n(185),r.number=n(186),r.string=n(187),r.unit=n(188),r.eval=n(189),r.help=n(190),r.concat=n(191),r.det=n(192),r.diag=n(193),r.eye=n(194),r.inv=n(195),r.ones=n(196),r.range=n(197),r.resize=n(198),r.size=n(199),r.squeeze=n(200),r.subset=n(201),r.transpose=n(202),r.zeros=n(203),r.combinations=n(204),r.distribution=n(205),r.factorial=n(206),r.permutations=n(207),r.pickRandom=n(208),r.random=n(209),r.randomInt=n(210),r.max=n(211),r.mean=n(212),r.median=n(213),r.min=n(214),r.prod=n(215),r.std=n(216),r.sum=n(217),r[\"var\"]=n(218),r.acos=n(219),r.asin=n(220),r.atan=n(221),r.atan2=n(222),r.cos=n(223),r.cot=n(224),r.csc=n(225),r.sec=n(226),r.sin=n(227),r.tan=n(228),r.to=n(229),r.clone=n(230),r.map=n(231),r.forEach=n(232),r.format=n(233),r.ifElse=n(234),r[\"import\"]=n(235),r[\"typeof\"]=n(236)},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");switch(arguments.length){case 0:this.re=0,this.im=0;break;case 2:if(!p(e)||!p(r))throw new TypeError(\"Two numbers expected in Complex constructor\");this.re=e,this.im=r;break;default:throw new SyntaxError(\"Two or zero arguments expected in Complex constructor\")}}function i(){for(;\" \"==x||\"\t\"==x;)s()}function o(e){return e>=\"0\"&&\"9\">=e||\".\"==e}function a(e){return e>=\"0\"&&\"9\">=e}function s(){d++,x=g.charAt(d)}function u(e){d=e,x=g.charAt(d)}function f(){var e,r=\"\";if(e=d,\"+\"==x?s():\"-\"==x&&(r+=x,s()),!o(x))return u(e),null;if(\".\"==x){if(r+=x,s(),!a(x))return u(e),null}else{for(;a(x);)r+=x,s();\".\"==x&&(r+=x,s())}for(;a(x);)r+=x,s();if(\"E\"==x||\"e\"==x){if(r+=x,s(),(\"+\"==x||\"-\"==x)&&(r+=x,s()),!a(x))return u(e),null;for(;a(x);)r+=x,s()}return r}function c(){var e=g.charAt(d+1);if(\"I\"==x||\"i\"==x)return s(),\"1\";if(!(\"+\"!=x&&\"-\"!=x||\"I\"!=e&&\"i\"!=e)){var r=\"+\"==x?\"1\":\"-1\";return s(),s(),r}return null}var l=n(112),m=l.number,p=l.number.isNumber,h=l.string.isString;t.isComplex=function(e){return e instanceof t};var g,d,x;t.parse=function(e){if(g=e,d=-1,x=\"\",!h(g))return null;s(),i();var r=f();if(r){if(\"I\"==x||\"i\"==x)return s(),i(),x?null:new t(0,Number(r));i();var n=x;if(\"+\"!=n&&\"-\"!=n)return i(),x?null:new t(Number(r),0);s(),i();var o=f();if(o){if(\"I\"!=x&&\"i\"!=x)return null;s()}else if(o=c(),!o)return null;return\"-\"==n&&(o=\"-\"==o[0]?\"+\"+o.substring(1):\"-\"+o),s(),i(),x?null:new t(Number(r),Number(o))}return(r=c())?(i(),x?null:new t(0,Number(r))):null},t.prototype.clone=function(){return new t(this.re,this.im)},t.prototype.equals=function(e){return this.re===e.re&&this.im===e.im},t.prototype.format=function(e){var r=\"\",n=m.format(this.re,e),t=m.format(this.im,e);return r=0==this.im?n:0==this.re?1==this.im?\"i\":-1==this.im?\"-i\":t+\"i\":this.im>0?1==this.im?n+\" + i\":n+\" + \"+t+\"i\":-1==this.im?n+\" - i\":n+\" - \"+t.substring(1)+\"i\"},t.prototype.toString=function(){return this.format()},e.exports=t,r.isComplex=t.isComplex,r.parse=t.parse},function(e,r,n){function t(e,r,n){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(null!=e&&!o.isNumber(e))throw new TypeError(\"Parameter start must be a number\");if(null!=r&&!o.isNumber(r))throw new TypeError(\"Parameter end must be a number\");if(null!=n&&!o.isNumber(n))throw new TypeError(\"Parameter step must be a number\");this.start=null!=e?parseFloat(e):0,this.end=null!=r?parseFloat(r):0,this.step=null!=n?parseFloat(n):1}{var i=n(112),o=i.number,a=i.string;i.array}t.parse=function(e){if(!a.isString(e))return null;var r=e.split(\":\"),n=r.map(function(e){return parseFloat(e)}),i=n.some(function(e){return isNaN(e)});if(i)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.isRange=function(e){return e instanceof t},t.prototype.size=function(){var e=0,r=this.start,n=this.step,t=this.end,i=t-r;return o.sign(n)==o.sign(i)?e=Math.ceil(i/n):0==i&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},t.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},t.prototype.forEach=function(e){var r=this.start,n=this.step,t=this.end,i=0;if(n>0)for(;t>r;)e(r,i,this),r+=n,i++;else if(0>n)for(;r>t;)e(r,i,this),r+=n,i++},t.prototype.map=function(e){var r=[];return this.forEach(function(n,t,i){r[t]=e(n,t,i)}),r},t.prototype.toArray=function(){var e=[];return this.forEach(function(r,n){e[n]=r}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var r=o.format(this.start,e);return 1!=this.step&&(r+=\":\"+o.format(this.step,e)),r+=\":\"+o.format(this.end,e)},t.prototype.toString=function(){return this.format()},e.exports=t,r.isRange=t.isRange,r.parse=t.parse},function(e,r,n){function t(){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");this._ranges=[];for(var e=0,r=arguments.length;r>e;e++){var n=arguments[e];if(n instanceof a)this._ranges.push(n);else if(c(n))this._ranges.push(i(n));else{if(!u(n))throw new TypeError(\"Ranges must be an Array, Number, or Range\");this._ranges.push(i([n,n+1]))}}}function i(e){for(var r=e.length,n=0;r>n;n++)if(!u(e[n])||!f(e[n]))throw new TypeError(\"Index parameters must be integer numbers\");switch(e.length){case 2:return new a(e[0],e[1]);case 3:return new a(e[0],e[1],e[2]);default:throw new SyntaxError(\"Wrong number of arguments in Index (2 or 3 expected)\")}}{var o=n(112),a=n(9),s=o.number,u=s.isNumber,f=s.isInteger,c=Array.isArray;o.array.validateIndex}t.prototype.clone=function(){var e=new t;return e._ranges=o.object.clone(this._ranges),e},t.isIndex=function(e){return e instanceof t},t.create=function(e){var r=new t;return t.apply(r,e),r},t.prototype.size=function l(){for(var l=[],e=0,r=this._ranges.length;r>e;e++){var n=this._ranges[e];l[e]=n.size()[0]}return l},t.prototype.max=function(){for(var e=[],r=0,n=this._ranges.length;n>r;r++){var t=this._ranges[r];e[r]=t.max()}return e},t.prototype.min=function(){for(var e=[],r=0,n=this._ranges.length;n>r;r++){var t=this._ranges[r];e[r]=t.min()}return e},t.prototype.forEach=function(e){for(var r=0,n=this._ranges.length;n>r;r++)e(this._ranges[r],r,this)},t.prototype.range=function(e){return this._ranges[e]||null},t.prototype.isScalar=function(){for(var e=this.size(),r=0,n=e.length;n>r;r++)if(1!==e[r])return!1;return!0},t.prototype.toArray=function(){for(var e=[],r=0,n=this._ranges.length;n>r;r++){var t=this._ranges[r],i=[],o=t.start,a=t.end,s=t.step;if(s>0)for(;a>o;)i.push(o),o+=s;else if(0>s)for(;o>a;)i.push(o),o+=s;e.push(i)}return e},t.prototype.valueOf=t.prototype.toArray,t.prototype.toString=function(){for(var e=[],r=0,n=this._ranges.length;n>r;r++){var t=this._ranges[r],i=s.format(t.start);1!=t.step&&(i+=\":\"+s.format(t.step)),i+=\":\"+s.format(t.end),e.push(i)}return\"[\"+e.join(\", \")+\"]\"},e.exports=t,r.isIndex=t.isIndex,r.create=t.create},function(e,r,n){function t(e){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(e instanceof t)this._data=e.clone()._data;else if(g(e))this._data=f(e);else{if(null!=e)throw new TypeError(\"Unsupported type of data (\"+c.types.type(e)+\")\");this._data=[]}this._size=p.size(this._data)}function i(e,r){if(!(r instanceof l))throw new TypeError(\"Invalid index\");var n=r.isScalar();if(n)return e.get(r.min());var i=r.size();if(i.length!=e._size.length)throw new RangeError(\"Dimension mismatch (\"+i.length+\" != \"+e._size.length+\")\");for(var a=new t(o(e._data,r,i.length,0));g(a._data)&&1==a._data.length;)a._data=a._data[0],a._size.shift();return a}function o(e,r,n,t){var i=t==n-1,a=r.range(t);return a.map(i?function(r){return d(r,e.length),e[r]}:function(i){d(i,e.length);var a=e[i];return o(a,r,n,t+1)})}function a(e,r,n,i){if(!(r instanceof l))throw new TypeError(\"Invalid index\");var o,a=r.size(),f=r.isScalar();if(n instanceof t?(o=n.size(),n=n.valueOf()):o=p.size(n),f){if(0!=o.length)throw new TypeError(\"Scalar value expected\");e.set(r.min(),n,i)}else{if(a.length<e._size.length)throw new RangeError(\"Dimension mismatch (\"+a.length+\" < \"+e._size.length+\")\");for(var c=0,g=a.length-o.length;g>c;c++)n=[n],o.unshift(1);if(!h.deepEqual(a,o))throw new RangeError(\"Dimensions mismatch (\"+m.format(a)+\" != \"+m.format(o)+\")\");var d=r.max().map(function(e){return e+1});u(e,d,i);var x=a.length,w=0;s(e._data,r,n,x,w)}return e}function s(e,r,n,t,i){var o=i==t-1,a=r.range(i);a.forEach(o?function(r,t){d(r),e[r]=n[t]}:function(o,a){d(o),s(e[o],r,n[a],t,i+1)})}function u(e,r,n){if(!g(r))throw new Error(\"Array expected\");for(var t=h.clone(e._size),i=!1;t.length<r.length;)t.unshift(0),i=!0;for(var o=0,a=r.length;a>o;o++)r[o]>t[o]&&(t[o]=r[o],i=!0);i&&e.resize(t,n)}function f(e){for(var r=0,n=e.length;n>r;r++){var i=e[r];g(i)?e[r]=f(i):i instanceof t&&(e[r]=f(i._data))}return e}var c=n(112),l=n(10),m=(c.number,c.string),p=c.array,h=c.object,g=Array.isArray,d=p.validateIndex;t.isMatrix=function(e){return e instanceof t},t.prototype.subset=function(e,r,n){switch(arguments.length){case 1:return i(this,e);case 2:case 3:return a(this,e,r,n);default:throw new SyntaxError(\"Wrong number of arguments\")}},t.prototype.get=function(e){if(!g(e))throw new Error(\"Array expected\");if(e.length!=this._size.length)throw new RangeError(\"Dimension mismatch (\"+e.length+\" != \"+this._size.length+\")\");for(var r=this._data,n=0,t=e.length;t>n;n++){var i=e[n];d(i,r.length),r=r[i]}return h.clone(r)},t.prototype.set=function(e,r,n){var t,i;if(!g(e))throw new Error(\"Array expected\");if(e.length<this._size.length)throw new RangeError(\"Dimension mismatch (\"+e.length+\" < \"+this._size.length+\")\");var o=e.map(function(e){return e+1});u(this,o,n);var a=this._data;for(t=0,i=e.length-1;i>t;t++){var s=e[t];d(s,a.length),a=a[s]}return s=e[e.length-1],d(s,a.length),a[s]=r,this},t.prototype.resize=function(e,r){return this._size=h.clone(e),this._data=p.resize(this._data,this._size,r),this},t.prototype.clone=function(){var e=new t;return e._data=h.clone(this._data),e._size=h.clone(this._size),e},t.prototype.size=function(){return this._size},t.prototype.map=function(e){var r=this,n=new t,i=[],o=function(n,t){return g(n)?n.map(function(e,r){return i[t]=r,o(e,t+1)}):e(n,i,r)};return n._data=o(this._data,0),n._size=h.clone(this._size),n},t.prototype.forEach=function(e){var r=this,n=[],t=function(i,o){g(i)?i.forEach(function(e,r){n[o]=r,t(e,o+1)}):e(i,n,r)};t(this._data,0)},t.prototype.toArray=function(){return h.clone(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(e){return m.format(this._data,e)},t.prototype.toString=function(){return m.format(this._data)},e.exports=t,r.isMatrix=t.isMatrix},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new Error(\"Constructor must be called with the new operator\");if(null!=e&&!w(e))throw new TypeError(\"First parameter in Unit constructor must be a number\");if(null!=r&&!v(r))throw new TypeError(\"Second parameter in Unit constructor must be a string\");if(null!=r){var n=l(r);if(!n)throw new SyntaxError('Unknown unit \"'+r+'\"');this.unit=n.unit,this.prefix=n.prefix}else this.unit=UNIT_NONE,this.prefix=b;null!=e?(this.value=this._normalize(e),this.fixPrefix=!1):(this.value=null,this.fixPrefix=!0)}function i(){for(;\" \"==h||\"\t\"==h;)s()}function o(e){return e>=\"0\"&&\"9\">=e||\".\"==e}function a(e){return e>=\"0\"&&\"9\">=e}function s(){p++,h=m.charAt(p)}function u(e){p=e,h=m.charAt(p)}function f(){var e,r=\"\";if(e=p,\"+\"==h?s():\"-\"==h&&(r+=h,s()),!o(h))return u(e),null;if(\".\"==h){if(r+=h,s(),!a(h))return u(e),null}else{for(;a(h);)r+=h,s();\".\"==h&&(r+=h,s())}for(;a(h);)r+=h,s();if(\"E\"==h||\"e\"==h){if(r+=h,s(),(\"+\"==h||\"-\"==h)&&(r+=h,s()),!a(h))return u(e),null;for(;a(h);)r+=h,s()}return r}function c(){var e=\"\";for(i();h&&\" \"!=h&&\"\t\"!=h;)e+=h,s();return e||null}function l(e){for(var r in N)if(N.hasOwnProperty(r)&&x.endsWith(e,r)){var n=N[r],t=e.length-r.length,i=e.substring(0,t),o=n.prefixes[i];if(void 0!==o)return{unit:n,prefix:o}}return null}var m,p,h,g=n(112),d=g.number,x=g.string,w=g.number.isNumber,v=g.string.isString;t.parse=function(e){if(m=e,p=-1,h=\"\",!v(m))return null;s(),i();var r,n=f();return n?(r=c(),s(),i(),h?null:n&&r?new t(Number(n),r):null):(r=c(),s(),i(),h?null:new t(null,r))},t.isUnit=function(e){return e instanceof t},t.prototype.clone=function(){var e=new t;for(var r in this)this.hasOwnProperty(r)&&(e[r]=this[r]);return e},t.prototype._normalize=function(e){return(e+this.unit.offset)*this.unit.value*this.prefix.value},t.prototype._unnormalize=function(e,r){return void 0==r?e/this.unit.value/this.prefix.value-this.unit.offset:e/this.unit.value/r-this.unit.offset},t.isPlainUnit=function(e){return null!=l(e)},t.prototype.hasBase=function(e){return void 0===this.unit.base?void 0===e:this.unit.base===e},t.prototype.equalBase=function(e){return this.unit.base===e.unit.base},t.prototype.equals=function(e){return this.equalBase(e)&&this.value==e.value},t.prototype.to=function(e){var r;if(v(e)){if(r=new t(null,e),!this.equalBase(r))throw new Error(\"Units do not match\");return r.value=this.value,r}if(e instanceof t){if(!this.equalBase(e))throw new Error(\"Units do not match\");if(null!=e.value)throw new Error(\"Cannot convert to a unit with a value\");if(null==e.unit)throw new Error(\"Unit expected on the right hand side of function in\");return r=e.clone(),r.value=this.value,r.fixPrefix=!0,r}throw new Error(\"String or Unit expected as parameter\")},t.prototype.toNumber=function(e){var r=this.to(e),n=this.fixPrefix?r._bestPrefix():r.prefix;return r._unnormalize(r.value,n.value)},t.prototype.toString=function(){return this.format()},t.prototype.format=function(e){var r,n;if(this.fixPrefix)r=this._unnormalize(this.value),n=null!=this.value?d.format(r,e)+\" \":\"\",n+=this.prefix.name+this.unit.name;else{var t=this._bestPrefix();r=this._unnormalize(this.value,t.value),n=null!=this.value?d.format(r,e)+\" \":\"\",n+=t.name+this.unit.name}return n},t.prototype._bestPrefix=function(){var e=Math.abs(this.value/this.unit.value),r=b,n=Math.abs(Math.log(e/r.value)/Math.LN10-1.2),t=this.unit.prefixes;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(o.scientific){var a=Math.abs(Math.log(e/o.value)/Math.LN10-1.2);n>a&&(r=o,n=a)}}return r};var y={NONE:{\"\":{name:\"\",value:1,scientific:!0}},SHORT:{\"\":{name:\"\",value:1,scientific:!0},da:{name:\"da\",value:10,scientific:!1},h:{name:\"h\",value:100,scientific:!1},k:{name:\"k\",value:1e3,scientific:!0},M:{name:\"M\",value:1e6,scientific:!0},G:{name:\"G\",value:1e9,scientific:!0},T:{name:\"T\",value:1e12,scientific:!0},P:{name:\"P\",value:1e15,scientific:!0},E:{name:\"E\",value:1e18,scientific:!0},Z:{name:\"Z\",value:1e21,scientific:!0},Y:{name:\"Y\",value:1e24,scientific:!0},d:{name:\"d\",value:.1,scientific:!1},c:{name:\"c\",value:.01,scientific:!1},m:{name:\"m\",value:.001,scientific:!0},u:{name:\"u\",value:1e-6,scientific:!0},n:{name:\"n\",value:1e-9,scientific:!0},p:{name:\"p\",value:1e-12,scientific:!0},f:{name:\"f\",value:1e-15,scientific:!0},a:{name:\"a\",value:1e-18,scientific:!0},z:{name:\"z\",value:1e-21,scientific:!0},y:{name:\"y\",value:1e-24,scientific:!0}},LONG:{\"\":{name:\"\",value:1,scientific:!0},deca:{name:\"deca\",value:10,scientific:!1},hecto:{name:\"hecto\",value:100,scientific:!1},kilo:{name:\"kilo\",value:1e3,scientific:!0},mega:{name:\"mega\",value:1e6,scientific:!0},giga:{name:\"giga\",value:1e9,scientific:!0},tera:{name:\"tera\",value:1e12,scientific:!0},peta:{name:\"peta\",value:1e15,scientific:!0},exa:{name:\"exa\",value:1e18,scientific:!0},zetta:{name:\"zetta\",value:1e21,scientific:!0},yotta:{name:\"yotta\",value:1e24,scientific:!0},deci:{name:\"deci\",value:.1,scientific:!1},centi:{name:\"centi\",value:.01,scientific:!1},milli:{name:\"milli\",value:.001,scientific:!0},micro:{name:\"micro\",value:1e-6,scientific:!0},nano:{name:\"nano\",value:1e-9,scientific:!0},pico:{name:\"pico\",value:1e-12,scientific:!0},femto:{name:\"femto\",value:1e-15,scientific:!0},atto:{name:\"atto\",value:1e-18,scientific:!0},zepto:{name:\"zepto\",value:1e-21,scientific:!0},yocto:{name:\"yocto\",value:1e-24,scientific:!0}},SQUARED:{\"\":{name:\"\",value:1,scientific:!0},da:{name:\"da\",value:100,scientific:!1},h:{name:\"h\",value:1e4,scientific:!1},k:{name:\"k\",value:1e6,scientific:!0},M:{name:\"M\",value:1e12,scientific:!0},G:{name:\"G\",value:1e18,scientific:!0},T:{name:\"T\",value:1e24,scientific:!0},P:{name:\"P\",value:1e30,scientific:!0},E:{name:\"E\",value:1e36,scientific:!0},Z:{name:\"Z\",value:1e42,scientific:!0},Y:{name:\"Y\",value:1e48,scientific:!0},d:{name:\"d\",value:.01,scientific:!1},c:{name:\"c\",value:1e-4,scientific:!1},m:{name:\"m\",value:1e-6,scientific:!0},u:{name:\"u\",value:1e-12,scientific:!0},n:{name:\"n\",value:1e-18,scientific:!0},p:{name:\"p\",value:1e-24,scientific:!0},f:{name:\"f\",value:1e-30,scientific:!0},a:{name:\"a\",value:1e-36,scientific:!0},z:{name:\"z\",value:1e-42,scientific:!0},y:{name:\"y\",value:1e-42,scientific:!0}},CUBIC:{\"\":{name:\"\",value:1,scientific:!0},da:{name:\"da\",value:1e3,scientific:!1},h:{name:\"h\",value:1e6,scientific:!1},k:{name:\"k\",value:1e9,scientific:!0},M:{name:\"M\",value:1e18,scientific:!0},G:{name:\"G\",value:1e27,scientific:!0},T:{name:\"T\",value:1e36,scientific:!0},P:{name:\"P\",value:1e45,scientific:!0},E:{name:\"E\",value:1e54,scientific:!0},Z:{name:\"Z\",value:1e63,scientific:!0},Y:{name:\"Y\",value:1e72,scientific:!0},d:{name:\"d\",value:.001,scientific:!1},c:{name:\"c\",value:1e-6,scientific:!1},m:{name:\"m\",value:1e-9,scientific:!0},u:{name:\"u\",value:1e-18,scientific:!0},n:{name:\"n\",value:1e-27,scientific:!0},p:{name:\"p\",value:1e-36,scientific:!0},f:{name:\"f\",value:1e-45,scientific:!0},a:{name:\"a\",value:1e-54,scientific:!0},z:{name:\"z\",value:1e-63,scientific:!0},y:{name:\"y\",value:1e-72,scientific:!0}},BINARY_SHORT:{\"\":{name:\"\",value:1,scientific:!0},k:{name:\"k\",value:1024,scientific:!0},M:{name:\"M\",value:Math.pow(1024,2),scientific:!0},G:{name:\"G\",value:Math.pow(1024,3),scientific:!0},T:{name:\"T\",value:Math.pow(1024,4),scientific:!0},P:{name:\"P\",value:Math.pow(1024,5),scientific:!0},E:{name:\"E\",value:Math.pow(1024,6),scientific:!0},Z:{name:\"Z\",value:Math.pow(1024,7),scientific:!0},Y:{name:\"Y\",value:Math.pow(1024,8),scientific:!0},Ki:{name:\"Ki\",value:1024,scientific:!0},Mi:{name:\"Mi\",value:Math.pow(1024,2),scientific:!0},Gi:{name:\"Gi\",value:Math.pow(1024,3),scientific:!0},Ti:{name:\"Ti\",value:Math.pow(1024,4),scientific:!0},Pi:{name:\"Pi\",value:Math.pow(1024,5),scientific:!0},Ei:{name:\"Ei\",value:Math.pow(1024,6),scientific:!0},Zi:{name:\"Zi\",value:Math.pow(1024,7),scientific:!0},Yi:{name:\"Yi\",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG:{\"\":{name:\"\",value:1,scientific:!0},kilo:{name:\"kilo\",value:1024,scientific:!0},mega:{name:\"mega\",value:Math.pow(1024,2),scientific:!0},giga:{name:\"giga\",value:Math.pow(1024,3),scientific:!0},tera:{name:\"tera\",value:Math.pow(1024,4),scientific:!0},peta:{name:\"peta\",value:Math.pow(1024,5),scientific:!0},exa:{name:\"exa\",value:Math.pow(1024,6),scientific:!0},zetta:{name:\"zetta\",value:Math.pow(1024,7),scientific:!0},yotta:{name:\"yotta\",value:Math.pow(1024,8),scientific:!0},kibi:{name:\"kibi\",value:1024,scientific:!0},mebi:{name:\"mebi\",value:Math.pow(1024,2),scientific:!0},gibi:{name:\"gibi\",value:Math.pow(1024,3),scientific:!0},tebi:{name:\"tebi\",value:Math.pow(1024,4),scientific:!0},pebi:{name:\"pebi\",value:Math.pow(1024,5),scientific:!0},exi:{name:\"exi\",value:Math.pow(1024,6),scientific:!0},zebi:{name:\"zebi\",value:Math.pow(1024,7),scientific:!0},yobi:{name:\"yobi\",value:Math.pow(1024,8),scientific:!0}}},b={name:\"\",value:1,scientific:!0},E={NONE:{},LENGTH:{},MASS:{},TIME:{},CURRENT:{},TEMPERATURE:{},LUMINOUS_INTENSITY:{},AMOUNT_OF_SUBSTANCE:{},FORCE:{},SURFACE:{},VOLUME:{},ANGLE:{},BIT:{}};BASE_UNIT_NONE={},UNIT_NONE={name:\"\",base:BASE_UNIT_NONE,value:1,offset:0};\nvar N={meter:{name:\"meter\",base:E.LENGTH,prefixes:y.LONG,value:1,offset:0},inch:{name:\"inch\",base:E.LENGTH,prefixes:y.NONE,value:.0254,offset:0},foot:{name:\"foot\",base:E.LENGTH,prefixes:y.NONE,value:.3048,offset:0},yard:{name:\"yard\",base:E.LENGTH,prefixes:y.NONE,value:.9144,offset:0},mile:{name:\"mile\",base:E.LENGTH,prefixes:y.NONE,value:1609.344,offset:0},link:{name:\"link\",base:E.LENGTH,prefixes:y.NONE,value:.201168,offset:0},rod:{name:\"rod\",base:E.LENGTH,prefixes:y.NONE,value:5.02921,offset:0},chain:{name:\"chain\",base:E.LENGTH,prefixes:y.NONE,value:20.1168,offset:0},angstrom:{name:\"angstrom\",base:E.LENGTH,prefixes:y.NONE,value:1e-10,offset:0},m:{name:\"m\",base:E.LENGTH,prefixes:y.SHORT,value:1,offset:0},\"in\":{name:\"in\",base:E.LENGTH,prefixes:y.NONE,value:.0254,offset:0},ft:{name:\"ft\",base:E.LENGTH,prefixes:y.NONE,value:.3048,offset:0},yd:{name:\"yd\",base:E.LENGTH,prefixes:y.NONE,value:.9144,offset:0},mi:{name:\"mi\",base:E.LENGTH,prefixes:y.NONE,value:1609.344,offset:0},li:{name:\"li\",base:E.LENGTH,prefixes:y.NONE,value:.201168,offset:0},rd:{name:\"rd\",base:E.LENGTH,prefixes:y.NONE,value:5.02921,offset:0},ch:{name:\"ch\",base:E.LENGTH,prefixes:y.NONE,value:20.1168,offset:0},mil:{name:\"mil\",base:E.LENGTH,prefixes:y.NONE,value:254e-7,offset:0},m2:{name:\"m2\",base:E.SURFACE,prefixes:y.SQUARED,value:1,offset:0},sqin:{name:\"sqin\",base:E.SURFACE,prefixes:y.NONE,value:64516e-8,offset:0},sqft:{name:\"sqft\",base:E.SURFACE,prefixes:y.NONE,value:.09290304,offset:0},sqyd:{name:\"sqyd\",base:E.SURFACE,prefixes:y.NONE,value:.83612736,offset:0},sqmi:{name:\"sqmi\",base:E.SURFACE,prefixes:y.NONE,value:2589988.110336,offset:0},sqrd:{name:\"sqrd\",base:E.SURFACE,prefixes:y.NONE,value:25.29295,offset:0},sqch:{name:\"sqch\",base:E.SURFACE,prefixes:y.NONE,value:404.6873,offset:0},sqmil:{name:\"sqmil\",base:E.SURFACE,prefixes:y.NONE,value:6.4516e-10,offset:0},m3:{name:\"m3\",base:E.VOLUME,prefixes:y.CUBIC,value:1,offset:0},L:{name:\"L\",base:E.VOLUME,prefixes:y.SHORT,value:.001,offset:0},l:{name:\"l\",base:E.VOLUME,prefixes:y.SHORT,value:.001,offset:0},litre:{name:\"litre\",base:E.VOLUME,prefixes:y.LONG,value:.001,offset:0},cuin:{name:\"cuin\",base:E.VOLUME,prefixes:y.NONE,value:16387064e-12,offset:0},cuft:{name:\"cuft\",base:E.VOLUME,prefixes:y.NONE,value:.028316846592,offset:0},cuyd:{name:\"cuyd\",base:E.VOLUME,prefixes:y.NONE,value:.764554857984,offset:0},teaspoon:{name:\"teaspoon\",base:E.VOLUME,prefixes:y.NONE,value:5e-6,offset:0},tablespoon:{name:\"tablespoon\",base:E.VOLUME,prefixes:y.NONE,value:15e-6,offset:0},minim:{name:\"minim\",base:E.VOLUME,prefixes:y.NONE,value:6.161152e-8,offset:0},fluiddram:{name:\"fluiddram\",base:E.VOLUME,prefixes:y.NONE,value:36966911e-13,offset:0},fluidounce:{name:\"fluidounce\",base:E.VOLUME,prefixes:y.NONE,value:2957353e-11,offset:0},gill:{name:\"gill\",base:E.VOLUME,prefixes:y.NONE,value:.0001182941,offset:0},cc:{name:\"cc\",base:E.VOLUME,prefixes:y.NONE,value:1e-6,offset:0},cup:{name:\"cup\",base:E.VOLUME,prefixes:y.NONE,value:.0002365882,offset:0},pint:{name:\"pint\",base:E.VOLUME,prefixes:y.NONE,value:.0004731765,offset:0},quart:{name:\"quart\",base:E.VOLUME,prefixes:y.NONE,value:.0009463529,offset:0},gallon:{name:\"gallon\",base:E.VOLUME,prefixes:y.NONE,value:.003785412,offset:0},beerbarrel:{name:\"beerbarrel\",base:E.VOLUME,prefixes:y.NONE,value:.1173478,offset:0},oilbarrel:{name:\"oilbarrel\",base:E.VOLUME,prefixes:y.NONE,value:.1589873,offset:0},hogshead:{name:\"hogshead\",base:E.VOLUME,prefixes:y.NONE,value:.238481,offset:0},fldr:{name:\"fldr\",base:E.VOLUME,prefixes:y.NONE,value:36966911e-13,offset:0},floz:{name:\"floz\",base:E.VOLUME,prefixes:y.NONE,value:2957353e-11,offset:0},gi:{name:\"gi\",base:E.VOLUME,prefixes:y.NONE,value:.0001182941,offset:0},cp:{name:\"cp\",base:E.VOLUME,prefixes:y.NONE,value:.0002365882,offset:0},pt:{name:\"pt\",base:E.VOLUME,prefixes:y.NONE,value:.0004731765,offset:0},qt:{name:\"qt\",base:E.VOLUME,prefixes:y.NONE,value:.0009463529,offset:0},gal:{name:\"gal\",base:E.VOLUME,prefixes:y.NONE,value:.003785412,offset:0},bbl:{name:\"bbl\",base:E.VOLUME,prefixes:y.NONE,value:.1173478,offset:0},obl:{name:\"obl\",base:E.VOLUME,prefixes:y.NONE,value:.1589873,offset:0},g:{name:\"g\",base:E.MASS,prefixes:y.SHORT,value:.001,offset:0},gram:{name:\"gram\",base:E.MASS,prefixes:y.LONG,value:.001,offset:0},ton:{name:\"ton\",base:E.MASS,prefixes:y.SHORT,value:907.18474,offset:0},tonne:{name:\"tonne\",base:E.MASS,prefixes:y.SHORT,value:1e3,offset:0},grain:{name:\"grain\",base:E.MASS,prefixes:y.NONE,value:6479891e-11,offset:0},dram:{name:\"dram\",base:E.MASS,prefixes:y.NONE,value:.0017718451953125,offset:0},ounce:{name:\"ounce\",base:E.MASS,prefixes:y.NONE,value:.028349523125,offset:0},poundmass:{name:\"poundmass\",base:E.MASS,prefixes:y.NONE,value:.45359237,offset:0},hundredweight:{name:\"hundredweight\",base:E.MASS,prefixes:y.NONE,value:45.359237,offset:0},stick:{name:\"stick\",base:E.MASS,prefixes:y.NONE,value:.115,offset:0},gr:{name:\"gr\",base:E.MASS,prefixes:y.NONE,value:6479891e-11,offset:0},dr:{name:\"dr\",base:E.MASS,prefixes:y.NONE,value:.0017718451953125,offset:0},oz:{name:\"oz\",base:E.MASS,prefixes:y.NONE,value:.028349523125,offset:0},lbm:{name:\"lbm\",base:E.MASS,prefixes:y.NONE,value:.45359237,offset:0},cwt:{name:\"cwt\",base:E.MASS,prefixes:y.NONE,value:45.359237,offset:0},s:{name:\"s\",base:E.TIME,prefixes:y.SHORT,value:1,offset:0},min:{name:\"min\",base:E.TIME,prefixes:y.NONE,value:60,offset:0},h:{name:\"h\",base:E.TIME,prefixes:y.NONE,value:3600,offset:0},second:{name:\"second\",base:E.TIME,prefixes:y.LONG,value:1,offset:0},sec:{name:\"sec\",base:E.TIME,prefixes:y.LONG,value:1,offset:0},minute:{name:\"minute\",base:E.TIME,prefixes:y.NONE,value:60,offset:0},hour:{name:\"hour\",base:E.TIME,prefixes:y.NONE,value:3600,offset:0},day:{name:\"day\",base:E.TIME,prefixes:y.NONE,value:86400,offset:0},rad:{name:\"rad\",base:E.ANGLE,prefixes:y.NONE,value:1,offset:0},deg:{name:\"deg\",base:E.ANGLE,prefixes:y.NONE,value:.017453292519943295,offset:0},grad:{name:\"grad\",base:E.ANGLE,prefixes:y.NONE,value:.015707963267948967,offset:0},cycle:{name:\"cycle\",base:E.ANGLE,prefixes:y.NONE,value:6.283185307179586,offset:0},A:{name:\"A\",base:E.CURRENT,prefixes:y.SHORT,value:1,offset:0},ampere:{name:\"ampere\",base:E.CURRENT,prefixes:y.LONG,value:1,offset:0},K:{name:\"K\",base:E.TEMPERATURE,prefixes:y.NONE,value:1,offset:0},degC:{name:\"degC\",base:E.TEMPERATURE,prefixes:y.NONE,value:1,offset:273.15},degF:{name:\"degF\",base:E.TEMPERATURE,prefixes:y.NONE,value:1/1.8,offset:459.67},degR:{name:\"degR\",base:E.TEMPERATURE,prefixes:y.NONE,value:1/1.8,offset:0},kelvin:{name:\"kelvin\",base:E.TEMPERATURE,prefixes:y.NONE,value:1,offset:0},celsius:{name:\"celsius\",base:E.TEMPERATURE,prefixes:y.NONE,value:1,offset:273.15},fahrenheit:{name:\"fahrenheit\",base:E.TEMPERATURE,prefixes:y.NONE,value:1/1.8,offset:459.67},rankine:{name:\"rankine\",base:E.TEMPERATURE,prefixes:y.NONE,value:1/1.8,offset:0},mol:{name:\"mol\",base:E.AMOUNT_OF_SUBSTANCE,prefixes:y.NONE,value:1,offset:0},mole:{name:\"mole\",base:E.AMOUNT_OF_SUBSTANCE,prefixes:y.NONE,value:1,offset:0},cd:{name:\"cd\",base:E.LUMINOUS_INTENSITY,prefixes:y.NONE,value:1,offset:0},candela:{name:\"candela\",base:E.LUMINOUS_INTENSITY,prefixes:y.NONE,value:1,offset:0},N:{name:\"N\",base:E.FORCE,prefixes:y.SHORT,value:1,offset:0},newton:{name:\"newton\",base:E.FORCE,prefixes:y.LONG,value:1,offset:0},lbf:{name:\"lbf\",base:E.FORCE,prefixes:y.NONE,value:4.4482216152605,offset:0},poundforce:{name:\"poundforce\",base:E.FORCE,prefixes:y.NONE,value:4.4482216152605,offset:0},b:{name:\"b\",base:E.BIT,prefixes:y.BINARY_SHORT,value:1,offset:0},bits:{name:\"bits\",base:E.BIT,prefixes:y.BINARY_LONG,value:1,offset:0},B:{name:\"B\",base:E.BIT,prefixes:y.BINARY_SHORT,value:8,offset:0},bytes:{name:\"bytes\",base:E.BIT,prefixes:y.BINARY_LONG,value:8,offset:0}},M={meters:\"meter\",inches:\"inch\",feet:\"foot\",yards:\"yard\",miles:\"mile\",links:\"link\",rods:\"rod\",chains:\"chain\",angstroms:\"angstrom\",litres:\"litre\",teaspoons:\"teaspoon\",tablespoons:\"tablespoon\",minims:\"minim\",fluiddrams:\"fluiddram\",fluidounces:\"fluidounce\",gills:\"gill\",cups:\"cup\",pints:\"pint\",quarts:\"quart\",gallons:\"gallon\",beerbarrels:\"beerbarrel\",oilbarrels:\"oilbarrel\",hogsheads:\"hogshead\",grams:\"gram\",tons:\"ton\",tonnes:\"tonne\",grains:\"grain\",drams:\"dram\",ounces:\"ounce\",poundmasses:\"poundmass\",hundredweights:\"hundredweight\",sticks:\"stick\",seconds:\"second\",minutes:\"minute\",hours:\"hour\",days:\"day\",radians:\"rad\",degrees:\"deg\",gradients:\"grad\",cycles:\"cycle\",amperes:\"ampere\",moles:\"mole\"};for(var A in M)if(M.hasOwnProperty(A)){var T=N[M[A]],O=Object.create(T);O.name=A,N[A]=O}N.lt=N.l,N.liter=N.litre,N.liters=N.litres,N.lb=N.lbm,t.PREFIXES=y,t.BASE_UNITS=E,t.UNITS=N,e.exports=t,r.isUnit=t.isUnit,r.isPlainUnit=t.isPlainUnit,r.parse=t.parse},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");this.math=e,this.doc=r}var i=n(112),o=i.object,a=i.string;t.isHelp=function(e){return e instanceof t},t.prototype.toString=function(){var e=this.doc||{},r=\"\\n\";if(e.name&&(r+=\"Name: \"+e.name+\"\\n\\n\"),e.category&&(r+=\"Category: \"+e.category+\"\\n\\n\"),e.description&&(r+=\"Description:\\n    \"+e.description+\"\\n\\n\"),e.syntax&&(r+=\"Syntax:\\n    \"+e.syntax.join(\"\\n    \")+\"\\n\\n\"),e.examples){var n=this.math.parser();r+=\"Examples:\\n\";for(var i=0;i<e.examples.length;i++){var o,s=e.examples[i];try{o=n.eval(s)}catch(u){o=u}r+=\"    \"+s+\"\\n\",!o||o instanceof t||(r+=\"        \"+a.format(o)+\"\\n\")}r+=\"\\n\"}return e.seealso&&(r+=\"See also: \"+e.seealso.join(\", \")+\"\\n\"),r},t.prototype.toJSON=function(){return o.clone(this.doc)},e.exports=t,r.isHelp=t.isHelp},function(e,r,n){function t(e,r,n){var o,a,u,f;if(0>=r){if(s(e[0])){for(f=i(e),a=[],o=0;o<f.length;o++)a[o]=t(f[o],r-1,n);return a}for(u=e[0],o=1;o<e.length;o++)u=n(u,e[o]);return u}for(a=[],o=0;o<e.length;o++)a[o]=t(e[o],r-1,n);return a}function i(e){var r,n,t=e.length,i=e[0].length,o=[];for(n=0;i>n;n++){var a=[];for(r=0;t>r;r++)a.push(e[r][n]);o.push(a)}return o}{var o=n(112),a=n(11),s=o.array.isArray;o.string.isString}r.argsToArray=function(e){var r;return 0==e.length?r=[]:1==e.length?(r=e[0],r instanceof a&&(r=r.valueOf()),s(r)||(r=[r])):r=Array.prototype.slice.apply(e),r},r.isCollection=function(e){return s(e)||e instanceof a},r.deepMap=function u(e,r){return e&&\"function\"==typeof e.map?e.map(function(e){return u(e,r)}):r(e)},r.deepMap2=function f(e,r,n){var t,i,o;if(s(e))if(s(r)){if(e.length!=r.length)throw new RangeError(\"Dimension mismatch (\"+e.length+\" != \"+r.length+\")\");for(t=[],i=e.length,o=0;i>o;o++)t[o]=f(e[o],r[o],n)}else{if(r instanceof a)return t=f(e,r.valueOf(),n),new a(t);for(t=[],i=e.length,o=0;i>o;o++)t[o]=f(e[o],r,n)}else{if(e instanceof a)return r instanceof a?(t=f(e.valueOf(),r.valueOf(),n),new a(t)):(t=f(e.valueOf(),r,n),new a(t));if(s(r))for(t=[],i=r.length,o=0;i>o;o++)t[o]=f(e,r[o],n);else{if(r instanceof a)return t=f(e,r.valueOf(),n),new a(t);t=n(e,r)}}return t},r.reduce=function(e,r,n){return e instanceof a?new a(t(e.valueOf(),r,n)):t(e,r,n)},r.deepForEach=function c(e,r){e instanceof a&&(e=e.valueOf());for(var n=0,t=e.length;t>n;n++){var i=e[n];s(i)?c(i,r):r(i)}}},function(e,r,n){e.exports=function(e){var r=(n(126),{});e.error=r,r.UnsupportedTypeError=function t(r,n){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");switch(arguments.length){case 0:this.message=\"Unsupported type of argument\";break;case 1:this.message=\"Unsupported type of argument in function \"+r;break;case 2:var i=e[\"typeof\"](n);this.message=\"Function \"+r+\"(\"+i+\") not supported\";break;default:var o=Array.prototype.splice.call(arguments,1),a=o.map(function(r){return e[\"typeof\"](r)});this.message=\"Function \"+r+\"(\"+a.join(\", \")+\") not supported\"}this.stack=(new Error).stack},r.UnsupportedTypeError.prototype=new TypeError,r.UnsupportedTypeError.prototype.constructor=TypeError,r.UnsupportedTypeError.prototype.name=\"UnsupportedTypeError\",r.ArgumentsError=function i(e,r,n,t){if(!(this instanceof i))throw new SyntaxError(\"Constructor must be called with the new operator\");this.message=\"Wrong number of arguments in function \"+e+\" (\"+r+\" provided, \"+n+(void 0!=t?\"-\"+t:\"\")+\" expected)\",this.stack=(new Error).stack},r.ArgumentsError.prototype=new Error,r.ArgumentsError.prototype.constructor=Error,r.ArgumentsError.prototype.name=\"ArgumentsError\"}},function(e,r,n){e.exports=function(e){function r(e){if(!(this instanceof r))throw new SyntaxError(\"Constructor must be called with the new operator\");this.value=e instanceof r?e.value:e}function t(e,n){var t=Array.prototype.slice;r.prototype[e]=\"function\"==typeof n?function(){var e=[this.value].concat(t.call(arguments,0));return new r(n.apply(this,e))}:new r(n)}var i=n(127);r.prototype.done=function(){return this.value},r.prototype.valueOf=function(){return this.value},r.prototype.toString=function(){return i.format(this.value)},r.createProxy=t;for(var o in e)e.hasOwnProperty(o)&&t(o,e[o]);return r}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(4),i=n(14),o=r.string.isString,a=i.isCollection;e.compile=function(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"compile\",arguments.length,1);if(o(r))return t(r).compile(e);if(a(r))return i.deepMap(r,function(r){return t(r).compile(e)});throw new TypeError(\"String, array, or matrix expected\")}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(4),i=n(14),o=r.string.isString,a=i.isCollection;e.eval=function(r,n){if(1!=arguments.length&&2!=arguments.length)throw new e.error.ArgumentsError(\"eval\",arguments.length,1,2);if(n=n||{},o(r))return t(r).compile(e).eval(n);if(a(r))return i.deepMap(r,function(r){return t(r).compile(e).eval(n)});throw new TypeError(\"String, array, or matrix expected\")}}},function(e,r,n){e.exports=function(e){var r=n(13);e.help=function(n){if(1!=arguments.length)throw new SyntaxError(\"Wrong number of arguments in function help (\"+arguments.length+\" provided, 1 expected)\");var t=null;if(n instanceof String||\"string\"==typeof n)t=n;else{var i;for(i in e)if(e.hasOwnProperty(i)&&n===e[i]){t=i;break}}var o=e.expression.docs[t];if(!t||!o)throw new Error('No documentation found on \"'+t+'\"');return new r(e,o)}}},function(e,r,n){e.exports=function(e){var r=n(4);e.parse=function(){return r.apply(r,arguments)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=(n(11),n(14)),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.abs=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"abs\",arguments.length,1);if(a(r))return Math.abs(r);if(u(r))return Math.sqrt(r.re*r.re+r.im*r.im);if(r instanceof t)return r.abs();if(f(r))return o.deepMap(r,c);if(s(r))return Math.abs(r);throw new e.error.UnsupportedTypeError(\"abs\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=(n(11),n(12)),a=n(14),s=r[\"boolean\"].isBoolean,u=r.number.isNumber,f=r.number.toNumber,c=r.number.toBigNumber,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.add=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"add\",arguments.length,2);if(u(r)){if(u(n))return r+n;if(m(n))return new i(r+n.re,n.im)}if(m(r)){if(m(n))return new i(r.re+n.re,r.im+n.im);if(u(n))return new i(r.re+n,r.im)}if(p(r)&&p(n)){if(null==r.value)throw new Error(\"Parameter x contains a unit with undefined value\");if(null==n.value)throw new Error(\"Parameter y contains a unit with undefined value\");if(!r.equalBase(n))throw new Error(\"Units do not match\");var o=r.clone();return o.value+=n.value,o.fixPrefix=!1,o}if(r instanceof t)return u(n)?n=c(n):s(n)&&(n=new t(n?1:0)),n instanceof t?r.plus(n):g(f(r),n);if(n instanceof t)return u(r)?r=c(r):s(r)&&(r=new t(r?1:0)),r instanceof t?r.plus(n):g(r,f(n));if(l(r)||l(n))return r+n;if(h(r)||h(n))return a.deepMap2(r,n,g);if(s(r))return g(+r,n);if(s(n))return g(r,+n);throw new e.error.UnsupportedTypeError(\"add\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=o.isCollection,f=i.isComplex;e.ceil=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"ceil\",arguments.length,1);if(a(r))return Math.ceil(r);if(f(r))return new i(Math.ceil(r.re),Math.ceil(r.im));if(r instanceof t)return r.ceil();if(u(r))return o.deepMap(r,c);if(s(r))return Math.ceil(r);throw new e.error.UnsupportedTypeError(\"ceil\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r.number.toNumber,f=r.number.toBigNumber,c=r[\"boolean\"].isBoolean,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.compare=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"compare\",arguments.length,2);if(s(r)&&s(n))return r>n?1:n>r?-1:0;if(r instanceof t)return s(n)?n=f(n):c(n)&&(n=new t(n?1:0)),n instanceof t?new t(r.cmp(n)):g(u(r),n);if(n instanceof t)return s(r)?r=f(r):c(r)&&(r=new t(r?1:0)),r instanceof t?new t(r.cmp(n)):g(r,u(n));if(p(r)&&p(n)){if(!r.equalBase(n))throw new Error(\"Cannot compare units with different base\");return r.value>n.value?1:r.value<n.value?-1:0}if(l(r)||l(n))return r>n?1:n>r?-1:0;if(h(r)||h(n))return a.deepMap2(r,n,g);if(c(r))return g(+r,n);if(c(n))return g(r,+n);if(m(r)||m(n))throw new TypeError(\"No ordering relation is defined for complex numbers\");throw new e.error.UnsupportedTypeError(\"compare\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.cube=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"cube\",arguments.length,1);if(a(r))return r*r*r;if(u(r))return e.multiply(e.multiply(r,r),r);if(r instanceof t)return r.times(r).times(r);if(f(r))return o.deepMap(r,c);if(s(r))return c(+r);throw new e.error.UnsupportedTypeError(\"cube\",r)}}},function(e,r,n){e.exports=function(e){function r(e,r){var n=r.re*r.re+r.im*r.im;return 0!=n?new o((e.re*r.re+e.im*r.im)/n,(e.im*r.re-e.re*r.im)/n):new o(0!=e.re?e.re/0:0,0!=e.im?e.im/0:0)}var t=n(112),i=n(111),o=n(8),a=(n(11),n(12)),s=n(14),u=t.number.isNumber,f=t.number.toNumber,c=t.number.toBigNumber,l=t[\"boolean\"].isBoolean,m=o.isComplex,p=a.isUnit,h=s.isCollection;e.divide=function g(n,t){if(2!=arguments.length)throw new e.error.ArgumentsError(\"divide\",arguments.length,2);if(u(n)){if(u(t))return n/t;if(m(t))return r(new o(n,0),t)}if(m(n)){if(m(t))return r(n,t);if(u(t))return r(n,new o(t,0))}if(n instanceof i)return u(t)?t=c(t):l(t)&&(t=new i(t?1:0)),t instanceof i?n.div(t):g(f(n),t);if(t instanceof i)return u(n)?n=c(n):l(n)&&(n=new i(n?1:0)),n instanceof i?n.div(t):g(n,f(t));if(p(n)&&u(t)){var a=n.clone();return a.value/=t,a}if(h(n))return h(t)?e.multiply(n,e.inv(t)):s.deepMap2(n,t,g);if(h(t))return e.multiply(n,e.inv(t));if(l(n))return g(+n,t);if(l(t))return g(n,+t);throw new e.error.UnsupportedTypeError(\"divide\",n,t)}}},function(e,r,n){e.exports=function(e){var r=n(14);e.edivide=function(n,t){if(2!=arguments.length)throw new e.error.ArgumentsError(\"edivide\",arguments.length,2);return r.deepMap2(n,t,e.divide)}}},function(e,r,n){e.exports=function(e){var r=n(14);e.emultiply=function(n,t){if(2!=arguments.length)throw new e.error.ArgumentsError(\"emultiply\",arguments.length,2);return r.deepMap2(n,t,e.multiply)}}},function(e,r,n){e.exports=function(e){var r=n(14);e.epow=function(n,t){if(2!=arguments.length)throw new e.error.ArgumentsError(\"epow\",arguments.length,2);return r.deepMap2(n,t,e.pow)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r.number.toNumber,f=r.number.toBigNumber,c=r[\"boolean\"].isBoolean,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.equal=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"equal\",arguments.length,2);if(s(r)){if(s(n))return r==n;if(m(n))return r==n.re&&0==n.im}if(m(r)){if(s(n))return r.re==n&&0==r.im;if(m(n))return r.re==n.re&&r.im==n.im}if(r instanceof t)return s(n)?n=f(n):c(n)&&(n=new t(n?1:0)),n instanceof t?r.eq(n):g(u(r),n);if(n instanceof t)return s(r)?r=f(r):c(r)&&(r=new t(r?1:0)),r instanceof t?r.eq(n):g(r,u(n));if(p(r)&&p(n)){if(!r.equalBase(n))throw new Error(\"Cannot compare units with different base\");return r.value==n.value}if(l(r)||l(n))return r==n;if(h(r)||h(n))return a.deepMap2(r,n,g);if(c(r))return g(+r,n);if(c(n))return g(r,+n);throw new e.error.UnsupportedTypeError(\"equal\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=(n(11),n(14)),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.exp=function c(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"exp\",arguments.length,1);if(a(n))return Math.exp(n);if(u(n)){var l=Math.exp(n.re);return new i(l*Math.cos(n.im),l*Math.sin(n.im))}if(n instanceof t)return c(r.number.toNumber(n));if(f(n))return o.deepMap(n,c);if(s(n))return Math.exp(n);throw new e.error.UnsupportedTypeError(\"exp\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.fix=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"fix\",arguments.length,1);if(a(r))return r>0?Math.floor(r):Math.ceil(r);if(u(r))return new i(r.re>0?Math.floor(r.re):Math.ceil(r.re),r.im>0?Math.floor(r.im):Math.ceil(r.im));if(r instanceof t)return r.isNegative()?r.ceil():r.floor();if(f(r))return o.deepMap(r,c);if(s(r))return c(+r);throw new e.error.UnsupportedTypeError(\"fix\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.floor=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"floor\",arguments.length,1);if(a(r))return Math.floor(r);if(u(r))return new i(Math.floor(r.re),Math.floor(r.im));if(r instanceof t)return r.floor();if(f(r))return o.deepMap(r,c);if(s(r))return c(+r);throw new e.error.UnsupportedTypeError(\"floor\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(14),o=r.number.isNumber,a=r.number.toNumber,s=r[\"boolean\"].isBoolean,u=r.number.isInteger,f=i.isCollection;e.gcd=function c(){var r,n=arguments[0],l=arguments[1];if(2==arguments.length){if(o(n)&&o(l)){if(!u(n)||!u(l))throw new Error(\"Parameters in function gcd must be integer numbers\");for(;0!=l;)r=n%l,n=l,l=r;return 0>n?-n:n}if(f(n)||f(l))return i.deepMap2(n,l,c);if(n instanceof t)return c(a(n),l);if(l instanceof t)return c(n,a(l));if(s(n))return c(+n,l);if(s(l))return c(n,+l);throw new e.error.UnsupportedTypeError(\"gcd\",n,l)}if(arguments.length>2){for(var m=1;m<arguments.length;m++)n=c(n,arguments[m]);return n}throw new SyntaxError(\"Function gcd expects two or more arguments\")}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r.number.toNumber,f=r.number.toBigNumber,c=r[\"boolean\"].isBoolean,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.larger=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"larger\",arguments.length,2);if(s(r)&&s(n))return r>n;if(r instanceof t)return s(n)?n=f(n):c(n)&&(n=new t(n?1:0)),n instanceof t?r.gt(n):g(u(r),n);if(n instanceof t)return s(r)?r=f(r):c(r)&&(r=new t(r?1:0)),r instanceof t?r.gt(n):g(r,u(n));if(p(r)&&p(n)){if(!r.equalBase(n))throw new Error(\"Cannot compare units with different base\");return r.value>n.value}if(l(r)||l(n))return r>n;if(h(r)||h(n))return a.deepMap2(r,n,g);if(c(r))return g(+r,n);if(c(n))return g(r,+n);if(m(r)||m(n))throw new TypeError(\"No ordering relation is defined for complex numbers\");throw new e.error.UnsupportedTypeError(\"larger\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r.number.toNumber,f=r.number.toBigNumber,c=r[\"boolean\"].isBoolean,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.largereq=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"largereq\",arguments.length,2);if(s(r)&&s(n))return r>=n;if(r instanceof t)return s(n)?n=f(n):c(n)&&(n=new t(n?1:0)),n instanceof t?r.gte(n):g(u(r),n);if(n instanceof t)return s(r)?r=f(r):c(r)&&(r=new t(r?1:0)),r instanceof t?r.gte(n):g(r,u(n));if(p(r)&&p(n)){if(!r.equalBase(n))throw new Error(\"Cannot compare units with different base\");return r.value>=n.value}if(l(r)||l(n))return r>=n;if(h(r)||h(n))return a.deepMap2(r,n,g);if(c(r))return g(+r,n);if(c(n))return g(r,+n);if(m(r)||m(n))throw new TypeError(\"No ordering relation is defined for complex numbers\");throw new e.error.UnsupportedTypeError(\"largereq\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(14),o=r.number.isNumber,a=r.number.toNumber,s=r[\"boolean\"].isBoolean,u=r.number.isInteger,f=i.isCollection;e.lcm=function c(){var r,n=arguments[0],l=arguments[1];if(2==arguments.length){if(o(n)&&o(l)){if(!u(n)||!u(l))throw new Error(\"Parameters in function lcm must be integer numbers\");if(0==n||0==l)return 0;for(var m=n*l;0!=l;)r=l,l=n%r,n=r;return Math.abs(m/n)}if(f(n)||f(l))return i.deepMap2(n,l,c);if(s(n))return c(+n,l);if(s(l))return c(n,+l);if(n instanceof t)return c(a(n),l);if(l instanceof t)return c(n,a(l));throw new e.error.UnsupportedTypeError(\"lcm\",n,l)}if(arguments.length>2){for(var p=1;p<arguments.length;p++)n=c(n,arguments[p]);return n}throw new SyntaxError(\"Function lcm expects two or more arguments\")}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.log=function c(n,l){if(1==arguments.length){if(a(n))return n>=0?Math.log(n):c(new i(n,0));if(u(n))return new i(Math.log(Math.sqrt(n.re*n.re+n.im*n.im)),Math.atan2(n.im,n.re));if(n instanceof t)return c(r.number.toNumber(n));if(f(n))return o.deepMap(n,c);if(s(n))return c(+n);throw new e.error.UnsupportedTypeError(\"log\",n)}if(2==arguments.length)return e.divide(c(n),c(l));throw new e.error.ArgumentsError(\"log\",arguments.length,1,2)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.log10=function c(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"log10\",arguments.length,1);if(a(n))return n>=0?Math.log(n)/Math.LN10:c(new i(n,0));if(n instanceof t)return c(r.number.toNumber(n));if(u(n))return new i(Math.log(Math.sqrt(n.re*n.re+n.im*n.im))/Math.LN10,Math.atan2(n.im,n.re)/Math.LN10);if(f(n))return o.deepMap(n,c);if(s(n))return c(+n);throw new e.error.UnsupportedTypeError(\"log10\",n)}}},function(e,r,n){e.exports=function(e){function r(e,r){if(r>0)return e>0?e%r:0==e?0:e-r*Math.floor(e/r);if(0==r)return e;throw new Error(\"Cannot calculate mod for a negative divisor\")}var t=n(112),i=n(111),o=n(14),a=t.number.isNumber,s=t.number.toNumber,u=t.number.toBigNumber,f=t[\"boolean\"].isBoolean,c=o.isCollection;e.mod=function l(n,t){if(2!=arguments.length)throw new e.error.ArgumentsError(\"mod\",arguments.length,2);if(a(n)&&a(t))return r(n,t);if(n instanceof i)return a(t)?t=u(t):f(t)&&(t=new i(t?1:0)),t instanceof i?n.mod(t):l(s(n),t);if(t instanceof i)return a(n)?n=u(n):f(n)&&(n=new i(n?1:0)),n instanceof i?n.mod(t):l(n,s(t));if(c(n)||c(t))return o.deepMap2(n,t,l);if(f(n))return l(+n,t);if(f(t))return l(n,+t);throw new e.error.UnsupportedTypeError(\"mod\",n,t)}}},function(e,r,n){e.exports=function(e){function r(r,n){for(var t=[],i=r.length,o=n[0].length,a=r[0].length,s=0;i>s;s++){t[s]=[];for(var u=0;o>u;u++){for(var f=null,c=0;a>c;c++){var l=e.multiply(r[s][c],n[c][u]);f=null===f?l:e.add(f,l)}t[s][u]=f}}return t}function t(r,n){for(var t=[],i=n.length,o=n[0].length,a=0;o>a;a++){for(var s=null,u=0;i>u;u++){var f=e.multiply(r[u],n[u][a]);s=0===u?f:e.add(s,f)}t[a]=s}return t}function i(r,n){for(var t=[],i=r.length,o=r[0].length,a=0;i>a;a++){for(var s=null,u=0;o>u;u++){var f=e.multiply(r[a][u],n[u]);s=0===u?f:e.add(s,f)}t[a]=s}return t}function o(r,n){var t=r.length;if(!t)throw new Error(\"Cannot multiply two empty vectors\");for(var i=0,o=0;t>o;o++)i=e.add(i,e.multiply(r[o],n[o]));return i}function a(e,r){return 0==e.im?0==r.im?new f(e.re*r.re,0):0==r.re?new f(0,e.re*r.im):new f(e.re*r.re,e.re*r.im):0==e.re?0==r.im?new f(0,e.im*r.re):0==r.re?new f(-e.im*r.im,0):new f(-e.im*r.im,e.im*r.re):0==r.im?new f(e.re*r.re,e.im*r.re):0==r.re?new f(-e.im*r.im,e.re*r.im):new f(e.re*r.re-e.im*r.im,e.re*r.im+e.im*r.re)}var s=n(112),u=n(111),f=n(8),c=n(11),l=n(12),m=n(14),p=s.array,h=s.number.isNumber,g=s.number.toNumber,d=s.number.toBigNumber,x=s[\"boolean\"].isBoolean,w=f.isComplex,v=Array.isArray,y=l.isUnit;e.multiply=function b(n,s){if(2!=arguments.length)throw new e.error.ArgumentsError(\"multiply\",arguments.length,2);if(h(n)){if(h(s))return n*s;if(w(s))return a(new f(n,0),s);if(y(s))return res=s.clone(),res.value*=n,res}if(w(n)){if(h(s))return a(n,new f(s,0));if(w(s))return a(n,s)}if(n instanceof u)return h(s)?s=d(s):x(s)&&(s=new u(s?1:0)),s instanceof u?n.times(s):b(g(n),s);if(s instanceof u)return h(n)?n=d(n):x(n)&&(n=new u(n?1:0)),n instanceof u?n.times(s):b(n,g(s));if(y(n)&&h(s))return res=n.clone(),res.value*=s,res;if(v(n)){if(v(s)){var l=p.size(n),E=p.size(s);if(1==l.length){if(1==E.length){if(l[0]!=E[0])throw new RangeError(\"Dimensions mismatch in multiplication. Length of A must match length of B (A is \"+l[0]+\", B is \"+E[0]+l[0]+\" != \"+E[0]+\")\");return o(n,s)}if(2==E.length){if(l[0]!=E[0])throw new RangeError(\"Dimensions mismatch in multiplication. Length of A must match rows of B (A is \"+l[0]+\", B is \"+E[0]+\"x\"+E[1]+\", \"+l[0]+\" != \"+E[0]+\")\");return t(n,s)}throw new Error(\"Can only multiply a 1 or 2 dimensional matrix (B has \"+E.length+\" dimensions)\")}if(2==l.length){if(1==E.length){if(l[1]!=E[0])throw new RangeError(\"Dimensions mismatch in multiplication. Columns of A must match length of B (A is \"+l[0]+\"x\"+l[0]+\", B is \"+E[0]+\", \"+l[1]+\" != \"+E[0]+\")\");return i(n,s)}if(2==E.length){if(l[1]!=E[0])throw new RangeError(\"Dimensions mismatch in multiplication. Columns of A must match rows of B (A is \"+l[0]+\"x\"+l[1]+\", B is \"+E[0]+\"x\"+E[1]+\", \"+l[1]+\" != \"+E[0]+\")\");return r(n,s)}throw new Error(\"Can only multiply a 1 or 2 dimensional matrix (B has \"+E.length+\" dimensions)\")}throw new Error(\"Can only multiply a 1 or 2 dimensional matrix (A has \"+l.length+\" dimensions)\")}return s instanceof c?new c(b(n,s.valueOf())):m.deepMap2(n,s,b)}if(n instanceof c)return new c(s instanceof c?b(n.valueOf(),s.valueOf()):b(n.valueOf(),s));if(v(s))return m.deepMap2(n,s,b);if(s instanceof c)return new c(m.deepMap2(n,s.valueOf(),b));if(x(n))return b(+n,s);if(x(s))return b(n,+s);throw new e.error.UnsupportedTypeError(\"multiply\",n,s)}}},function(e,r,n){e.exports=function(e){function r(r,n){var t=e.log(r),i=e.multiply(t,n);return e.exp(i)}var t=n(112),i=n(111),o=n(8),a=n(11),s=(n(14),t.array),u=t.number.isNumber,f=t.number.toNumber,c=t.number.toBigNumber,l=t[\"boolean\"].isBoolean,m=Array.isArray,p=t.number.isInteger,h=o.isComplex;e.pow=function g(n,t){if(2!=arguments.length)throw new e.error.ArgumentsError(\"pow\",arguments.length,2);if(u(n)){if(u(t))return p(t)||n>=0?Math.pow(n,t):r(new o(n,0),new o(t,0));if(h(t))return r(new o(n,0),t)}if(h(n)){if(u(t))return r(n,new o(t,0));if(h(t))return r(n,t)}if(n instanceof i)return u(t)?t=c(t):l(t)&&(t=new i(t?1:0)),t instanceof i?n.pow(t):g(f(n),t);if(t instanceof i)return u(n)?n=c(n):l(n)&&(n=new i(n?1:0)),n instanceof i?n.pow(t):g(n,f(t));if(m(n)){if(!u(t)||!p(t)||0>t)throw new TypeError(\"For A^b, b must be a positive integer (value is \"+t+\")\");var d=s.size(n);if(2!=d.length)throw new Error(\"For A^b, A must be 2 dimensional (A has \"+d.length+\" dimensions)\");if(d[0]!=d[1])throw new Error(\"For A^b, A must be square (size is \"+d[0]+\"x\"+d[1]+\")\");for(var x=e.eye(d[0]).valueOf(),w=n;t>=1;)1==(1&t)&&(x=e.multiply(w,x)),t>>=1,w=e.multiply(w,w);return x}if(n instanceof a)return new a(g(n.valueOf(),t));if(l(n))return g(+n,t);if(l(t))return g(n,+t);throw new e.error.UnsupportedTypeError(\"pow\",n,t)}}},function(e,r,n){e.exports=function(e){function r(e,r){var n=Math.pow(10,r);return Math.round(e*n)/n}var t=n(112),i=n(111),o=n(8),a=n(14),s=t.number.isNumber,u=t.number.isInteger,f=t[\"boolean\"].isBoolean,c=o.isComplex,l=a.isCollection;\ne.round=function m(n,t){if(1!=arguments.length&&2!=arguments.length)throw new e.error.ArgumentsError(\"round\",arguments.length,1,2);if(void 0==t){if(s(n))return Math.round(n);if(c(n))return new o(Math.round(n.re),Math.round(n.im));if(n instanceof i)return n.round();if(l(n))return a.deepMap(n,m);if(f(n))return Math.round(n);throw new e.error.UnsupportedTypeError(\"round\",n)}if(!s(t)||!u(t)){if(!(t instanceof i)){if(f(t))return m(n,+t);throw new TypeError(\"Number of decimals in function round must be an integer\")}t=parseFloat(t.valueOf())}if(0>t||t>15)throw new Error(\"Number of decimals in function round must be in te range of 0-15\");if(s(n))return r(n,t);if(c(n))return new o(r(n.re,t),r(n.im,t));if(n instanceof i)return n.round(t);if(l(n)||l(t))return a.deepMap2(n,t,m);if(f(n))return m(+n,t);throw new e.error.UnsupportedTypeError(\"round\",n,t)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number,s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isCollection;e.sign=function l(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"sign\",arguments.length,1);if(s(r))return a.sign(r);if(f(r)){var n=Math.sqrt(r.re*r.re+r.im*r.im);return new i(r.re/n,r.im/n)}if(r instanceof t)return new t(r.cmp(0));if(c(r))return o.deepMap(r,l);if(u(r))return a.sign(r);throw new e.error.UnsupportedTypeError(\"sign\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r.number.toNumber,f=r.number.toBigNumber,c=r[\"boolean\"].isBoolean,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.smaller=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"smaller\",arguments.length,2);if(s(r)&&s(n))return n>r;if(r instanceof t)return s(n)?n=f(n):c(n)&&(n=new t(n?1:0)),n instanceof t?r.lt(n):g(u(r),n);if(n instanceof t)return s(r)?r=f(r):c(r)&&(r=new t(r?1:0)),r instanceof t?r.lt(n):g(r,u(n));if(p(r)&&p(n)){if(!r.equalBase(n))throw new Error(\"Cannot compare units with different base\");return r.value<n.value}if(l(r)||l(n))return n>r;if(h(r)||h(n))return a.deepMap2(r,n,g);if(c(r))return g(+r,n);if(c(n))return g(r,+n);if(m(r)||m(n))throw new TypeError(\"No ordering relation is defined for complex numbers\");throw new e.error.UnsupportedTypeError(\"smaller\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r.number.toNumber,f=r.number.toBigNumber,c=r[\"boolean\"].isBoolean,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.smallereq=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"smallereq\",arguments.length,2);if(s(r)&&s(n))return n>=r;if(r instanceof t)return s(n)?n=f(n):c(n)&&(n=new t(n?1:0)),n instanceof t?r.lte(n):g(u(r),n);if(n instanceof t)return s(r)?r=f(r):c(r)&&(r=new t(r?1:0)),r instanceof t?r.lte(n):g(r,u(n));if(p(r)&&p(n)){if(!r.equalBase(n))throw new Error(\"Cannot compare units with different base\");return r.value<=n.value}if(l(r)||l(n))return n>=r;if(h(r)||h(n))return a.deepMap2(r,n,g);if(c(r))return g(+r,n);if(c(n))return g(r,+n);if(m(r)||m(n))throw new TypeError(\"No ordering relation is defined for complex numbers\");throw new e.error.UnsupportedTypeError(\"smallereq\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.sqrt=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"sqrt\",arguments.length,1);if(a(r))return r>=0?Math.sqrt(r):c(new i(r,0));if(u(r)){var n=Math.sqrt(r.re*r.re+r.im*r.im);return r.im>=0?new i(.5*Math.sqrt(2*(n+r.re)),.5*Math.sqrt(2*(n-r.re))):new i(.5*Math.sqrt(2*(n+r.re)),-.5*Math.sqrt(2*(n-r.re)))}if(r instanceof t)return r.sqrt();if(f(r))return o.deepMap(r,c);if(s(r))return c(+r);throw new e.error.UnsupportedTypeError(\"sqrt\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.square=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"square\",arguments.length,1);if(a(r))return r*r;if(u(r))return e.multiply(r,r);if(r instanceof t)return r.times(r);if(f(r))return o.deepMap(r,c);if(s(r))return r*r;throw new e.error.UnsupportedTypeError(\"square\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=(n(11),n(12)),a=n(14),s=r.number.toNumber,u=r.number.toBigNumber,f=r[\"boolean\"].isBoolean,c=r.number.isNumber,l=i.isComplex,m=o.isUnit,p=a.isCollection;e.subtract=function h(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"subtract\",arguments.length,2);if(c(r)){if(c(n))return r-n;if(l(n))return new i(r-n.re,-n.im)}else if(l(r)){if(c(n))return new i(r.re-n,r.im);if(l(n))return new i(r.re-n.re,r.im-n.im)}if(r instanceof t)return c(n)?n=u(n):f(n)&&(n=new t(n?1:0)),n instanceof t?r.minus(n):h(s(r),n);if(n instanceof t)return c(r)?r=u(r):f(r)&&(r=new t(r?1:0)),r instanceof t?r.minus(n):h(r,s(n));if(m(r)&&m(n)){if(null==r.value)throw new Error(\"Parameter x contains a unit with undefined value\");if(null==n.value)throw new Error(\"Parameter y contains a unit with undefined value\");if(!r.equalBase(n))throw new Error(\"Units do not match\");var o=r.clone();return o.value-=n.value,o.fixPrefix=!1,o}if(p(r)||p(n))return a.deepMap2(r,n,h);if(f(r))return h(+r,n);if(f(n))return h(r,+n);throw new e.error.UnsupportedTypeError(\"subtract\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isUnit,l=a.isCollection;e.unary=function m(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"unary\",arguments.length,1);if(s(r))return-r;if(f(r))return new i(-r.re,-r.im);if(r instanceof t)return r.neg();if(c(r)){var n=r.clone();return n.value=-r.value,n}if(l(r))return a.deepMap(r,m);if(u(r))return-r;throw new e.error.UnsupportedTypeError(\"unary\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r.number.toNumber,f=r.number.toBigNumber,c=r[\"boolean\"].isBoolean,l=r.string.isString,m=i.isComplex,p=o.isUnit,h=a.isCollection;e.unequal=function g(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"unequal\",arguments.length,2);if(s(r)){if(s(n))return r!=n;if(m(n))return r!=n.re||0!=n.im}if(m(r)){if(s(n))return r.re!=n||0!=r.im;if(m(n))return r.re!=n.re||r.im!=n.im}if(r instanceof t)return s(n)?n=f(n):c(n)&&(n=new t(n?1:0)),n instanceof t?!r.eq(n):g(u(r),n);if(n instanceof t)return s(r)?r=f(r):c(r)&&(r=new t(r?1:0)),r instanceof t?!r.eq(n):g(r,u(n));if(p(r)&&p(n)){if(!r.equalBase(n))throw new Error(\"Cannot compare units with different base\");return r.value!=n.value}if(l(r)||l(n))return r!=n;if(h(r)||h(n))return a.deepMap2(r,n,g);if(c(r))return g(+r,n);if(c(n))return g(r,+n);throw new e.error.UnsupportedTypeError(\"unequal\",r,n)}}},function(e,r,n){e.exports=function(e){function r(e,r){for(var n,t,i,o=0,a=1,s=1,u=0;r;)t=Math.floor(e/r),i=e%r,n=o,o=a-t*o,a=n,n=s,s=u-t*s,u=n,e=r,r=i;return 0>e?[-e,-a,-u]:[e,e?a:0,u]}var t=n(112),i=n(111),o=t.number.toNumber,a=t.number.isNumber,s=t[\"boolean\"].isBoolean,u=t.number.isInteger;e.xgcd=function f(n,t){if(2==arguments.length){if(a(n)&&a(t)){if(!u(n)||!u(t))throw new Error(\"Parameters in function xgcd must be integer numbers\");return r(n,t)}if(n instanceof i)return f(o(n),t);if(t instanceof i)return f(n,o(t));if(s(n))return f(+n,t);if(s(t))return f(n,+t);throw new e.error.UnsupportedTypeError(\"xgcd\",n,t)}throw new SyntaxError(\"Function xgcd expects two arguments\")}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=o.isCollection,f=i.isComplex;e.arg=function c(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"arg\",arguments.length,1);if(a(n))return Math.atan2(0,n);if(f(n))return Math.atan2(n.im,n.re);if(u(n))return o.deepMap(n,c);if(s(n))return c(+n);if(n instanceof t)return c(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"arg\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.object,s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=o.isCollection,c=i.isComplex;e.conj=function l(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"conj\",arguments.length,1);return s(r)?r:r instanceof t?new t(r):c(r)?new i(r.re,-r.im):f(r)?o.deepMap(r,l):u(r)?+r:a.clone(r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.object,s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=o.isCollection,c=i.isComplex;e.re=function l(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"re\",arguments.length,1);return s(r)?r:r instanceof t?new t(r):c(r)?r.re:f(r)?o.deepMap(r,l):u(r)?+r:a.clone(r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=o.isCollection,f=i.isComplex;e.im=function c(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"im\",arguments.length,1);return a(r)?0:r instanceof t?new t(0):f(r)?r.im:u(r)?o.deepMap(r,c):s(r)?0:0}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(14),o=i.isCollection,a=r.number.isNumber,s=r.string.isString,u=r[\"boolean\"].isBoolean;\"function\"!=typeof t.prototype.clone&&(t.prototype.clone=function(){return new t(this)}),e.bignumber=function f(r){if(arguments.length>1)throw new e.error.ArgumentsError(\"bignumber\",arguments.length,0,1);if(r instanceof t||a(r)||s(r))return new t(r);if(u(r))return new t(+r);if(o(r))return i.deepMap(r,f);if(0==arguments.length)return new t(0);throw new e.error.UnsupportedTypeError(\"bignumber\",r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(14),o=i.isCollection,a=r.number.isNumber,s=r.string.isString;e[\"boolean\"]=function u(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"boolean\",arguments.length,0,1);if(\"true\"===r||r===!0)return!0;if(\"false\"===r||r===!1)return!1;if(r instanceof Boolean)return 1==r;if(a(r))return 0!==r;if(r instanceof t)return!r.isZero();if(s(r)){var n=r.toLowerCase();if(\"true\"===n)return!0;if(\"false\"===n)return!1;var f=Number(r);if(\"\"!=r&&!isNaN(f))return 0!==f}if(o(r))return i.deepMap(r,u);throw new SyntaxError(r.toString()+\" is no valid boolean\")}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=o.isCollection,s=r.number.isNumber,u=r.number.toNumber,f=r.string.isString,c=i.isComplex;e.complex=function l(){switch(arguments.length){case 0:return new i(0,0);case 1:var r=arguments[0];if(s(r))return new i(r,0);if(r instanceof t)return new i(u(r),0);if(c(r))return r.clone();if(f(r)){var n=i.parse(r);if(n)return n;throw new SyntaxError('String \"'+r+'\" is no valid complex number')}if(a(r))return o.deepMap(r,l);throw new TypeError(\"Two numbers or a single string expected in function complex\");case 2:var m=arguments[0],p=arguments[1];if(m instanceof t&&(m=u(m)),p instanceof t&&(p=u(p)),s(m)&&s(p))return new i(m,p);throw new TypeError(\"Two numbers or a single string expected in function complex\");default:throw new e.error.ArgumentsError(\"complex\",arguments.length,0,2)}}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(10),o=r.number.toNumber;e.index=function(){var e=new i,r=Array.prototype.slice.apply(arguments).map(function(e){return e instanceof t?o(e):Array.isArray(e)?e.map(function(e){return e instanceof t?o(e):e}):e});return i.apply(e,r),e}}},function(e,r,n){e.exports=function(e){var r=n(11);e.matrix=function(n){if(arguments.length>1)throw new e.error.ArgumentsError(\"matrix\",arguments.length,0,1);return new r(n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(14),o=i.isCollection,a=r.number.toNumber,s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=r.string.isString;e.number=function c(r){switch(arguments.length){case 0:return 0;case 1:if(o(r))return i.deepMap(r,c);if(r instanceof t)return a(r);if(f(r)){var n=Number(r);if(isNaN(n)&&(n=Number(r.valueOf())),isNaN(n))throw new SyntaxError(r.toString()+\" is no valid number\");return n}if(u(r))return r+0;if(s(r))return r;throw new e.error.UnsupportedTypeError(\"number\",r);default:throw new e.error.ArgumentsError(\"number\",arguments.length,0,1)}}}},function(e,r,n){e.exports=function(e){var r=n(5);e.parser=function(){return new r(e)}}},function(e){e.exports=function(e){e.select=function(r){return new e.chaining.Selector(r)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(14),i=r.number,o=r.number.isNumber,a=t.isCollection;e.string=function s(r){switch(arguments.length){case 0:return\"\";case 1:return o(r)?i.format(r):a(r)?t.deepMap(r,s):null===r?\"null\":r.toString();default:throw new e.error.ArgumentsError(\"string\",arguments.length,0,1)}}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(12),o=n(14),a=o.isCollection,s=r.number.toNumber,u=r.string.isString;e.unit=function f(r){switch(arguments.length){case 1:var n=arguments[0];if(n instanceof i)return n.clone();if(u(n)){if(i.isPlainUnit(n))return new i(null,n);var c=i.parse(n);if(c)return c;throw new SyntaxError('String \"'+n+'\" is no valid unit')}if(a(r))return o.deepMap(r,f);throw new TypeError(\"A string or a number and string expected in function unit\");case 2:return arguments[0]instanceof t?new i(s(arguments[0]),arguments[1]):new i(arguments[0],arguments[1]);default:throw new e.error.ArgumentsError(\"unit\",arguments.length,1,2)}}}},function(e,r,n){e.exports=function(e){function r(e,n,t,i){if(t>i){if(e.length!=n.length)throw new Error(\"Dimensions mismatch (\"+e.length+\" != \"+n.length+\")\");for(var o=[],a=0;a<e.length;a++)o[a]=r(e[a],n[a],t,i+1);return o}return e.concat(n)}var t=n(112),i=n(11),o=n(14),a=t.object,s=t.array,u=t.number.isNumber,f=t.number.isInteger,c=o.isCollection;e.concat=function(){var n,t,o=arguments.length,l=-1,m=!1,p=[];for(n=0;o>n;n++){var h=arguments[n];if(h instanceof i&&(m=!0),n==o-1&&u(h)){if(t=l,l=h,!f(l)||0>l)throw new TypeError(\"Dimension number must be a positive integer (dim = \"+l+\")\");if(n>0&&l>t)throw new RangeError(\"Dimension out of range (\"+l+\" > \"+t+\")\")}else{if(!c(h))throw new e.error.UnsupportedTypeError(\"concat\",h);var g=a.clone(h).valueOf(),d=s.size(h.valueOf());if(p[n]=g,t=l,l=d.length-1,n>0&&l!=t)throw new RangeError(\"Dimension mismatch (\"+t+\" != \"+l+\")\")}}if(0==p.length)throw new SyntaxError(\"At least one matrix expected\");for(var x=p.shift();p.length;)x=r(x,p.shift(),l,0);return m?new i(x):x}}},function(e,r,n){e.exports=function(e){function r(r,n,t){if(1==n)return o.clone(r[0][0]);if(2==n)return e.subtract(e.multiply(r[0][0],r[1][1]),e.multiply(r[1][0],r[0][1]));for(var i,a=1,s=0,u=0;n>u&&!(s>=t);u++){for(var f=u;0==r[f][s];)if(f++,f==n&&(f=u,s++,s==t))return o.deepEqual(r,e.eye(n).valueOf())?e.round(a,6):0;if(f!=u){for(i=0;t>i;i++){var c=r[f][i];r[f][i]=r[u][i],r[u][i]=c}a*=-1}var l=r[u][s];for(i=0;t>i;i++)r[u][i]=r[u][i]/l;a*=l;for(var m=0;n>m;m++)if(m!=u){var p=r[m][s];for(i=0;t>i;i++)r[m][i]=r[m][i]-r[u][i]*p}s++}return o.deepEqual(r,e.eye(n).valueOf())?e.round(a,6):0}var t=n(112),i=n(11),o=t.object,a=t.string;e.det=function(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"det\",arguments.length,1);var t;switch(n instanceof i?t=n.size():n instanceof Array?(n=new i(n),t=n.size()):t=[],t.length){case 0:return o.clone(n);case 1:if(1==t[0])return o.clone(n.valueOf()[0]);throw new RangeError(\"Matrix must be square (size: \"+a.format(t)+\")\");case 2:var s=t[0],u=t[1];if(s==u)return r(n.clone().valueOf(),s,u);throw new RangeError(\"Matrix must be square (size: \"+a.format(t)+\")\");default:throw new RangeError(\"Matrix must be two dimensional (size: \"+a.format(t)+\")\")}}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(11),i=r.object,o=r.array.isArray,a=r.number.isNumber,s=r.number.isInteger;e.diag=function(r,n){var u,f,c,l;if(1!=arguments.length&&2!=arguments.length)throw new e.error.ArgumentsError(\"diag\",arguments.length,1,2);if(n){if(!a(n)||!s(n))throw new TypeError(\"Second parameter in function diag must be an integer\")}else n=0;var m,p=n>0?n:0,h=0>n?-n:0;if(r instanceof t)m=!1;else{if(!o(r))throw new TypeError(\"First parameter in function diag must be a Matrix or Array\");r=new t(r),m=!0}var g=r.size();switch(g.length){case 1:f=r.valueOf();var d=new t,x=0;for(d.resize([f.length+h,f.length+p],x),u=d.valueOf(),l=f.length,c=0;l>c;c++)u[c+h][c+p]=i.clone(f[c]);return m?d.valueOf():d;case 2:for(f=[],u=r.valueOf(),l=Math.min(g[0]-h,g[1]-p),c=0;l>c;c++)f[c]=i.clone(u[c+h][c+p]);return m?f:new t(f);default:throw new RangeError(\"Matrix for function diag must be 2 dimensional\")}}}},function(e,r,n){e.exports=function(e,r){var t=n(112),i=n(111),o=n(11),a=n(14),s=t.number.toNumber,u=t.number.isNumber,f=t.number.isInteger,c=Array.isArray;e.eye=function(n){var t=a.argsToArray(arguments),l=n instanceof o?!0:c(n)?!1:\"matrix\"===r.matrix;if(0==t.length)return l?new o:[];if(1==t.length)t[1]=t[0];else if(t.length>2)throw new e.error.ArgumentsError(\"eye\",t.length,0,2);var m=t[0]instanceof i,p=t[0],h=t[1];if(p instanceof i&&(p=s(p)),h instanceof i&&(h=s(h)),!u(p)||!f(p)||1>p)throw new Error(\"Parameters in function eye must be positive integers\");if(!u(h)||!f(h)||1>h)throw new Error(\"Parameters in function eye must be positive integers\");var g=new o,d=m?new i(1):1,x=m?new i(0):0;g.resize(t.map(s),x);for(var w=e.min(t),v=g.valueOf(),y=0;w>y;y++)v[y][y]=d;return l?g:g.valueOf()}}},function(e,r,n){e.exports=function(e){function r(r,n,t){var i,o,a,s,u;if(1==n){if(s=r[0][0],0==s)throw Error(\"Cannot calculate inverse, determinant is zero\");return[[e.divide(1,s)]]}if(2==n){var f=e.det(r);if(0==f)throw Error(\"Cannot calculate inverse, determinant is zero\");return[[e.divide(r[1][1],f),e.divide(e.unary(r[0][1]),f)],[e.divide(e.unary(r[1][0]),f),e.divide(r[0][0],f)]]}var c=r.concat();for(i=0;n>i;i++)c[i]=c[i].concat();for(var l=e.eye(n).valueOf(),m=0;t>m;m++){for(i=m;n>i&&0==c[i][m];)i++;if(i==n||0==c[i][m])throw Error(\"Cannot calculate inverse, determinant is zero\");i!=m&&(u=c[m],c[m]=c[i],c[i]=u,u=l[m],l[m]=l[i],l[i]=u);var p=c[m],h=l[m];for(i=0;n>i;i++){var g=c[i],d=l[i];if(i!=m){if(0!=g[m]){for(a=e.divide(e.unary(g[m]),p[m]),o=m;t>o;o++)g[o]=e.add(g[o],e.multiply(a,p[o]));for(o=0;t>o;o++)d[o]=e.add(d[o],e.multiply(a,h[o]))}}else{for(a=p[m],o=m;t>o;o++)g[o]=e.divide(g[o],a);for(o=0;t>o;o++)d[o]=e.divide(d[o],a)}}}return l}{var t=n(127),i=n(11);n(14)}e.inv=function(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"inv\",arguments.length,1);var o=e.size(n).valueOf();switch(o.length){case 0:return e.divide(1,n);case 1:if(1==o[0])return n instanceof i?new i([e.divide(1,n.valueOf()[0])]):[e.divide(1,n[0])];throw new RangeError(\"Matrix must be square (size: \"+t.format(o)+\")\");case 2:var a=o[0],s=o[1];if(a==s)return n instanceof i?new i(r(n.valueOf(),a,s)):r(n,a,s);throw new RangeError(\"Matrix must be square (size: \"+t.format(o)+\")\");default:throw new RangeError(\"Matrix must be two dimensional (size: \"+t.format(o)+\")\")}}}},function(e,r,n){e.exports=function(e,r){var t=n(112),i=n(111),o=n(11),a=n(14),s=t.array,u=t.number.toNumber,f=Array.isArray;e.ones=function(e){var n=a.argsToArray(arguments),t=e instanceof o?!0:f(e)?!1:\"matrix\"===r.matrix;if(0==n.length)return t?new o:[];var c=[],l=n[0]instanceof i?new i(1):1;return c=s.resize(c,n.map(u),l),t?new o(c):c}}},function(e,r,n){e.exports=function(e,r){function t(e,r,n){var t=[],i=e;if(n>0)for(;r>i;)t.push(i),i+=n;else if(0>n)for(;i>r;)t.push(i),i+=n;return t}function i(e,r,n){var t=[],i=e;if(n>0)for(;r>=i;)t.push(i),i+=n;else if(0>n)for(;i>=r;)t.push(i),i+=n;return t}function o(e,r,n){var t=[],i=e.clone(),o=new f(0);if(n.gt(o))for(;i.lt(r);)t.push(i),i=i.plus(n);else if(n.lt(o))for(;i.gt(r);)t.push(i),i=i.plus(n);return t}function a(e,r,n){var t=[],i=e.clone(),o=new f(0);if(n.gt(o))for(;i.lte(r);)t.push(i),i=i.plus(n);else if(n.lt(o))for(;i.gte(r);)t.push(i),i=i.plus(n);return t}function s(e){var n=e.split(\":\"),t=null;if(\"bignumber\"===r.number)try{t=n.map(function(e){return new f(e)})}catch(i){return null}else{t=n.map(function(e){return Number(e)});var o=t.some(function(e){return isNaN(e)});if(o)return null}switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}var u=n(112),f=n(111),c=n(11),l=(n(14),u[\"boolean\"].isBoolean),m=u.string.isString,p=u.number.isNumber,h=u.number.toNumber,g=u.number.toBigNumber;e.range=function(){var n,u,d,x=Array.prototype.slice.call(arguments),w=!1;switch(l(x[x.length-1])&&(w=x.pop()?!0:!1),x.length){case 1:if(!m(x[0]))throw new TypeError(\"Two or three numbers or a single string expected in function range\");var v=s(x[0]);if(!v)throw new SyntaxError('String \"'+x[0]+'\" is no valid range');n=v.start,u=v.end,d=v.step;break;case 2:n=x[0],u=x[1],d=1;break;case 3:n=x[0],u=x[1],d=x[2];break;case 4:throw new TypeError(\"Parameter includeEnd must be a boolean\");default:throw new e.error.ArgumentsError(\"range\",arguments.length,2,4)}if(!(p(n)||n instanceof f))throw new TypeError(\"Parameter start must be a number\");if(!(p(u)||u instanceof f))throw new TypeError(\"Parameter end must be a number\");if(!(p(d)||d instanceof f))throw new TypeError(\"Parameter step must be a number\");if(n instanceof f||u instanceof f||d instanceof f){var y=!0;n instanceof f||(n=g(n)),u instanceof f||(u=g(u)),d instanceof f||(d=g(d)),n instanceof f&&u instanceof f&&d instanceof f||(y=!1,n=h(n),u=h(u),d=h(d))}var b=y?w?a:o:w?i:t,E=b(n,u,d);return\"array\"===r.matrix?E:new c(E)}}},function(e,r,n){e.exports=function(e,r){function t(e,r,n){if(void 0!==n){if(!c(n)||1!==n.length)throw new TypeError(\"Single character expected as defaultValue\")}else n=\" \";if(1!==r.length)throw new Error(\"Dimension mismatch: (\"+r.length+\" != 1)\");var t=r[0];if(!m(t)||!p(t))throw new TypeError(\"Invalid size, must contain positive integers (size: \"+f.format(r)+\")\");if(e.length>t)return e.substring(0,t);if(e.length<t){for(var i=e,o=0,a=t-e.length;a>o;o++)i+=n;return i}return e}var i=n(112),o=n(111),a=n(11),s=i.array,u=i.object.clone,f=i.string,c=i.string.isString,l=i.number.toNumber,m=i.number.isNumber,p=i.number.isInteger,h=s.isArray;e.resize=function(n,i,f){if(2!=arguments.length&&3!=arguments.length)throw new e.error.ArgumentsError(\"resize\",arguments.length,2,3);var m=n instanceof a?!0:h(n)?!1:\"array\"!==r.matrix;if(n instanceof a&&(n=n.valueOf()),i instanceof a&&(i=i.valueOf()),i.length&&i[0]instanceof o&&(i=i.map(l)),c(n))return t(n,i,f);if(0==i.length){for(;h(n);)n=n[0];return u(n)}h(n)||(n=[n]),n=u(n);var p=s.resize(n,i,f);return m?new a(p):p}}},function(e,r,n){e.exports=function(e,r){var t=n(112),i=n(111),o=n(8),a=n(12),s=n(11),u=t.array,f=t.number.isNumber,c=t[\"boolean\"].isBoolean,l=t.string.isString,m=o.isComplex,p=a.isUnit;e.size=function(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"size\",arguments.length,1);var t=\"array\"===r.matrix;if(f(n)||m(n)||p(n)||c(n)||null==n||n instanceof i)return t?[]:new s([]);if(l(n))return t?[n.length]:new s([n.length]);if(Array.isArray(n))return u.size(n);if(n instanceof s)return new s(n.size());throw new e.error.UnsupportedTypeError(\"size\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(11),i=r.object,o=r.array,a=Array.isArray;e.squeeze=function(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"squeeze\",arguments.length,1);if(a(r))return o.squeeze(i.clone(r));if(r instanceof t){var n=o.squeeze(r.toArray());return a(n)?new t(n):n}return i.clone(r)}}},function(e,r,n){e.exports=function(e){function r(r,n){var i,o;if(l(r))return i=new s(r),o=i.subset(n),o.valueOf();if(r instanceof s)return r.subset(n);if(c(r))return t(r,n);throw new e.error.UnsupportedTypeError(\"subset\",r)}function t(e,r){if(!(r instanceof u))throw new TypeError(\"Index expected\");if(1!=r.size().length)throw new RangeError(\"Dimension mismatch (\"+r.size().length+\" != 1)\");var n=r.range(0),t=\"\",i=e.length;return n.forEach(function(r){f.validateIndex(r,i),t+=e.charAt(r)}),t}function i(r,n,t,i){var a;if(l(r))return a=new s(e.clone(r)),a.subset(n,t,i),a.valueOf();if(r instanceof s)return r.clone().subset(n,t,i);if(c(r))return o(r,n,t,i);throw new e.error.UnsupportedTypeError(\"subset\",r)}function o(e,r,n,t){if(!(r instanceof u))throw new TypeError(\"Index expected\");if(1!=r.size().length)throw new RangeError(\"Dimension mismatch (\"+r.size().length+\" != 1)\");if(void 0!==t){if(!c(t)||1!==t.length)throw new TypeError(\"Single character expected as defaultValue\")}else t=\" \";var i=r.range(0),o=i.size()[0];if(o!=n.length)throw new RangeError(\"Dimension mismatch (\"+i.size()[0]+\" != \"+n.length+\")\");for(var a=e.length,s=[],l=0;a>l;l++)s[l]=e.charAt(l);if(i.forEach(function(e,r){f.validateIndex(e),s[e]=n.charAt(r)}),s.length>a)for(l=a-1,o=s.length;o>l;l++)s[l]||(s[l]=t);return s.join(\"\")}var a=n(112),s=n(11),u=n(10),f=a.array,c=a.string.isString,l=Array.isArray;e.subset=function(){switch(arguments.length){case 2:return r(arguments[0],arguments[1]);case 3:case 4:return i(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw new e.error.ArgumentsError(\"subset\",arguments.length,2,4)}}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(11),i=(n(14),r.object),o=r.string;e.transpose=function(r){if(1!=arguments.length)throw new e.error.ArgumentsError(\"transpose\",arguments.length,1);var n=e.size(r).valueOf();switch(n.length){case 0:return i.clone(r);case 1:return i.clone(r);case 2:var a,s=n[1],u=n[0],f=r instanceof t,c=r.valueOf(),l=[],m=i.clone;if(0===s)throw new RangeError(\"Cannot transpose a 2D matrix with no rows(size: \"+o.format(n)+\")\");for(var p=0;s>p;p++){a=l[p]=[];for(var h=0;u>h;h++)a[h]=m(c[h][p])}return f?new t(l):l;default:throw new RangeError(\"Matrix must be two dimensional (size: \"+o.format(n)+\")\")}}}},function(e,r,n){e.exports=function(e,r){var t=n(112),i=n(111),o=n(11),a=n(14),s=t.array,u=t.number.toNumber,f=Array.isArray;e.zeros=function(e){var n=a.argsToArray(arguments),t=e instanceof o?!0:f(e)?!1:\"matrix\"===r.matrix;if(0==n.length)return t?new o:[];var c=[],l=n[0]instanceof i?new i(0):0;return c=s.resize(c,n.map(u),l),t?new o(c):c}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(14),o=r.number.isNumber,a=r[\"boolean\"].isBoolean,s=r.number.isInteger,u=i.isCollection;e.factorial=function c(r){var n,l;if(1!=arguments.length)throw new e.error.ArgumentsError(\"factorial\",arguments.length,1);if(o(r)){if(!s(r)||0>r)throw new TypeError(\"Positive integer value expected in function factorial\");for(n=r-1,l=r;n>1;)l*=n,n--;return 0==l&&(l=1),l}if(r instanceof t){if(!f(r))throw new TypeError(\"Positive integer value expected in function factorial\");var m=new t(1);for(n=r.minus(m),l=r;n.gt(m);)l=l.times(n),n=n.minus(m);return l.equals(0)&&(l=m),l}if(a(r))return 1;if(u(r))return i.deepMap(r,c);throw new e.error.UnsupportedTypeError(\"factorial\",r)};var f=function(e){return e.round().equals(e)&&e.gte(0)}}},function(e,r,n){e.exports=function(e,r){var t=n(11),i=(n(14),{uniform:function(){return Math.random},normal:function(){return function(){for(var e,r,n=-1;0>n||n>1;)e=Math.random(),r=Math.random(),n=1/6*Math.pow(-2*Math.log(e),.5)*Math.cos(2*Math.PI*r)+.5;return n}}});e.distribution=function(n){if(!i.hasOwnProperty(n))throw new Error(\"unknown distribution \"+n);var o=Array.prototype.slice.call(arguments,1),a=i[n].apply(this,o);return function(n){var i={random:function(n,i,a){var u,f,c;if(arguments.length>3)throw new e.error.ArgumentsError(\"random\",arguments.length,0,3);if(1===arguments.length?Array.isArray(n)?u=n:c=n:2===arguments.length?Array.isArray(n)?u=n:(f=n,c=i):(u=n,f=i,c=a),void 0===c&&(c=1),void 0===f&&(f=0),void 0!==u){var l=s(u,f,c,o);return\"array\"===r.matrix?l:new t(l)}return o(f,c)},randomInt:function(n,i,o){var u,f,c;if(arguments.length>3||arguments.length<1)throw new e.error.ArgumentsError(\"randomInt\",arguments.length,1,3);if(1===arguments.length?c=n:2===arguments.length?\"[object Array]\"===Object.prototype.toString.call(n)?u=n:(f=n,c=i):(u=n,f=i,c=o),void 0===f&&(f=0),void 0!==u){var l=s(u,f,c,a);return\"array\"===r.matrix?l:new t(l)}return a(f,c)},pickRandom:function(r){if(1!==arguments.length)throw new e.error.ArgumentsError(\"pickRandom\",arguments.length,1);if(!Array.isArray(r))throw new e.error.UnsupportedTypeError(\"pickRandom\",r);return r[Math.floor(Math.random()*r.length)]}},o=function(e,r){return e+n()*(r-e)},a=function(e,r){return Math.floor(e+n()*(r-e))},s=function(e,r,n,t){var i,o,a=[];if(e=e.slice(0),e.length>1)for(o=0,i=e.shift();i>o;o++)a.push(s(e,r,n,t));else for(o=0,i=e.shift();i>o;o++)a.push(t(r,n));return a};return i}(a)};var o=e.distribution(\"uniform\");e.random=o.random,e.randomInt=o.randomInt,e.pickRandom=o.pickRandom}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=r.number.isNumber,o=r.number.isInteger,a=r.number.toBigNumber;e.permutations=function(r,n){var u,f,c=arguments.length;if(c>2)throw new e.error.ArgumentsError(\"permutations\",arguments.length,2);if(i(r)){if(!o(r)||0>r)throw new TypeError(\"Positive integer value expected in function permutations\");if(1==c)return e.factorial(r);if(2==c&&i(n)){if(!o(n)||0>n)throw new TypeError(\"Positive integer value expected in function permutations\");if(n>r)throw new TypeError(\"second argument k must be less than or equal to first argument n\");for(u=1,f=r-n+1;r>=f;f++)u*=f;return u}}if(r instanceof t){if(void 0===n&&s(r))return e.factorial(r);if(n=a(n),!(n instanceof t&&s(r)&&s(n)))throw new TypeError(\"Positive integer value expected in function permutations\");if(n.gt(r))throw new TypeError(\"second argument k must be less than or equal to first argument n\");for(u=new t(1),f=r.minus(n).plus(1);f.lte(r);f=f.plus(1))u=u.times(f);return u}throw new e.error.UnsupportedTypeError(\"permutations\",r)};var s=function(e){return e.round().equals(e)&&e.gte(0)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=(n(14),r.number.isNumber),o=r.number.isInteger,a=r.number.toBigNumber;e.combinations=function(r,n){var u,f,c,l,m=arguments.length;if(2!=m)throw new e.error.ArgumentsError(\"combinations\",arguments.length,2);if(i(r)){if(!o(r)||0>r)throw new TypeError(\"Positive integer value enpected in function combinations\");if(n>r)throw new TypeError(\"k must be less than or equal to n\");for(u=Math.max(n,r-n),f=1,c=1;r-u>=c;c++)f=f*(u+c)/c;return f}if(r instanceof t){if(n=a(n),!(n instanceof t&&s(r)&&s(n)))throw new TypeError(\"Positive integer value expected in function combinations\");if(n.gt(r))throw new TypeError(\"k must be less than n in function combinations\");for(u=r.minus(n),n.lt(u)&&(u=n),f=new t(1),c=new t(1),l=r.minus(u);c.lte(l);c=c.plus(1))f=f.times(u.plus(c)).dividedBy(c);return f}throw new e.error.UnsupportedTypeError(\"combinations\",r)};var s=function(e){return e.round().equals(e)&&e.gte(0)}}},function(e,r,n){e.exports=function(e){function r(r,n){return e.smaller(r,n)?r:n}function t(r){var n=void 0;if(i.deepForEach(r,function(r){(void 0===n||e.smaller(r,n))&&(n=r)}),void 0===n)throw new Error(\"Cannot calculate min of an empty array\");return n}var i=(n(11),n(14)),o=i.isCollection;e.min=function(e){if(0==arguments.length)throw new SyntaxError(\"Function min requires one or more parameters (0 provided)\");if(o(e)){if(1==arguments.length)return t(e);if(2==arguments.length)return i.reduce(arguments[0],arguments[1],r);throw new SyntaxError(\"Wrong number of parameters\")}return t(arguments)}}},function(e,r,n){e.exports=function(e){function r(r,n){return e.larger(r,n)?r:n}function t(r){var n=void 0;if(i.deepForEach(r,function(r){(void 0===n||e.larger(r,n))&&(n=r)}),void 0===n)throw new Error(\"Cannot calculate max of an empty array\");return n}var i=(n(11),n(14)),o=i.isCollection;e.max=function(e){if(0==arguments.length)throw new SyntaxError(\"Function max requires one or more parameters (0 provided)\");if(o(e)){if(1==arguments.length)return t(e);if(2==arguments.length)return i.reduce(arguments[0],arguments[1],r);throw new SyntaxError(\"Wrong number of parameters\")}return t(arguments)}}},function(e,r,n){e.exports=function(e){function r(r,n){var t;return t=i.reduce(r,n,e.add),e.divide(t,a(r)[n])}function t(r){var n=0,t=0;if(i.deepForEach(r,function(r){n=e.add(n,r),t++}),0===t)throw new Error(\"Cannot calculate mean of an empty array\");\nreturn e.divide(n,t)}var i=(n(11),n(14)),o=i.isCollection,a=n(142).size;e.mean=function(e){if(0==arguments.length)throw new SyntaxError(\"Function mean requires one or more parameters (0 provided)\");if(o(e)){if(1==arguments.length)return t(e);if(2==arguments.length)return r(arguments[0],arguments[1]);throw new SyntaxError(\"Wrong number of parameters\")}return t(arguments)}}},function(e,r,n){e.exports=function(e){function r(r){var n=u(r);n.sort(e.compare);var o=n.length;if(0==o)throw new Error(\"Cannot calculate median of an empty array\");if(o%2==0){var s=n[o/2-1],f=n[o/2];if(!(a(s)||s instanceof i||s instanceof t))throw new e.error.UnsupportedTypeError(\"median\",s);if(!(a(f)||f instanceof i||f instanceof t))throw new e.error.UnsupportedTypeError(\"median\",f);return e.divide(e.add(s,f),2)}var c=n[(o-1)/2];if(!(a(c)||c instanceof i||c instanceof t))throw new e.error.UnsupportedTypeError(\"median\",c);return c}var t=(n(11),n(12)),i=n(111),o=n(14),a=n(143).isNumber,s=o.isCollection,u=n(142).flatten;e.median=function(e){if(0==arguments.length)throw new SyntaxError(\"Function median requires one or more parameters (0 provided)\");if(s(e)){if(1==arguments.length)return r(e.valueOf());throw 2==arguments.length?new Error(\"median(A, dim) is not yet supported\"):new SyntaxError(\"Wrong number of parameters\")}return r(Array.prototype.slice.call(arguments))}}},function(e,r,n){e.exports=function(e){function r(r){var n=void 0;if(t.deepForEach(r,function(r){n=void 0===n?r:e.multiply(n,r)}),void 0===n)throw new Error(\"Cannot calculate prod of an empty array\");return n}var t=(n(11),n(14)),i=t.isCollection;e.prod=function(e){if(0==arguments.length)throw new SyntaxError(\"Function prod requires one or more parameters (0 provided)\");if(i(e)){if(1==arguments.length)return r(e);throw 2==arguments.length?new Error(\"prod(A, dim) is not yet supported\"):new SyntaxError(\"Wrong number of parameters\")}return r(arguments)}}},function(e){e.exports=function(e){e.std=function(){if(0==arguments.length)throw new SyntaxError(\"Function std requires one or more parameters (0 provided)\");var r=e[\"var\"].apply(null,arguments);return e.sqrt(r)}}},function(e,r,n){e.exports=function(e){function r(r){var n=void 0;if(t.deepForEach(r,function(r){n=void 0===n?r:e.add(n,r)}),void 0===n)throw new Error(\"Cannot calculate sum of an empty array\");return n}var t=(n(11),n(14)),i=t.isCollection;e.sum=function(e){if(0==arguments.length)throw new SyntaxError(\"Function sum requires one or more parameters (0 provided)\");if(i(e)){if(1==arguments.length)return r(e);throw 2==arguments.length?new Error(\"sum(A, dim) is not yet supported\"):new SyntaxError(\"Wrong number of parameters\")}return r(arguments)}}},function(e,r,n){e.exports=function(e){function r(r,n){var o=0,a=0;if(i.deepForEach(r,function(r){o=e.add(o,r),a++}),0===a)throw new Error(\"Cannot calculate var of an empty array\");var s=e.divide(o,a);switch(o=0,i.deepForEach(r,function(r){var n=e.subtract(r,s);o=e.add(o,e.multiply(n,n))}),n){case\"uncorrected\":return e.divide(o,a);case\"biased\":return e.divide(o,a+1);case\"unbiased\":var u=o instanceof t?new t(0):0;return 1==a?u:e.divide(o,a-1);default:throw new Error('Unknown normalization \"'+n+'\". Choose \"unbiased\" (default), \"uncorrected\", or \"biased\".')}}var t=(n(11),n(111)),i=n(14),o=i.isCollection,a=n(127).isString,s=\"unbiased\";e[\"var\"]=function(e,n){if(0==arguments.length)throw new SyntaxError(\"Function var requires one or more parameters (0 provided)\");if(o(e)){if(1==arguments.length)return r(e,s);if(2==arguments.length){if(!a(n))throw new Error(\"String expected for parameter normalization\");return r(e,n)}throw new SyntaxError(\"Wrong number of parameters\")}return r(arguments,s)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.acos=function c(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"acos\",arguments.length,1);if(a(n))return n>=-1&&1>=n?Math.acos(n):c(new i(n,0));if(u(n)){var l=new i(n.im*n.im-n.re*n.re+1,-2*n.re*n.im),m=e.sqrt(l),p=new i(m.re-n.im,m.im+n.re),h=e.log(p);return new i(1.5707963267948966-h.im,h.re)}if(f(n))return o.deepMap(n,c);if(s(n))return Math.acos(n);if(n instanceof t)return c(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"acos\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.asin=function c(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"asin\",arguments.length,1);if(a(n))return n>=-1&&1>=n?Math.asin(n):c(new i(n,0));if(u(n)){var l=n.re,m=n.im,p=new i(m*m-l*l+1,-2*l*m),h=e.sqrt(p),g=new i(h.re-m,h.im+l),d=e.log(g);return new i(d.im,-d.re)}if(f(n))return o.deepMap(n,c);if(s(n))return Math.asin(n);if(n instanceof t)return c(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"asin\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.isNumber,s=r[\"boolean\"].isBoolean,u=i.isComplex,f=o.isCollection;e.atan=function c(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"atan\",arguments.length,1);if(a(n))return Math.atan(n);if(u(n)){var l=n.re,m=n.im,p=l*l+(1-m)*(1-m),h=new i((1-m*m-l*l)/p,-2*l/p),g=e.log(h);return new i(-.5*g.im,.5*g.re)}if(f(n))return o.deepMap(n,c);if(s(n))return Math.atan(n);if(n instanceof t)return c(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"atan\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(14),a=r.number.toNumber,s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=(i.isComplex,o.isCollection);e.atan2=function c(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"atan2\",arguments.length,2);if(s(r)&&s(n))return Math.atan2(r,n);if(f(r)||f(n))return o.deepMap2(r,n,c);if(u(r))return c(+r,n);if(u(n))return c(r,+n);if(r instanceof t)return c(a(r),n);if(n instanceof t)return c(r,a(n));throw new e.error.UnsupportedTypeError(\"atan2\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isUnit,l=a.isCollection;e.cos=function m(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"cos\",arguments.length,1);if(s(n))return Math.cos(n);if(f(n))return new i(.5*Math.cos(n.re)*(Math.exp(-n.im)+Math.exp(n.im)),.5*Math.sin(n.re)*(Math.exp(-n.im)-Math.exp(n.im)));if(c(n)){if(!n.hasBase(o.BASE_UNITS.ANGLE))throw new TypeError(\"Unit in function cos is no angle\");return Math.cos(n.value)}if(l(n))return a.deepMap(n,m);if(u(n))return Math.cos(n);if(n instanceof t)return m(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"cos\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isUnit,l=a.isCollection;e.cot=function m(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"cot\",arguments.length,1);if(s(n))return 1/Math.tan(n);if(f(n)){var p=Math.exp(-4*n.im)-2*Math.exp(-2*n.im)*Math.cos(2*n.re)+1;return new i(2*Math.exp(-2*n.im)*Math.sin(2*n.re)/p,(Math.exp(-4*n.im)-1)/p)}if(c(n)){if(!n.hasBase(o.BASE_UNITS.ANGLE))throw new TypeError(\"Unit in function cot is no angle\");return 1/Math.tan(n.value)}if(l(n))return a.deepMap(n,m);if(u(n))return m(+n);if(n instanceof t)return m(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"cot\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isUnit,l=a.isCollection;e.csc=function m(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"csc\",arguments.length,1);if(s(n))return 1/Math.sin(n);if(f(n)){var p=.25*(Math.exp(-2*n.im)+Math.exp(2*n.im))-.5*Math.cos(2*n.re);return new i(.5*Math.sin(n.re)*(Math.exp(-n.im)+Math.exp(n.im))/p,.5*Math.cos(n.re)*(Math.exp(-n.im)-Math.exp(n.im))/p)}if(c(n)){if(!n.hasBase(o.BASE_UNITS.ANGLE))throw new TypeError(\"Unit in function csc is no angle\");return 1/Math.sin(n.value)}if(l(n))return a.deepMap(n,m);if(u(n))return m(+n);if(n instanceof t)return m(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"csc\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isUnit,l=a.isCollection;e.sec=function m(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"sec\",arguments.length,1);if(s(n))return 1/Math.cos(n);if(f(n)){var p=.25*(Math.exp(-2*n.im)+Math.exp(2*n.im))+.5*Math.cos(2*n.re);return new i(.5*Math.cos(n.re)*(Math.exp(-n.im)+Math.exp(n.im))/p,.5*Math.sin(n.re)*(Math.exp(n.im)-Math.exp(-n.im))/p)}if(c(n)){if(!n.hasBase(o.BASE_UNITS.ANGLE))throw new TypeError(\"Unit in function sec is no angle\");return 1/Math.cos(n.value)}if(l(n))return a.deepMap(n,m);if(u(n))return m(+n);if(n instanceof t)return m(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"sec\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isUnit,l=a.isCollection;e.sin=function m(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"sin\",arguments.length,1);if(s(n))return Math.sin(n);if(f(n))return new i(.5*Math.sin(n.re)*(Math.exp(-n.im)+Math.exp(n.im)),.5*Math.cos(n.re)*(Math.exp(n.im)-Math.exp(-n.im)));if(c(n)){if(!n.hasBase(o.BASE_UNITS.ANGLE))throw new TypeError(\"Unit in function sin is no angle\");return Math.sin(n.value)}if(l(n))return a.deepMap(n,m);if(u(n))return Math.sin(n);if(n instanceof t)return m(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"sin\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(111),i=n(8),o=n(12),a=n(14),s=r.number.isNumber,u=r[\"boolean\"].isBoolean,f=i.isComplex,c=o.isUnit,l=a.isCollection;e.tan=function m(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"tan\",arguments.length,1);if(s(n))return Math.tan(n);if(f(n)){var p=Math.exp(-4*n.im)+2*Math.exp(-2*n.im)*Math.cos(2*n.re)+1;return new i(2*Math.exp(-2*n.im)*Math.sin(2*n.re)/p,(1-Math.exp(-4*n.im))/p)}if(c(n)){if(!n.hasBase(o.BASE_UNITS.ANGLE))throw new TypeError(\"Unit in function tan is no angle\");return Math.tan(n.value)}if(l(n))return a.deepMap(n,m);if(u(n))return Math.tan(n);if(n instanceof t)return m(r.number.toNumber(n));throw new e.error.UnsupportedTypeError(\"tan\",n)}}},function(e,r,n){e.exports=function(e){var r=n(112),t=n(12),i=n(14),o=r.string.isString,a=t.isUnit,s=i.isCollection;e.to=function u(r,n){if(2!=arguments.length)throw new e.error.ArgumentsError(\"to\",arguments.length,2);if(a(r)&&(a(n)||o(n)))return r.to(n);if(s(r)||s(n))return i.deepMap2(r,n,u);throw new e.error.UnsupportedTypeError(\"to\",r,n)}}},function(e,r,n){e.exports=function(e){var r=n(3);e.clone=function(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"clone\",arguments.length,1);return r.clone(n)}}},function(e,r,n){e.exports=function(e){var r=n(127);e.format=function(n,t){var i=arguments.length;if(1!==i&&2!==i)throw new e.error.ArgumentsError(\"format\",i,1,2);return r.format(n,t)}}},function(e){e.exports=function(e){e.ifElse=function(r,n,t){if(3!=arguments.length)throw new e.error.ArgumentsError(\"ifElse\",arguments.length,3);return r?n:t}}},function(e,r,n){e.exports=function(e){function r(r,n,t){(t.override||void 0===e[r])&&(e[r]=t.wrap&&\"function\"==typeof n?function(){for(var r=[],t=0,i=arguments.length;i>t;t++)r[t]=arguments[t].valueOf();return n.apply(e,r)}:n,e.chaining.Selector.createProxy(r,n))}function t(e){return\"function\"==typeof e||s(e)||u(e)||f(e)||c(e)}var i=n(112),o=n(8),a=n(12),s=i.number.isNumber,u=i.string.isString,f=o.isComplex,c=a.isUnit;e[\"import\"]=function l(o,a){var s=arguments.length;if(1!=s&&2!=s)throw new e.error.ArgumentsError(\"import\",s,1,2);var f,c={override:!1,wrap:!0};if(a&&a instanceof Object&&i.object.extend(c,a),u(o)){var m=n(144)(o);l(m)}else{if(\"object\"!=typeof o)throw new TypeError(\"Object or module name expected\");for(f in o)if(o.hasOwnProperty(f)){var p=o[f];t(p)?r(f,p,c):l(p)}}}}},function(e,r,n){e.exports=function(e){function r(e,r){var n=[],t=function(i,o){return Array.isArray(i)?i.map(function(e,r){return n[o]=r,t(e,o+1)}):r(i,n,e)};return t(e,0)}var t=n(11).isMatrix;e.map=function(n,i){if(2!=arguments.length)throw new e.error.ArgumentsError(\"map\",arguments.length,2);if(Array.isArray(n))return r(n,i);if(t(n))return n.map(i);throw new e.error.UnsupportedTypeError(\"map\",n)}}},function(e,r,n){e.exports=function(e){var r=n(127),t=r.isString;e.print=function(r,n,i){var o=arguments.length;if(2!=o&&3!=o)throw new e.error.ArgumentsError(\"print\",o,2,3);if(!t(r))throw new TypeError(\"String expected as first parameter in function format\");if(!(n instanceof Object))throw new TypeError(\"Object expected as second parameter in function format\");return r.replace(/\\$([\\w\\.]+)/g,function(r,o){for(var a=o.split(\".\"),s=n[a.shift()];a.length&&void 0!==s;){var u=a.shift();s=u?s[u]:s+\".\"}return void 0!==s?t(s)?s:e.format(s,i):r})}}},function(e,r,n){e.exports=function(e){var r=n(126),t=n(111),i=n(8),o=n(11),a=n(12),s=n(10),u=n(9),f=n(13);e[\"typeof\"]=function(n){if(1!=arguments.length)throw new e.error.ArgumentsError(\"typeof\",arguments.length,1);var c=r.type(n);if(\"object\"===c){if(n instanceof i)return\"complex\";if(n instanceof t)return\"bignumber\";if(n instanceof o)return\"matrix\";if(n instanceof a)return\"unit\";if(n instanceof s)return\"index\";if(n instanceof u)return\"range\";if(n instanceof f)return\"help\";if(n instanceof e.chaining.Selector)return\"selector\"}return c}}},function(e,r,n){e.exports=function(e){function r(e,r){var n=[],t=function(i,o){Array.isArray(i)?i.forEach(function(e,r){n[o]=r,t(e,o+1)}):r(i,n,e)};t(e,0)}var t=n(11).isMatrix;e.forEach=function(n,i){if(2!=arguments.length)throw new e.error.ArgumentsError(\"forEach\",arguments.length,2);if(Array.isArray(n))return r(n,i);if(t(n))return n.forEach(i);throw new e.error.UnsupportedTypeError(\"forEach\",n)}}},function(e,r,n){var t;!function(i){\"use strict\";function o(e,r){var n,t,i,u,f,c,p=this;if(!(p instanceof o))return new o(e,r);if(e instanceof o){if(A=0,r===n)return p.s=e.s,p.e=e.e,void(p.c=(e=e.c)?e.slice():e);e+=\"\"}if(\"string\"!=typeof e&&(e=(i=\"number\"==typeof e||\"[object Number]\"==Object.prototype.toString.call(e))&&0===e&&0>1/e?\"-0\":e+\"\"),c=e,r===n&&T.test(e))p.s=\"-\"==e.charAt(0)?(e=e.slice(1),-1):1;else{if(10==r)return l(e,g,d);if(e=O.call(e).replace(/^\\+(?!-)/,\"\"),p.s=\"-\"==e.charAt(0)?(e=e.replace(/^-(?!-)/,\"\"),-1):1,null!=r?r!=(0|r)&&b||(m=!(r>=2&&65>r))?(a(r,2),f=T.test(e)):(u=\"[\"+M.slice(0,r=0|r)+\"]+\",e=e.replace(/\\.$/,\"\").replace(/^\\./,\"0.\"),(f=new RegExp(\"^\"+u+\"(?:\\\\.\"+u+\")?$\",37>r?\"i\":\"\").test(e))?(i&&(e.replace(/^0\\.0*|\\./,\"\").length>15&&a(c,0),i=!i),e=s(e,10,r,p.s)):\"Infinity\"!=e&&\"NaN\"!=e&&(a(c,1,r),e=\"NaN\")):f=T.test(e),!f)return p.c=p.e=null,\"Infinity\"!=e&&(\"NaN\"!=e&&a(c,3),p.s=null),void(A=0)}for((n=e.indexOf(\".\"))>-1&&(e=e.replace(\".\",\"\")),(t=e.search(/e/i))>0?(0>n&&(n=t),n+=+e.slice(t+1),e=e.substring(0,t)):0>n&&(n=e.length),t=0;\"0\"==e.charAt(t);t++);if(r=e.length,i&&r>15&&e.slice(t).length>15&&a(c,0),A=0,(n-=t+1)>y)p.c=p.e=null;else if(t==r||v>n)p.c=[p.e=0];else{for(;\"0\"==e.charAt(--r););for(p.e=n,p.c=[],n=0;r>=t;p.c[n++]=+e.charAt(t++));}}function a(e,r,n,t,i,o){if(b){var a,s=[\"new BigNumber\",\"cmp\",\"div\",\"eq\",\"gt\",\"gte\",\"lt\",\"lte\",\"minus\",\"mod\",\"plus\",\"times\",\"toFr\"][A?0>A?-A:A:0>1/A?1:0]+\"()\",u=m?\" out of range\":\" not a\"+(i?\" non-zero\":\"n\")+\" integer\";throw u=([s+\" number type has more than 15 significant digits\",s+\" not a base \"+n+\" number\",s+\" base\"+u,s+\" not a number\"][r]||n+\"() \"+r+(o?\" not a boolean or binary digit\":u+(t?\" or not [\"+(m?\" negative, positive\":\" integer, integer\")+\" ]\":\"\")))+\": \"+e,m=A=0,a=new Error(u),a.name=\"BigNumber Error\",a}}function s(e,r,n,t){function i(e,t){var i,o,a=0,s=e.length,u=[0];for(t=t||n;s>a;a++){for(o=u.length,i=0;o>i;u[i]*=t,i++);for(u[0]+=M.indexOf(e.charAt(a)),i=0;i<u.length;i++)u[i]>r-1&&(null==u[i+1]&&(u[i+1]=0),u[i+1]+=u[i]/r^0,u[i]%=r)}return u.reverse()}function a(e){for(var r=0,n=e.length,t=\"\";n>r;t+=M.charAt(e[r++]));return t}var s,f,c,l,m,p;if(37>n&&(e=e.toLowerCase()),(s=e.indexOf(\".\"))>-1)if(s=e.length-s-1,f=i(new o(n).pow(s).toF(),10),l=e.split(\".\"),c=i(l[1]),l=i(l[0]),p=u(c,f,c.length-f.length,t,r,1&l[l.length-1]),m=p.c,s=p.e){for(;++s;m.unshift(0));e=a(l)+\".\"+a(m)}else m[0]?l[s=l.length-1]<r-1?(++l[s],e=a(l)):e=new o(a(l),r).plus(S).toS(r):e=a(l);else e=a(i(e));return e}function u(e,r,n,t,i,a){var s,u,f,l,m,p=r.slice(),h=s=r.length,d=e.length,x=e.slice(0,s),w=x.length,b=new o(S),E=b.c=[],N=0,M=g+(b.e=n)+1;for(b.s=t,t=0>M?0:M;w++<s;x.push(0));p.unshift(0);do{for(f=0;i>f;f++){if(s!=(w=x.length))l=s>w?1:-1;else for(m=-1,l=0;++m<s;)if(r[m]!=x[m]){l=r[m]>x[m]?1:-1;break}if(!(0>l))break;for(u=w==s?r:p;w;){if(x[--w]<u[w]){for(m=w;m&&!x[--m];x[m]=i-1);--x[m],x[w]+=i}x[w]-=u[w]}for(;!x[0];x.shift());}E[N++]=l?f:++f,x[0]&&l?x[w]=e[h]||0:x=[e[h]]}while((h++<d||null!=x[0])&&t--);return E[0]||1==N||(--b.e,E.shift()),N>M&&c(b,g,i,a,null!=x[0]),b.e>y?b.c=b.e=null:b.e<v&&(b.c=[b.e=0]),b}function f(e,r,n){var t=r-(e=new o(e)).e,i=e.c;if(!i)return e.toS();for(i.length>++r&&c(e,t,10),t=0==i[0]?t+1:n?r:e.e+t+1;i.length<t;i.push(0));return t=e.e,1==n||2==n&&(--r<t||x>=t)?(e.s<0&&i[0]?\"-\":\"\")+(i.length>1?(i.splice(1,0,\".\"),i.join(\"\")):i[0])+(0>t?\"e\":\"e+\")+t:e.toS()}function c(e,r,n,t,i){var o=e.c,a=e.s<0,s=n/2,u=e.e+r+1,f=o[u],c=i||0>u||null!=o[u+1];if(i=4>d?(null!=f||c)&&(0==d||2==d&&!a||3==d&&a):f>s||f==s&&(4==d||c||6==d&&(1&o[u-1]||!r&&t)||7==d&&!a||8==d&&a),1>u||!o[0])return o.length=0,o.push(0),i?(o[0]=1,e.e=-r):e.e=0,e;if(o.length=u--,i)for(--n;++o[u]>n;)o[u]=0,u--||(++e.e,o.unshift(1));for(u=o.length;!o[--u];o.pop());return e}function l(e,r,n){var t=d;return d=n,e=new o(e),e.c&&c(e,r,10),d=t,e}var m,p=1e9,h=1e6,g=20,d=4,x=-7,w=21,v=-p,y=p,b=!0,E=parseInt,N=o.prototype,M=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_\",A=0,T=/^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,O=String.prototype.trim||function(){return this.replace(/^\\s+|\\s+$/g,\"\")},S=o(1);o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.config=function(){var e,r,n=0,t={},i=arguments,o=i[0],s=\"config\",u=function(e,r,n){return!((m=r>e||e>n)||E(e)!=e&&0!==e)},f=o&&\"object\"==typeof o?function(){return o.hasOwnProperty(r)?null!=(e=o[r]):void 0}:function(){return i.length>n?null!=(e=i[n++]):void 0};return f(r=\"DECIMAL_PLACES\")&&(u(e,0,p)?g=0|e:a(e,r,s)),t[r]=g,f(r=\"ROUNDING_MODE\")&&(u(e,0,8)?d=0|e:a(e,r,s)),t[r]=d,f(r=\"EXPONENTIAL_AT\")&&(u(e,-p,p)?x=-(w=~~(0>e?-e:+e)):!m&&e&&u(e[0],-p,0)&&u(e[1],0,p)?(x=~~e[0],w=~~e[1]):a(e,r,s,1)),t[r]=[x,w],f(r=\"RANGE\")&&(u(e,-p,p)&&~~e?v=-(y=~~(0>e?-e:+e)):!m&&e&&u(e[0],-p,-1)&&u(e[1],1,p)?(v=~~e[0],y=~~e[1]):a(e,r,s,1,1)),t[r]=[v,y],f(r=\"ERRORS\")&&(e===!!e||1===e||0===e?(m=A=0,E=(b=!!e)?parseInt:parseFloat):a(e,r,s,0,0,1)),t[r]=b,t},N.abs=N.absoluteValue=function(){var e=new o(this);return e.s<0&&(e.s=1),e},N.ceil=function(){return l(this,0,2)},N.comparedTo=N.cmp=function(e,r){var n,t=this,i=t.c,a=(A=-A,e=new o(e,r)).c,s=t.s,u=e.s,f=t.e,c=e.e;if(!s||!u)return null;if(n=i&&!i[0],r=a&&!a[0],n||r)return n?r?0:-u:s;if(s!=u)return s;if(n=0>s,r=f==c,!i||!a)return r?0:!i^n?1:-1;if(!r)return f>c^n?1:-1;for(s=-1,u=(f=i.length)<(c=a.length)?f:c;++s<u;)if(i[s]!=a[s])return i[s]>a[s]^n?1:-1;return f==c?0:f>c^n?1:-1},N.dividedBy=N.div=function(e,r){var n=this.c,t=this.e,i=this.s,a=(A=2,e=new o(e,r)).c,s=e.e,f=e.s,c=i==f?1:-1;return(t||n&&n[0])&&(s||a&&a[0])?u(n,a,t-s,c,10):new o(i&&f&&(n?!a||n[0]!=a[0]:a)?n&&0==n[0]||!a?0*c:c/0:0/0)},N.equals=N.eq=function(e,r){return A=3,0===this.cmp(e,r)},N.floor=function(){return l(this,0,3)},N.greaterThan=N.gt=function(e,r){return A=4,this.cmp(e,r)>0},N.greaterThanOrEqualTo=N.gte=function(e,r){return A=5,1==(r=this.cmp(e,r))||0===r},N.isFinite=N.isF=function(){return!!this.c},N.isNaN=function(){return!this.s},N.isNegative=N.isNeg=function(){return this.s<0},N.isZero=N.isZ=function(){return!!this.c&&0==this.c[0]},N.lessThan=N.lt=function(e,r){return A=6,this.cmp(e,r)<0},N.lessThanOrEqualTo=N.lte=function(e,r){return A=7,-1==(r=this.cmp(e,r))||0===r},N.minus=function(e,r){var n,t,i,a,s=this,u=s.s;if(r=(A=8,e=new o(e,r)).s,!u||!r)return new o(0/0);if(u!=r)return e.s=-r,s.plus(e);var f=s.c,c=s.e,l=e.c,m=e.e;if(!c||!m){if(!f||!l)return f?(e.s=-r,e):new o(l?s:0/0);if(!f[0]||!l[0])return l[0]?(e.s=-r,e):new o(f[0]?s:3==d?-0:0)}if(f=f.slice(),u=c-m){for(n=(a=0>u)?(u=-u,f):(m=c,l),n.reverse(),r=u;r--;n.push(0));n.reverse()}else for(i=((a=f.length<l.length)?f:l).length,u=r=0;i>r;r++)if(f[r]!=l[r]){a=f[r]<l[r];break}if(a&&(n=f,f=l,l=n,e.s=-e.s),(r=-((i=f.length)-l.length))>0)for(;r--;f[i++]=0);for(r=l.length;r>u;){if(f[--r]<l[r]){for(t=r;t&&!f[--t];f[t]=9);--f[t],f[r]+=10}f[r]-=l[r]}for(;0==f[--i];f.pop());for(;0==f[0];f.shift(),--m);return(v>m||!f[0])&&(f[0]||(e.s=3==d?-1:1),f=[m=0]),e.c=f,e.e=m,e},N.modulo=N.mod=function(e,r){var n=this,t=n.c,i=(A=9,e=new o(e,r)).c,a=n.s,s=e.s;return r=!a||!s||i&&!i[0],r||t&&!t[0]?new o(r?0/0:n):(n.s=e.s=1,r=1==e.cmp(n),n.s=a,e.s=s,r?new o(n):(a=g,s=d,g=0,d=1,n=n.div(e),g=a,d=s,this.minus(n.times(e))))},N.negated=N.neg=function(){var e=new o(this);return e.s=-e.s||null,e},N.plus=function(e,r){var n,t=this,i=t.s;if(r=(A=10,e=new o(e,r)).s,!i||!r)return new o(0/0);if(i!=r)return e.s=-r,t.minus(e);var a=t.e,s=t.c,u=e.e,f=e.c;if(!a||!u){if(!s||!f)return new o(i/0);if(!s[0]||!f[0])return f[0]?e:new o(s[0]?t:0*i)}if(s=s.slice(),i=a-u){for(n=i>0?(u=a,f):(i=-i,s),n.reverse();i--;n.push(0));n.reverse()}for(s.length-f.length<0&&(n=f,f=s,s=n),i=f.length,r=0;i;r=(s[--i]=s[i]+f[i]+r)/10^0,s[i]%=10);for(r&&(s.unshift(r),++u>y&&(s=u=null)),i=s.length;0==s[--i];s.pop());return e.c=s,e.e=u,e},N.toPower=N.pow=function(e){var r=0*e==0?0|e:e,n=new o(this),t=new o(S);if(((m=-h>e||e>h)&&(r=1*e/0)||E(e)!=e&&0!==e&&!(r=0/0))&&!a(e,\"exponent\",\"pow\")||!r)return new o(Math.pow(n.toS(),r));for(r=0>r?-r:r;1&r&&(t=t.times(n)),r>>=1,r;)n=n.times(n);return 0>e?S.div(t):t},N.round=function(e,r){return e=null==e||((m=0>e||e>p)||E(e)!=e)&&!a(e,\"decimal places\",\"round\")?0:0|e,r=null==r||((m=0>r||r>8)||E(r)!=r&&0!==r)&&!a(r,\"mode\",\"round\")?d:0|r,l(this,e,r)},N.squareRoot=N.sqrt=function(){var e,r,n,t,i=this,a=i.c,s=i.s,u=i.e,f=g,l=d,m=new o(\"0.5\");if(1!==s||!a||!a[0])return new o(!s||0>s&&(!a||a[0])?0/0:a?i:1/0);for(s=Math.sqrt(i.toS()),d=1,0==s||s==1/0?(e=a.join(\"\"),e.length+u&1||(e+=\"0\"),r=new o(Math.sqrt(e)+\"\"),r.c||(r.c=[1]),r.e=((u+1)/2|0)-(0>u||1&u)):r=new o(e=s.toString()),n=r.e,s=n+(g+=4),3>s&&(s=0),u=s;;)if(t=r,r=m.times(t.plus(i.div(t))),t.c.slice(0,s).join(\"\")===r.c.slice(0,s).join(\"\")){if(a=r.c,s-=e&&r.e<n,9!=a[s]||9!=a[s-1]||9!=a[s-2]||!(9==a[s-3]||e&&4==a[s-3])){if(!(a[u]||a[u-1]||a[u-2]||a[u-3]&&5!=a[u-3]||(a.length>u-2&&(a.length=u-2),r.times(r).eq(i)))){for(;a.length<u-3;)a.push(0);a[u-3]++}return d=l,c(r,g=f,10),r}if(e&&9==a[s-3]&&(t=r.round(f,0),t.times(t).eq(i)))return d=l,g=f,t;g+=4,s+=4,e=\"\"}},N.times=function(e,r){var n,t=this,i=t.c,a=(A=11,e=new o(e,r)).c,s=t.e,u=e.e,f=t.s;if(e.s=f==(r=e.s)?1:-1,!((s||i&&i[0])&&(u||a&&a[0])))return new o(!f||!r||i&&!i[0]&&!a||a&&!a[0]&&!i?0/0:i&&a?0*e.s:e.s/0);for(e.e=s+u,(f=i.length)<(r=a.length)&&(n=i,i=a,a=n,u=f,f=r,r=u),u=f+r,n=[];u--;n.push(0));for(s=r-1;s>-1;s--){for(r=0,u=f+s;u>s;r=n[u]+a[s]*i[u-s-1]+r,n[u--]=r%10|0,r=r/10|0);r&&(n[u]=(n[u]+r)%10)}for(r&&++e.e,!n[0]&&n.shift(),u=n.length;!n[--u];n.pop());return e.c=e.e>y?e.e=null:e.e<v?[e.e=0]:n,e},N.toExponential=N.toE=function(e){return f(this,(null==e||((m=0>e||e>p)||E(e)!=e&&0!==e)&&!a(e,\"decimal places\",\"toE\"))&&this.c?this.c.length-1:0|e,1)},N.toFixed=N.toF=function(e){var r,n,t,i=this;return null==e||((m=0>e||e>p)||E(e)!=e&&0!==e)&&!a(e,\"decimal places\",\"toF\")||(t=i.e+(0|e)),r=x,e=w,x=-(w=1/0),t==n?n=i.toS():(n=f(i,t),i.s<0&&i.c&&(i.c[0]?n.indexOf(\"-\")<0&&(n=\"-\"+n):n=n.replace(/^-/,\"\"))),x=r,w=e,n},N.toFraction=N.toFr=function(e){var r,n,t,i,s,u,f,c=i=new o(S),l=t=new o(\"0\"),p=this,h=p.c,x=y,w=g,v=d,E=new o(S);if(!h)return p.toS();for(f=E.e=h.length-p.e-1,(null==e||(!(A=12,u=new o(e)).s||(m=u.cmp(c)<0||!u.c)||b&&u.e<u.c.length-1)&&!a(e,\"max denominator\",\"toFr\")||(e=u).cmp(E)>0)&&(e=f>0?E:c),y=1/0,u=new o(h.join(\"\")),g=0,d=1;r=u.div(E),s=i.plus(r.times(l)),1!=s.cmp(e);)i=l,l=s,c=t.plus(r.times(s=c)),t=s,E=u.minus(r.times(s=E)),u=s;return s=e.minus(i).div(l),t=t.plus(s.times(c)),i=i.plus(s.times(l)),t.s=c.s=p.s,g=2*f,d=v,n=c.div(l).minus(p).abs().cmp(t.div(i).minus(p).abs())<1?[c.toS(),l.toS()]:[t.toS(),i.toS()],y=x,g=w,n},N.toPrecision=N.toP=function(e){return null==e||((m=1>e||e>p)||E(e)!=e)&&!a(e,\"precision\",\"toP\")?this.toS():f(this,0|--e,2)},N.toString=N.toS=function(e){var r,n,t,i=this,o=i.e;if(null===o)n=i.s?\"Infinity\":\"NaN\";else{if(e===r&&(x>=o||o>=w))return f(i,i.c.length-1,1);if(n=i.c.join(\"\"),0>o){for(;++o;n=\"0\"+n);n=\"0.\"+n}else if(t=n.length,o>0)if(++o>t)for(o-=t;o--;n+=\"0\");else t>o&&(n=n.slice(0,o)+\".\"+n.slice(o));else if(r=n.charAt(0),t>1)n=r+\".\"+n.slice(1);else if(\"0\"==r)return r;if(null!=e)if((m=!(e>=2&&65>e))||e!=(0|e)&&b)a(e,\"base\",\"toS\");else if(n=s(n,0|e,10,i.s),\"0\"==n)return n}return i.s<0?\"-\"+n:n},N.valueOf=function(){return this.toS()},\"undefined\"!=typeof e&&e.exports?e.exports=o:(t=function(){return o}.call(r,n,r,e),!(void 0!==t&&(e.exports=t)))}(this)},function(e,r,n){r.array=n(142),r[\"boolean\"]=n(237),r.number=n(143),r.object=n(3),r.string=n(127),r.types=n(126)},function(e,r,n){function t(e){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(this.nodes=e||[],!a(this.nodes)||!this.nodes.every(s))throw new TypeError(\"Array containing Nodes expected\")}var i=n(125),o=(n(3),n(127)),a=(n(14),n(11),n(112),Array.isArray),s=i.isNode;t.prototype=new i,t.prototype._compile=function(e){var r=\"array\"!==e.math.config().matrix,n=this.nodes.map(function(r){return r._compile(e)});return(r?\"math.matrix([\":\"[\")+n.join(\",\")+(r?\"])\":\"]\")},t.prototype.find=function(e){var r=[];this.match(e)&&r.push(this);for(var n=this.nodes,t=0,i=n.length;i>t;t++)r=r.concat(n[t].find(e));return r},t.prototype.toString=function(){return o.format(this.nodes)},e.exports=t},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!o(e))throw new TypeError('String expected for parameter \"name\"');if(!(r instanceof i))throw new TypeError('Node expected for parameter \"expr\"');this.name=e,this.expr=r}var i=n(125),o=n(127).isString;t.prototype=new i,t.prototype._compile=function(e){return'scope[\"'+this.name+'\"] = '+this.expr._compile(e)},t.prototype.find=function(e){var r=[];return this.match(e)&&r.push(this),r=r.concat(this.expr.find(e))},t.prototype.toString=function(){return this.name+\" = \"+this.expr.toString()},e.exports=t},function(e,r,n){function t(){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");this.params=[]}var i=n(125),o=n(237).isBoolean;t.prototype=new i,t.prototype.add=function(e,r){if(void 0===r&&(r=!0),!(e instanceof i))throw new TypeError('Node expected for parameter \"expr\"');if(!o(r))throw new TypeError('Boolean expected for parameter \"visible\"');var n=this.params.length;this.params[n]={node:e,visible:r}},t.prototype._compile=function(e){var r=this.params.map(function(r){var n=r.node._compile(e);return r.visible?\"results.push(\"+n+\");\":n+\";\"});return\"(function () {var results = [];\"+r.join(\"\")+\"return results;})()\"},t.prototype.find=function(e){var r=[];this.match(e)&&r.push(this);for(var n=this.params,t=0,i=n.length;i>t;t++)r=r.concat(n[t].node.find(e));return r},t.prototype.toString=function(){return this.params.map(function(e){return e.node.toString()+(e.visible?\"\":\";\")}).join(\"\\n\")},e.exports=t},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!a(e))throw new TypeError('String expected for parameter \"type\"');if(!a(r))throw new TypeError('String expected for parameter \"value\"');this.type=e,this.value=r}var i=n(125),o=(n(8),n(111),n(127)),a=o.isString;t.prototype=new i,t.prototype._compile=function(e){switch(this.type){case\"number\":return\"bignumber\"===e.math.config().number?'math.bignumber(\"'+this.value+'\")':this.value.replace(/^(0*)[0-9]/,function(e,r){return e.substring(r.length)});case\"string\":return'\"'+this.value+'\"';case\"complex\":return\"math.complex(0, \"+this.value+\")\";case\"boolean\":return this.value;case\"undefined\":return this.value;case\"null\":return this.value;default:throw new TypeError('Unsupported type of constant \"'+this.type+'\"')}},t.prototype.toString=function(){switch(this.type){case\"string\":return'\"'+this.value+'\"';case\"complex\":return this.value+\"i\";default:return this.value}},e.exports=t},function(e,r,n){function t(e,r,n){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!o(e))throw new TypeError('String expected for parameter \"name\"');if(!isArray(r)||!r.every(o))throw new TypeError('Array containing strings expected for parameter \"args\"');if(!(n instanceof i))throw new TypeError('Node expected for parameter \"expr\"');this.name=e,this.args=r,this.expr=n}var i=n(125),o=n(127).isString;isArray=Array.isArray,t.prototype=new i,t.prototype._compile=function(e){return'scope[\"'+this.name+'\"] =   (function (scope) {    scope = Object.create(scope);     var fn = function '+this.name+\"(\"+this.args.join(\",\")+\") {      if (arguments.length != \"+this.args.length+') {        throw new SyntaxError(\"Wrong number of arguments in function '+this.name+' (\" + arguments.length + \" provided, '+this.args.length+' expected)\");      }'+this.args.map(function(e,r){return'scope[\"'+e+'\"] = arguments['+r+\"];\"}).join(\"\")+\"      return \"+this.expr._compile(e)+'    };    fn.syntax = \"'+this.name+\"(\"+this.args.join(\", \")+')\";    return fn;  })(scope);'},t.prototype.find=function(e){var r=[];return this.match(e)&&r.push(this),r=r.concat(this.expr.find(e))},t.prototype.toString=function(){return\"function \"+this.name+\"(\"+this.args.join(\", \")+\") = \"+this.expr.toString()},e.exports=t},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!(e instanceof o))throw new TypeError('Node expected for parameter \"object\"');if(!isArray(r)||!r.every(u))throw new TypeError('Array containing Nodes expected for parameter \"ranges\"');this.object=e,this.ranges=r}var i=n(143),o=n(125),a=n(121),s=n(122),u=(n(111),n(10),n(9),i.isNumber,i.toNumber,o.isNode);t.prototype=new o,t.prototype._compile=function(e){return this.compileSubset(e)},t.prototype.compileSubset=function(e,r){var n={type:s,properties:{name:\"end\"}},t=!1,i=this.ranges.map(function(e){var r=e.find(n).length>0;return t=r?r:t,r}),o=this.ranges.map(function(r,n){var t=i[n];return r instanceof a?t?'(function (scope) {  scope = Object.create(scope);   scope[\"end\"] = size['+n+\"];  var step = \"+(r.step?r.step._compile(e):\"1\")+\";  return [    \"+r.start._compile(e)+\" - 1,     \"+r.end._compile(e)+\" - (step > 0 ? 0 : 2),     step  ];})(scope)\":\"(function () {  var step = \"+(r.step?r.step._compile(e):\"1\")+\";  return [    \"+r.start._compile(e)+\" - 1,     \"+r.end._compile(e)+\" - (step > 0 ? 0 : 2),     step  ];})()\":t?'(function (scope) {  scope = Object.create(scope);   scope[\"end\"] = size['+n+\"];  return \"+r._compile(e)+\" - 1;})(scope)\":r._compile(e)+\" - 1\"});return t?\"(function () {  var obj = \"+this.object._compile(e)+\";  var size = math.size(obj).valueOf();  return math.subset(    obj,     math.index(\"+o.join(\", \")+\")    \"+(r?\", \"+r:\"\")+\"  );})()\":\"math.subset(\"+this.object._compile(e)+\",math.index(\"+o.join(\", \")+\")\"+(r?\", \"+r:\"\")+\")\"},t.prototype.find=function(e){var r=[];this.match(e)&&r.push(this),r=r.concat(this.object.find(e));for(var n=this.ranges,t=0,i=n.length;i>t;t++)r=r.concat(n[t].find(e));return r},t.prototype.objectName=function(){return this.object.name},t.prototype.toString=function(){return this.object.toString()+\"[\"+this.ranges.join(\", \")+\"]\"\n},e.exports=t},function(e,r,n){function t(e,r,n){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");this.op=e,this.fn=r,this.params=n}var i=n(125);t.prototype=new i,t.prototype._compile=function(e){if(!(this.fn in e.math))throw new Error(\"Function \"+this.fn+' missing in provided namespace \"math\"');var r=this.params.map(function(r){return r._compile(e)});return\"math.\"+this.fn+\"(\"+r.join(\", \")+\")\"},t.prototype.find=function(e){var r=[];this.match(e)&&r.push(this);var n=this.params;if(n)for(var t=0,i=n.length;i>t;t++)r=r.concat(n[t].find(e));return r},t.prototype.toString=function(){var e=this.params;switch(e.length){case 1:return\"-\"==this.op?\"-\"+e[0].toString():e[0].toString()+this.op;case 2:var r=e[0].toString();e[0]instanceof t&&(r=\"(\"+r+\")\");var n=e[1].toString();return e[1]instanceof t&&(n=\"(\"+n+\")\"),r+\" \"+this.op+\" \"+n;default:return this.op+\"(\"+this.params.join(\", \")+\")\"}},e.exports=t},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!(e instanceof o))throw new TypeError('Node expected for parameter \"object\"');if(!isArray(r)||!r.every(a))throw new TypeError('Array containing Nodes expected for parameter \"params\"');this.object=e,this.params=r}var i=n(143),o=n(125),a=(n(121),n(122),n(111),n(10),n(9),i.isNumber,i.toNumber,o.isNode);t.prototype=new o,t.prototype._compile=function(e){var r=this.params.map(function(r){return r._compile(e)});return this.object._compile(e)+\"(\"+r.join(\", \")+\")\"},t.prototype.find=function(e){var r=[];this.match(e)&&r.push(this),r=r.concat(this.object.find(e));for(var n=this.params,t=0,i=n.length;i>t;t++)r=r.concat(n[t].find(e));return r},t.prototype.toString=function(){return this.object.toString()+\"(\"+this.params.join(\", \")+\")\"},e.exports=t},function(e,r,n){function t(e){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!a(e)||2!=e.length&&3!=e.length||!e.every(isNode))throw new TypeError('Expected an Array containing 2 or 3 Nodes as parameter \"params\"');this.start=e[0],this.end=e[1],this.step=e[2]}var i=n(143),o=n(125),a=(n(111),n(9),n(11),i.toNumber,Array.isArray);isNode=o.isNode,t.prototype=new o,t.prototype._compile=function(e){return\"math.range(\"+this.start._compile(e)+\", \"+this.end._compile(e)+\", \"+(this.step?this.step._compile(e)+\", \":\"\")+\"true)\"},t.prototype.find=function(e){var r=[];return this.match(e)&&r.push(this),r=r.concat(this.start.find(e)),this.step&&(r=r.concat(this.step.find(e))),r=r.concat(this.end.find(e))},t.prototype.toString=function(){var e=this.start.toString();return this.step&&(e+=\":\"+this.step.toString()),e+=\":\"+this.end.toString()},e.exports=t},function(e,r,n){function t(e){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!s(e))throw new TypeError('String expected for parameter \"name\"');this.name=e}function i(e){throw new Error(\"Undefined symbol \"+e)}var o=n(125),a=n(12),s=n(127).isString;t.prototype=new o,t.prototype._compile=function(e){return e.undef=i,e.Unit=a,'(scope[\"'+this.name+'\"] !== undefined ? scope[\"'+this.name+'\"] : math[\"'+this.name+'\"] !== undefined ? math[\"'+this.name+'\"] : '+(a.isPlainUnit(this.name)?'new Unit(null, \"'+this.name+'\")':'undef(\"'+this.name+'\")')+\")\"},t.prototype.toString=function(){return this.name},e.exports=t},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!(e instanceof i))throw new TypeError('Node expected for parameter \"value\"');if(!o(r))throw new TypeError('String expected for parameter \"unit\"');this.value=e,this.unit=r}var i=n(125),o=(n(111),n(8),n(12),n(143).toNumber,n(127).isString);t.prototype=new i,t.prototype._compile=function(e){return\"math.unit(\"+this.value._compile(e)+', \"'+this.unit+'\")'},t.prototype.find=function(e){var r=[];return this.match(e)&&r.push(this),r=r.concat(this.value.find(e))},t.prototype.toString=function(){return this.value+\" \"+this.unit},e.exports=t},function(e,r,n){function t(e,r){if(!(this instanceof t))throw new SyntaxError(\"Constructor must be called with the new operator\");if(!(e instanceof a))throw new TypeError('Expected IndexNode for parameter \"index\"');if(!(r instanceof o))throw new TypeError('Expected Node for parameter \"expr\"');this.index=e,this.expr=r}{var i=n(143),o=n(125),a=(n(121),n(118));n(122),n(111),n(10),n(9),i.isNumber,i.toNumber}t.prototype=new o,t.prototype._compile=function(e){return'scope[\"'+this.index.objectName()+'\"] = '+this.index.compileSubset(e,this.expr._compile(e))},t.prototype.find=function(e){var r=[];return this.match(e)&&r.push(this),r=r.concat(this.index.find(e)),r=r.concat(this.expr.find(e))},t.prototype.toString=function(){return this.index.toString()+\" = \"+this.expr.toString()},e.exports=t},function(e){function r(){if(!(this instanceof r))throw new SyntaxError(\"Constructor must be called with the new operator\")}r.prototype.eval=function(){throw new Error(\"Node.eval is deprecated. Use Node.compile(math).eval([scope]) instead.\")},r.prototype.compile=function(e){if(\"object\"!=typeof e)throw new TypeError(\"Object expected for parameter math\");var r={math:e},n=this._compile(r),t=Object.keys(r).map(function(e){return\"    var \"+e+' = defs[\"'+e+'\"];'}),i=t.join(\" \")+'return {  \"eval\": function (scope) {    scope = scope || {};    return '+n+\";  }};\",o=new Function(\"defs\",i);return o(r)},r.prototype._compile=function(){throw new Error(\"Cannot compile a Node interface\")},r.prototype.find=function(e){return this.match(e)?[this]:[]},r.prototype.match=function(e){var r=!0;if(e){!e.type||this instanceof e.type||(r=!1);var n=e.properties;if(r&&n)for(var t in n)if(n.hasOwnProperty(t)&&this[t]!==n[t]){r=!1;break}}return r},r.prototype.toString=function(){return\"\"},r.isNode=function(e){return e instanceof r},e.exports=r},function(e,r){r.type=function n(e){var n=typeof e;if(\"object\"===n){if(null===e)return\"null\";if(e instanceof Boolean)return\"boolean\";if(e instanceof Number)return\"number\";if(e instanceof String)return\"string\";if(Array.isArray(e))return\"array\";if(e instanceof Date)return\"date\"}return n}},function(e,r,n){function t(e,n){if(Array.isArray(e)){for(var i=\"[\",o=e.length,a=0;o>a;a++)0!=a&&(i+=\", \"),i+=t(e[a],n);return i+=\"]\"}return r.format(e,n)}var i=n(143),o=n(111);r.isString=function(e){return e instanceof String||\"string\"==typeof e},r.endsWith=function(e,r){var n=e.length-r.length,t=e.length;return e.substring(n,t)===r},r.format=function(e,n){return i.isNumber(e)||e instanceof o?i.format(e,n):Array.isArray(e)?t(e,n):r.isString(e)?'\"'+e+'\"':\"function\"==typeof e?e.syntax?e.syntax+\"\":\"function\":e instanceof Object?\"function\"==typeof e.format?e.format(n):e.toString():String(e)}},function(e){e.exports={name:\"e\",category:\"Constants\",syntax:[\"e\"],description:\"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828\",examples:[\"e\",\"e ^ 2\",\"exp(2)\",\"log(e)\"],seealso:[\"exp\"]}},function(e){e.exports={name:\"false\",category:\"Constants\",syntax:[\"false\"],description:\"Boolean value false\",examples:[\"false\"],seealso:[\"true\"]}},function(e){e.exports={name:\"i\",category:\"Constants\",syntax:[\"i\"],description:\"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.\",examples:[\"i\",\"i * i\",\"sqrt(-1)\"],seealso:[]}},function(e){e.exports={name:\"Infinity\",category:\"Constants\",syntax:[\"Infinity\"],description:\"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.\",examples:[\"Infinity\",\"1 / 0\"],seealso:[]}},function(e){e.exports={name:\"LN2\",category:\"Constants\",syntax:[\"LN2\"],description:\"Returns the natural logarithm of 2, approximately equal to 0.693\",examples:[\"LN2\",\"log(2)\"],seealso:[]}},function(e){e.exports={name:\"LN10\",category:\"Constants\",syntax:[\"LN10\"],description:\"Returns the natural logarithm of 10, approximately equal to 2.302\",examples:[\"LN10\",\"log(10)\"],seealso:[]}},function(e){e.exports={name:\"LOG2E\",category:\"Constants\",syntax:[\"LOG2E\"],description:\"Returns the base-2 logarithm of E, approximately equal to 1.442\",examples:[\"LOG2E\",\"log(e, 2)\"],seealso:[]}},function(e){e.exports={name:\"LOG10E\",category:\"Constants\",syntax:[\"LOG10E\"],description:\"Returns the base-10 logarithm of E, approximately equal to 0.434\",examples:[\"LOG10E\",\"log(e, 10)\"],seealso:[]}},function(e){e.exports={name:\"NaN\",category:\"Constants\",syntax:[\"NaN\"],description:\"Not a number\",examples:[\"NaN\",\"0 / 0\"],seealso:[]}},function(e){e.exports={name:\"pi\",category:\"Constants\",syntax:[\"pi\"],description:\"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159\",examples:[\"pi\",\"sin(pi/2)\"],seealso:[\"tau\"]}},function(e){e.exports={name:\"SQRT1_2\",category:\"Constants\",syntax:[\"SQRT1_2\"],description:\"Returns the square root of 1/2, approximately equal to 0.707\",examples:[\"SQRT1_2\",\"sqrt(1/2)\"],seealso:[]}},function(e){e.exports={name:\"SQRT2\",category:\"Constants\",syntax:[\"SQRT2\"],description:\"Returns the square root of 2, approximately equal to 1.414\",examples:[\"SQRT2\",\"sqrt(2)\"],seealso:[]}},function(e){e.exports={name:\"tau\",category:\"Constants\",syntax:[\"pi\"],description:\"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.\",examples:[\"tau\",\"2 * pi\"],seealso:[\"pi\"]}},function(e){e.exports={name:\"true\",category:\"Constants\",syntax:[\"true\"],description:\"Boolean value true\",examples:[\"true\"],seealso:[\"false\"]}},function(e,r,n){function t(e){for(var r=[];f(e);)r.push(e.length),e=e[0];return r}function i(e,r,n){var t,o=e.length;if(o!=r[n])throw new RangeError(\"Dimension mismatch (\"+o+\" != \"+r[n]+\")\");if(n<r.length-1){var a=n+1;for(t=0;o>t;t++){var s=e[t];if(!f(s))throw new RangeError(\"Dimension mismatch (\"+(r.length-1)+\" < \"+r.length+\")\");i(e[t],r,a)}}else for(t=0;o>t;t++)if(f(e[t]))throw new RangeError(\"Dimension mismatch (\"+(r.length+1)+\" > \"+r.length+\")\")}function o(e,r,n,t){if(!f(e))throw Error(\"Array expected\");var i,a,s=e.length,c=r[n],l=Math.min(s,c);if(e.length=c,n<r.length-1){var m=n+1;for(i=0;l>i;i++)a=e[i],o(a,r,m,t);for(i=l;c>i;i++)a=[],e[i]=a,o(a,r,m,t)}else if(void 0!==t)for(i=s;c>i;i++)e[i]=u.clone(t)}var a=n(143),s=n(127),u=n(3),f=(n(126),Array.isArray);r.size=function(e){var n=t(e);return r.validate(e,n),n},r.validate=function(e,r){var n=0==r.length;if(n){if(f(e))throw new RangeError(\"Dimension mismatch (\"+e.length+\" != 0)\")}else i(e,r,0)},r.validateIndex=function(e,r){if(!a.isNumber(e)||!a.isInteger(e))throw new TypeError(\"Index must be an integer (value: \"+e+\")\");if(0>e)throw new RangeError(\"Index out of range (\"+e+\" < 0)\");if(void 0!==r&&e>=r)throw new RangeError(\"Index out of range (\"+e+\" > \"+(r-1)+\")\")},r.resize=function(e,r,n){if(!f(e)||!f(r))throw new TypeError(\"Array expected\");if(0===r.length)throw new Error(\"Resizing to scalar is not supported\");r.forEach(function(e){if(!a.isNumber(e)||!a.isInteger(e)||0>e)throw new TypeError(\"Invalid size, must contain positive integers (size: \"+s.format(r)+\")\")});for(var t=1,i=e[0];f(i);)t++,i=i[0];for(;t<r.length;)e=[e],t++;for(;t>r.length;)e=e[0],t--;return o(e,r,0,n),e},r.squeeze=function(e){for(;f(e)&&1===e.length;)e=e[0];return e},r.unsqueeze=function(e,n){for(var t=r.size(e),i=0,o=n-t.length;o>i;i++)e=[e];return e},r.flatten=function(e){for(var r=e,n=Array.isArray;n(r[0]);){for(var t=[],i=0,o=r.length;o>i;i++)t=t.concat.apply(t,r[i]);r=t}return r},r.isArray=f},function(e,r,n){function t(e){return e instanceof o?e.isZero():0===e}function i(e,r,n){var t;return e instanceof o?(t=e.abs(),t.gte(r)&&t.lt(n)):(t=Math.abs(e),t>=r&&n>t)}var o=n(111);r.isNumber=function(e){return e instanceof Number||\"number\"==typeof e},r.isInteger=function(e){return e==Math.round(e)},r.sign=function(e){return e>0?1:0>e?-1:0},r.format=function(e,n){if(\"function\"==typeof n)return n(e);if(1/0===e)return\"Infinity\";if(e===-1/0)return\"-Infinity\";if(isNaN(e))return\"NaN\";var a=\"auto\",s=void 0;switch(void 0!==n&&(n.notation&&(a=n.notation),r.isNumber(n)?s=n:n.precision&&(s=n.precision)),a){case\"fixed\":return r.toFixed(e,s);case\"scientific\":throw new Error('Format notation \"scientific\" is deprecated. Use \"exponential\" instead.');case\"exponential\":return r.toExponential(e,s);case\"auto\":var u=.001,f=1e5;if(n&&n.exponential)void 0!==n.exponential.lower&&(u=n.exponential.lower),void 0!==n.exponential.upper&&(f=n.exponential.upper);else if(n&&n.scientific)throw new Error(\"options.scientific is deprecated, use options.exponential instead.\");var c=e instanceof o;if(c){var l=o.config().EXPONENTIAL_AT;o.config({EXPONENTIAL_AT:[Math.round(Math.log(u)/Math.LN10),Math.round(Math.log(f)/Math.LN10)]})}if(t(e))return\"0\";var m;if(i(e,u,f))if(c)m=new o(e.toPrecision(s)).toString();else{var p=s?e.toPrecision(Math.min(s,21)):e.toPrecision();m=parseFloat(p)+\"\"}else m=r.toExponential(e,s);return c&&o.config({EXPONENTIAL_AT:l}),m.replace(/((\\.\\d*?)(0+))($|e)/,function(){var e=arguments[2],r=arguments[4];return\".\"!==e?e+r:r});default:throw new Error('Unknown notation \"'+a+'\". Choose \"auto\", \"exponential\", or \"fixed\".')}},r.toExponential=function(e,r){return void 0!==r?e.toExponential(e instanceof o?r-1:Math.min(r-1,20)):e.toExponential()},r.toFixed=function(e,r){return e.toFixed(e instanceof o?r||0:Math.min(r,20))},r.digits=function(e){return e.toExponential().replace(/e[\\+\\-0-9]*$/,\"\").replace(/^0\\.0*|\\./,\"\").length},r.toBigNumber=function(e){return r.digits(e)>15?e:new o(e)},r.toNumber=function(e){return parseFloat(e.valueOf())}},function(e,r,n){function t(e){return n(i(e))}function i(e){return o[e]||function(){throw new Error(\"Cannot find module '\"+e+\"'.\")}()}var o={\"./clone\":103,\"./clone.js\":103,\"./forEach\":110,\"./forEach.js\":110,\"./format\":104,\"./format.js\":104,\"./ifElse\":105,\"./ifElse.js\":105,\"./import\":106,\"./import.js\":106,\"./map\":107,\"./map.js\":107,\"./print\":108,\"./print.js\":108,\"./typeof\":109,\"./typeof.js\":109};t.keys=function(){return Object.keys(o)},t.resolve=i,e.exports=t},function(e){e.exports={name:\"abs\",category:\"Arithmetic\",syntax:[\"abs(x)\"],description:\"Compute the absolute value.\",examples:[\"abs(3.5)\",\"abs(-4.2)\"],seealso:[\"sign\"]}},function(e){e.exports={name:\"add\",category:\"Operators\",syntax:[\"x + y\",\"add(x, y)\"],description:\"Add two values.\",examples:[\"2.1 + 3.6\",\"ans - 3.6\",\"3 + 2i\",'\"hello\" + \" world\"',\"3 cm + 2 inch\"],seealso:[\"subtract\"]}},function(e){e.exports={name:\"ceil\",category:\"Arithmetic\",syntax:[\"ceil(x)\"],description:\"Round a value towards plus infinity.If x is complex, both real and imaginary part are rounded towards plus infinity.\",examples:[\"ceil(3.2)\",\"ceil(3.8)\",\"ceil(-4.2)\"],seealso:[\"floor\",\"fix\",\"round\"]}},function(e){e.exports={name:\"compare\",category:\"Operators\",syntax:[\"compare(x, y)\"],description:\"Compare two values. Returns 1 if x is larger than y, -1 if x is smaller than y, and 0 if x and y are equal.\",examples:[\"compare(2, 3)\",\"compare(3, 2)\",\"compare(2, 2)\",\"compare(5cm, 40mm)\",\"compare(2, [1, 2, 3])\"],seealso:[\"equal\",\"unequal\",\"smaller\",\"smallereq\",\"largereq\"]}},function(e){e.exports={name:\"cube\",category:\"Arithmetic\",syntax:[\"cube(x)\"],description:\"Compute the cube of a value. The cube of x is x * x * x.\",examples:[\"cube(2)\",\"2^3\",\"2 * 2 * 2\"],seealso:[\"multiply\",\"square\",\"pow\"]}},function(e){e.exports={name:\"divide\",category:\"Operators\",syntax:[\"x / y\",\"divide(x, y)\"],description:\"Divide two values.\",examples:[\"2 / 3\",\"ans * 3\",\"4.5 / 2\",\"3 + 4 / 2\",\"(3 + 4) / 2\",\"18 km / 4.5\"],seealso:[\"multiply\"]}},function(e){e.exports={name:\"edivide\",category:\"Operators\",syntax:[\"x ./ y\",\"edivide(x, y)\"],description:\"divide two values element wise.\",examples:[\"a = [1, 2, 3; 4, 5, 6]\",\"b = [2, 1, 1; 3, 2, 5]\",\"a ./ b\"],seealso:[\"multiply\",\"emultiply\",\"divide\"]}},function(e){e.exports={name:\"emultiply\",category:\"Operators\",syntax:[\"x .* y\",\"emultiply(x, y)\"],description:\"multiply two values element wise.\",examples:[\"a = [1, 2, 3; 4, 5, 6]\",\"b = [2, 1, 1; 3, 2, 5]\",\"a .* b\"],seealso:[\"multiply\",\"divide\",\"edivide\"]}},function(e){e.exports={name:\"epow\",category:\"Operators\",syntax:[\"x .^ y\",\"epow(x, y)\"],description:\"Calculates the power of x to y element wise.\",examples:[\"a = [1, 2, 3; 4, 5, 6]\",\"a .^ 2\"],seealso:[\"pow\"]}},function(e){e.exports={name:\"equal\",category:\"Operators\",syntax:[\"x == y\",\"equal(x, y)\"],description:\"Check equality of two values. Returns true if the values are equal, and false if not.\",examples:[\"2+2 == 3\",\"2+2 == 4\",\"a = 3.2\",\"b = 6-2.8\",\"a == b\",\"50cm == 0.5m\"],seealso:[\"unequal\",\"smaller\",\"larger\",\"smallereq\",\"largereq\",\"compare\"]}},function(e){e.exports={name:\"exp\",category:\"Arithmetic\",syntax:[\"exp(x)\"],description:\"Calculate the exponent of a value.\",examples:[\"exp(1.3)\",\"e ^ 1.3\",\"log(exp(1.3))\",\"x = 2.4\",\"(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula\"],seealso:[\"square\",\"multiply\",\"log\"]}},function(e){e.exports={name:\"fix\",category:\"Arithmetic\",syntax:[\"fix(x)\"],description:\"Round a value towards zero.If x is complex, both real and imaginary part are rounded towards zero.\",examples:[\"fix(3.2)\",\"fix(3.8)\",\"fix(-4.2)\",\"fix(-4.8)\"],seealso:[\"ceil\",\"floor\",\"round\"]}},function(e){e.exports={name:\"floor\",category:\"Arithmetic\",syntax:[\"floor(x)\"],description:\"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.\",examples:[\"floor(3.2)\",\"floor(3.8)\",\"floor(-4.2)\"],seealso:[\"ceil\",\"fix\",\"round\"]}},function(e){e.exports={name:\"gcd\",category:\"Arithmetic\",syntax:[\"gcd(a, b)\",\"gcd(a, b, c, ...)\"],description:\"Compute the greatest common divisor.\",examples:[\"gcd(8, 12)\",\"gcd(-4, 6)\",\"gcd(25, 15, -10)\"],seealso:[\"lcm\",\"xgcd\"]}},function(e){e.exports={name:\"larger\",category:\"Operators\",syntax:[\"x > y\",\"larger(x, y)\"],description:\"Check if value x is larger than y. Returns true if x is larger than y, and false if not.\",examples:[\"2 > 3\",\"5 > 2*2\",\"a = 3.3\",\"b = 6-2.8\",\"(a > b)\",\"(b < a)\",\"5 cm > 2 inch\"],seealso:[\"equal\",\"unequal\",\"smaller\",\"smallereq\",\"largereq\",\"compare\"]}},function(e){e.exports={name:\"largereq\",category:\"Operators\",syntax:[\"x >= y\",\"largereq(x, y)\"],description:\"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.\",examples:[\"2 > 1+1\",\"2 >= 1+1\",\"a = 3.2\",\"b = 6-2.8\",\"(a > b)\"],seealso:[\"equal\",\"unequal\",\"smallereq\",\"smaller\",\"largereq\",\"compare\"]}},function(e){e.exports={name:\"lcm\",category:\"Arithmetic\",syntax:[\"lcm(x, y)\"],description:\"Compute the least common multiple.\",examples:[\"lcm(4, 6)\",\"lcm(6, 21)\",\"lcm(6, 21, 5)\"],seealso:[\"gcd\"]}},function(e){e.exports={name:\"log\",category:\"Arithmetic\",syntax:[\"log(x)\",\"log(x, base)\"],description:\"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).\",examples:[\"log(3.5)\",\"a = log(2.4)\",\"exp(a)\",\"10 ^ 3\",\"log(1000, 10)\",\"log(1000) / log(10)\",\"b = logb(1024, 2)\",\"2 ^ b\"],seealso:[\"exp\",\"log10\"]}},function(e){e.exports={name:\"log10\",category:\"Arithmetic\",syntax:[\"log10(x)\"],description:\"Compute the 10-base logarithm of a value.\",examples:[\"log10(1000)\",\"10 ^ 3\",\"log10(0.01)\",\"log(1000) / log(10)\",\"log(1000, 10)\"],seealso:[\"exp\",\"log\"]}},function(e){e.exports={name:\"mod\",category:\"Operators\",syntax:[\"x % y\",\"x mod y\",\"mod(x, y)\"],description:\"Calculates the modulus, the remainder of an integer division.\",examples:[\"7 % 3\",\"11 % 2\",\"10 mod 4\",\"function isOdd(x) = x % 2\",\"isOdd(2)\",\"isOdd(3)\"],seealso:[]}},function(e){e.exports={name:\"multiply\",category:\"Operators\",syntax:[\"x * y\",\"multiply(x, y)\"],description:\"multiply two values.\",examples:[\"2.1 * 3.6\",\"ans / 3.6\",\"2 * 3 + 4\",\"2 * (3 + 4)\",\"3 * 2.1 km\"],seealso:[\"divide\"]}},function(e){e.exports={name:\"pow\",category:\"Operators\",syntax:[\"x ^ y\",\"pow(x, y)\"],description:\"Calculates the power of x to y, x^y.\",examples:[\"2^3 = 8\",\"2*2*2\",\"1 + e ^ (pi * i)\"],seealso:[\"unequal\",\"smaller\",\"larger\",\"smallereq\",\"largereq\"]}},function(e){e.exports={name:\"round\",category:\"Arithmetic\",syntax:[\"round(x)\",\"round(x, n)\"],description:\"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.\",examples:[\"round(3.2)\",\"round(3.8)\",\"round(-4.2)\",\"round(-4.8)\",\"round(pi, 3)\",\"round(123.45678, 2)\"],seealso:[\"ceil\",\"floor\",\"fix\"]}},function(e){e.exports={name:\"sign\",category:\"Arithmetic\",syntax:[\"sign(x)\"],description:\"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.\",examples:[\"sign(3.5)\",\"sign(-4.2)\",\"sign(0)\"],seealso:[\"abs\"]}},function(e){e.exports={name:\"smaller\",category:\"Operators\",syntax:[\"x < y\",\"smaller(x, y)\"],description:\"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.\",examples:[\"2 < 3\",\"5 < 2*2\",\"a = 3.3\",\"b = 6-2.8\",\"(a < b)\",\"5 cm < 2 inch\"],seealso:[\"equal\",\"unequal\",\"larger\",\"smallereq\",\"largereq\",\"compare\"]}},function(e){e.exports={name:\"smallereq\",category:\"Operators\",syntax:[\"x <= y\",\"smallereq(x, y)\"],description:\"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.\",examples:[\"2 < 1+1\",\"2 <= 1+1\",\"a = 3.2\",\"b = 6-2.8\",\"(a < b)\"],seealso:[\"equal\",\"unequal\",\"larger\",\"smaller\",\"largereq\",\"compare\"]}},function(e){e.exports={name:\"sqrt\",category:\"Arithmetic\",syntax:[\"sqrt(x)\"],description:\"Compute the square root value. If x = y * y, then y is the square root of x.\",examples:[\"sqrt(25)\",\"5 * 5\",\"sqrt(-1)\"],seealso:[\"square\",\"multiply\"]}},function(e){e.exports={name:\"square\",category:\"Arithmetic\",syntax:[\"square(x)\"],description:\"Compute the square of a value. The square of x is x * x.\",examples:[\"square(3)\",\"sqrt(9)\",\"3^2\",\"3 * 3\"],seealso:[\"multiply\",\"pow\",\"sqrt\",\"cube\"]}},function(e){e.exports={name:\"subtract\",category:\"Operators\",syntax:[\"x - y\",\"subtract(x, y)\"],description:\"subtract two values.\",examples:[\"5.3 - 2\",\"ans + 2\",\"2/3 - 1/6\",\"2 * 3 - 3\",\"2.1 km - 500m\"],seealso:[\"add\"]}},function(e){e.exports={name:\"unary\",category:\"Operators\",syntax:[\"-x\",\"unary(x)\"],description:\"Inverse the sign of a value.\",examples:[\"-4.5\",\"-(-5.6)\"],seealso:[\"add\",\"subtract\"]}},function(e){e.exports={name:\"unequal\",category:\"Operators\",syntax:[\"x != y\",\"unequal(x, y)\"],description:\"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.\",examples:[\"2+2 != 3\",\"2+2 != 4\",\"a = 3.2\",\"b = 6-2.8\",\"a != b\",\"50cm != 0.5m\",\"5 cm != 2 inch\"],seealso:[\"equal\",\"smaller\",\"larger\",\"smallereq\",\"largereq\",\"compare\"]}},function(e){e.exports={name:\"xgcd\",category:\"Arithmetic\",syntax:[\"xgcd(a, b)\"],description:\"Calculate the extended greatest common divisor for two values\",examples:[\"xgcd(8, 12)\",\"gcd(8, 12)\",\"xgcd(36163, 21199)\"],seealso:[\"gcd\",\"lcm\"]}},function(e){e.exports={name:\"arg\",category:\"Complex\",syntax:[\"arg(x)\"],description:\"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).\",examples:[\"arg(2 + 2i)\",\"atan2(3, 2)\",\"arg(2 - 3i)\"],seealso:[\"re\",\"im\",\"conj\",\"abs\"]}},function(e){e.exports={name:\"conj\",category:\"Complex\",syntax:[\"conj(x)\"],description:\"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.\",examples:[\"conj(2 + 3i)\",\"conj(2 - 3i)\",\"conj(-5.2i)\"],seealso:[\"re\",\"im\",\"abs\",\"arg\"]}},function(e){e.exports={name:\"re\",category:\"Complex\",syntax:[\"re(x)\"],description:\"Get the real part of a complex number.\",examples:[\"re(2 + 3i)\",\"im(2 + 3i)\",\"re(-5.2i)\",\"re(2.4)\"],seealso:[\"im\",\"conj\",\"abs\",\"arg\"]}},function(e){e.exports={name:\"im\",category:\"Complex\",syntax:[\"im(x)\"],description:\"Get the imaginary part of a complex number.\",examples:[\"im(2 + 3i)\",\"re(2 + 3i)\",\"im(-5.2i)\",\"im(2.4)\"],seealso:[\"re\",\"conj\",\"abs\",\"arg\"]}},function(e){e.exports={name:\"bignumber\",category:\"Type\",syntax:[\"bignumber(x)\"],description:\"Create a big number from a number or string.\",examples:[\"0.1 + 0.2\",\"bignumber(0.1) + bignumber(0.2)\",'bignumber(\"7.2\")','bignumber(\"7.2e500\")',\"bignumber([0.1, 0.2, 0.3])\"],seealso:[\"boolean\",\"complex\",\"index\",\"matrix\",\"string\",\"unit\"]}},function(e){e.exports={name:\"boolean\",category:\"Type\",syntax:[\"x\",\"boolean(x)\"],description:\"Convert a string or number into a boolean.\",examples:[\"boolean(0)\",\"boolean(1)\",\"boolean(3)\",'boolean(\"true\")','boolean(\"false\")',\"boolean([1, 0, 1, 1])\"],seealso:[\"bignumber\",\"complex\",\"index\",\"matrix\",\"number\",\"string\",\"unit\"]}},function(e){e.exports={name:\"complex\",category:\"Type\",syntax:[\"complex()\",\"complex(re, im)\",\"complex(string)\"],description:\"Create a complex number.\",examples:[\"complex()\",\"complex(2, 3)\",'complex(\"7 - 2i\")'],seealso:[\"bignumber\",\"boolean\",\"index\",\"matrix\",\"number\",\"string\",\"unit\"]}},function(e){e.exports={name:\"index\",category:\"Type\",syntax:[\"[start]\",\"[start:end]\",\"[start:step:end]\",\"[start1, start 2, ...]\",\"[start1:end1, start2:end2, ...]\",\"[start1:step1:end1, start2:step2:end2, ...]\"],description:\"Create an index to get or replace a subset of a matrix\",examples:[\"[]\",\"[1, 2, 3]\",\"A = [1, 2, 3; 4, 5, 6]\",\"A[1, :]\",\"A[1, 2] = 50\",\"A[0:2, 0:2] = ones(2, 2)\"],seealso:[\"bignumber\",\"boolean\",\"complex\",\"matrix,\",\"number\",\"range\",\"string\",\"unit\"]}},function(e){e.exports={name:\"matrix\",category:\"Type\",syntax:[\"[]\",\"[a1, b1, ...; a2, b2, ...]\",\"matrix()\",\"matrix([...])\"],description:\"Create a matrix.\",examples:[\"[]\",\"[1, 2, 3]\",\"[1, 2, 3; 4, 5, 6]\",\"matrix()\",\"matrix([3, 4])\"],seealso:[\"bignumber\",\"boolean\",\"complex\",\"index\",\"number\",\"string\",\"unit\"]}},function(e){e.exports={name:\"number\",category:\"Type\",syntax:[\"x\",\"number(x)\"],description:\"Create a number or convert a string or boolean into a number.\",examples:[\"2\",\"2e3\",\"4.05\",\"number(2)\",'number(\"7.2\")',\"number(true)\",\"number([true, false, true, true])\"],seealso:[\"bignumber\",\"boolean\",\"complex\",\"index\",\"matrix\",\"string\",\"unit\"]}},function(e){e.exports={name:\"string\",category:\"Type\",syntax:['\"text\"',\"string(x)\"],description:\"Create a string or convert a value to a string\",examples:['\"Hello World!\"',\"string(4.2)\",\"string(3 + 2i)\"],seealso:[\"bignumber\",\"boolean\",\"complex\",\"index\",\"matrix\",\"number\",\"unit\"]}},function(e){e.exports={name:\"unit\",category:\"Type\",syntax:[\"value unit\",\"unit(value, unit)\",\"unit(string)\"],description:\"Create a unit.\",examples:[\"5.5 mm\",\"3 inch\",'unit(7.1, \"kilogram\")','unit(\"23 deg\")'],seealso:[\"bignumber\",\"boolean\",\"complex\",\"index\",\"matrix\",\"number\",\"string\"]}},function(e){e.exports={name:\"eval\",category:\"Expression\",syntax:[\"eval(expression)\",\"eval([expr1, expr2, expr3, ...])\"],description:\"Evaluate an expression or an array with expressions.\",examples:['eval(\"2 + 3\")','eval(\"sqrt(\" + 4 + \")\")'],seealso:[]}},function(e){e.exports={name:\"help\",category:\"Expression\",syntax:[\"help(object)\",\"help(string)\"],description:\"Display documentation on a function or data type.\",examples:[\"help(sqrt)\",'help(\"complex\")'],seealso:[]}},function(e){e.exports={name:\"concat\",category:\"Matrix\",syntax:[\"concat(a, b, c, ...)\",\"concat(a, b, c, ..., dim)\"],description:\"Concatenate matrices. By default, the matrices are concatenated by the first dimension. The dimension on which to concatenate can be provided as last argument.\",examples:[\"a = [1, 2; 5, 6]\",\"b = [3, 4; 7, 8]\",\"concat(a, b)\",\"[a, b]\",\"concat(a, b, 2)\",\"[a; b]\"],seealso:[\"det\",\"diag\",\"eye\",\"inv\",\"ones\",\"range\",\"size\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"det\",category:\"Matrix\",syntax:[\"det(x)\"],description:\"Calculate the determinant of a matrix\",examples:[\"det([1, 2; 3, 4])\",\"det([-2, 2, 3; -1, 1, 3; 2, 0, -1])\"],seealso:[\"concat\",\"diag\",\"eye\",\"inv\",\"ones\",\"range\",\"size\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"diag\",category:\"Matrix\",syntax:[\"diag(x)\",\"diag(x, k)\"],description:\"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned.When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.\",examples:[\"diag(1:3)\",\"diag(1:3, 1)\",\"a = [1, 2, 3; 4, 5, 6; 7, 8, 9]\",\"diag(a)\"],seealso:[\"concat\",\"det\",\"eye\",\"inv\",\"ones\",\"range\",\"size\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"eye\",category:\"Matrix\",syntax:[\"eye(n)\",\"eye(m, n)\",\"eye([m, n])\",\"eye\"],description:\"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.\",examples:[\"eye(3)\",\"eye(3, 5)\",\"a = [1, 2, 3; 4, 5, 6]\",\"eye(size(a))\"],seealso:[\"concat\",\"det\",\"diag\",\"inv\",\"ones\",\"range\",\"size\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"inv\",category:\"Matrix\",syntax:[\"inv(x)\"],description:\"Calculate the inverse of a matrix\",examples:[\"inv([1, 2; 3, 4])\",\"inv(4)\",\"1 / 4\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"ones\",\"range\",\"size\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"ones\",category:\"Matrix\",syntax:[\"ones(m)\",\"ones(m, n)\",\"ones(m, n, p, ...)\",\"ones([m])\",\"ones([m, n])\",\"ones([m, n, p, ...])\",\"ones\"],description:\"Create a matrix containing ones.\",examples:[\"ones(3)\",\"ones(3, 5)\",\"ones([2,3]) * 4.5\",\"a = [1, 2, 3; 4, 5, 6]\",\"ones(size(a))\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"inv\",\"range\",\"size\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"range\",category:\"Type\",syntax:[\"start:end\",\"start:step:end\",\"range(start, end)\",\"range(start, end, step)\",\"range(string)\"],description:\"Create a range. Lower bound of the range is included, upper bound is excluded.\",examples:[\"1:5\",\"3:-1:-3\",\"range(3, 7)\",\"range(0, 12, 2)\",'range(\"4:10\")',\"a = [1, 2, 3, 4; 5, 6, 7, 8]\",\"a[1:2, 1:2]\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"inv\",\"ones\",\"size\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"resize\",category:\"Matrix\",syntax:[\"resize(x, size)\",\"resize(x, size, defaultValue)\"],description:\"Resize a matrix.\",examples:[\"resize([1,2,3,4,5], [3])\",\"resize([1,2,3], [5], 0)\",\"resize(2, [2, 3], 0)\",'resize(\"hello\", [8], \"!\")'],seealso:[\"size\",\"subset\",\"squeeze\"]}},function(e){e.exports={name:\"size\",category:\"Matrix\",syntax:[\"size(x)\"],description:\"Calculate the size of a matrix.\",examples:[\"size(2.3)\",'size(\"hello world\")',\"a = [1, 2; 3, 4; 5, 6]\",\"size(a)\",\"size(1:6)\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"inv\",\"ones\",\"range\",\"squeeze\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"squeeze\",category:\"Matrix\",syntax:[\"squeeze(x)\"],description:\"Remove singleton dimensions from a matrix.\",examples:[\"a = zeros(1,3,2)\",\"size(squeeze(a))\",\"b = zeros(3,1,1)\",\"size(squeeze(b))\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"inv\",\"ones\",\"range\",\"size\",\"subset\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"subset\",category:\"Matrix\",syntax:[\"value(index)\",\"value(index) = replacement\",\"subset(value, [index])\",\"subset(value, [index], replacement)\"],description:\"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.\",examples:[\"d = [1, 2; 3, 4]\",\"e = []\",\"e[1, 1:2] = [5, 6]\",\"e[2, :] = [7, 8]\",\"f = d * e\",\"f[2, 1]\",\"f[:, 1]\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"inv\",\"ones\",\"range\",\"size\",\"squeeze\",\"transpose\",\"zeros\"]}},function(e){e.exports={name:\"transpose\",category:\"Matrix\",syntax:[\"x'\",\"transpose(x)\"],description:\"Transpose a matrix\",examples:[\"a = [1, 2, 3; 4, 5, 6]\",\"a'\",\"transpose(a)\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"inv\",\"ones\",\"range\",\"size\",\"squeeze\",\"subset\",\"zeros\"]}},function(e){e.exports={name:\"zeros\",category:\"Matrix\",syntax:[\"zeros(m)\",\"zeros(m, n)\",\"zeros(m, n, p, ...)\",\"zeros([m])\",\"zeros([m, n])\",\"zeros([m, n, p, ...])\",\"zeros\"],description:\"Create a matrix containing zeros.\",examples:[\"zeros(3)\",\"zeros(3, 5)\",\"a = [1, 2, 3; 4, 5, 6]\",\"zeros(size(a))\"],seealso:[\"concat\",\"det\",\"diag\",\"eye\",\"inv\",\"ones\",\"range\",\"size\",\"squeeze\",\"subset\",\"transpose\"]}\n},function(e){e.exports={name:\"combinations\",category:\"Probability\",syntax:[\"combinations(n, k)\"],description:\"Compute the number of combinations of n items taken k at a time\",examples:[\"combinations(7, 5)\"],seealso:[\"permutations\",\"factorial\"]}},function(e){e.exports={name:\"distribution\",category:\"Probability\",syntax:[\"distribution(name)\",\"distribution(name, arg1, arg2, ...)\"],description:'Create a distribution object of a specific type. A distribution object contains functions `random([size,] [min,] [max])`, `randomInt([size,] [min,] [max])`, and `pickRandom(array)`. Available types of distributions: \"uniform\", \"normal\". Note that the function distribution is currently not available via the expression parser.',examples:[],seealso:[\"random\",\"randomInt\"]}},function(e){e.exports={name:\"factorial\",category:\"Probability\",syntax:[\"n!\",\"factorial(n)\"],description:\"Compute the factorial of a value\",examples:[\"5!\",\"5*4*3*2*1\",\"3!\"],seealso:[]}},function(e){e.exports={name:\"permutations\",category:\"Probability\",syntax:[\"permutations(n)\",\"permutations(n, k)\"],description:\"Compute the number of permutations of n items taken k at a time\",examples:[\"permutations(5)\",\"permutations(5, 4)\"],seealso:[\"combinations\",\"factorial\"]}},function(e){e.exports={name:\"pickRandom\",category:\"Probability\",syntax:[\"pickRandom(array)\"],description:\"Pick a random entry from a given array.\",examples:[\"pickRandom(0:10)\",\"pickRandom([1, 3, 1, 6])\"],seealso:[\"distribution\",\"random\",\"randomInt\"]}},function(e){e.exports={name:\"random\",category:\"Probability\",syntax:[\"random()\",\"random(max)\",\"random(min, max)\",\"random(size)\",\"random(size, max)\",\"random(size, min, max)\"],description:\"Return a random number.\",examples:[\"random()\",\"random(10, 20)\",\"random([2, 3])\"],seealso:[\"distribution\",\"pickRandom\",\"randomInt\"]}},function(e){e.exports={name:\"randInt\",category:\"Probability\",syntax:[\"randInt()\",\"randInt(max)\",\"randInt(min, max)\",\"randInt(size)\",\"randInt(size, max)\",\"randInt(size, min, max)\"],description:\"Return a random integer number\",examples:[\"randInt()\",\"randInt(10, 20)\",\"randInt([2, 3], 10)\"],seealso:[\"distribution\",\"pickRandom\",\"random\"]}},function(e){e.exports={name:\"max\",category:\"Statistics\",syntax:[\"max(a, b, c, ...)\",\"max(A)\",\"max(A, dim)\"],description:\"Compute the maximum value of a list of values.\",examples:[\"max(2, 3, 4, 1)\",\"max([2, 3, 4, 1])\",\"max([2, 5; 4, 3], 0)\",\"max([2, 5; 4, 3], 1)\",\"max(2.7, 7.1, -4.5, 2.0, 4.1)\",\"min(2.7, 7.1, -4.5, 2.0, 4.1)\"],seealso:[\"mean\",\"median\",\"min\",\"prod\",\"std\",\"sum\",\"var\"]}},function(e){e.exports={name:\"mean\",category:\"Statistics\",syntax:[\"mean(a, b, c, ...)\",\"mean(A)\",\"mean(A, dim)\"],description:\"Compute the arithmetic mean of a list of values.\",examples:[\"mean(2, 3, 4, 1)\",\"mean([2, 3, 4, 1])\",\"mean([2, 5; 4, 3], 0)\",\"mean([2, 5; 4, 3], 1)\",\"mean([1.0, 2.7, 3.2, 4.0])\"],seealso:[\"max\",\"median\",\"min\",\"prod\",\"std\",\"sum\",\"var\"]}},function(e){e.exports={name:\"median\",category:\"Statistics\",syntax:[\"median(a, b, c, ...)\",\"median(A)\"],description:\"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.\",examples:[\"median(4, 2, 7)\",\"median([3, -1, 5, 7])\"],seealso:[\"max\",\"mean\",\"min\",\"prod\",\"std\",\"sum\",\"var\"]}},function(e){e.exports={name:\"min\",category:\"Statistics\",syntax:[\"min(a, b, c, ...)\",\"min(A)\",\"min(A, dim)\"],description:\"Compute the minimum value of a list of values.\",examples:[\"min(2, 3, 4, 1)\",\"min([2, 3, 4, 1])\",\"min([2, 5; 4, 3], 0)\",\"min([2, 5; 4, 3], 1)\",\"min(2.7, 7.1, -4.5, 2.0, 4.1)\",\"max(2.7, 7.1, -4.5, 2.0, 4.1)\"],seealso:[\"max\",\"mean\",\"median\",\"prod\",\"std\",\"sum\",\"var\"]}},function(e){e.exports={name:\"prod\",category:\"Statistics\",syntax:[\"prod(a, b, c, ...)\",\"prod(A)\"],description:\"Compute the product of all values.\",examples:[\"prod(2, 3, 4)\",\"prod([2, 3, 4])\",\"prod([2, 5; 4, 3])\"],seealso:[\"max\",\"mean\",\"min\",\"median\",\"min\",\"std\",\"sum\",\"var\"]}},function(e){e.exports={name:\"std\",category:\"Statistics\",syntax:[\"std(a, b, c, ...)\",\"std(A)\",\"std(A, normalization)\"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(var(A)). Optional parameter normalization can be \"unbiased\" (default), \"uncorrected\", or \"biased\".',examples:[\"std(2, 4, 6)\",\"std([2, 4, 6, 8])\",'std([2, 4, 6, 8], \"uncorrected\")','std([2, 4, 6, 8], \"biased\")',\"std([1, 2, 3; 4, 5, 6])\"],seealso:[\"max\",\"mean\",\"min\",\"median\",\"min\",\"prod\",\"sum\",\"var\"]}},function(e){e.exports={name:\"sum\",category:\"Statistics\",syntax:[\"sum(a, b, c, ...)\",\"sum(A)\"],description:\"Compute the sum of all values.\",examples:[\"sum(2, 3, 4, 1)\",\"sum([2, 3, 4, 1])\",\"sum([2, 5; 4, 3])\"],seealso:[\"max\",\"mean\",\"median\",\"min\",\"prod\",\"std\",\"sum\",\"var\"]}},function(e){e.exports={name:\"var\",category:\"Statistics\",syntax:[\"var(a, b, c, ...)\",\"var(A)\",\"var(A, normalization)\"],description:'Compute the variance of all values. Optional parameter normalization can be \"unbiased\" (default), \"uncorrected\", or \"biased\".',examples:[\"var(2, 4, 6)\",\"var([2, 4, 6, 8])\",'var([2, 4, 6, 8], \"uncorrected\")','var([2, 4, 6, 8], \"biased\")',\"var([1, 2, 3; 4, 5, 6])\"],seealso:[\"max\",\"mean\",\"min\",\"median\",\"min\",\"prod\",\"std\",\"sum\"]}},function(e){e.exports={name:\"acos\",category:\"Trigonometry\",syntax:[\"acos(x)\"],description:\"Compute the inverse cosine of a value in radians.\",examples:[\"acos(0.5)\",\"acos(cos(2.3))\"],seealso:[\"cos\",\"acos\",\"asin\"]}},function(e){e.exports={name:\"asin\",category:\"Trigonometry\",syntax:[\"asin(x)\"],description:\"Compute the inverse sine of a value in radians.\",examples:[\"asin(0.5)\",\"asin(sin(2.3))\"],seealso:[\"sin\",\"acos\",\"asin\"]}},function(e){e.exports={name:\"atan\",category:\"Trigonometry\",syntax:[\"atan(x)\"],description:\"Compute the inverse tangent of a value in radians.\",examples:[\"atan(0.5)\",\"atan(tan(2.3))\"],seealso:[\"tan\",\"acos\",\"asin\"]}},function(e){e.exports={name:\"atan2\",category:\"Trigonometry\",syntax:[\"atan2(y, x)\"],description:\"Computes the principal value of the arc tangent of y/x in radians.\",examples:[\"atan2(2, 2) / pi\",\"angle = 60 deg in rad\",\"x = cos(angle)\",\"y = sin(angle)\",\"atan2(y, x)\"],seealso:[\"sin\",\"cos\",\"tan\"]}},function(e){e.exports={name:\"cos\",category:\"Trigonometry\",syntax:[\"cos(x)\"],description:\"Compute the cosine of x in radians.\",examples:[\"cos(2)\",\"cos(pi / 4) ^ 2\",\"cos(180 deg)\",\"cos(60 deg)\",\"sin(0.2)^2 + cos(0.2)^2\"],seealso:[\"acos\",\"sin\",\"tan\"]}},function(e){e.exports={name:\"cot\",category:\"Trigonometry\",syntax:[\"cot(x)\"],description:\"Compute the cotangent of x in radians. Defined as 1/tan(x)\",examples:[\"cot(2)\",\"1 / tan(2)\"],seealso:[\"sec\",\"csc\",\"tan\"]}},function(e){e.exports={name:\"csc\",category:\"Trigonometry\",syntax:[\"csc(x)\"],description:\"Compute the cosecant of x in radians. Defined as 1/sin(x)\",examples:[\"csc(2)\",\"1 / sin(2)\"],seealso:[\"sec\",\"cot\",\"sin\"]}},function(e){e.exports={name:\"sec\",category:\"Trigonometry\",syntax:[\"sec(x)\"],description:\"Compute the secant of x in radians. Defined as 1/cos(x)\",examples:[\"sec(2)\",\"1 / cos(2)\"],seealso:[\"cot\",\"csc\",\"cos\"]}},function(e){e.exports={name:\"sin\",category:\"Trigonometry\",syntax:[\"sin(x)\"],description:\"Compute the sine of x in radians.\",examples:[\"sin(2)\",\"sin(pi / 4) ^ 2\",\"sin(90 deg)\",\"sin(30 deg)\",\"sin(0.2)^2 + cos(0.2)^2\"],seealso:[\"asin\",\"cos\",\"tan\"]}},function(e){e.exports={name:\"tan\",category:\"Trigonometry\",syntax:[\"tan(x)\"],description:\"Compute the tangent of x in radians.\",examples:[\"tan(0.5)\",\"sin(0.5) / cos(0.5)\",\"tan(pi / 4)\",\"tan(45 deg)\"],seealso:[\"atan\",\"sin\",\"cos\"]}},function(e){e.exports={name:\"to\",category:\"Units\",syntax:[\"x to unit\",\"to(x, unit)\"],description:\"Change the unit of a value.\",examples:[\"5 inch in cm\",\"3.2kg in g\",\"16 bytes in bits\"],seealso:[]}},function(e){e.exports={name:\"clone\",category:\"Utils\",syntax:[\"clone(x)\"],description:\"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices\",examples:[\"clone(3.5)\",\"clone(2 - 4i)\",\"clone(45 deg)\",\"clone([1, 2; 3, 4])\",'clone(\"hello world\")'],seealso:[]}},function(e){e.exports={name:\"map\",category:\"Utils\",syntax:[\"map(x, callback)\"],description:\"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.\",examples:[\"map([1, 2, 3], function(val) { return math.max(val, 1.5) })\"],seealso:[]}},function(e){e.exports={name:\"forEach\",category:\"Utils\",syntax:[\"forEach(x, callback)\"],description:\"Iterates over all elements of a matrix/array, and executes the given callback.\",examples:[\"forEach([1, 2, 3], function(val) { console.log(val) })\"],seealso:[]}},function(e){e.exports={name:\"format\",category:\"Utils\",syntax:[\"format(value)\",\"format(value, precision)\"],description:\"Format a value of any type as string.\",examples:[\"format(2.3)\",\"format(3 - 4i)\",\"format([])\",\"format(pi, 3)\"],seealso:[\"print\"]}},function(e){e.exports={name:\"ifElse\",category:\"Utils\",syntax:[\"ifElse(conditionalExpr, trueExpr, falseExpr)\"],description:\"Executes a ternary operation.\",examples:[\"ifElse(10 > 0, 10, 0)\"],seealso:[]}},function(e){e.exports={name:\"import\",category:\"Utils\",syntax:[\"import(string)\"],description:\"Import functions from a file.\",examples:['import(\"numbers\")','import(\"./mylib.js\")'],seealso:[]}},function(e){e.exports={name:\"typeof\",category:\"Utils\",syntax:[\"typeof(x)\"],description:\"Get the type of a variable.\",examples:[\"typeof(3.5)\",\"typeof(2 - 4i)\",\"typeof(45 deg)\",'typeof(\"hello world\")'],seealso:[]}},function(e,r){r.isBoolean=function(e){return e instanceof Boolean||\"boolean\"==typeof e}}])});\n//# sourceMappingURL=math.map", "src/lib/string/__init__.js": "/*\n *  __author__: Isaac Dontje Lindell (i@isaacdontjelindell.com)\n *\n *  Implementation of the Python string module.\n */\n\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.ascii_lowercase = Sk.builtin.str('abcdefghijklmnopqrstuvwxyz');\n    mod.ascii_uppercase = Sk.builtin.str('ABCDEFGHIJKLMNOPQRSTUVWXYZ');\n    mod.ascii_letters = Sk.builtin.str(mod.ascii_lowercase.v + mod.ascii_uppercase.v);\n\n    mod.lowercase = Sk.builtin.str('abcdefghijklmnopqrstuvwxyz');\n    mod.uppercase = Sk.builtin.str('ABCDEFGHIJKLMNOPQRSTUVWXYZ');\n    mod.letters = Sk.builtin.str(mod.lowercase.v + mod.uppercase.v);\n\n    mod.digits = Sk.builtin.str('0123456789', Sk.builtin.str);\n    mod.hexdigits = Sk.builtin.str('0123456789abcdefABCDEF');\n    mod.octdigits = Sk.builtin.str('01234567');\n\n    mod.punctuation = Sk.builtin.str('!\"#$%&\\'()*+,-./:;<=>?@[\\\\]^_`{|}~');\n    mod.whitespace = Sk.builtin.str('\\t\\n\\x0b\\x0c\\r ');\n\n    /* Note: The docs for string.printable say that it's the concatenation of string.digits,\n     * string.letters, string.punctuation, and string.whitespace. The CPython interpreter\n     * outputs the whitespace characters in one order when string.whitespace is used, and a\n     * slightly different order when string.printable is used. I've elected to follow the\n     * behavior of CPython here rather than the spec. */\n    mod.printable = Sk.builtin.str(mod.digits.v + mod.letters.v + mod.punctuation.v + \" \\t\\n\\r\\x0b\\x0c\");\n\n\n    mod.split = new Sk.builtin.func(function(s, sep, maxsplit) {\n        return Sk.misceval.callsim(Sk.builtin.str.prototype['split'], s, sep, maxsplit);\n    });\n\n    /* Return a copy of word with only its first character capitalized. */\n    mod.capitalize = new Sk.builtin.func(function(word) {\n        return Sk.misceval.callsim(Sk.builtin.str.prototype['capitalize'], word);\n    });\n\n    /* Concatenate a list or tuple of words with intervening occurrences\n     * of sep. The default value for sep is a single space character. */\n    mod.join = new Sk.builtin.func(function(words, sep) {\n        if (sep === undefined) {\n            sep = Sk.builtin.str(' ');\n        }\n        return Sk.misceval.callsim(Sk.builtin.str.prototype['join'], sep, words);\n    });\n\n\n    /* Split the argument into words using split(), capitalize each word\n     * using capitalize(), and join the capitalized words using join().\n     * Note that this replaces runs of whitespace characters by a single\n     * space, and removes leading and trailing whitespace. */\n    mod.capwords = new Sk.builtin.func(function(s, sep) {\n        Sk.builtin.pyCheckArgs('capwords', arguments, 1, 2);\n        if (!Sk.builtin.checkString(s)) {\n            throw new Sk.builtin.TypeError(\"s must be a string\");\n        }\n        if (sep === undefined) {\n            sep = Sk.builtin.str(' ');\n        }\n        if(!Sk.builtin.checkString(sep)) {\n            throw new Sk.builtin.TypeError(\"sep must be a string\");\n        }\n\n        var words = Sk.misceval.callsim(mod.split, s, sep);\n        var capWords = [];\n        for (var i=0; i<words.v.length; i++) {\n            var word = Sk.builtin.list.prototype['list_subscript_'].call(words, i);\n            var cap = Sk.misceval.callsim(mod.capitalize, word);\n            capWords.push(cap);\n        }\n\n        return Sk.misceval.callsim(mod.join, Sk.builtin.list(capWords), sep);\n    });\n\n\n    return mod;\n};", "src/builtin/sys.js": "var $builtinmodule = function(name)\n{\n    var sys = {};\n\n    var args = [];\n    var argv = Sk.getSysArgv();\n    for (var i = 0; i < argv.length; ++i)\n        args.push(new Sk.builtin.str(argv[i]));\n    sys.argv = new Sk.builtins['list'](args);\n\n    sys.copyright = Sk.builtin['str'](\"Copyright 2009-2010 Scott Graham.\\nAll Rights Reserved.\\n\");\n\n    sys.modules = Sk.sysmodules;\n\n    sys.path = Sk.realsyspath;\n\n    sys.getExecutionLimit = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(Sk.execLimit, Sk.builtin.nmber.int$);\n    });\n\n    sys.setExecutionLimit = new Sk.builtin.func(function(t) {\n        if (t !==  undefined) {\n            Sk.execLimit = Sk.builtin.asnum$(t);\n        }\n    });\n\n    sys.resetTimeout = new Sk.builtin.func(function() {\n        Sk.execStart = new Date();\n    });\n\n    sys.debug = new Sk.builtin.func(function() {\n        debugger;\n    });\n\n    return sys;\n};\n", "src/lib/pythonds/trees/balance.py": "#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nfrom .bst import BinarySearchTree, TreeNode\n\nclass AVLTree(BinarySearchTree):\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  has_key(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n    '''\n\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.leftChild)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.rightChild)                \n\n    def updateBalance(self,node):\n        if node.balanceFactor > 1 or node.balanceFactor < -1:\n            self.rebalance(node)\n            return\n        if node.parent != None:\n            if node.isLeftChild():\n                node.parent.balanceFactor += 1\n            elif node.isRightChild():\n                node.parent.balanceFactor -= 1\n\n            if node.parent.balanceFactor != 0:\n                self.updateBalance(node.parent)\n\n    def rebalance(self,node):\n        if node.balanceFactor < 0:\n            if node.rightChild.balanceFactor > 0:\n                # Do an LR Rotation\n                self.rotateRight(node.rightChild)\n                self.rotateLeft(node)\n            else:\n                # single left\n                self.rotateLeft(node)\n        elif node.balanceFactor > 0:\n            if node.leftChild.balanceFactor < 0:\n                # Do an RL Rotation\n                self.rotateLeft(node.leftChild)\n                self.rotateRight(node)\n            else:\n                # single right\n                self.rotateRight(node)\n\n    def rotateLeft(self,rotRoot):\n        newRoot = rotRoot.rightChild\n        rotRoot.rightChild = newRoot.leftChild\n        if newRoot.leftChild != None:\n            newRoot.leftChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isLeftChild():\n                rotRoot.parent.leftChild = newRoot\n            else:\n                rotRoot.parent.rightChild = newRoot\n        newRoot.leftChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor + 1 - min(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor + 1 + max(rotRoot.balanceFactor, 0)\n\n\n    def rotateRight(self,rotRoot):\n        newRoot = rotRoot.leftChild\n        rotRoot.leftChild = newRoot.rightChild\n        if newRoot.rightChild != None:\n            newRoot.rightChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isRightChild():\n                rotRoot.parent.rightChild = newRoot\n            else:\n                rotRoot.parent.leftChild = newRoot\n        newRoot.rightChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor - 1 - max(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor - 1 + min(rotRoot.balanceFactor, 0)\n        \n", "src/lib/urllib/request/__init__.js": "var $builtinmodule = function(name)\n{\n  var request = {};\n\n\n  //~ Classes .................................................................\n\n  // Response class\n  //\n  // Response objects are returned by the request, get, post, etc.\n  // methods, allowing the user to access the response text, status\n  // code, and other information.\n\n  // ------------------------------------------------------------\n  var response = function($gbl, $loc) {\n\n    // ------------------------------------------------------------\n    $loc.__init__ = new Sk.builtin.func(function(self, xhr) {\n      self.data$ = xhr.responseText;\n      self.lineList = self.data$.split(\"\\n\");\n      self.lineList = self.lineList.slice(0,-1);\n      for(var i =0 ; i < self.lineList.length; i++) {\n        self.lineList[i] = self.lineList[i]+'\\n';\n      }\n      self.currentLine = 0;\n      self.pos$ = 0;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return Sk.ffi.remapToPy('<Response>');\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__iter__ = new Sk.builtin.func(function(self) {\n      var allLines = self.lineList;\n\n      return Sk.builtin.makeGenerator(function() {\n          if (this.$index >= this.$lines.length) return undefined;\n          return new Sk.builtin.str(this.$lines[this.$index++]);\n        }, {\n          $obj: self,\n          $index: 0,\n          $lines: allLines\n        });\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.read = new Sk.builtin.func(function(self, size) {\n      if (self.closed) throw new Sk.builtin.ValueError(\"I/O operation on closed file\");\n      var len = self.data$.length;\n      if (size === undefined) size = len;\n      var ret = new Sk.builtin.str(self.data$.substr(self.pos$, size));\n      self.pos$ += size;\n      if (self.pos$ >= len) self.pos$ = len;\n      return ret;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readline = new Sk.builtin.func(function(self, size) {\n      var line = \"\";\n      if (self.currentLine < self.lineList.length) {\n        line = self.lineList[self.currentLine];\n        self.currentLine++;\n      }\n      return new Sk.builtin.str(line);\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readlines = new Sk.builtin.func(function(self, sizehint) {\n      var arr = [];\n      for(var i = self.currentLine; i < self.lineList.length; i++) {\n        arr.push(new Sk.builtin.str(self.lineList[i]));\n      }\n      return new Sk.builtin.list(arr);\n    });\n\n  };\n\n  request.Response =\n    Sk.misceval.buildClass(request, response, 'Response', []);\n\n\n  //~ Module functions ........................................................\n\n  // ------------------------------------------------------------\n  /**\n   * Constructs and sends a Request. Returns Response object.\n   *\n   * http://docs.python-requests.org/en/latest/api/#requests.request\n   *\n   * For now, this implementation doesn't actually construct a Request\n   * object; it just makes the request through jQuery.ajax and then\n   * constructs a Response.\n   */\n  request.urlopen = new Sk.builtin.func(function(url, data, timeout) {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.open(\"GET\",url.v,false);\n    xmlhttp.send(null);\n\n    return Sk.misceval.callsim(request.Response,xmlhttp)\n  });\n\n\n  return request;\n};\n", "src/lib/matplotlib/__init__.js": "var $builtinmodule = function(name)\n{\n  var matplotlib = {};\n\n  return matplotlib;\n};\n", "src/lib/pythonds/basic/queue.py": "# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#queue.py\n\nclass Queue:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def enqueue(self, item):\n        self.items.insert(0,item)\n\n    def dequeue(self):\n        return self.items.pop()\n\n    def size(self):\n        return len(self.items)\n", "src/lib/numpy/__init__.js": "/**\n\tMade by Michael Ebert for https://github.com/skulpt/skulpt\n\tndarray implementation inspired by https://github.com/geometryzen/davinci-dev (not compatible with skulpt)\n\n\tSome methods are based on the original numpy implementation.\n\n\tSee http://waywaaard.github.io/skulpt/ for more information.\n**/\n\nvar numpy = function () {\n  if (typeof mathjs == 'function') {\n    // load mathjs instance\n    this.math = mathjs();\n  } else {\n    Sk.debugout(\"mathjs not included and callable\");\n  }\n};\n\nnumpy.prototype.wrapasfloats = function (values) {\n  var i;\n  for (i = 0; i < values.length; i++) {\n    values[i] = new Sk.builtin.nmber(values[i], Sk.builtin.nmber.float$);\n  }\n\n  return values;\n};\n\nnumpy.prototype.arange = function (start, stop, step) {\n  if (step === undefined)\n    step = 1.0;\n\n  start *= 1.0;\n  stop *= 1.0;\n  step *= 1.0;\n\n  var res = [];\n  for (var i = start; i < stop; i += step) {\n    res.push(i);\n  }\n\n  return res;\n};\n\nvar $builtinmodule = function (name) {\n  var np = new numpy();\n\n  var mod = {};\n\n  /**\n\t\tClass for numpy.ndarray\n\t**/\n  var CLASS_NDARRAY = \"numpy.ndarray\";\n\n  function remapToJs_shallow(obj, shallow) {\n    var _shallow = shallow || true;\n    if (obj instanceof Sk.builtin.list) {\n      if (!_shallow) {\n        var ret = [];\n        for (var i = 0; i < obj.v.length; ++i) {\n          ret.push(Sk.ffi.remapToJs(obj.v[i]));\n        }\n        return ret;\n      } else {\n        return obj.v;\n      }\n    } else if (obj instanceof Sk.builtin.float_) {\n      return Sk.builtin.asnum$nofloat(obj);\n    } else {\n      return Sk.ffi.remapToJs(obj);\n    }\n  }\n\n  /**\n\t\tUnpacks in any form fo nested Lists\n\t**/\n  function unpack(py_obj, buffer, state) {\n    if (py_obj instanceof Sk.builtin.list || py_obj instanceof Sk.builtin.tuple) {\n      var py_items = remapToJs_shallow(py_obj);\n      state.level += 1;\n\n      if (state.level > state.shape.length) {\n        state.shape.push(py_items.length);\n      }\n      var i;\n      var len = py_items.length;\n      for (i = 0; i < len; i++) {\n        unpack(py_items[i], buffer, state);\n      }\n      state.level -= 1;\n    } else {\n      buffer.push(py_obj);\n    }\n  }\n\n  /**\n   Computes the strides for columns and rows\n  **/\n  function computeStrides(shape) {\n    var strides = shape.slice(0);\n    strides.reverse();\n    var prod = 1;\n    var temp;\n    for (var i = 0, len = strides.length; i < len; i++) {\n      temp = strides[i];\n      strides[i] = prod;\n      prod *= temp;\n    }\n\n    return strides.reverse();\n  }\n\n  /**\n    Computes the offset for the ndarray for given index and strides\n    [1, ..., n]\n  **/\n  function computeOffset(strides, index) {\n    var offset = 0;\n    for (var k = 0, len = strides.length; k < len; k++) {\n      offset += strides[k] * index[k];\n    }\n    return offset;\n  }\n\n  /**\n    Calculates the size of the ndarray, dummy\n\t**/\n  function prod(numbers) {\n    var size = 1;\n    var i;\n    for (i = 0; i < numbers.length; i++) {\n      size *= numbers[i];\n    }\n    return size;\n  }\n\n  /**\n\t\tCreates a string representation for given buffer and shape\n\t\tbuffer is an ndarray\n\t**/\n  function stringify(buffer, shape, dtype) {\n    var emits = shape.map(function (x) {\n      return 0;\n    });\n    var uBound = shape.length - 1;\n    var idxLevel = 0;\n    var str = \"[\";\n    var i = 0;\n    while (idxLevel !== -1) {\n      if (emits[idxLevel] < shape[idxLevel]) {\n        if (emits[idxLevel] !== 0) {\n          str += \", \";\n        }\n\n        if (idxLevel < uBound) {\n          str += \"[\";\n          idxLevel += 1;\n        } else {\n          if (dtype === Sk.builtin.float_)\n            str += Sk.ffi.remapToJs(Sk.builtin.str(new Sk.builtin.float_(buffer[\n              i++])));\n          else\n            str += Sk.ffi.remapToJs(Sk.builtin.str(buffer[i++]));\n          emits[idxLevel] += 1;\n        }\n      } else {\n        emits[idxLevel] = 0;\n        str += \"]\";\n        idxLevel -= 1;\n        if (idxLevel >= 0) {\n          emits[idxLevel] += 1;\n        }\n      }\n    }\n    return str;\n  }\n\n  /*\n    http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tolist.html?highlight=tolist#numpy.ndarray.tolist\n  */\n  function tolistrecursive(buffer, shape, strides, startdim, dtype) {\n    var i, n, stride;\n    var arr, item;\n\n    /* Base case */\n    if (startdim >= shape.length) {\n      if (dtype && dtype === Sk.builtin.float_) {\n        return new Sk.builtin.float_(buffer[0]); // handle float special case\n      } else {\n        return Sk.ffi.remapToPy(buffer[0]);\n      }\n    }\n\n    n = shape[startdim];\n    stride = strides[startdim];\n\n    arr = [];\n\n    for (i = 0; i < n; i++) {\n      item = tolistrecursive(buffer, shape, strides, startdim + 1, dtype);\n      arr.push(item);\n\n      buffer = buffer.slice(stride);\n    }\n\n    return new Sk.builtin.list(arr);\n  }\n\n  /**\n\t internal tolist interface\n\t**/\n  function tolist(buffer, shape, strides, dtype) {\n    var buffer_copy = buffer.slice(0);\n    return tolistrecursive(buffer_copy, shape, strides, 0, dtype);\n  }\n\n  /**\n    Updates all attributes of the numpy.ndarray\n  **/\n  function updateAttributes(self, ndarrayJs) {\n    Sk.abstr.sattr(self, 'ndmin', new Sk.builtin.int_(ndarrayJs.shape.length));\n    Sk.abstr.sattr(self, 'dtype', ndarrayJs.dtype);\n    Sk.abstr.sattr(self, 'shape', new Sk.builtin.tuple(ndarrayJs.shape.map(\n      function (x) {\n        return new Sk.builtin.int_(x);\n      })));\n    Sk.abstr.sattr(self, 'strides', new Sk.builtin.tuple(ndarrayJs.strides.map(\n      function (x) {\n        return new Sk.builtin.int_(x);\n      })));\n    Sk.abstr.sattr(self, 'size', new Sk.builtin.int_(prod(ndarrayJs.shape)));\n    Sk.abstr.sattr(self, 'data', new Sk.ffi.remapToPy(ndarrayJs.buffer));\n  }\n\n  /**\n    An array object represents a multidimensional, homogeneous array of fixed-size items.\n    An associated data-type object describes the format of each element in the array\n    (its byte-order, how many bytes it occupies in memory, whether it is an integer, a\n    floating point number, or something else, etc.)\n\n    Arrays should be constructed using array, zeros or empty (refer to the See Also\n    section below). The parameters given here refer to a low-level method (ndarray(...)) for\n    instantiating an array.\n\n    For more information, refer to the numpy module and examine the the methods and\n    attributes of an array.\n  **/\n  var ndarray_f = function ($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function (self, shape, dtype, buffer,\n      offset, strides, order) {\n      var ndarrayJs = {}; // js object holding the actual array\n      ndarrayJs.shape = Sk.ffi.remapToJs(shape);\n\n      ndarrayJs.strides = computeStrides(ndarrayJs.shape);\n      ndarrayJs.dtype = dtype || Sk.builtin.none.none$;\n\n      if (buffer && buffer instanceof Sk.builtin.list) {\n        ndarrayJs.buffer = Sk.ffi.remapToJs(buffer);\n      }\n\n      self.v = ndarrayJs; // value holding the actual js object and array\n      self.tp$name = CLASS_NDARRAY; // set class name\n\n      updateAttributes(self, ndarrayJs);\n    });\n\n    $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n    // ToDo: setAttribute should be implemented, change of shape causes resize\n    // ndmin cannot be set, etc...\n    $loc.tp$setattr = Sk.builtin.object.prototype.GenericSetAttr;\n\n    /*\n      Return the array as a (possibly nested) list.\n\n      Return a copy of the array data as a (nested) Python list. Data items are\n      converted to the nearest compatible Python type.\n    */\n    $loc.tolist = new Sk.builtin.func(function (self) {\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      var list = tolist(ndarrayJs.buffer, ndarrayJs.shape, ndarrayJs.strides,\n        ndarrayJs.dtype);\n\n      return list;\n    });\n\n    $loc.reshape = new Sk.builtin.func(function (self, shape, order) {\n      Sk.builtin.pyCheckArgs(\"reshape\", arguments, 2, 3);\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, ndarrayJs.dtype,\n        new Sk.builtin.list(ndarrayJs.buffer));\n    });\n\n    $loc.copy = new Sk.builtin.func(function (self, order) {\n      Sk.builtin.pyCheckArgs(\"copy\", arguments, 1, 2);\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      var buffer = ndarrayJs.buffer.map(function (x) {\n        return x;\n      });\n      var shape = new Sk.builtin.tuplePy(ndarrayJs.shape.map(function (x) {\n        return new Sk.builtin.int_(x);\n      }));\n      return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, ndarrayJs.dtype,\n        new Sk.builtin.list(buffer));\n    });\n\n    /**\n      Fill the array with a scalar value.\n      Parameters: value: scalar\n                    All elements of a will be assigned this value\n    **/\n    $loc.fill = new Sk.builtin.func(function (self, value) {\n      Sk.builtin.pyCheckArgs(\"fill\", arguments, 2, 2);\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      var buffer = ndarrayJs.buffer.map(function (x) {\n        return x;\n      });\n      var i;\n      for (i = 0; i < ndarrayJs.buffer.length; i++) {\n        if (ndarrayJs.dtype) {\n          ndarrayJs.buffer[i] = Sk.misceval.callsim(ndarrayJs.dtype,\n            value);\n        }\n      }\n    });\n\n    $loc.__getslice__ = new Sk.builtin.func( function (self, start, stop) {\n      Sk.builtin.pyCheckArgs( \"[]\", arguments, 3, 2 );\n      var ndarrayJs = Sk.ffi.remapToJs( self );\n      var _index; // current index\n      var _buffer; // buffer as python type\n      var buffer_internal; // buffer als js array\n      var _stride; // stride\n      var _shape; // shape as js\n      var i;\n      var _start;\n      var _stop;\n\n      if ( !Sk.builtin.checkInt( start ) && !( Sk.builtin.checkInt( stop ) || Sk.builtin.checkNone( stop ) || stop === undefined) ) {\n        // support for slices e.g. [1,4] or [0,]\n\n        _start = Sk.ffi.remapToJs(start);\n        if(stop === undefined || Sk.builtin.checkNone( stop )) {\n          _stop = ndarrayJs.buffer.length;\n        } else {\n          _stop = Sk.ffi.remapToJs(start);\n        }\n\n        if(_start < 0 || _stop < 0) {\n          throw new Sk.builtin.IndexError('Use of negative indices is not supported.');\n        }\n\n        buffer_internal = [];\n        _index = 0;\n        for ( i = _start; i < _stop; i += 1 ) {\n          buffer_internal[ _index++ ] = ndarrayJs.buffer[ i ];\n        }\n        _buffer = new Sk.builtin.list( buffer_internal );\n        _shape = new Sk.builtin.tuple( [ buffer_internal.length ].map(\n          function (x) {\n            return new Sk.builtin.int_( x );\n          } ) );\n        return Sk.misceval.callsim(mod[ CLASS_NDARRAY ], _shape, undefined,\n          _buffer );\n      } else {\n        throw new Sk.builtin.ValueError( 'Index \"' + index +\n          '\" must be int' );\n      }\n    } );\n\n    $loc.__setslice__ = new Sk.builtin.func( function (self, start, stop, value) {\n      Sk.builtin.pyCheckArgs( \"[]\", arguments, 3, 2 );\n      var ndarrayJs = Sk.ffi.remapToJs( self );\n      var _index; // current index\n      var _buffer; // buffer as python type\n      var buffer_internal; // buffer als js array\n      var _stride; // stride\n      var _shape; // shape as js\n      var i;\n      var _start;\n      var _stop;\n\n      if ( !Sk.builtin.checkInt( start ) && !( Sk.builtin.checkInt( stop ) || Sk.builtin.checkNone( stop ) || stop === undefined) ) {\n        // support for slices e.g. [1,4] or [0,]\n\n        _start = Sk.ffi.remapToJs(start);\n        if(stop === undefined || Sk.builtin.checkNone( stop )) {\n          _stop = ndarrayJs.buffer.length;\n        } else {\n          _stop = Sk.ffi.remapToJs(start);\n        }\n\n        if(_start < 0 || _stop < 0) {\n          throw new Sk.builtin.IndexError('Use of negative indices is not supported.');\n        }\n\n        for ( i = _start; i < _stop; i += 1 ) {\n          ndarrayJs.buffer[computeOffset(ndarrayJs.strides, i)] = value;\n        }\n      } else {\n        throw new Sk.builtin.ValueError( 'Index \"' + index +\n          '\" must be int' );\n      }\n    } );\n\n    $loc.__getitem__ = new Sk.builtin.func(function (self, index) {\n      Sk.builtin.pyCheckArgs(\"[]\", arguments, 2, 2);\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      var _index; // current index\n      var _buffer; // buffer as python type\n      var buffer_internal; // buffer als js array\n      var _stride; // stride\n      var _shape; // shape as js\n      var i;\n\n      // single index e.g. [3]\n      if (Sk.builtin.checkInt(index)) {\n        var offset = Sk.ffi.remapToJs(index);\n\n        if (ndarrayJs.shape.length > 1) {\n          _stride = ndarrayJs.strides[0];\n          buffer_internal = [];\n          _index = 0;\n\n          for (i = offset * _stride, ubound = (offset + 1) * _stride; i <\n            ubound; i++) {\n            buffer_internal[_index++] = ndarrayJs.buffer[i];\n          }\n\n          _buffer = new Sk.builtin.list(buffer_internal);\n          _shape = new Sk.builtin.tuple(Array.prototype.slice.call(\n              ndarrayJs.shape,\n              1)\n            .map(function (x) {\n              return new Sk.builtin.int_(x);\n            }));\n          return Sk.misceval.callsim(mod[CLASS_NDARRAY], _shape,\n            undefined,\n            _buffer);\n        } else {\n          if (offset >= 0 && offset < ndarrayJs.buffer.length) {\n            return ndarrayJs.buffer[offset];\n          } else {\n            throw new Sk.builtin.IndexError(\"array index out of range\");\n          }\n        }\n      } else if (index instanceof Sk.builtin.tuple) {\n        // index like [1,3]\n        var keyJs = Sk.ffi.remapToJs(index);\n        return ndarrayJs.buffer[computeOffset(ndarrayJs.strides, keyJs)];\n      } else if (index instanceof Sk.builtin.slice) {\n        // support for slices e.g. [1:4]\n        var indices = index.indices();\n        var start = typeof indices[0] !== 'undefined' ? indices[0] : 0;\n        var stop = typeof indices[1] !== 'undefined' ? indices[1] :\n          ndarrayJs\n          .buffer.length;\n        stop = stop > ndarrayJs.buffer.length ? ndarrayJs.buffer.length :\n          stop;\n        var step = typeof indices[2] !== 'undefined' ? indices[2] : 1;\n        buffer_internal = [];\n        _index = 0;\n        if (step > 0) {\n          for (i = start; i < stop; i += step) {\n            buffer_internal[_index++] = ndarrayJs.buffer[i];\n          }\n        }\n        _buffer = new Sk.builtin.list(buffer_internal);\n        _shape = new Sk.builtin.tuple([buffer_internal.length].map(\n          function (\n            x) {\n            return new Sk.builtin.int_(x);\n          }));\n        return Sk.misceval.callsim(mod[CLASS_NDARRAY], _shape, undefined,\n          _buffer);\n      } else {\n        throw new Sk.builtin.ValueError('Index \"' + index +\n          '\" must be int, slice or tuple');\n      }\n    });\n\n    $loc.__setitem__ = new Sk.builtin.func(function (self, index, value) {\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      Sk.builtin.pyCheckArgs(\"[]\", arguments, 3, 3);\n      if (Sk.builtin.checkInt(index)) {\n        var _offset = Sk.ffi.remapToJs(index);\n        if (ndarrayJs.shape.length > 1) {\n          var _value = Sk.ffi.remapToJs(value);\n          var _stride = ndarrayJs.strides[0];\n          var _index = 0;\n\n          var _ubound = (_offset + 1) * _stride;\n          var i;\n          for (i = _offset * _stride; i < _ubound; i++) {\n            ndarrayJs.buffer[i] = _value.buffer[_index++];\n          }\n        } else {\n          if (_offset >= 0 && _offset < ndarrayJs.buffer.length) {\n            ndarrayJs.buffer[_offset] = value;\n          } else {\n            throw new Sk.builtin.IndexError(\"array index out of range\");\n          }\n        }\n      } else if (index instanceof Sk.builtin.tuple) {\n        _key = Sk.ffi.remapToJs(index);\n        ndarrayJs.buffer[computeOffset(ndarrayJs.strides, _key)] = value;\n      } else {\n        throw new Sk.builtin.TypeError(\n          'argument \"index\" must be int or tuple');\n      }\n    });\n\n    $loc.__len__ = new Sk.builtin.func(function (self) {\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      return new Sk.builtin.int_(ndarrayJs.shape[0]);\n    });\n\n    $loc.__iter__ = new Sk.builtin.func(function (self) {\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      var ret = {\n        tp$iter: function () {\n          return ret;\n        },\n        $obj: ndarrayJs,\n        $index: 0,\n        tp$iternext: function () {\n          if (ret.$index >= ret.$obj.buffer.length) return undefined;\n          return ret.$obj.buffer[ret.$index++];\n        }\n      };\n      return ret;\n    });\n\n    $loc.__str__ = new Sk.builtin.func(function (self) {\n      var ndarrayJs = remapToJs_shallow(self, false);\n      return new Sk.builtin.str(stringify(ndarrayJs.buffer,\n        ndarrayJs.shape, ndarrayJs.dtype));\n    });\n\n    $loc.__repr__ = new Sk.builtin.func(function (self) {\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      return new Sk.builtin.str(\"array(\" + stringify(ndarrayJs.buffer,\n        ndarrayJs.shape, ndarrayJs.dtype) + \")\");\n    });\n\n    /**\n      Creates left hand side operations for given binary operator\n    **/\n    function makeNumericBinaryOpLhs(operation) {\n      return function (self, other) {\n        var lhs;\n        var rhs;\n        var buffer; // external\n        var _buffer; // internal use\n        var shape; // new shape of returned ndarray\n        var i;\n\n\n        var ndarrayJs = Sk.ffi.remapToJs(self);\n\n        if (Sk.abstr.typeName(other) === CLASS_NDARRAY) {\n          lhs = ndarrayJs.buffer;\n          rhs = Sk.ffi.remapToJs(other)\n            .buffer;\n          _buffer = [];\n          for (i = 0, len = lhs.length; i < len; i++) {\n            //_buffer[i] = operation(lhs[i], rhs[i]);\n            _buffer[i] = Sk.abstr.binary_op_(lhs[i], rhs[i], operation);\n          }\n        } else {\n          lhs = ndarrayJs.buffer;\n          _buffer = [];\n          for (i = 0, len = lhs.length; i < len; i++) {\n            _buffer[i] = Sk.abstr.numberBinOp(lhs[i], other, operation);\n          }\n        }\n\n        // create return ndarray\n        shape = new Sk.builtin.tuple(ndarrayJs.shape.map(function (x) {\n          return new Sk.builtin.int_(x);\n        }));\n        buffer = new Sk.builtin.list(_buffer);\n        return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, undefined,\n          buffer);\n      };\n    }\n\n    function makeNumericBinaryOpRhs(operation) {\n      return function (self, other) {\n        var ndarrayJs = Sk.ffi.remapToJs(self);\n        var rhsBuffer = ndarrayJs.buffer;\n        var _buffer = [];\n        for (var i = 0, len = rhsBuffer.length; i < len; i++) {\n          _buffer[i] = Sk.abstr.numberBinOp(other, rhsBuffer[i], operation);\n        }\n        var shape = new Sk.builtin.tuple(ndarrayJs.shape.map(function (x) {\n          return new Sk.builtin.int_(x);\n        }));\n        buffer = new Sk.builtin.list(_buffer);\n        return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, undefined, buffer);\n      };\n    }\n\n    /*\n      Applies given operation on each element of the ndarray.\n    */\n    function makeUnaryOp(operation) {\n      return function (self) {\n        var ndarrayJs = Sk.ffi.remapToJs(self);\n        var _buffer = ndarrayJs.buffer.map(function (value) {\n          return Sk.abstr.numberUnaryOp(Sk.ffi.remapToPy(value), operation);\n        });\n        var shape = new Sk.builtin.tuple(ndarrayJs.shape.map(function (x) {\n          return new Sk.builtin.int_(x);\n        }));\n        buffer = new Sk.builtin.list(_buffer);\n        return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, undefined, buffer);\n      };\n    }\n\n    $loc.__add__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"Add\"));\n    $loc.__radd__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"Add\"));\n\n    $loc.__sub__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"Sub\"));\n    $loc.__rsub__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"Sub\"));\n\n    $loc.__mul__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"Mult\"));\n    $loc.__rmul__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"Mult\"));\n\n    $loc.__div__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"Div\"));\n    $loc.__rdiv__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"Div\"));\n\n    $loc.__mod__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"Mod\"));\n    $loc.__rmod__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"Mod\"));\n\n    $loc.__xor__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"BitXor\"));\n    $loc.__rxor__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"BitXor\"));\n\n    $loc.__lshift__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"LShift\"));\n    $loc.__rlshift__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"LShift\"));\n\n    $loc.__rshift__ = new Sk.builtin.func(makeNumericBinaryOpLhs(\"RShift\"));\n    $loc.__rrshift__ = new Sk.builtin.func(makeNumericBinaryOpRhs(\"RShift\"));\n\n    $loc.__pos__ = new Sk.builtin.func(makeUnaryOp(\"UAdd\"));\n    $loc.__neg__ = new Sk.builtin.func(makeUnaryOp(\"USub\"));\n\n    /**\n     Simple pow implementation that faciliates the pow builtin\n    **/\n    $loc.__pow__ = new Sk.builtin.func(function (self, other) {\n      Sk.builtin.pyCheckArgs(\"__pow__\", arguments, 2, 2);\n      var ndarrayJs = Sk.ffi.remapToJs(self);\n      var _buffer = ndarrayJs.buffer.map(function (value) {\n        return Sk.builtin.pow(Sk.ffi.remapToPy(value), other);\n      });\n      var shape = new Sk.builtin.tuple(ndarrayJs.shape.map(function (x) {\n        return new Sk.builtin.int_(x);\n      }));\n      buffer = new Sk.builtin.list(_buffer);\n      return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, undefined, buffer);\n    });\n\n    // end of ndarray_f\n  };\n\n  mod[CLASS_NDARRAY] = Sk.misceval.buildClass(mod, ndarray_f,\n    CLASS_NDARRAY, []);\n\n  /**\n   Trigonometric functions, all element wise\n  **/\n  mod.pi = Sk.builtin.assk$(np.math ? np.math.PI : Math.PI, Sk.builtin.nmber.float$);\n  mod.e = Sk.builtin.assk$(np.math ? np.math.E : Math.E, Sk.builtin.nmber.float$);\n  /**\n  Trigonometric sine, element-wise.\n  **/\n\n  function callTrigonometricFunc(x, op) {\n    var res;\n    var num;\n    if (x instanceof Sk.builtin.list || x instanceof Sk.builtin.tuple) {\n      x = Sk.misceval.callsim(mod.array, x);\n    }\n\n    if (Sk.abstr.typeName(x) === CLASS_NDARRAY) {\n      var ndarrayJs = Sk.ffi.remapToJs(x);\n\n      var _buffer = ndarrayJs.buffer.map(function (value) {\n        num = Sk.builtin.asnum$(value);\n        res = op.call(null, num);\n        return new Sk.builtin.nmber(res, Sk.builtin.nmber\n          .float$);\n      });\n\n      var shape = new Sk.builtin.tuple(ndarrayJs.shape.map(function (x) {\n        return new Sk.builtin.int_(x);\n      }));\n\n      buffer = new Sk.builtin.list(_buffer);\n      return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, undefined, buffer);\n    } else if (Sk.builtin.checkNumber(x)) {\n      num = Sk.builtin.asnum$(x);\n      res = op.call(null, num);\n      return new Sk.builtin.nmber(res, Sk.builtin.nmber\n        .float$);\n    }\n\n    throw new Sk.builtin.TypeError('Unsupported argument type for \"x\"');\n  }\n\n  // Sine, element-wise.\n  var sin_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"sin\", arguments, 1, 2);\n    return callTrigonometricFunc(x, np.math ? np.math.sin : Math.sin);\n  };\n  sin_f.co_varnames = ['x', 'out'];\n  sin_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.sin = new Sk.builtin.func(sin_f);\n\n  // Hyperbolic sine, element-wise.\n  var sinh_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"sinh\", arguments, 1, 2);\n    if (!np.math) throw new Sk.builtin.OperationError(\"sinh requires mathjs\");\n    return callTrigonometricFunc(x, np.math.sinh);\n  };\n  sinh_f.co_varnames = ['x', 'out'];\n  sinh_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.sinh = new Sk.builtin.func(sinh_f);\n\n  // Inverse sine, element-wise.\n  var arcsin_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"arcsin\", arguments, 1, 2);\n    return callTrigonometricFunc(x, np.math ? np.math.asin : Math.asin);\n  };\n  arcsin_f.co_varnames = ['x', 'out'];\n  arcsin_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.arcsin = new Sk.builtin.func(arcsin_f);\n\n  // Cosine, element-wise.\n  var cos_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"cos\", arguments, 1, 2);\n    return callTrigonometricFunc(x, np.math ? np.math.cos : Math.cos);\n  };\n  cos_f.co_varnames = ['x', 'out'];\n  cos_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.cos = new Sk.builtin.func(cos_f);\n\n  // Hyperbolic cosine, element-wise.\n  var cosh_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"cosh\", arguments, 1, 2);\n    if (!np.math) throw new Sk.builtin.OperationError(\"cosh requires mathjs\");\n    return callTrigonometricFunc(x, np.math.cosh);\n  };\n  cosh_f.co_varnames = ['x', 'out'];\n  cosh_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.cosh = new Sk.builtin.func(cosh_f);\n\n  // Inverse cosine, element-wise.\n  var arccos_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"arccos\", arguments, 1, 2);\n    return callTrigonometricFunc(x, np.math ? np.math.acos : Math.acos);\n  };\n  arccos_f.co_varnames = ['x', 'out'];\n  arccos_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.arccos = new Sk.builtin.func(arccos_f);\n\n  // Inverse tangens, element-wise.\n  var arctan_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"arctan\", arguments, 1, 2);\n    return callTrigonometricFunc(x, np.math ? np.math.atan : Math.atan);\n  };\n  arctan_f.co_varnames = ['x', 'out'];\n  arctan_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.arctan = new Sk.builtin.func(arctan_f);\n\n  // Tangens, element-wise.\n  var tan_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"tan\", arguments, 1, 2);\n    return callTrigonometricFunc(x, np.math ? np.math.tan : Math.tan);\n  };\n  tan_f.co_varnames = ['x', 'out'];\n  tan_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.tan = new Sk.builtin.func(tan_f);\n\n  // Hyperbolic cosine, element-wise.\n  var tanh_f = function (x, out) {\n    Sk.builtin.pyCheckArgs(\"tanh\", arguments, 1, 2);\n    if (!np.math) throw new Sk.builtin.OperationError(\"tanh requires mathjs\");\n    return callTrigonometricFunc(x, np.math.tanh);\n  };\n  tanh_f.co_varnames = ['x', 'out'];\n  tanh_f.$defaults = [0, new Sk.builtin.list([])];\n  mod.tanh = new Sk.builtin.func(tanh_f);\n\n  /* Simple reimplementation of the linspace function\n   * http://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html\n   */\n  var linspace_f = function (start, stop, num, endpoint, retstep) {\n    Sk.builtin.pyCheckArgs(\"linspace\", arguments, 3, 5);\n    Sk.builtin.pyCheckType(\"start\", \"number\", Sk.builtin.checkNumber(\n      start));\n    Sk.builtin.pyCheckType(\"stop\", \"number\", Sk.builtin.checkNumber(\n      stop));\n    if (num === undefined) {\n      num = 50;\n    }\n    var num_num = Sk.builtin.asnum$(num);\n    var endpoint_bool;\n\n    if (endpoint === undefined) {\n      endpoint_bool = true;\n    } else if (endpoint.constructor === Sk.builtin.bool) {\n      endpoint_bool = endpoint.v;\n    }\n\n    var retstep_bool;\n    if (retstep === undefined) {\n      retstep_bool = false;\n    } else if (retstep.constructor === Sk.builtin.bool) {\n      retstep_bool = retstep.v;\n    }\n\n    var samples;\n    var step;\n\n    start_num = Sk.builtin.asnum$(start) * 1.0;\n    stop_num = Sk.builtin.asnum$(stop) * 1.0;\n\n    if (num_num <= 0) {\n      samples = [];\n    } else {\n\n      var samples_array;\n      if (endpoint_bool) {\n        if (num_num == 1) {\n          samples = [start_num];\n        } else {\n          step = (stop_num - start_num) / (num_num - 1);\n          samples_array = np.arange(0, num_num);\n          samples = samples_array.map(function (v) {\n            return v * step + start_num;\n          });\n          samples[samples.length - 1] = stop_num;\n        }\n      } else {\n        step = (stop_num - start_num) / num_num;\n        samples_array = np.arange(0, num_num);\n        samples = samples_array.map(function (v) {\n          return v * step + start_num;\n        });\n      }\n    }\n\n    //return as ndarray! dtype:float\n    var dtype = Sk.builtin.float_;\n    for (i = 0; i < samples.length; i++) {\n      samples[i] = Sk.misceval.callsim(dtype, samples[i]);\n    }\n\n    var buffer = Sk.builtin.list(samples);\n    var shape = new Sk.builtin.tuple([samples.length]);\n    var ndarray = Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, dtype,\n      buffer);\n\n    if (retstep_bool === true)\n      return new Sk.builtin.tuple([ndarray, step]);\n    else\n      return ndarray;\n  };\n\n  // this should allow for named parameters\n  linspace_f.co_varnames = ['start', 'stop', 'num', 'endpoint',\n    'retstep'\n  ];\n  linspace_f.$defaults = [0, 0, 50, true, false];\n  mod.linspace =\n    new Sk.builtin.func(linspace_f);\n\n  /* Simple reimplementation of the arange function\n   * http://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html#numpy.arange\n   */\n  var arange_f = function (start, stop, step, dtype) {\n    Sk.builtin.pyCheckArgs(\"arange\", arguments, 1, 4);\n    Sk.builtin.pyCheckType(\"start\", \"number\", Sk.builtin.checkNumber(\n      start));\n    var start_num;\n    var stop_num;\n    var step_num;\n\n    if (stop === undefined && step === undefined) {\n      start_num = Sk.builtin.asnum$(0);\n      stop_num = Sk.builtin.asnum$(start);\n      step_num = Sk.builtin.asnum$(1);\n    } else if (step === undefined) {\n      start_num = Sk.builtin.asnum$(start);\n      stop_num = Sk.builtin.asnum$(stop);\n      step_num = Sk.builtin.asnum$(1);\n    } else {\n      start_num = Sk.builtin.asnum$(start);\n      stop_num = Sk.builtin.asnum$(stop);\n      step_num = Sk.builtin.asnum$(step);\n    }\n\n    // set to float\n    if (!dtype || dtype == Sk.builtin.none.none$) {\n      if (Sk.builtin.checkInt(start))\n        dtype = Sk.builtin.int_;\n      else\n        dtype = Sk.builtin.float_;\n    }\n\n    // return ndarray\n    var arange_buffer = np.arange(start_num, stop_num, step_num);\n    // apply dtype casting function, if it has been provided\n    if (dtype && Sk.builtin.checkClass(dtype)) {\n      for (i = 0; i < arange_buffer.length; i++) {\n        arange_buffer[i] = Sk.misceval.callsim(dtype, arange_buffer[i]);\n      }\n    }\n\n    buffer = Sk.builtin.list(arange_buffer);\n    var shape = new Sk.builtin.tuple([arange_buffer.length]);\n    return Sk.misceval.callsim(mod[CLASS_NDARRAY], shape, dtype,\n      buffer);\n  };\n\n  arange_f.co_varnames = ['start', 'stop', 'step', 'dtype'];\n  arange_f\n    .$defaults = [0, 1, 1, Sk.builtin.none.none$];\n  mod.arange = new Sk.builtin\n    .func(arange_f);\n\n  /* implementation for numpy.array\n\t------------------------------------------------------------------------------------------------\n\t\thttp://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html#numpy.array\n\n\t\tobject : array_like\n\t\tAn array, any object exposing the array interface, an object whose __array__ method returns an array, or any (nested) sequence.\n\n\t\tdtype : data-type, optional\n\t\tThe desired data-type for the array. If not given, then the type will be determined as the minimum type required to hold the objects in the sequence. This argument can only be used to \u2018upcast\u2019 the array. For downcasting, use the .astype(t) method.\n\n\t\tcopy : bool, optional\n\t\tIf true (default), then the object is copied. Otherwise, a copy will only be made if __array__ returns a copy, if obj is a nested sequence, or if a copy is needed to satisfy any of the other requirements (dtype, order, etc.).\n\n\t\torder : {\u2018C\u2019, \u2018F\u2019, \u2018A\u2019}, optional\n\t\tSpecify the order of the array. If order is \u2018C\u2019 (default), then the array will be in C-contiguous order (last-index varies the fastest). If order is \u2018F\u2019, then the returned array will be in Fortran-contiguous order (first-index varies the fastest). If order is \u2018A\u2019, then the returned array may be in any order (either C-, Fortran-contiguous, or even discontiguous).\n\n\t\tsubok : bool, optional\n\t\tIf True, then sub-classes will be passed-through, otherwise the returned array will be forced to be a base-class array (default).\n\n\t\tndmin : int, optional\n\t\tSpecifies the minimum number of dimensions that the resulting array should have. Ones will be pre-pended to the shape as needed to meet this requirement.\n\n\t\tReturns :\n\t\tout : ndarray\n\t\tAn array object satisfying the specified requirements\n\t*/\n  // https://github.com/geometryzen/davinci-dev/blob/master/src/stdlib/numpy.js\n  // https://github.com/geometryzen/davinci-dev/blob/master/src/ffh.js\n  // http://docs.scipy.org/doc/numpy/reference/arrays.html\n  var array_f = function (object, dtype, copy, order, subok, ndmin) {\n    Sk.builtin.pyCheckArgs(\"array\", arguments, 1, 6);\n\n    if (object === undefined)\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(object) +\n        \"' object is undefined\");\n\n    var elements = [];\n    var state = {};\n    state.level = 0;\n    state.shape = [];\n\n    unpack(object, elements, state);\n\n    var i;\n    // apply dtype casting function, if it has been provided\n    if (dtype && Sk.builtin.checkClass(dtype)) {\n      for (i = 0; i < elements.length; i++) {\n        elements[i] = Sk.misceval.callsim(dtype, elements[i]);\n      }\n    } else {\n      // check elements and find first usable type\n      // should be refactored\n      for (i = 0; i < elements.length; i++) {\n        if (elements[i] && isNaN(elements[i])) {\n          dtype = Sk.builtin.float_;\n          break;\n        } else if (typeof elements[i] == 'string') {\n          dtype = Sk.builtin.str;\n        } else {\n          dtype = Sk.builtin.float_;\n        }\n      }\n    }\n\n    // check for ndmin param\n    if (ndmin) {\n      if (Sk.builtin.checkNumber(ndmin)) {\n        var _ndmin = Sk.builtin.asnum$(ndmin);\n        if (_ndmin >= 0 && _ndmin > state.shape.length) {\n          var _ndmin_array = [];\n          for (i = 0; i < _ndmin - state.shape.length; i++) {\n            _ndmin_array.push(1);\n          }\n          state.shape = _ndmin_array.concat(state.shape);\n        }\n      } else {\n        throw new Sk.builtin.TypeError(\n          'Parameter \"ndmin\" must be of type \"int\"');\n      }\n    }\n\n    var _shape = new Sk.builtin.tuple(state.shape.map(function (x) {\n      return new Sk.builtin.int_(x);\n    }));\n\n    var _buffer = new Sk.builtin.list(elements);\n    // create new ndarray instance\n    return Sk.misceval.callsim(mod[CLASS_NDARRAY], _shape, dtype,\n      _buffer);\n  };\n\n  array_f.co_varnames = ['object', 'dtype', 'copy', 'order',\n    'subok', 'ndmin'\n  ];\n  array_f.$defaults = [null, Sk.builtin.none.none$, true, new Sk.builtin.str(\n    'C'), false, new Sk.builtin.int_(0)];\n  mod.array = new Sk.builtin.func(array_f);\n\n  /**\n    Return a new array of given shape and type, filled with zeros.\n  **/\n  var zeros_f = function (shape, dtype, order) {\n    Sk.builtin.pyCheckArgs(\"zeros\", arguments, 1, 3);\n    if(!Sk.builtin.checkSequence(shape) && !Sk.builtin.checkInt(shape)) {\n      throw new Sk.builtin.TypeError('argument \"shape\" must int or sequence of ints');\n    }\n\n    if (dtype instanceof Sk.builtin.list) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(dtype) +\n        \"' is not supported for dtype.\");\n    }\n\n    var _zero = new Sk.builtin.float_(0.0);\n\n    return Sk.misceval.callsim(mod.full, shape, _zero, dtype, order);\n  };\n  zeros_f.co_varnames = ['shape', 'dtype', 'order'];\n  zeros_f.$defaults = [\n    new Sk.builtin.tuple([]), Sk.builtin.none.none$, new Sk.builtin.str('C')\n  ];\n  mod.zeros = new Sk.builtin.func(zeros_f);\n\n  /**\n    Return a new array of given shape and type, filled with `fill_value`.\n  **/\n  var full_f = function (shape, fill_value, dtype, order) {\n    Sk.builtin.pyCheckArgs(\"full\", arguments, 2, 4);\n\n    if(!Sk.builtin.checkSequence(shape) && !Sk.builtin.checkInt(shape)) {\n      throw new Sk.builtin.TypeError('argument \"shape\" must int or sequence of ints');\n    }\n\n    if (dtype instanceof Sk.builtin.list) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(dtype) +\n        \"' is currently not supported for dtype.\");\n    }\n\n    var _shape = Sk.ffi.remapToJs(shape);\n    var _tup;\n    if(Sk.builtin.checkInt(shape)) {\n      _tup = new Array();\n      _tup.push(_shape);\n      _shape = _tup;\n    }\n      // generate an array of the dimensions for the generic array method\n\n    var _size = prod(_shape);\n    var _buffer = [];\n    var _fill_value = fill_value;\n    var i;\n\n    for (i = 0; i < _size; i++) {\n      _buffer[i] = _fill_value;\n    }\n\n    // if no dtype given and type of fill_value is numeric, assume float\n    if (!dtype && Sk.builtin.checkNumber(fill_value)) {\n      dtype = Sk.builtin.float_;\n    }\n\n    // apply dtype casting function, if it has been provided\n    if (Sk.builtin.checkClass(dtype)) {\n      for (i = 0; i < _buffer.length; i++) {\n        if (_buffer[i] !== Sk.builtin.none.none$) {\n          _buffer[i] = Sk.misceval.callsim(dtype, _buffer[i]);\n        }\n      }\n    }\n    return Sk.misceval.callsim(mod[CLASS_NDARRAY], new Sk.builtin.list(_shape), dtype, new Sk.builtin\n      .list(\n        _buffer));\n  };\n  full_f.co_varnames = ['shape', 'fill_value', 'dtype', 'order'];\n  full_f.$defaults = [\n    new Sk.builtin.tuple([]), Sk.builtin.none.none$, Sk.builtin.none.none$, new Sk\n    .builtin\n    .str('C')\n  ];\n  mod.full = new Sk.builtin.func(full_f);\n\n\n  /**\n    Return a new array of given shape and type, filled with ones.\n  **/\n  var ones_f = function (shape, dtype, order) {\n    Sk.builtin.pyCheckArgs(\"ones\", arguments, 1, 3);\n\n    if(!Sk.builtin.checkSequence(shape) && !Sk.builtin.checkInt(shape)) {\n      throw new Sk.builtin.TypeError('argument \"shape\" must int or sequence of ints');\n    }\n\n    if (dtype instanceof Sk.builtin.list) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(dtype) +\n        \"' is not supported for dtype.\");\n    }\n\n    var _one = new Sk.builtin.float_(1.0);\n    return Sk.misceval.callsim(mod.full, shape, _one, dtype, order);\n  };\n  ones_f.co_varnames = ['shape', 'dtype', 'order'];\n  ones_f.$defaults = [\n    new Sk.builtin.tuple([]), Sk.builtin.none.none$, new Sk.builtin.str('C')\n  ];\n  mod.ones = new Sk.builtin.func(ones_f);\n\n  /**\n    Return a new array of given shape and type, filled with ones.\n  **/\n  var empty_f = function (shape, dtype, order) {\n    Sk.builtin.pyCheckArgs(\"empty\", arguments, 1, 3);\n\n    if(!Sk.builtin.checkSequence(shape) && !Sk.builtin.checkInt(shape)) {\n      throw new Sk.builtin.TypeError('argument \"shape\" must int or sequence of ints');\n    }\n\n    if (dtype instanceof Sk.builtin.list) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(dtype) +\n        \"' is not supported for dtype.\");\n    }\n\n    var _empty = Sk.builtin.none.none$;\n    return Sk.misceval.callsim(mod.full, shape, _empty, dtype, order);\n  };\n  empty_f.co_varnames = ['shape', 'dtype', 'order'];\n  empty_f.$defaults = [\n    new Sk.builtin.tuple([]), Sk.builtin.none.none$, new Sk.builtin.str('C')\n  ];\n  mod.empty = new Sk.builtin.func(empty_f);\n\n  /**\n    Dot product\n  **/\n  var dot_f = function (a, b) {\n    Sk.builtin.pyCheckArgs(\"dot\", arguments, 2, 2);\n\n    // ToDo: add support for ndarray args\n\n    if (!(a instanceof Sk.builtin.list) && !Sk.builtin.checkNumber(\n      a) && (Sk.abstr.typeName(a) !== CLASS_NDARRAY)) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(a) +\n        \"' is not supported for a.\");\n    }\n\n    if (!(b instanceof Sk.builtin.list) && !Sk.builtin.checkNumber(\n      b) && (Sk.abstr.typeName(b) !== CLASS_NDARRAY)) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(b) +\n        \"' is not supported for b.\");\n    }\n\n    var res;\n\n    var b_matrix;\n    var a_matrix;\n\n    if (Sk.abstr.typeName(a) === CLASS_NDARRAY) {\n      a_matrix = a.v.buffer;\n\t\t\ta_matrix = a_matrix.map(function (x) {\n\t\t\t\treturn Sk.ffi.remapToJs(x);\n\t\t\t});\n    } else {\n      a_matrix = Sk.ffi.remapToJs(a);\n    }\n\n    if (Sk.abstr.typeName(b) === CLASS_NDARRAY) {\n      b_matrix = b.v.buffer;\n\t\t\tb_matrix = b_matrix.map(function (x) {\n\t\t\t\treturn Sk.ffi.remapToJs(x);\n\t\t\t});\n    } else {\n      b_matrix = Sk.ffi.remapToJs(b);\n    }\n\n    var a_size = np.math.size(a_matrix);\n    var b_size = np.math.size(b_matrix);\n\n\n    if (a_size.length >= 1 && b_size.length > 1) {\n      if (a_size[a_size.length - 1] != b_size[b_size - 2]) {\n        throw new Sk.builtin.ValueError(\n          \"The last dimension of a is not the same size as the second-to-last dimension of b.\"\n        );\n      }\n    }\n\n    res = np.math.multiply(a_matrix, b_matrix);\n\n\t\tif (!Array.isArray(res)) { // if result\n\t\t\treturn Sk.ffi.remapToPy(res);\n\t\t}\n\n    // return ndarray\n    buffer = new Sk.builtin.list(res);\n    return Sk.misceval.callsim(mod.array, buffer, Sk.builtin.float_);\n  };\n  dot_f.co_varnames = ['a', 'b'];\n  dot_f.$defaults = [Sk.builtin.none.none$,\n    Sk.builtin.none.none$\n  ];\n  mod.dot = new Sk.builtin.func(dot_f);\n\n  /* not implemented methods */\n  mod.ones_like = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"ones_like is not yet implemented\");\n  });\n  mod.empty_like = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"empty_like is not yet implemented\");\n  });\n  mod.ones_like = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"ones_like is not yet implemented\");\n  });\n  mod.arctan2 = new Sk.builtin.func(function () {\n    throw new Sk.builtin.NotImplementedError(\n      \"arctan2 is not yet implemented\");\n  });\n  mod.asarray = new Sk.builtin.func(array_f);\n  return mod;\n};\n", "src/lib/pythonds/graphs/adjGraph.py": "#\n#  adjGraph\n#\n#  Created by Brad Miller on 2005-02-24.\n#  Copyright (c) 2005 Brad Miller, David Ranum, Luther College. All rights reserved.\n#\n\nimport sys\nimport os\nimport unittest\n\nclass Graph:\n    def __init__(self):\n        self.vertices = {}\n        self.numVertices = 0\n        \n    def addVertex(self,key):\n        self.numVertices = self.numVertices + 1\n        newVertex = Vertex(key)\n        self.vertices[key] = newVertex\n        return newVertex\n    \n    def getVertex(self,n):\n        if n in self.vertices:\n            return self.vertices[n]\n        else:\n            return None\n\n    def __contains__(self,n):\n        return n in self.vertices\n    \n    def addEdge(self,f,t,cost=0):\n            if f not in self.vertices:\n                nv = self.addVertex(f)\n            if t not in self.vertices:\n                nv = self.addVertex(t)\n            self.vertices[f].addNeighbor(self.vertices[t],cost)\n    \n    def getVertices(self):\n        return list(self.vertices.keys())\n        \n    def __iter__(self):\n        return iter(self.vertices.values())\n                \nclass Vertex:\n    def __init__(self,num):\n        self.id = num\n        self.connectedTo = {}\n        self.color = 'white'\n        self.dist = sys.maxsize\n        self.pred = None\n        self.disc = 0\n        self.fin = 0\n\n    # def __lt__(self,o):\n    #     return self.id < o.id\n    \n    def addNeighbor(self,nbr,weight=0):\n        self.connectedTo[nbr] = weight\n        \n    def setColor(self,color):\n        self.color = color\n        \n    def setDistance(self,d):\n        self.dist = d\n\n    def setPred(self,p):\n        self.pred = p\n\n    def setDiscovery(self,dtime):\n        self.disc = dtime\n        \n    def setFinish(self,ftime):\n        self.fin = ftime\n        \n    def getFinish(self):\n        return self.fin\n        \n    def getDiscovery(self):\n        return self.disc\n        \n    def getPred(self):\n        return self.pred\n        \n    def getDistance(self):\n        return self.dist\n        \n    def getColor(self):\n        return self.color\n    \n    def getConnections(self):\n        return self.connectedTo.keys()\n        \n    def getWeight(self,nbr):\n        return self.connectedTo[nbr]\n                \n    def __str__(self):\n        return str(self.id) + \":color \" + self.color + \":disc \" + str(self.disc) + \":fin \" + str(self.fin) + \":dist \" + str(self.dist) + \":pred \\n\\t[\" + str(self.pred)+ \"]\\n\"\n    \n    def getId(self):\n        return self.id\n\nclass adjGraphTests(unittest.TestCase):\n    def setUp(self):\n        self.tGraph = Graph()\n        \n    def testMakeGraph(self):\n        gFile = open(\"test.dat\")\n        for line in gFile:\n            fVertex, tVertex = line.split('|')\n            fVertex = int(fVertex)\n            tVertex = int(tVertex)\n            self.tGraph.addEdge(fVertex,tVertex)\n        for i in self.tGraph:\n            adj = i.getAdj()\n            for k in adj:\n                print(i, k)\n\n        \nif __name__ == '__main__':\n    unittest.main()\n              \n", "src/lib/turtle/__init__.js": "//\n//\n// Turtle Graphics Module for Skulpt\n//\n// Brad Miller\n//\n//\n//\nvar TurtleGraphics;\n// the single identifier needed in the global scope\nif (!TurtleGraphics) {\n    TurtleGraphics = {\n        doneDelegates: [],\n        fadeOnExit: true,\n\t\tdefaults: {\n\t\t\tcanvasID: 'mycanvas',\n\t\t\tdegrees: true,\n\t\t\tanimate: true\n\t\t}\n    };\n}\n(function () {\n    'use strict';\n    // Define private constants\n    var Degree2Rad = Math.PI / 180,\n        // conversion factor for degrees to radians\n        Rad2Degree = 180 / Math.PI,\n        render,\n        allDone,\n        segmentLine,\n        clear_canvas;\n\n    // Create a 3d Vector class for manipulating turtle heading, and position.\n    function Vector(x, y, z) {\n        var i;\n        if ((typeof x).toLowerCase() === 'number') {\n            Array.prototype.push.call(this, x);\n            Array.prototype.push.call(this, y);\n            Array.prototype.push.call(this, z);\n        } else {\n            for (i = 0; i < x.length; i = i + 1) {\n                Array.prototype.push.call(this, x[i]);\n            }\n        }\n    }\n    // Create a vector object given a direction as an angle.\n    Vector.angle2vec = function (phi) {\n        var res = new Vector([0, 0, 0]);\n        phi = phi * Degree2Rad;\n        res[0] = Math.cos(phi);\n        res[1] = Math.sin(phi);\n        return res.normalize();\n    };\n    // This trick allows you to access a Vector object like an array\n    // myVec[0] == x\n    // myVec[1] == y\n    // myVec[2] == z\n    // we really only need the z for the convenience of rotating\n    Vector.prototype.addItem = function (item) {\n        Array.prototype.push.call(this, item);\n    };\n    Vector.prototype.linear = function (a, b, v) {\n        if (this.length !== 3 || v.length !== 3) {\n            return;\n        }\n        return new Vector([a * this[0] + b * v[0],\n                           a * this[1] + b * v[1],\n                           a * this[2] + b * v[2]]);\n\n\n    };\n    Vector.prototype.cross = function (v) {\n        if (this.length !== 3 || v.length !== 3) {\n            return;\n        }\n\n        return new Vector([this[1] * v[2] - this[2] * v[1],\n                    this[2] * v[0] - this[0] * v[2],\n                    this[0] * v[1] - this[1] * v[0]]);\n    };\n    Vector.prototype.rotate = function (angle) {\n        // Rotate this counter clockwise by angle.\n        var perp = new Vector(-this[1], this[0], 0),\n            c,\n            s;\n        angle = angle * Degree2Rad;\n        c = Math.cos(angle);\n        s = Math.sin(angle);\n        return new Vector(this[0] * c + perp[0] * s, this[1] * c + perp[1] * s, 0);\n    };\n    Vector.prototype.rotateNormal = function (v, alpha) {\n        // Return rotation of this in direction of v about w over alpha\n        // Requires: v, w are vectors; alpha is angle in radians\n        //   this, v, w are orthonormal\n        return this.linear(Math.cos(alpha), Math.sin(alpha), v);\n    };\n    Vector.prototype.normalize = function () {\n        var n = this.len(),\n            res = this.div(n);\n        return res;\n    };\n    Vector.prototype.toAngle = function () {\n        // workaround for values getting set to +/i xxx e -16 fooling the +/- checks below\n        if (Math.abs(this[1]) < 0.00001) {\n            this[1] = 0;\n        }\n        if (Math.abs(this[0]) < 0.00001) {\n            this[0] = 0;\n        }\n        var rads = Math.atan(Math.abs(this[1]) / Math.abs(this[0])),\n            deg = rads * Rad2Degree;\n        if (this[0] < 0 && this[1] > 0) {\n            deg = 180 - deg;\n        } else if (this[0] < 0 && this[1] <= 0) {\n            deg = 180 + deg;\n        } else if (this[0] >= 0 && this[1] < 0) {\n            deg = 360 - deg;\n        }\n        return deg;\n    };\n    // divide all vector components by the same value\n    Vector.prototype.div = function (n) {\n        var res = [];\n        res[0] = this[0] / n;\n        res[1] = this[1] / n;\n        res[2] = this[2] / n;\n        return new Vector(res);\n    };\n    // subtract one vector from another\n    Vector.prototype.sub = function (v) {\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] - v[0];\n        res[1] = this[1] - v[1];\n        res[2] = this[2] - v[2];\n        return res;\n    };\n    Vector.prototype.add = function (v) {\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] + v[0];\n        res[1] = this[1] + v[1];\n        res[2] = this[2] + v[2];\n        return res;\n    };\n    Vector.prototype.smul = function (k) {\n        // scalar multiplication\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] * k;\n        res[1] = this[1] * k;\n        res[2] = this[2] * k;\n        return res;\n    };\n    Vector.prototype.scale = function (xs, ys) {\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] * ys;\n        res[1] = this[1] * xs;\n        res[2] = 1;\n        return res;\n    };\n    Vector.prototype.len = function () {\n        return Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    };\n\n    allDone = function () {\n        var done = true, tix, theT;\n        for (tix = 0; tix < TurtleGraphics.turtleList.length; tix = tix + 1) {\n            theT = TurtleGraphics.turtleList[tix];\n            done = done && theT.aCount >= theT.drawingEvents.length;\n        }\n        return done;\n    };\n    //\n    //  This is the function that provides the animation\n    //\n    render = function () {\n        var context = document.getElementById(TurtleGraphics.defaults.canvasID).getContext('2d'),\n            canvasLib = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID],\n            incr = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID].getCounter(),\n            t,\n            tix,\n            i,\n\t\t\tcurrentPos,\n            currentHead,\n            filling,\n            oper,\n            ts,\n            tmpColor,\n            size,\n            speed;\n\n\t\tcontext.moveTo(0, 0);\n\t\tcontext.lineCap = 'round';\n\t\tcontext.lineJoin = 'round';\n        context.clearRect(canvasLib.llx, canvasLib.lly, canvasLib.urx - canvasLib.llx, canvasLib.ury - canvasLib.lly); //canvas.style.setProperty(\"background-color\",TurtleGraphics.turtleCanvas.bgcolor.v);\n        TurtleGraphics.renderClock += incr;\n        for (tix = 0; tix < TurtleGraphics.turtleList.length; tix = tix + 1) {\n            currentPos = new Vector(0, 0, 0);\n            currentHead = new Vector(1, 0, 0);\n            context.fillStyle = 'black';\n            context.strokeStyle = 'black';\n            t = TurtleGraphics.turtleList[tix];\n\t\t\tcurrentHead = t.heading;\n            context.lastCanvas = t.turtleCanvas;\n            if (t.aCount >= t.drawingEvents.length) {\n                t.aCount = t.drawingEvents.length - 1;\n            }\n\n\t\t\tcontext.lineWidth = t.get_pen_width();\n\n            filling = false;\n            if (isNaN(t.turtleCanvas.delay)) {\n                t.turtleCanvas.delay = 0;\n            }\n            //console.log(tix + \" : \" + t.clearPoint + \" to \" + t.aCount)\n            for (i = t.clearPoint; (i <= t.aCount || t.turtleCanvas.delay === 0) && i < t.drawingEvents.length; i = i + 1) {\n                if (i > t.aCount) {\n                    //If se jump past aCount, jump it ahead\n                    t.aCount = i;\n                }\n                oper = t.drawingEvents[i];\n                ts = oper[oper.length - 1];\n                //console.log(i + \"/\" + ts + oper [0] + \"{\" + oper [1] + \"}\" + t.turtleCanvas.delay)\n                if (ts <= TurtleGraphics.renderClock || t.turtleCanvas.delay === 0) {\n                    if (ts > TurtleGraphics.renderClock) {\n                        //If we go past the render clock, jump it ahead\n                        TurtleGraphics.renderClock = ts;\n                    }\n                    //console.log(\"<==\")\n                    switch (oper[0]) {\n                    case 'LT': //line To\n                        if (!filling) {\n                            context.beginPath();\n                            context.moveTo(oper[1], oper[2]);\n                        }\n                        context.lineTo(oper[3], oper[4]);\n                        context.strokeStyle = oper[5];\n                        context.stroke();\n                        currentPos = new Vector(oper[3], oper[4], 0);\n                        if (!filling) {\n                            context.closePath();\n                        }\n                        break;\n                    case 'MT': //move to\n                        context.moveTo(oper[3], oper[4]);\n                        currentPos = new Vector(oper[3], oper[4], 0);\n                        break;\n                    case 'BF': //begin fill\n                        context.beginPath();\n                        context.moveTo(oper[1], oper[2]);\n                        filling = true;\n                        break;\n                    case 'EF': //end fill\n                        context.fillStyle = oper[3];\n                        context.stroke();\n                        context.fill();\n                        context.closePath();\n                        filling = false;\n                        break;\n                    case 'FC': // fill color\n\t\t\t\t\t\tcontext.fillStyle = oper[1];\n                        break;\n                    case 'TC': // turtle color\n                        context.strokeStyle = oper[1];\n                        break;\n                    case 'PW': // Pen width\n                        context.lineWidth = oper[1];\n                        break;\n                    case 'DT': // Dot\n                        tmpColor = context.fillStyle;\n                        context.fillStyle = oper[2];\n                        size = oper[1];\n                        context.fillRect(oper[3] - size / 2, oper[4] - size / 2, size, size);\n                        context.fillStyle = tmpColor;\n                        break;\n                    case 'CI': // Circle\n                        if (!filling) {\n                            context.beginPath();\n                        }\n                        context.arc(oper[1], oper[2], oper[3], oper[4], oper[5], oper[6]);\n                        currentPos = new Vector(oper[1] + Math.cos(oper[5]) * oper[3], oper[2] + Math.sin(oper[5]) * oper[3], 0);\n                        context.stroke();\n                        if (!filling) {\n                            context.closePath();\n                        }\n                        break;\n                    case 'WT':\n                        // write\n                        if (context.font) {\n                            context.font = oper[2];\n                        }\n                        context.scale(1, -1);\n                        context.fillText(oper[1], oper[3], -oper[4]);\n                        context.scale(1, -1);\n                        break;\n                    case 'ST':\n                        // stamp\n                        t.drawturtle(oper[3], new Vector(oper[1], oper[2], 0));\n                        break;\n                    case 'HT': // hide turtle\n                        t.visible = false;\n                        break;\n                    case 'SH': // show turtle\n                        t.visible = true;\n                        break;\n                    case 'TT': // turn\n                        currentHead = oper[1];\n                        break;\n                    case 'CL': // clear\n                        clear_canvas(t.canvasID);\n                        t.clearPoint = i; // Different from reset that calls clear because it leaves the turtles where they are\n                        break;\n                    case 'DL':  // delay\n                        t.turtleCanvas.delay = oper[1];\n                        break;\n                    case 'SC': // speed change\n                        speed = oper[1];\n\n                        if (speed < 0) {\n                            t.turtleCanvas.delay = 0;\n                        } else {\n                            if (speed > 10) {\n                                speed = 10;\n                            }\n                            t.turtleCanvas.delay = (10 - speed % 11 + 1) * t.turtleCanvas.timeFactor; //10\n                        }\n\n                        //t.turtleCanvas.intervalId = clearInterval(t.turtleCanvas.intervalId);\n                        //t.turtleCanvas.intervalId = setInterval(render, t.turtleCanvas.delay)\n                        if (oper[2]) {\n                            t.turtleCanvas.setSegmentLength(oper[2]);\n                        }\n                        break;\n                    case 'CS': // change shape\n                        t.currentShape = oper[1];\n                        break;\n                    case 'NO':\n                        break;\n                    } //else {\n                        //console.log('unknown op: ' + oper[0]);\n                    //} // end of oper[0] test\n                } // end of if ts < render clock\n            }\n            // end of for\n            // console.log(TurtleGraphics.renderClock + \" / \" + t.aCount)\n            // console.log(\"------------------------------\")\n            t.aCount += incr;\n            if (t.visible) {\n                // draw the turtle\n                t.drawturtle(currentHead.toAngle(), currentPos); // just use currentHead\n            }\n        }\n        //if (t.aCount >= t.drawingEvents.length) {\n        if (TurtleGraphics.renderClock > TurtleGraphics.eventCount) {\n            // && allDone() ){\n            //  t.turtleCanvas.doneAnimating(t);\n            //  console.log(\"done animating\")\n            if (context.lastCanvas) {\n                context.lastCanvas.doneAnimating(t);\n            }\n        } else {\n            //t.turtleCanvas.intervalId = setTimeout(render, t.turtleCanvas.delay)\n            if (context.lastCanvas) {\n                context.lastCanvas.intervalId = setTimeout(render, context.lastCanvas.delay);\n            }\n        }\n    };\n    //\n    //  Drawing Functions\n    //\n    // break a line into segments\n    // sp:  Vector of starting position\n    // ep:  Vector of ending position\n    // sl:  int length of segments\n    segmentLine = function (sp, ep, sL, pen) {\n        var head = ep.sub(sp).normalize(),\n            numSegs = Math.floor(ep.sub(sp).len() / sL),\n            res = [],\n            oldp = sp,\n            newp,\n            op = '',\n            i;\n        if (pen) {\n            op = 'LT';\n        } else {\n            op = 'MT';\n        }\n        for (i = 0; i < numSegs; i = i + 1) {\n            newp = oldp.linear(1, sL, head);\n            res.push([\n                op,\n                oldp[0],\n                oldp[1],\n                newp[0],\n                newp[1]\n            ]);\n            oldp = newp;\n        }\n        if (!(oldp[0] === ep[0] && oldp[1] === ep[1])) {\n            res.push([\n                op,\n                oldp[0],\n                oldp[1],\n                ep[0],\n                ep[1]\n            ]);\n        }\n        return res;\n    };\n\n    clear_canvas = function (canId) {\n        var ctx = document.getElementById(canId).getContext('2d');\n        //if (arguments.length >= 2) {\n        //    fillStyle = arguments[1];\n        //    fillRect(0, 0, canvas.width, canvas.height);\n        //}\n        ctx.clearRect(-ctx.canvas.width / 2, -ctx.canvas.height / 2, ctx.canvas.width, ctx.canvas.height);\n    };\n    //\n    // Define TurtleCanvas\n    //\n    function TurtleCanvas(options) {\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n        this.canvas = document.getElementById(this.canvasID);\n        this.context = this.canvas.getContext('2d');\n        this.canvas.style.display = 'block';\n        this.canvas.style.opacity = 1;\n        //$(this.canvas).fadeIn();\n        this.lineScale = 1;\n        this.xptscale = 1;\n        this.yptscale = 1;\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.setup(this.canvas.width, this.canvas.height);\n        TurtleGraphics.canvasInit = true;\n        this.tlist = [];\n        this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n        this.segmentLength = 10;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n        TurtleGraphics.canvasLib[this.canvasID] = this;\n    }\n    TurtleCanvas.prototype.setup = function (width, height) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.lineScale = 1;\n        this.xptscale = 1;\n        this.yptscale = 1;\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n        this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n        if (TurtleGraphics.canvasInit === false) {\n            this.context.save();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2);\n            // move 0,0 to center.\n            this.context.scale(1, -1);\n            // scaling like this flips the y axis the right way.\n            TurtleGraphics.canvasInit = true;\n            TurtleGraphics.eventCount = 0;\n            TurtleGraphics.renderClock = 0;\n            TurtleGraphics.renderTime = 0; // RNL\n        } else {\n            this.context.restore();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2);\n            // move 0,0 to center.\n            this.context.scale(1, -1);\n            // scaling like this flips the y axis the right way.\n            this.context.clearRect(-this.canvas.width / 2, -this.canvas.height / 2, this.canvas.width, this.canvas.height);\n        }\n    };\n    TurtleCanvas.prototype.addToCanvas = function (t) {\n        this.tlist.push(t);\n    };\n    TurtleCanvas.prototype.onCanvas = function (t) {\n        return this.tlist.indexOf(t) >= 0;\n    };\n    TurtleCanvas.prototype.isAnimating = function () {\n        return this.tlist.length > 0;\n    };\n    TurtleCanvas.prototype.startAnimating = function (t) {\n        if (!this.isAnimating()) {\n            this.intervalId = setTimeout(render, this.delay); //setInterval(render, this.delay);\n        }\n        if (!this.onCanvas(t)) {\n            //Added by RNL in case startAnimating is called after it's already been added\n            this.addToCanvas(t);\n        }\n\t\ttry {\n\t\t\tSk.isTurtleProgram = true;\n\t\t} catch (ReferenceEror) {\n\t\t}\n    };\n    TurtleCanvas.prototype.doneAnimating = function () {\n        var i;\n        this.tlist.splice(0, this.tlist.length);\n        clearTimeout(this.intervalId);\n        if (TurtleGraphics.doneDelegates) {\n            for (i = 0; i < TurtleGraphics.doneDelegates.length; i = i + 1) {\n                TurtleGraphics.doneDelegates[i]();\n            }\n        }\n    };\n    TurtleCanvas.prototype.cancelAnimation = function () {\n        var t;\n        if (this.intervalId) {\n            clearTimeout(this.intervalId);\n        }\n        for (t = 0; t < this.tlist.length; t = t + 1) {\n            this.tlist[t].aCount = this.tlist[t].drawingEvents.length - 1;\n        }\n        render();\n    };\n    TurtleCanvas.prototype.setSpeedDelay = function (s) {\n        // RNL\n        var df = 10 - s % 11 + 1;\n        this.delay = df * this.timeFactor; //RNL was 10;\n    };\n    TurtleCanvas.prototype.setDelay = function (d) {\n        this.delay = d;\n    };\n    TurtleCanvas.prototype.getDelay = function () {\n        //RNL\n        return this.delay;\n    };\n    TurtleCanvas.prototype.setCounter = function (s) {\n        if (!s || s <= 0) {\n            //Don't let this be less than 1\n            s = 1;\n        }\n        this.renderCounter = s;\n    };\n    TurtleCanvas.prototype.getCounter = function () {\n        return this.renderCounter;\n    };\n    TurtleCanvas.prototype.setworldcoordinates = function (llx, lly, urx, ury) {\n        this.context.restore();\n        this.context.scale(this.canvas.width / (urx - llx), -this.canvas.height / (ury - lly));\n        if (lly === 0) {\n            this.context.translate(-llx, lly - (ury - lly));\n        } else if (lly > 0) {\n            this.context.translate(-llx, -lly * 2);\n        } else {\n            this.context.translate(-llx, -ury);\n        }\n        var xlinescale = (urx - llx) / this.canvas.width,\n            ylinescale = (ury - lly) / this.canvas.height;\n        this.xptscale = xlinescale;\n        this.yptscale = ylinescale;\n        this.lineScale = Math.min(xlinescale, ylinescale);\n        this.context.save();\n        this.llx = llx;\n        this.lly = lly;\n        this.urx = urx;\n        this.ury = ury;\n    };\n    TurtleCanvas.prototype.window_width = function () {\n        return this.canvas.width;\n    };\n    TurtleCanvas.prototype.window_height = function () {\n        return this.canvas.height;\n    };\n    TurtleCanvas.prototype.bgcolor = function (c) {\n        this.background_color = c;\n        this.canvas.style.setProperty('background-color', c.v); //$(this.canvas).css(\"background-color\",c.v);\n    };\n    TurtleCanvas.prototype.setSegmentLength = function (s) {\n        this.segmentLength = s;\n    };\n    TurtleCanvas.prototype.getSegmentLength = function () {\n        return this.segmentLength;\n    };\n    // todo: if animating, this should be deferred until the proper time\n    TurtleCanvas.prototype.exitonclick = function () {\n        var canvas_id = this.canvasID,\n            theCanvas = this,\n            eventHandler = function () {\n                if (!theCanvas.isAnimating()) {\n                    if (TurtleGraphics.fadeOnExit) {\n                        //Let's this be configurable\n                        document.getElementById(canvas_id).style.display = 'none'; //$(\"#\"+canvas_id).hide();\n                    }\n                    document.getElementById(canvas_id).removeEventListener('click', eventHandler);\n                    //$(\"#\"+canvas_id).unbind('click');\n                    TurtleGraphics.canvasInit = false;\n                    delete TurtleGraphics.canvasLib[canvas_id];\n                }\n            };\n        this.canvas.addEventListener('click', eventHandler, false);\n    };\n    TurtleCanvas.prototype.turtles = function () {\n        return TurtleGraphics.turtleList;\n    };\n    TurtleCanvas.prototype.tracer = function (t, d) {\n        var i;\n        //New version NOT attached to a turtle (as per real turtle)\n        this.setCounter(t);\n        if (t === 0) {\n            for (i = 0; i < this.turtleList; i = i + 1) {\n                this.turtleList[i].animate = false;\n            }\n            this.cancelAnimation();\n        }\n        if (d !== undefined) {\n            this.setDelay(d);\n        }\n    };\n    // Constructor for Turtle objects\n    function Turtle(opt) {\n        this.initialize(opt);\n        TurtleGraphics.turtleList.push(this);\n    }\n    Turtle.prototype.go_home = function () {\n        // Put turtle in initial state\n        // turtle is headed to the right\n        // with location 0,0,0 in the middle of the canvas.\n        // x grows to the right\n        // y grows towards the top of the canvas\n        this.position = this.home;\n        this.context.moveTo(this.home[0], this.home[1]);\n        this.heading = new Vector([1, 0, 0]);\n        // to the right; in turtle space x+ direction\n        this.normal = new Vector([0, 0, -1]); // in z- direction\n    };\n    Turtle.prototype.initialize = function (opt) {\n        function turtleShapePoints() {\n            var pl = [\n                    [ 0, 16 ],\n                    [ -2, 14 ],\n                    [ -1, 10 ],\n                    [ -4, 7 ],\n                    [ -7, 9 ],\n                    [ -9, 8 ],\n                    [ -6, 5 ],\n                    [ -7, 1 ],\n                    [ -5, -3 ],\n                    [ -8, -6 ],\n                    [ -6, -8 ],\n                    [ -4, -5 ],\n                    [ 0, -7 ],\n                    [ 4, -5 ],\n                    [ 6, -8 ],\n                    [ 8, -6 ],\n                    [ 5, -3 ],\n                    [ 7, 1 ],\n                    [ 6, 5 ],\n                    [ 9, 8 ],\n                    [ 7, 9 ],\n                    [ 4, 7 ],\n                    [ 1, 10 ],\n                    [ 2, 14 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function defaultShapePoints() {\n            var pl = [\n                    [ -10, 0 ],\n                    [ 10, 0 ],\n                    [ 0, 10 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function circleShapePoints() {\n            var pl = [\n                    [ 10, 0 ],\n                    [ 9.51, 3.09 ],\n                    [ 8.09, 5.88 ],\n                    [ 5.88, 8.09 ],\n                    [ 3.09, 9.51 ],\n                    [ 0, 10 ],\n                    [ -3.09, 9.51 ],\n                    [ -5.88, 8.09 ],\n                    [ -8.09, 5.88 ],\n                    [ -9.51, 3.09 ],\n                    [ -10, 0 ],\n                    [ -9.51, -3.09 ],\n                    [ -8.09, -5.88 ],\n                    [ -5.88, -8.09 ],\n                    [ -3.09, -9.51 ],\n                    [ -0, -10 ],\n                    [ 3.09, -9.51 ],\n                    [ 5.88, -8.09 ],\n                    [ 8.09, -5.88 ],\n                    [ 9.51, -3.09 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function triangleShapePoints() {\n            var pl = [\n                    [ 10, -5.77 ],\n                    [ 0, 11.55 ],\n                    [ -10, -5.77 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function squareShapePoints() {\n            var pl = [\n                    [ 10, -10 ],\n                    [ 10, 10 ],\n                    [ -10, 10 ],\n                    [ -10, -10 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function classicShapePoints() {\n            var pl = [\n                    [ 0, 0 ],\n                    [ -5, -9 ],\n                    [ 0, -7 ],\n                    [ 5, -9 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        // Initialize the turtle.\n        var options = {}, ctx = null;\n        if (opt) {\n            options = opt;\n        }\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n        this.context = document.getElementById(this.canvasID).getContext('2d');\n        this.animate = TurtleGraphics.defaults.animate;\n        ctx = this.context;\n        if (TurtleGraphics.canvasInit === false) {\n            // This is a workaround until I understand skulpt re-running better\n            // the downside is that this limits us to a single turtle...\n            ctx.save();\n            ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\n            // move 0,0 to center.\n            ctx.scale(1, -1);\n            // scaling like this flips the y axis the right way.\n            if (!TurtleGraphics.canvasLib[this.canvasID]) {\n                TurtleGraphics.canvasLib[this.canvasID] = new TurtleCanvas(options);\n            }\n            TurtleGraphics.canvasInit = true;\n        } else {\n            clear_canvas(this.canvasID);\n        }\n        this.turtleCanvas = TurtleGraphics.canvasLib[this.canvasID];\n        this.home = new Vector([0, 0, 0]);\n        this.visible = true;\n        this.shapeStore = {};\n        this.shapeStore.turtle = turtleShapePoints();\n        this.shapeStore.arrow = defaultShapePoints();\n        this.shapeStore.circle = circleShapePoints();\n        this.shapeStore.square = squareShapePoints();\n        this.shapeStore.triangle = triangleShapePoints();\n        this.shapeStore.blank = [new Vector(0, 0)];\n        this.shapeStore.classic = classicShapePoints();\n        this.currentShape = 'classic';\n        this.drawingEvents = [];\n        this.filling = false;\n        this.pen = true;\n        this.penStyle = 'black';\n        this.penWidth = 2;\n        this.fillStyle = 'black';\n        this.position = [];\n        this.heading = [];\n        this.normal = [];\n        this.go_home();\n        this.aCount = 0;\n        this.clearPoint = 0; // RNL for clear/clearScreen\n    };\n    Turtle.prototype.clean = function (color) {\n        // Clean the canvas\n        // Optional second argument is color\n        if (arguments.length >= 1) {\n            clear_canvas(this.canvasID, color);\n        } else {\n            clear_canvas(this.canvasID);\n        }\n        this.initialize();\n    };\n    Turtle.prototype.addDrawingEvent = function (eventList) {\n        TurtleGraphics.eventCount += 1;\n        eventList.push(TurtleGraphics.eventCount);\n        this.drawingEvents.push(eventList);\n    };\n    Turtle.prototype.draw_line = function (newposition) {\n        var ctx = this.context,\n            r,\n            s;\n        if (!this.animate) {\n            if (!this.filling) {\n                ctx.beginPath();\n                ctx.moveTo(this.position[0], this.position[1]);\n            }\n            ctx.lineCap = 'round';\n            ctx.lineJoin = 'round';\n            ctx.lineWidth = this.get_pen_width();\n            ctx.strokeStyle = this.penStyle;\n            ctx.lineTo(newposition[0], newposition[1]);\n\t\t\t//ctx.moveTo(newposition[0], newposition[1]);\n\t\t\tthis.position = newposition;\n            ctx.stroke();\n            if (!this.filling) {\n                ctx.closePath();\n            }\n        } else {\n            r = segmentLine(this.position, newposition, this.turtleCanvas.getSegmentLength(), this.pen);\n            for (s = 0; s < r.length; s = s + 1) {\n                r[s].push(this.penStyle);\n                this.addDrawingEvent(r[s]);\n            }\n            if (!this.turtleCanvas.isAnimating()) {\n                this.turtleCanvas.startAnimating(this);\n            } else {\n                if (!this.turtleCanvas.onCanvas(this)) {\n                    this.turtleCanvas.addToCanvas(this);\n                }\n            }\n        }\n    };\n    Turtle.prototype.forward = function (d) {\n        var newposition = this.position.linear(1, d, this.heading);\n        this.goto(newposition);\n    };\n    Turtle.prototype.backward = function (d) {\n        this.forward(-d);\n    };\n    //This is an internal function that sets the position without doing any drawing\n    Turtle.prototype.teleport_to = function (nx, ny) {\n        var newposition;\n        if (nx instanceof Vector) {\n            newposition = nx;\n        } else {\n            newposition = new Vector([nx, ny, 0]);\n        }\n        this.context.moveTo(newposition[0], newposition[1]);\n        this.position = newposition;\n    };\n    Turtle.prototype.goto = function (nx, ny) {\n        var newposition, r, s;\n        if (nx instanceof Vector) {\n            newposition = nx;\n        } else {\n            newposition = new Vector([nx, ny, 0]);\n        }\n\t\tif (this.pen) {\n            this.draw_line(newposition);\n        } else {\n            if (!this.animate) {\n                this.context.moveTo(newposition[0], newposition[1]);\n            } else {\n                r = segmentLine(this.position, newposition, this.turtleCanvas.getSegmentLength(), this.pen);\n                for (s = 0; s < r.length; s = s + 1) {\n                    this.addDrawingEvent(r[s]);\n                }\n                if (!this.turtleCanvas.isAnimating()) {\n                    this.turtleCanvas.startAnimating(this);\n                } else {\n                    if (!this.turtleCanvas.onCanvas(this)) {\n                        this.turtleCanvas.addToCanvas(this);\n                    }\n                }\n            }\n        }\n        this.position = newposition;\n    };\n    Turtle.prototype.delay = function (d) {\n        // RNL\n        if (d !== null) {\n            if (d < 0) {\n                d = -d;\n            }\n            if (!this.animate) {\n                this.turtleCanvas.setDelay(d);\n            } else {\n                this.turtleCanvas.setDelay(d);\n                this.addDrawingEvent([ 'DL', d ]);\n                this.addDrawingEvent(['NO']);\n            }\n        }\n        return this.turtleCanvas.getDelay();\n    };\n    Turtle.prototype.speed = function (s, t) {\n        if (s > 0 && !this.animate) {\n            this.animate = true;\n            this.turtleCanvas.setSpeedDelay(s);\n        } else if (s === 0 ) {\n            this.animate = false;\n            this.turtleCanvas.cancelAnimation();\n        } else {\n            this.turtleCanvas.setSpeedDelay(s);\n            this.addDrawingEvent([ 'SC', s, t ]);\n            this.addDrawingEvent(['NO']);\n        }\n        if (t) {\n            this.turtleCanvas.setSegmentLength(t); // set the number of units to divide a segment into\n        } else {\n            this.turtleCanvas.setSegmentLength(10);\n        }\n    };\n    Turtle.prototype.tracer = function (t, d) {\n        this.turtleCanvas.setCounter(t);\n        if (t === 0) {\n            this.animate = false;\n            this.turtleCanvas.cancelAnimation();\n        }\n        if (d !== undefined) {\n            this.turtleCanvas.setDelay(d);\n        }\n    };\n    Turtle.prototype.getRenderCounter = function () {\n        return this.turtleCanvas.getCounter();\n    };\n    Turtle.prototype.turn = function (phi) {\n        var alpha = phi * Degree2Rad,\n            left = this.normal.cross(this.heading),\n            newheading = this.heading.rotateNormal(left, alpha);\n        this.heading = newheading;\n        if (this.animate) {\n            this.addDrawingEvent([ 'TT', this.heading ]);\n        }\n    };\n    Turtle.prototype.right = Turtle.prototype.turn;\n    Turtle.prototype.left = function (phi) {\n        this.turn(-phi);\n    };\n    Turtle.prototype.get_heading = function () {\n        if (TurtleGraphics.defaults.degrees) {\n            return this.heading.toAngle();\n        }\n        return this.heading;\n    };\n    Turtle.prototype.get_position = function () {\n        return this.position;\n    };\n    Turtle.prototype.getx = function () {\n        return this.position[0];\n    };\n    Turtle.prototype.gety = function () {\n        return this.position[1];\n    };\n    Turtle.prototype.set_heading = function (newhead) {\n        if ((typeof newhead).toLowerCase() === 'number') {\n            this.heading = Vector.angle2vec(newhead);\n        } else {\n            this.heading = newhead;\n        }\n    };\n    Turtle.prototype.towards = function (to, y) {\n        // set heading vector to point towards another point.\n        if ((typeof to).toLowerCase() === 'number') {\n            to = new Vector(to, y, 0);\n        } else if (!(to instanceof Vector)) {\n            to = new Vector(to);\n        }\n        var res = to.sub(this.position);\n        res = res.normalize();\n        if (TurtleGraphics.defaults.degrees) {\n            return res.toAngle();\n        }\n        return res;\n    };\n    Turtle.prototype.distance = function (to, y) {\n        if ((typeof to).toLowerCase() === 'number') {\n            to = new Vector(to, y, 0);\n        }\n        return this.position.sub(new Vector(to)).len();\n    };\n    Turtle.prototype.dot = function (psize, pcolor) {\n        var size = 2,\n            ctx = this.context,\n            curPenStyle = this.penStyle,\n\t\t\tcurFillStyle = this.fillStyle;\n\n        if (arguments.length >= 1) {\n            size = psize;\n        }\n        size = size * this.turtleCanvas.lineScale;\n\n        if (!this.animate) {\n\t\t\tif (pcolor) {\n\t\t\t\tctx.fillStyle = pcolor;\n\t\t\t\tctx.strokeStyle = pcolor;\n\t\t\t}\n            ctx.fillRect(this.position[0] - size / 2, this.position[1] - size / 2, size, size);\n\t\t\tif (pcolor) {\n\t\t\t\tctx.fillStyle = curFillStyle;\n\t\t\t\tctx.strokeStyle = curPenStyle;\n\t\t\t}\n        } else {\n            this.addDrawingEvent([\n                'DT',\n                size,\n                pcolor || ctx.strokeStyle,\n                this.position[0],\n                this.position[1]\n            ]);\n        }\n    };\n    Turtle.prototype.circle = function (radius, extent) {\n        var arcLen, segLen, extentPart, extentLeft;\n        if (extent === undefined) {\n            extent = 360;\n        }\n        if (this.animate) {\n            arcLen = Math.abs(radius * Math.PI * 2 * extent / 360);\n            segLen = this.turtleCanvas.getSegmentLength();\n            if (arcLen <= segLen) {\n                this.arc(radius, extent);\n            } else {\n                //Break the arc into segments for animation\n                extentPart = segLen / arcLen * extent;\n                extentLeft = extent;\n                while (Math.abs(extentLeft) > Math.abs(extentPart)) {\n                    this.arc(radius, extentPart);\n                    extentLeft = extentLeft - extentPart;\n                }\n                if (Math.abs(extentLeft) > 0.01) {\n                    this.arc(radius, extentLeft);\n                }\n            }\n            if (!this.turtleCanvas.isAnimating()) {\n                this.turtleCanvas.startAnimating(this);\n            } else {\n                if (!this.turtleCanvas.onCanvas(this)) {\n                    this.turtleCanvas.addToCanvas(this);\n                }\n            }\n        } else {\n            this.arc(radius, extent);\n        }\n    };\n    Turtle.prototype.arc = function (radius, extent) {\n        //Figure out where the turtle is and which way it's facing\n        var turtleHeading = this.get_heading(),\n            tx = this.position[0],\n            ty = this.position[1],\n            //Figure out the circle center\n            cx = tx + radius * Math.cos((turtleHeading + 90) * Degree2Rad),\n            cy = ty + radius * Math.sin((turtleHeading + 90) * Degree2Rad),\n            //Canvas arc angles go CLOCKWISE, not COUNTERCLOCKWISE like Turtle\n            //Figure out our arc angles\n            startAngleDeg,\n            endAngleDeg,\n            startAngle,\n            endAngle,\n            turtleArc,\n            newTurtleHeading,\n            nx,\n            ny;\n\n        if (radius >= 0) {\n            startAngleDeg = turtleHeading - 90;\n        } else {\n            startAngleDeg = turtleHeading + 90;\n        }\n\n        if (extent) {\n            if (radius >= 0) {\n                endAngleDeg = startAngleDeg + extent;\n            } else {\n                endAngleDeg = startAngleDeg - extent;\n            }\n        } else {\n            if (radius >= 0) {\n                endAngleDeg = startAngleDeg + 360;\n            } else {\n                endAngleDeg = startAngleDeg - 360;\n            }\n        }\n        //Canvas angles are opposite\n        startAngleDeg = 360 - startAngleDeg;\n        endAngleDeg = 360 - endAngleDeg;\n        //Becuase the y axis has been flipped in HTML5 Canvas with a tanslation, we need to adjust the angles\n        startAngleDeg = -startAngleDeg;\n        endAngleDeg = -endAngleDeg;\n        //Convert to radians\n        startAngle = startAngleDeg * Degree2Rad;\n        endAngle = endAngleDeg * Degree2Rad;\n        //Do the drawing\n        if (!this.animate) {\n            if (!this.filling) {\n                this.context.beginPath();\n            }\n            this.context.arc(cx, cy, Math.abs(radius), startAngle, endAngle, radius * extent <= 0);\n            this.context.stroke();\n            if (!this.filling) {\n                this.context.closePath();\n            }\n        } else {\n            this.addDrawingEvent([\n                'CI',\n                cx,\n                cy,\n                Math.abs(radius),\n                startAngle,\n                endAngle,\n                radius * extent <= 0\n            ]);\n        }\n        //Move the turtle only if we have to\n        if (extent && extent % 360 !== 0) {\n            if (radius >= 0) {\n                turtleArc = extent;\n            } else {\n                turtleArc = -extent;\n            }\n            newTurtleHeading = (turtleHeading + turtleArc) % 360;\n            if (newTurtleHeading < 0) {\n                newTurtleHeading = newTurtleHeading + 360;\n            }\n            nx = cx + radius * Math.cos((newTurtleHeading - 90) * Degree2Rad);\n            ny = cy + radius * Math.sin((newTurtleHeading - 90) * Degree2Rad);\n            //y coord is inverted in turtle\n            //Move it internally\n            this.set_heading(newTurtleHeading);\n            this.teleport_to(nx, ny);\n            //If we're animating the turtle, move it on the screen\n            if (this.animate) {\n                this.addDrawingEvent([\n                    'TT',\n                    this.heading\n                ]);\n            }\n        }\n    };\n    Turtle.prototype.write = function (theText, /*move, align, */font) {\n        if (!this.animate) {\n            if (font) {\n                this.context.font = font.v;\n            }\n            this.context.scale(1, -1);\n            this.context.fillText(theText, this.position[0], -this.position[1]);\n            this.context.scale(1, -1);\n        } else {\n            var fontspec;\n            if (font) {\n                fontspec = font.v;\n            }\n            this.addDrawingEvent([\n                'WT',\n                theText,\n                fontspec,\n                this.position[0],\n                this.position[1]\n            ]);\n        }\n    };\n    Turtle.prototype.setworldcoordinates = function (llx, lly, urx, ury) {\n        this.turtleCanvas.setworldcoordinates(llx, lly, urx, ury);\n    };\n    //\n    // Pen and Style functions\n    //\n    Turtle.prototype.pen_down = function () {\n        this.pen = true;\n    };\n    Turtle.prototype.down = Turtle.prototype.pen_down;\n    Turtle.prototype.pen_up = function () {\n        this.pen = false;\n    };\n    Turtle.prototype.up = Turtle.prototype.pen_up;\n    Turtle.prototype.get_pen = function () {\n        return this.pen;\n    };\n    Turtle.prototype.set_pen_width = function (w) {\n        if (this.animate) {\n            this.addDrawingEvent([\n                'PW',\n                w * this.turtleCanvas.lineScale\n            ]);\n        } else {\n            this.penWidth = w;\n        }\n    };\n    Turtle.prototype.get_pen_width = function () {\n        return this.penWidth * this.turtleCanvas.lineScale;\n    };\n    Turtle.prototype.set_pen_color = function (c, g, b) {\n        if (typeof c === 'string') {\n            this.penStyle = c;\n        } else {\n            var rs, gs, bs, c0, c1, c2;\n            if (Array.isArray(c)) {\n                c0 = c[0];\n                c1 = c[1];\n                c2 = c[2];\n            } else {\n                c0 = c;\n                c1 = g;\n                c2 = b;\n            }\n            rs = Math.abs(c0).toString(16);\n            gs = Math.abs(c1).toString(16);\n            bs = Math.abs(c2).toString(16);\n            while (rs.length < 2) {\n                rs = '0' + rs;\n            }\n            while (gs.length < 2) {\n                gs = '0' + gs;\n            }\n            while (bs.length < 2) {\n                bs = '0' + bs;\n            }\n            c = '#' + rs + gs + bs;\n            this.penStyle = c;\n        }\n        this.context.strokeStyle = c;\n        if (this.animate) {\n            this.addDrawingEvent([\n                'TC',\n                c\n            ]);\n        }\n    };\n    Turtle.prototype.set_fill_color = function (c, g, b) {\n        if (typeof c === 'string') {\n            this.fillStyle = c;\n        } else {\n            var rs, gs, bs, c0, c1, c2;\n            if (Array.isArray(c)) {\n                c0 = c[0];\n                c1 = c[1];\n                c2 = c[2];\n            } else {\n                c0 = c;\n                c1 = g;\n                c2 = b;\n            }\n            rs = Math.abs(c0).toString(16);\n            gs = Math.abs(c1).toString(16);\n            bs = Math.abs(c2).toString(16);\n            while (rs.length < 2) {\n                rs = '0' + rs;\n            }\n            while (gs.length < 2) {\n                gs = '0' + gs;\n            }\n            while (bs.length < 2) {\n                bs = '0' + bs;\n            }\n            c = '#' + rs + gs + bs;\n            this.fillStyle = c;\n        }\n        this.context.fillStyle = c;\n        if (this.animate) {\n            this.addDrawingEvent([\n                'FC',\n                c\n            ]);\n        }\n    };\n    Turtle.prototype.begin_fill = function () {\n        if (!this.animate) {\n            this.filling = true;\n            this.context.beginPath();\n            this.context.moveTo(this.position[0], this.position[1]);\n        } else {\n            this.addDrawingEvent([\n                'BF',\n                this.position[0],\n                this.position[1]\n            ]);\n        }\n    };\n    Turtle.prototype.end_fill = function () {\n        if (!this.animate) {\n            this.context.stroke();\n            this.context.fill();\n            this.context.closePath();\n            this.filling = false;\n        } else {\n            this.addDrawingEvent([\n                'EF',\n                this.position[0],\n                this.position[1],\n                this.fillStyle\n            ]);\n        }\n    };\n    Turtle.prototype.showturtle = function () {\n        if (this.animate) {\n            this.addDrawingEvent(['SH']);\n        }\n        this.visible = true;\n    };\n    Turtle.prototype.hideturtle = function () {\n        if (this.animate) {\n            this.addDrawingEvent(['HT']);\n        }\n        this.visible = false;\n    };\n    Turtle.prototype.isvisible = function () {\n        return this.visible;\n    };\n    //\n    // Appearance\n    //\n    Turtle.prototype.shape = function (s) {\n        if (this.shapeStore[s]) {\n            this.addDrawingEvent(['CS', s]); // add a Change Shape event\n        }\n    };\n    Turtle.prototype.drawturtle = function (pHeading, pos) {\n        var rtPoints = [],\n            plist = this.shapeStore[this.currentShape],\n            head,\n            p,\n            i;\n\n        if (pHeading !== undefined) {\n            head = pHeading - 90;\n        } else {\n            head = this.heading.toAngle() - 90;\n        }\n\n        if (!pos) {\n            pos = this.position;\n        }\n\n        for (p = 0; p < plist.length; p = p + 1) {\n            rtPoints.push(plist[p]\n                          .scale(this.turtleCanvas.xptscale, this.turtleCanvas.yptscale)\n                          .rotate(head)\n                          .add(pos));\n        }\n        this.context.beginPath();\n        this.context.moveTo(rtPoints[0][0], rtPoints[0][1]);\n        for (i = 1; i < rtPoints.length; i = i + 1) {\n            this.context.lineTo(rtPoints[i][0], rtPoints[i][1]);\n        }\n        this.context.closePath();\n        this.context.stroke();\n        if (this.fillStyle) {\n            this.context.fill();\n        }\n    };\n    Turtle.prototype.stamp = function () {\n        // either call drawTurtle or just add a DT with current position and heading to the drawingEvents list.\n        if (this.animate) {\n            this.addDrawingEvent([\n                'ST',\n                this.position[0],\n                this.position[1],\n                this.heading.toAngle()\n            ]);\n        } else {\n            this.drawturtle();\n        }\n    };\n    Turtle.prototype.clear = function () {\n        if (this.animate) {\n            this.addDrawingEvent(['CL']);\n        } else {\n\t\t\tclear_canvas(this.canvasID);\n\t\t\tthis.penStyle = 'black';\n\t\t\tthis.penWidth = 2;\n\t\t\tthis.fillStyle = 'black';\n        }\n    };\n    TurtleGraphics.turtleList = [];\n    TurtleGraphics.Turtle = Turtle;\n    TurtleGraphics.TurtleCanvas = TurtleCanvas;\n    TurtleGraphics.canvasLib = {};\n    TurtleGraphics.clear_canvas = clear_canvas;\n    TurtleGraphics.Vector = Vector;\n    TurtleGraphics.canvasInit = false;\n    TurtleGraphics.eventCount = 0;\n    TurtleGraphics.renderClock = 0;\n    TurtleGraphics.renderTime = 0; // RNL\n}());\n//\n// Wrapper around the Turtle Module starts here.\n//\nvar $builtinmodule = function (name) {\n    'use strict';\n    var mod = {},\n\t\tinitializeTurtlegraphics = function() {\n\t\t\tif (!TurtleGraphics) { TurtleGraphics = {}; }\n\t\t\tif (!TurtleGraphics.defaults) {\n\t\t\t\tTurtleGraphics.defaults = {\n\t\t\t\t\tanimate: true,\n\t\t\t\t\tcanvasID: Sk.canvas,\n\t\t\t\t\tdegrees: true\n\t\t\t\t}\n\t\t\t} else if (Sk.canvas) {\n\t\t\t\tTurtleGraphics.defaults.canvasID = Sk.canvas;\n\t\t\t}\n\t\t\tif (!TurtleGraphics.doneDelegates) { TurtleGraphics.doneDelegates = []; }\n\t\t},\n\t\tremoveDisabled = function () {\n\t\t\tif (Sk.runButton) {\n\t\t\t\tSk.runButton.removeAttribute('disabled');\n\t\t\t}\n\t\t},\n        checkArgs = function (expected, actual, func) {\n            if (actual !== expected) {\n                throw new Sk.builtin.TypeError(func + ' takes exactly ' + expected + ' positional argument (' + actual + ' given)');\n            }\n        },\n        turtle = function ($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function (self) {\n\t\t\t\tinitializeTurtlegraphics();\n\t\t\t\tif (TurtleGraphics.doneDelegates.indexOf(removeDisabled) === -1){\n\t\t\t\t\tTurtleGraphics.doneDelegates.push(removeDisabled);\n\t\t\t\t}\n                self.theTurtle = new TurtleGraphics.Turtle();\n            });\n            //\n            // Turtle Motion\n            //\n            //\n            // Move and Draw\n            //\n            $loc.forward = new Sk.builtin.func(function (self, dist) {\n                dist = Sk.builtin.asnum$(dist);\n                checkArgs(2, arguments.length, 'forward()');\n                self.theTurtle.forward(dist);\n            });\n            $loc.fd = $loc.forward;\n            $loc.backward = new Sk.builtin.func(function (self, dist) {\n                dist = Sk.builtin.asnum$(dist);\n                checkArgs(2, arguments.length, 'backward()');\n                self.theTurtle.forward(-dist);\n            });\n            $loc.back = $loc.backward;\n            $loc.bk = $loc.backward;\n            $loc.right = new Sk.builtin.func(function (self, angle) {\n                angle = Sk.builtin.asnum$(angle);\n                checkArgs(2, arguments.length, 'right()');\n                self.theTurtle.turn(angle);\n            });\n            $loc.rt = $loc.right;\n            $loc.left = new Sk.builtin.func(function (self, angle) {\n                angle = Sk.builtin.asnum$(angle);\n                checkArgs(2, arguments.length, 'left()');\n                self.theTurtle.turn(-angle);\n            });\n            $loc.lt = $loc.left;\n            $loc.goto_$rw$ = new Sk.builtin.func(function (self, nx, ny) {\n                nx = Sk.builtin.asnum$(nx);\n                ny = Sk.builtin.asnum$(ny);\n                checkArgs(3, arguments.length, 'goto()');\n                self.theTurtle.goto(nx, ny);\n            });\n            $loc.setposition = new Sk.builtin.func(function (self, nx, ny) {\n                nx = Sk.builtin.asnum$(nx);\n                ny = Sk.builtin.asnum$(ny);\n                checkArgs(3, arguments.length, 'setposition()');\n                self.theTurtle.up();\n                self.theTurtle.goto(nx, ny);\n                self.theTurtle.down();\n            });\n            $loc.setpos = $loc.setposition;\n            $loc.setx = new Sk.builtin.func(function (self, nx) {\n                nx = Sk.builtin.asnum$(nx);\n                checkArgs(2, arguments.length, 'setx()');\n                self.theTurtle.goto(nx, self.theTurtle.GetY());\n            });\n            $loc.sety = new Sk.builtin.func(function (self, ny) {\n                ny = Sk.builtin.asnum$(ny);\n                checkArgs(2, arguments.length, 'sety()');\n                self.theTurtle.goto(self.theTurtle.GetX(), ny);\n            });\n            $loc.setheading = new Sk.builtin.func(function (self, newhead) {\n                newhead = Sk.builtin.asnum$(newhead);\n                checkArgs(2, arguments.length, 'setheading()');\n                return self.theTurtle.set_heading(newhead);\n            });\n            $loc.seth = $loc.setheading;\n            $loc.home = new Sk.builtin.func(function (self) {\n                self.theTurtle.go_home();\n            });\n            $loc.dot = new Sk.builtin.func(function (self, size, color) {\n                size = Sk.builtin.asnum$(size);\n                size = size || 1;\n                if (color) {\n                    color = color.v || self.theTurtle.penStyle;\n                }\n                self.theTurtle.dot(size, color);\n            });\n            $loc.circle = new Sk.builtin.func(function (self, radius, extent) {\n                radius = Sk.builtin.asnum$(radius);\n                extent = Sk.builtin.asnum$(extent);\n                self.theTurtle.circle(radius, extent);\n            });\n            $loc.delay = new Sk.builtin.func(function (self, d) {\n                d = Sk.builtin.asnum$(d);\n                return self.theTurtle.delay(d);\n            });\n            $loc.speed = new Sk.builtin.func(function (self, s, t) {\n                s = Sk.builtin.asnum$(s);\n                t = Sk.builtin.asnum$(t);\n                self.theTurtle.speed(s, t);\n            });\n            $loc.tracer = new Sk.builtin.func(function (self, t, d) {\n                t = Sk.builtin.asnum$(t);\n                d = Sk.builtin.asnum$(d);\n                self.theTurtle.tracer(t, d);\n            });\n            $loc.update = new Sk.builtin.func(function (self) {});\n            // todo:  stamp, clearstamp, clearstamps, undo, speed\n            //\n            // Tell Turtle's state\n            //\n            $loc.heading = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'heading()');\n                return Sk.builtin.assk$(self.theTurtle.get_heading(), Sk.builtin.nmber.float$);\n            });\n            $loc.position = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'position()');\n                var res = self.theTurtle.get_position(),\n                    x = new Sk.builtin.tuple([\n                        Sk.builtin.assk$(res[0], Sk.builtin.nmber.float$),\n                        Sk.builtin.assk$(res[1], Sk.builtin.nmber.float$)\n                    ]);\n                return x;\n            });\n            $loc.pos = $loc.position;\n            $loc.xcor = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'xcor()');\n                var res = self.theTurtle.getx();\n                return Sk.builtin.assk$(res, Sk.builtin.nmber.float$);\n            });\n            $loc.ycor = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'ycor()');\n                var res = self.theTurtle.gety();\n                return Sk.builtin.assk$(res, Sk.builtin.nmber.float$);\n            });\n            $loc.towards = new Sk.builtin.func(function (self, tx, ty) {\n                tx = Sk.builtin.asnum$(tx);\n                ty = Sk.builtin.asnum$(ty);\n                if ((typeof tx).toLowerCase() === 'number') {\n                    tx = [ tx, ty, 0 ];\n                } else {\n                    tx = [\n                        Sk.builtin.asnum$(tx.theTurtle.getx()),\n                        Sk.builtin.asnum$(tx.theTurtle.gety()),\n                        Sk.builtin.asnum$(0)\n                    ];\n                }\n                return Sk.builtin.assk$(self.theTurtle.towards(tx), Sk.builtin.nmber.float$);\n            });\n            // tx can be either a number or a vector position.\n            // tx can not be a turtle at this time as multiple turtles have not been implemented yet.\n            $loc.distance = new Sk.builtin.func(function (self, tx, ty) {\n                tx = Sk.builtin.asnum$(tx);\n                ty = Sk.builtin.asnum$(ty);\n                if ((typeof tx).toLowerCase() === 'number') {\n                    tx = [\n                        tx,\n                        ty,\n                        0\n                    ];\n                } else {\n                    tx = [\n                        tx.theTurtle.getx(),\n                        tx.theTurtle.gety(),\n                        0\n                    ];\n                }\n                return Sk.builtin.assk$(self.theTurtle.distance(tx), Sk.builtin.nmber.float$);\n            });\n            //\n            // Setting and Measurement\n            //\n            // todo:  degrees and radians...\n            //\n            // Pen Control\n            //\n            //\n            // Drawing State\n            //\n            $loc.up = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'up()');\n                self.theTurtle.pen_up();\n            });\n            $loc.penup = $loc.up;\n            $loc.pu = $loc.up;\n            $loc.down = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'down()');\n                self.theTurtle.pen_down();\n            });\n            $loc.pendown = $loc.down;\n            $loc.pd = $loc.down;\n            $loc.width = new Sk.builtin.func(function (self, w) {\n                w = Sk.builtin.asnum$(w);\n                checkArgs(2, arguments.length, 'width()');\n                self.theTurtle.set_pen_width(w);\n            });\n            $loc.pensize = $loc.width;\n            $loc.isdown = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'isdown()');\n                return self.theTurtle.get_pen();\n            });\n            // todo:  pen  -- return a dictionary full of pen stuff\n            //\n            // Color Control\n            //\n            $loc.fillcolor = new Sk.builtin.func(function (self, color, green, blue) {\n                if (color) {\n                    if (blue) {\n                        color = Sk.builtin.asnum$(color);\n                        green = Sk.builtin.asnum$(green);\n                        blue = Sk.builtin.asnum$(blue);\n                        self.theTurtle.set_fill_color(color, green, blue);\n                    } else {\n                        color = color.v || self.theTurtle.context.fillStyle;\n                        self.theTurtle.set_fill_color(color);\n                    }\n                } else {\n                    return self.theTurtle.fillStyle;\n                }\n            });\n            $loc.pencolor = new Sk.builtin.func(function (self, color, green, blue) {\n                if (color) {\n                    if (blue) {\n                        color = Sk.builtin.asnum$(color);\n                        green = Sk.builtin.asnum$(green);\n                        blue = Sk.builtin.asnum$(blue);\n                        self.theTurtle.set_pen_color(color, green, blue);\n                    } else {\n                        color = color.v || self.theTurtle.context.fillStyle;\n                        self.theTurtle.set_pen_color(color);\n                    }\n                } else {\n                    return self.theTurtle.penStyle;\n                }\n            });\n            $loc.color = new Sk.builtin.func(function (self, color, green, blue) {\n                if (color) {\n                    if (blue) {\n                        color = Sk.builtin.asnum$(color);\n                        green = Sk.builtin.asnum$(green);\n                        blue = Sk.builtin.asnum$(blue);\n                        self.theTurtle.set_pen_color(color, green, blue);\n                        self.theTurtle.set_fill_color(color, green, blue);\n                    } else {\n                        color = color.v || self.theTurtle.context.fillStyle;\n                        self.theTurtle.set_pen_color(color);\n                        self.theTurtle.set_fill_color(color);\n                    }\n                } else {\n                    return [\n                        self.theTurtle.penStyle,\n                        self.theTurtle.fillStyle\n                    ];\n                }\n            });\n            //\n            //  Filling\n            //\n            $loc.begin_fill = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'begin_fill()');\n                self.theTurtle.begin_fill();\n            });\n            $loc.end_fill = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'end_fill()');\n                self.theTurtle.end_fill();\n            });\n            $loc.fill = new Sk.builtin.func(function (self, fillt) {\n                if (fillt === undefined) {\n                    return self.theTurtle.filling;\n                }\n                if (fillt) {\n                    self.theTurtle.begin_fill();\n                } else {\n                    self.theTurtle.end_fill();\n                }\n            });\n            //\n            // More drawing control\n            //\n            $loc.reset = new Sk.builtin.func(function (self) {\n                self.theTurtle.clean();\n            });\n            $loc.showturtle = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'showturtle()');\n                self.theTurtle.showturtle();\n            });\n            $loc.st = $loc.showturtle;\n            $loc.hideturtle = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'hideturtle()');\n                self.theTurtle.hideturtle();\n            });\n            $loc.ht = $loc.hideturtle;\n            $loc.isvisible = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'isvisible()');\n                self.theTurtle.isvisible();\n            });\n            $loc.stamp = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'stamp()');\n                self.theTurtle.stamp();\n            });\n            $loc.shape = new Sk.builtin.func(function (self, s) {\n                checkArgs(2, arguments.length, 'shape()');\n                self.theTurtle.shape(s.v);\n            });\n            //todo the move, align, and font parameters should be kwargs...\n            $loc.write = new Sk.builtin.func(function (self, mystr, move, align, font) {\n                self.theTurtle.write(mystr.v, /*move, align, */font);\n            });\n            //todo clean  -- again multiple turtles\n            $loc.setworldcoordinates = new Sk.builtin.func(function (self, llx, lly, urx, ury) {\n                llx = Sk.builtin.asnum$(llx);\n                lly = Sk.builtin.asnum$(lly);\n                urx = Sk.builtin.asnum$(urx);\n                ury = Sk.builtin.asnum$(ury);\n                self.theTurtle.setworldcoordinates(llx, lly, urx, ury);\n            });\n            //Added by RNL\n            $loc.clear = new Sk.builtin.func(function (self) {\n                self.theTurtle.clear();\n            });\n        },\n        screen = function ($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function (self) {\n\t\t\t\tinitializeTurtlegraphics();\n                var currentCanvas = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID];\n                if (currentCanvas === undefined) {\n                    self.theScreen = new TurtleGraphics.TurtleCanvas(TurtleGraphics.defaults);\n                } else {\n                    self.theScreen = currentCanvas;\n                }\n            });\n            $loc.bgcolor = new Sk.builtin.func(function (self, c) {\n                self.theScreen.bgcolor(c);\n            });\n            $loc.setworldcoordinates = new Sk.builtin.func(function (self, llx, lly, urx, ury) {\n                llx = Sk.builtin.asnum$(llx);\n                lly = Sk.builtin.asnum$(lly);\n                urx = Sk.builtin.asnum$(urx);\n                ury = Sk.builtin.asnum$(ury);\n                self.theScreen.setworldcoordinates(llx, lly, urx, ury);\n            });\n            $loc.exitonclick = new Sk.builtin.func(function (self) {\n                self.theScreen.exitonclick();\n            });\n            $loc.title = new Sk.builtin.func(function (self, titlestring) {});\n            $loc.window_width = new Sk.builtin.func(function (self) {\n                return Sk.builtin.assk$(self.theScreen.window_width(), Sk.builtin.nmber.int$);\n            });\n            $loc.window_height = new Sk.builtin.func(function (self) {\n                return Sk.builtin.assk$(self.theScreen.window_height(), Sk.builtin.nmber.int$);\n            });\n            $loc.turtles = new Sk.builtin.func(function (self) {\n                return self.theScreen.turtles();\n            });\n            $loc.colormode = new Sk.builtin.func(function (self) {});\n            //        $loc.clear = new Sk.builtin.func(function(self) {\n            //\n            //        });\n            var myfunc = function (self, width, height, startx, starty) {\n                width = Sk.builtin.asnum$(width);\n                height = Sk.builtin.asnum$(height);\n                self.theScreen.setup(width, height);\n            };\n            // this should allow for named parameters\n            myfunc.co_varnames = [\n                'self',\n                'width',\n                'height',\n                'startx',\n                'starty'\n            ];\n            myfunc.$defaults = [\n                null,\n                500,\n                500,\n                0,\n                0\n            ];\n            $loc.setup = new Sk.builtin.func(myfunc);\n        };\n    // First we create an object, this will end up being the class\n    // class\n    Sk.tg = TurtleGraphics;\n    mod.Turtle = Sk.misceval.buildClass(mod, turtle, 'Turtle', []);\n    mod.Screen = Sk.misceval.buildClass(mod, screen, 'Screen', []);\n    mod.tracer = new Sk.builtin.func(function (t, d) {\n        var i;\n        t = Sk.builtin.asnum$(t);\n        d = Sk.builtin.asnum$(d);\n        for (i = 0; i < Sk.tg.canvasLib.length; i = i + 1) {\n            Sk.tg.canvasLib[i].tracer(t, d);\n        }\n    });\n    mod.update = new Sk.builtin.func(function (self) {});\n    return mod;\n};\n", "src/lib/matplotlib/pyplot/d3.min.js": "!function(){function n(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function t(n){return null!=n&&!isNaN(n)}function e(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function r(n){return n.length}function u(n){for(var t=1;n*t%1;)t*=10;return t}function i(n,t){try{for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}catch(r){n.prototype=t}}function o(){}function a(n){return ha+n in this}function c(n){return n=ha+n,n in this&&delete this[n]}function s(){var n=[];return this.forEach(function(t){n.push(t)}),n}function l(){var n=0;for(var t in this)t.charCodeAt(0)===ga&&++n;return n}function f(){for(var n in this)if(n.charCodeAt(0)===ga)return!1;return!0}function h(){}function g(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function p(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var e=0,r=pa.length;r>e;++e){var u=pa[e]+t;if(u in n)return u}}function v(){}function d(){}function m(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new o;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function y(){Go.event.preventDefault()}function x(){for(var n,t=Go.event;n=t.sourceEvent;)t=n;return t}function M(n){for(var t=new d,e=0,r=arguments.length;++e<r;)t[arguments[e]]=m(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=Go.event;u.target=n,Go.event=u,t[u.type].apply(e,r)}finally{Go.event=i}}},t}function _(n){return da(n,_a),n}function b(n){return\"function\"==typeof n?n:function(){return ma(n,this)}}function w(n){return\"function\"==typeof n?n:function(){return ya(n,this)}}function S(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=Go.ns.qualify(n),null==t?n.local?r:e:\"function\"==typeof t?n.local?a:o:n.local?i:u}function k(n){return n.trim().replace(/\\s+/g,\" \")}function E(n){return new RegExp(\"(?:^|\\\\s+)\"+Go.requote(n)+\"(?:\\\\s+|$)\",\"g\")}function N(n){return n.trim().split(/^|\\s+/)}function A(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=N(n).map(C);var u=n.length;return\"function\"==typeof t?r:e}function C(n){var t=E(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute(\"class\")||\"\";r?(t.lastIndex=0,t.test(u)||e.setAttribute(\"class\",k(u+\" \"+n))):e.setAttribute(\"class\",k(u.replace(t,\" \")))}}function L(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:\"function\"==typeof t?i:u}function T(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:\"function\"==typeof t?u:r}function q(n){return\"function\"==typeof n?n:(n=Go.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function z(n){return{__data__:n}}function R(n){return function(){return Ma(this,n)}}function D(t){return arguments.length||(t=n),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function P(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function U(n){return da(n,wa),n}function j(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function H(){var n=this.__transition__;n&&++n.active}function F(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,Qo(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp(\"^__on([^.]+)\"+Go.requote(n)+\"$\");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o=\"__on\"+n,a=n.indexOf(\".\"),c=O;a>0&&(n=n.substring(0,a));var s=ka.get(n);return s&&(n=s,c=Y),a?t?u:r:t?v:i}function O(n,t){return function(e){var r=Go.event;Go.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{Go.event=r}}}function Y(n,t){var e=O(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function I(){var n=\".dragsuppress-\"+ ++Na,t=\"click\"+n,e=Go.select(ea).on(\"touchmove\"+n,y).on(\"dragstart\"+n,y).on(\"selectstart\"+n,y);if(Ea){var r=ta.style,u=r[Ea];r[Ea]=\"none\"}return function(i){function o(){e.on(t,null)}e.on(n,null),Ea&&(r[Ea]=u),i&&(e.on(t,function(){y(),o()},!0),setTimeout(o,0))}}function Z(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var u=n.getBoundingClientRect();return[t.clientX-u.left-n.clientLeft,t.clientY-u.top-n.clientTop]}function V(){return Go.event.changedTouches[0].identifier}function $(){return Go.event.target}function X(){return ea}function B(n){return n>0?1:0>n?-1:0}function J(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function W(n){return n>1?0:-1>n?Aa:Math.acos(n)}function G(n){return n>1?La:-1>n?-La:Math.asin(n)}function K(n){return((n=Math.exp(n))-1/n)/2}function Q(n){return((n=Math.exp(n))+1/n)/2}function nt(n){return((n=Math.exp(2*n))-1)/(n+1)}function tt(n){return(n=Math.sin(n/2))*n}function et(){}function rt(n,t,e){return new ut(n,t,e)}function ut(n,t,e){this.h=n,this.s=t,this.l=e}function it(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,yt(u(n+120),u(n),u(n-120))}function ot(n,t,e){return new at(n,t,e)}function at(n,t,e){this.h=n,this.c=t,this.l=e}function ct(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),st(e,Math.cos(n*=za)*t,Math.sin(n)*t)}function st(n,t,e){return new lt(n,t,e)}function lt(n,t,e){this.l=n,this.a=t,this.b=e}function ft(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=gt(u)*Za,r=gt(r)*Va,i=gt(i)*$a,yt(vt(3.2404542*u-1.5371385*r-.4985314*i),vt(-.969266*u+1.8760108*r+.041556*i),vt(.0556434*u-.2040259*r+1.0572252*i))}function ht(n,t,e){return n>0?ot(Math.atan2(e,t)*Ra,Math.sqrt(t*t+e*e),n):ot(0/0,0/0,n)}function gt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function pt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function vt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function dt(n){return yt(n>>16,255&n>>8,255&n)}function mt(n){return dt(n)+\"\"}function yt(n,t,e){return new xt(n,t,e)}function xt(n,t,e){this.r=n,this.g=t,this.b=e}function Mt(n){return 16>n?\"0\"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _t(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\\((.*)\\)/i.exec(n))switch(u=r[2].split(\",\"),r[1]){case\"hsl\":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case\"rgb\":return t(kt(u[0]),kt(u[1]),kt(u[2]))}return(i=Ja.get(n))?t(i.r,i.g,i.b):(null==n||\"#\"!==n.charAt(0)||isNaN(i=parseInt(n.substring(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function bt(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),rt(r,u,c)}function wt(n,t,e){n=St(n),t=St(t),e=St(e);var r=pt((.4124564*n+.3575761*t+.1804375*e)/Za),u=pt((.2126729*n+.7151522*t+.072175*e)/Va),i=pt((.0193339*n+.119192*t+.9503041*e)/$a);return st(116*u-16,500*(r-u),200*(u-i))}function St(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function kt(n){var t=parseFloat(n);return\"%\"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Et(n){return\"function\"==typeof n?n:function(){return n}}function Nt(n){return n}function At(n){return function(t,e,r){return 2===arguments.length&&\"function\"==typeof e&&(r=e,e=null),Ct(t,e,n,r)}}function Ct(n,t,e,r){function u(){var n,t=c.status;if(!t&&c.responseText||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return o.error.call(i,r),void 0}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=Go.dispatch(\"beforesend\",\"progress\",\"load\",\"error\"),a={},c=new XMLHttpRequest,s=null;return!ea.XDomainRequest||\"withCredentials\"in c||!/^(http(s)?:)?\\/\\//.test(n)||(c=new XDomainRequest),\"onload\"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=Go.event;Go.event=n;try{o.progress.call(i,c)}finally{Go.event=t}},i.header=function(n,t){return n=(n+\"\").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+\"\",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+\"\",i):t},i.responseType=function(n){return arguments.length?(s=n,i):s},i.response=function(n){return e=n,i},[\"get\",\"post\"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(Qo(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&\"function\"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||\"accept\"in a||(a.accept=t+\",*/*\"),c.setRequestHeader)for(var l in a)c.setRequestHeader(l,a[l]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=s&&(c.responseType=s),null!=u&&i.on(\"error\",u).on(\"load\",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},Go.rebind(i,o,\"on\"),null==r?i:i.get(Lt(r))}function Lt(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Tt(){var n=qt(),t=zt()-n;t>24?(isFinite(t)&&(clearTimeout(Qa),Qa=setTimeout(Tt,t)),Ka=0):(Ka=1,tc(Tt))}function qt(){var n=Date.now();for(nc=Wa;nc;)n>=nc.t&&(nc.f=nc.c(n-nc.t)),nc=nc.n;return n}function zt(){for(var n,t=Wa,e=1/0;t;)t.f?t=n?n.n=t.n:Wa=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Ga=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*fa(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r?function(n){for(var t=n.length,u=[],i=0,o=r[0];t>0&&o>0;)u.push(n.substring(t-=o,t+o)),o=r[i=(i+1)%r.length];return u.reverse().join(e)}:Nt;return function(n){var e=rc.exec(n),r=e[1]||\" \",o=e[2]||\">\",a=e[3]||\"\",c=e[4]||\"\",s=e[5],l=+e[6],f=e[7],h=e[8],g=e[9],p=1,v=\"\",d=\"\",m=!1;switch(h&&(h=+h.substring(1)),(s||\"0\"===r&&\"=\"===o)&&(s=r=\"0\",o=\"=\",f&&(l-=Math.floor((l-1)/4))),g){case\"n\":f=!0,g=\"g\";break;case\"%\":p=100,d=\"%\",g=\"f\";break;case\"p\":p=100,d=\"%\",g=\"r\";break;case\"b\":case\"o\":case\"x\":case\"X\":\"#\"===c&&(v=\"0\"+g.toLowerCase());case\"c\":case\"d\":m=!0,h=0;break;case\"s\":p=-1,g=\"r\"}\"$\"===c&&(v=u[0],d=u[1]),\"r\"!=g||h||(g=\"g\"),null!=h&&(\"g\"==g?h=Math.max(1,Math.min(21,h)):(\"e\"==g||\"f\"==g)&&(h=Math.max(0,Math.min(20,h)))),g=uc.get(g)||Ut;var y=s&&f;return function(n){var e=d;if(m&&n%1)return\"\";var u=0>n||0===n&&0>1/n?(n=-n,\"-\"):a;if(0>p){var c=Go.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x=n.lastIndexOf(\".\"),M=0>x?n:n.substring(0,x),_=0>x?\"\":t+n.substring(x+1);!s&&f&&(M=i(M));var b=v.length+M.length+_.length+(y?0:u.length),w=l>b?new Array(b=l-b+1).join(r):\"\";return y&&(M=i(w+M)),u+=v,n=M+_,(\"<\"===o?u+n+w:\">\"===o?w+u+n:\"^\"===o?w.substring(0,b>>=1)+u+n+w.substring(b):u+(y?n:w+n))+e}}}function Ut(n){return n+\"\"}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new oc(e-1)),1),e}function i(n,e){return t(n=new oc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{oc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{oc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ft(n);return c.floor=c,c.round=Ft(r),c.ceil=Ft(u),c.offset=Ft(i),c.range=a,n}function Ft(n){return function(t,e){try{oc=jt;var r=new jt;return r._=t,n(r,e)._}finally{oc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.substring(c,a)),null!=(u=cc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=A[e])&&(e=i(t,null==u?\"e\"===e?\" \":\"0\":u)),o.push(e),c=a+1);return o.push(n.substring(c,a)),o.join(\"\")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;\"p\"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&oc!==jt,o=new(i?jt:oc);return\"j\"in r?o.setFullYear(r.y,0,r.j):\"w\"in r&&(\"W\"in r||\"U\"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,\"W\"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,s=e.length;c>a;){if(r>=s)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=C[o in cc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){b.lastIndex=0;var r=b.exec(t.substring(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){M.lastIndex=0;var r=M.exec(t.substring(e));return r?(n.w=_.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.substring(e));return r?(n.m=N.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.substring(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,A.c.toString(),t,r)}function c(n,t,r){return e(n,A.x.toString(),t,r)}function s(n,t,r){return e(n,A.X.toString(),t,r)}function l(n,t,e){var r=x.get(t.substring(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{oc=jt;var t=new oc;return t._=n,r(t)}finally{oc=Date}}var r=t(n);return e.parse=function(n){try{oc=jt;var t=r.parse(n);return t&&t._}finally{oc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var x=Go.map(),M=It(v),_=Zt(v),b=It(d),w=Zt(d),S=It(m),k=Zt(m),E=It(y),N=Zt(y);p.forEach(function(n,t){x.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return Yt(n.getDate(),t,2)},e:function(n,t){return Yt(n.getDate(),t,2)},H:function(n,t){return Yt(n.getHours(),t,2)},I:function(n,t){return Yt(n.getHours()%12||12,t,2)},j:function(n,t){return Yt(1+ic.dayOfYear(n),t,3)},L:function(n,t){return Yt(n.getMilliseconds(),t,3)},m:function(n,t){return Yt(n.getMonth()+1,t,2)},M:function(n,t){return Yt(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return Yt(n.getSeconds(),t,2)},U:function(n,t){return Yt(ic.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Yt(ic.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return Yt(n.getFullYear()%100,t,2)},Y:function(n,t){return Yt(n.getFullYear()%1e4,t,4)},Z:ie,\"%\":function(){return\"%\"}},C={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:l,S:re,U:$t,w:Vt,W:Xt,x:c,X:s,y:Jt,Y:Bt,Z:Wt,\"%\":oe};return t}function Yt(n,t,e){var r=0>n?\"-\":\"\",u=(r?-n:n)+\"\",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function It(n){return new RegExp(\"^(?:\"+n.map(Go.requote).join(\"|\")+\")\",\"i\")}function Zt(n){for(var t=new o,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function $t(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e));return r?(n.U=+r[0],e+r[0].length):-1}function Xt(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Jt(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Wt(n,t,e){return/^[+-]\\d{4}$/.test(t=t.substring(e,e+5))?(n.Z=+t,e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){sc.lastIndex=0;var r=sc.exec(t.substring(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?\"-\":\"+\",r=~~(fa(t)/60),u=fa(t)%60;return e+Yt(r,\"0\",2)+Yt(u,\"0\",2)}function oe(n,t,e){lc.lastIndex=0;var r=lc.exec(t.substring(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function se(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function le(n,t){n&&pc.hasOwnProperty(n.type)&&pc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=za,t=t*za/2+Aa/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),s=Math.sin(t),l=i*s,f=u*c+l*Math.cos(a),h=l*o*Math.sin(a);dc.add(Math.atan2(h,f)),r=n,u=c,i=s}var t,e,r,u,i;mc.point=function(o,a){mc.point=n,r=(t=o)*za,u=Math.cos(a=(e=a)*za/2+Aa/4),i=Math.sin(a)},mc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function xe(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Me(n){return[Math.atan2(n[1],n[0]),G(n[2])]}function _e(n,t){return fa(n[0]-t[0])<Ta&&fa(n[1]-t[1])<Ta}function be(n,t){n*=za;var e=Math.cos(t*=za);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++yc,Mc+=(n-Mc)/yc,_c+=(t-_c)/yc,bc+=(e-bc)/yc}function Se(){function n(n,u){n*=za;var i=Math.cos(u*=za),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),s=Math.atan2(Math.sqrt((s=e*c-r*a)*s+(s=r*o-t*c)*s+(s=t*a-e*o)*s),t*o+e*a+r*c);xc+=s,wc+=s*(t+(t=o)),Sc+=s*(e+(e=a)),kc+=s*(r+(r=c)),we(t,e,r)}var t,e,r;Cc.point=function(u,i){u*=za;var o=Math.cos(i*=za);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),Cc.point=n,we(t,e,r)}}function ke(){Cc.point=be}function Ee(){function n(n,t){n*=za;var e=Math.cos(t*=za),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),s=u*c-i*a,l=i*o-r*c,f=r*a-u*o,h=Math.sqrt(s*s+l*l+f*f),g=r*o+u*a+i*c,p=h&&-W(g)/h,v=Math.atan2(h,g);Ec+=p*s,Nc+=p*l,Ac+=p*f,xc+=v,wc+=v*(r+(r=o)),Sc+=v*(u+(u=a)),kc+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;Cc.point=function(o,a){t=o,e=a,Cc.point=n,o*=za;var c=Math.cos(a*=za);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},Cc.lineEnd=function(){n(t,e),Cc.lineEnd=ke,Cc.point=be}}function Ne(){return!0}function Ae(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(_e(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return u.lineEnd(),void 0}var c=new Le(e,n,null,!0),s=new Le(e,null,c,!1);c.o=s,i.push(c),o.push(s),c=new Le(r,n,null,!1),s=new Le(r,null,c,!0),c.o=s,i.push(c),o.push(s)}}),o.sort(t),Ce(i),Ce(o),i.length){for(var a=0,c=e,s=o.length;s>a;++a)o[a].e=c=!c;for(var l,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;l=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,s=l.length;s>a;++a)u.point((f=l[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){l=g.p.z;for(var a=l.length-1;a>=0;--a)u.point((f=l[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,l=g.z,p=!p}while(!g.v);u.lineEnd()}}}function Ce(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function Le(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Te(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function s(){y.point=o,d.lineEnd()}function l(n,t){v.push([n,t]);var e=u(n,t);M.point(e[0],e[1])}function f(){M.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),M.lineEnd();var n,t=M.clean(),e=x.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r){if(1&t){n=e[0];var u,r=n.length-1,o=-1;for(i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);return i.lineEnd(),void 0}r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(qe))}}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:s,polygonStart:function(){y.point=l,y.lineStart=f,y.lineEnd=h,g=[],p=[],i.polygonStart()},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=s,g=Go.merge(g);var n=De(m,p);g.length?Ae(g,Re,n,e,i):n&&(i.lineStart(),e(null,null,1,i),i.lineEnd()),i.polygonEnd(),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=ze(),M=t(x);return y}}function qe(n){return n.length>1}function ze(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:v,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Re(n,t){return((n=n.x)[0]<0?n[1]-La-Ta:La-n[1])-((t=t.x)[0]<0?t[1]-La-Ta:La-t[1])}function De(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;dc.reset();for(var a=0,c=t.length;c>a;++a){var s=t[a],l=s.length;if(l)for(var f=s[0],h=f[0],g=f[1]/2+Aa/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===l&&(d=0),n=s[d];var m=n[0],y=n[1]/2+Aa/4,x=Math.sin(y),M=Math.cos(y),_=m-h,b=_>=0?1:-1,w=b*_,S=w>Aa,k=p*x;if(dc.add(Math.atan2(k*b*Math.sin(w),v*M+k*Math.cos(w))),i+=S?_+b*Ca:_,S^h>=e^m>=e){var E=de(pe(f),pe(n));xe(E);var N=de(u,E);xe(N);var A=(S^_>=0?-1:1)*G(N[2]);(r>A||r===A&&(E[0]||E[1]))&&(o+=S^_>=0?1:-1)}if(!d++)break;h=m,p=x,v=M,f=n}}return(-Ta>i||Ta>i&&0>dc)^1&o}function Pe(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?Aa:-Aa,c=fa(i-e);fa(c-Aa)<Ta?(n.point(e,r=(r+o)/2>0?La:-La),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=Aa&&(fa(e-u)<Ta&&(e-=u*Ta),fa(i-a)<Ta&&(i-=a*Ta),r=Ue(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function Ue(n,t,e,r){var u,i,o=Math.sin(n-e);return fa(o)>Ta?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function je(n,t,e,r){var u;if(null==n)u=e*La,r.point(-Aa,u),r.point(0,u),r.point(Aa,u),r.point(Aa,0),r.point(Aa,-u),r.point(0,-u),r.point(-Aa,-u),r.point(-Aa,0),r.point(-Aa,u);else if(fa(n[0]-t[0])>Ta){var i=n[0]<t[0]?Aa:-Aa;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function He(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,s,l;return{lineStart:function(){s=c=!1,l=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?Aa:-Aa),h):0;if(!e&&(s=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(_e(e,g)||_e(p,g))&&(p[0]+=Ta,p[1]+=Ta,v=t(p[0],p[1]))),v!==c)l=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(l=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&_e(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return l|(s&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),s=a[0],l=c-s*s;if(!l)return!e&&n;var f=i*c/l,h=-i*s/l,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),x=m*m-y*(ve(p,p)-1);if(!(0>x)){var M=Math.sqrt(x),_=ye(d,(-m-M)/y);if(me(_,p),_=Me(_),!e)return _;var b,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(b=w,w=S,S=b);var N=S-w,A=fa(N-Aa)<Ta,C=A||Ta>N;if(!A&&k>E&&(b=k,k=E,E=b),C?A?k+E>0^_[1]<(fa(_[0]-w)<Ta?k:E):k<=_[1]&&_[1]<=E:N>Aa^(w<=_[0]&&_[0]<=S)){var L=ye(d,(-m+M)/y);return me(L,p),[_,Me(L)]}}}function u(t,e){var r=o?n:Aa-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=fa(i)>Ta,c=gr(n,6*za);return Te(t,e,c,o?[0,-n]:[-Aa,n-Aa])}function Fe(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,s=o.y,l=a.x,f=a.y,h=0,g=1,p=l-c,v=f-s;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-s,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-s,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:s+h*v}),1>g&&(u.b={x:c+g*p,y:s+g*v}),u}}}}}}function Oe(n,t,e,r){function u(r,u){return fa(r[0]-n)<Ta?u>0?0:3:fa(r[0]-e)<Ta?u>0?2:1:fa(r[1]-t)<Ta?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,s=a[0];c>o;++o)i=a[o],s[1]<=r?i[1]>r&&J(s,i,n)>0&&++t:i[1]<=r&&J(s,i,n)<0&&--t,s=i;return 0!==t}function s(i,a,c,s){var l=0,f=0;if(null==i||(l=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do s.point(0===l||3===l?n:e,l>1?r:t);while((l=(l+c+4)%4)!==f)}else s.point(a[0],a[1])}function l(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){l(n,t)&&a.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,_=b=0/0}function g(){v&&(p(y,x),M&&w&&N.rejoin(),v.push(N.buffer())),C.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Tc,Math.min(Tc,n)),t=Math.max(-Tc,Math.min(Tc,t));var e=l(n,t);if(d&&m.push([n,t]),S)y=n,x=t,M=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:_,y:b},b:{x:n,y:t}};A(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}_=n,b=t,w=e}var v,d,m,y,x,M,_,b,w,S,k,E=a,N=ze(),A=Fe(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=N,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=Go.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),u&&Ae(v,i,t,s,a),a.polygonEnd()),v=d=m=null}};return C}}function Ye(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ie(n){var t=0,e=Aa/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*Aa/180,e=n[1]*Aa/180):[180*(t/Aa),180*(e/Aa)]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,G((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){zc+=u*n-r*t,r=n,u=t}var t,e,r,u;jc.point=function(i,o){jc.point=n,t=r=i,e=u=o},jc.lineEnd=function(){n(t,e)}}function $e(n,t){Rc>n&&(Rc=n),n>Pc&&(Pc=n),Dc>t&&(Dc=t),t>Uc&&(Uc=t)}function Xe(){function n(n,t){o.push(\"M\",n,\",\",t,i)}function t(n,t){o.push(\"M\",n,\",\",t),a.point=e}function e(n,t){o.push(\"L\",n,\",\",t)}function r(){a.point=n}function u(){o.push(\"Z\")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join(\"\");return o=[],n}}};return a}function Be(n){return\"m0,\"+n+\"a\"+n+\",\"+n+\" 0 1,1 0,\"+-2*n+\"a\"+n+\",\"+n+\" 0 1,1 0,\"+2*n+\"z\"}function Je(n,t){Mc+=n,_c+=t,++bc}function We(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);wc+=o*(t+n)/2,Sc+=o*(e+r)/2,kc+=o,Je(t=n,e=r)}var t,e;Fc.point=function(r,u){Fc.point=n,Je(t=r,e=u)}}function Ge(){Fc.point=Je}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);wc+=o*(r+n)/2,Sc+=o*(u+t)/2,kc+=o,o=u*n-r*t,Ec+=o*(r+n),Nc+=o*(u+t),Ac+=3*o,Je(r=n,u=t)}var t,e,r,u;Fc.point=function(i,o){Fc.point=n,Je(t=r=i,e=u=o)},Fc.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t,e),n.arc(t,e,o,0,Ca)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:v};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){x=0/0,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(x,M,y,_,b,w,x=o[0],M=o[1],y=e,_=i[0],b=i[1],w=i[2],a,t),t.point(x,M)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=s,S.lineEnd=l}function s(n,t){i(f=n,h=t),g=x,p=M,v=_,d=b,m=w,S.point=i}function l(){u(x,M,y,_,b,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,x,M,_,b,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,s,l,f,h,g,p,v,d,m){var y=l-t,x=f-e,M=y*y+x*x;if(M>4*i&&d--){var _=a+g,b=c+p,w=s+v,S=Math.sqrt(_*_+b*b+w*w),k=Math.asin(w/=S),E=fa(fa(w)-1)<Ta||fa(r-h)<Ta?(r+h)/2:Math.atan2(b,_),N=n(E,k),A=N[0],C=N[1],L=A-t,T=C-e,q=x*L-y*T;(q*q/M>i||fa((y*L+x*T)/M-.5)>.3||o>a*g+c*p+s*v)&&(u(t,e,r,a,c,s,A,C,E,_/=S,b/=S,w,d,m),m.point(A,C),u(A,C,E,_,b,w,l,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*za),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Ra,e*Ra])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*za,n[1]*za),[n[0]*h+c,s-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(s-n[1])/h),n&&[n[0]*Ra,n[1]*Ra]}function r(){a=Ye(o=sr(m,y,x),i);var n=i(v,d);return c=g-n[0]*h,s=p+n[1]*h,u()}function u(){return l&&(l.valid=!1,l=null),t}var i,o,a,c,s,l,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,s-n[1]*h]\n}),h=150,g=480,p=250,v=0,d=0,m=0,y=0,x=0,M=Lc,_=Nt,b=null,w=null;return t.stream=function(n){return l&&(l.valid=!1),l=or(M(o,f(_(n)))),l.valid=!0,l},t.clipAngle=function(n){return arguments.length?(M=null==n?(b=n,Lc):He((b=+n)*za),u()):b},t.clipExtent=function(n){return arguments.length?(w=n,_=n?Oe(n[0][0],n[0][1],n[1][0],n[1][1]):Nt,u()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*za,d=n[1]%360*za,r()):[v*Ra,d*Ra]},t.rotate=function(n){return arguments.length?(m=n[0]%360*za,y=n[1]%360*za,x=n.length>2?n[2]%360*za:0,r()):[m*Ra,y*Ra,x*Ra]},Go.rebind(t,f,\"precision\"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*za,e*za)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>Aa?n-Ca:-Aa>n?n+Ca:n,t]}function sr(n,t,e){return n?t||e?Ye(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function lr(n){return function(t,e){return t+=n,[t>Aa?t-Ca:-Aa>t?t+Ca:t,e]}}function fr(n){var t=lr(n);return t.invert=lr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,s=Math.sin(t),l=s*r+a*u;return[Math.atan2(c*i-l*o,a*r-s*u),G(l*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,s=Math.sin(t),l=s*i-c*o;return[Math.atan2(c*i+s*o,a*r+l*u),G(l*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*Ca)):(u=n+o*Ca,i=n-.5*c);for(var s,l=u;o>0?l>i:i>l;l-=c)a.point((s=Me([e,-r*Math.cos(l),-r*Math.sin(l)]))[0],s[1])}}function pr(n,t){var e=pe(t);e[0]-=n,xe(e);var r=W(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ta)%(2*Math.PI)}function vr(n,t,e){var r=Go.range(n,t-Ta,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=Go.range(n,t-Ta,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function xr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),s=u*Math.sin(n),l=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(tt(r-t)+u*o*tt(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*l,u=e*s+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Ra,Math.atan2(o,Math.sqrt(r*r+u*u))*Ra]}:function(){return[n*Ra,t*Ra]};return p.distance=h,p}function Mr(){function n(n,u){var i=Math.sin(u*=za),o=Math.cos(u),a=fa((n*=za)-t),c=Math.cos(a);Oc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Yc.point=function(u,i){t=u*za,e=Math.sin(i*=za),r=Math.cos(i),Yc.point=n},Yc.lineEnd=function(){Yc.point=Yc.lineEnd=v}}function _r(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function br(n,t){function e(n,t){o>0?-La+Ta>t&&(t=-La+Ta):t>La-Ta&&(t=La-Ta);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(Aa/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=B(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-La]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return fa(u)<Ta?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-B(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(Aa/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=Aa*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(Aa/4+t/2)),-n]}function Nr(n){return n[0]}function Ar(n){return n[1]}function Cr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&J(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function Lr(n,t){return n[0]-t[0]||n[1]-t[1]}function Tr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function qr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],s=e[1],l=t[1]-c,f=r[1]-s,h=(a*(c-s)-f*(u-i))/(f*o-a*l);return[u+h*o,c+h*l]}function zr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=ns.pop()||new Rr;return t.site=n,t}function Pr(n){$r(n),Gc.remove(n),ns.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&fa(e-c.circle.x)<Ta&&fa(r-c.circle.cy)<Ta;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),$r(c);for(var s=o;s.circle&&fa(e-s.circle.x)<Ta&&fa(r-s.circle.cy)<Ta;)o=s.N,a.push(s),Pr(s),s=o;a.push(s),$r(s);var l,f=a.length;for(l=1;f>l;++l)s=a[l],c=a[l-1],Kr(s.edge,c.site,s.site,u);c=a[0],s=a[f-1],s.edge=Wr(c.site,s.site,null,u),Vr(c),Vr(s)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Gc._;a;)if(r=Hr(a,o)-i,r>Ta)a=a.L;else{if(u=i-Fr(a,o),!(u>Ta)){r>-Ta?(t=a.P,e=a):u>-Ta?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Gc.insert(t,c),t||e){if(t===e)return $r(t),e=Dr(t.site),Gc.insert(c,e),c.edge=e.edge=Wr(t.site,c.site),Vr(t),Vr(e),void 0;if(!e)return c.edge=Wr(t.site,c.site),void 0;$r(t),$r(e);var s=t.site,l=s.x,f=s.y,h=n.x-l,g=n.y-f,p=e.site,v=p.x-l,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,x=v*v+d*d,M={x:(d*y-g*x)/m+l,y:(h*x-v*y)/m+f};Kr(e.edge,s,p,M),c.edge=Wr(s,n,null,M),e.edge=Wr(n,p,null,M),Vr(t),Vr(e)}}function Hr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,s=c-t;if(!s)return a;var l=a-r,f=1/i-1/s,h=l/s;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*s)-c+s/2+u-i/2)))/f+r:(r+a)/2}function Fr(n,t){var e=n.N;if(e)return Hr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Yr(n){for(var t,e,r,u,i,o,a,c,s,l,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Wc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)l=a[o].end(),r=l.x,u=l.y,s=a[++o%c].start(),t=s.x,e=s.y,(fa(r-t)>Ta||fa(u-e)>Ta)&&(a.splice(o,0,new Qr(Gr(i.site,l,fa(r-f)<Ta&&p-u>Ta?{x:f,y:fa(t-f)<Ta?e:p}:fa(u-p)<Ta&&h-r>Ta?{x:fa(e-p)<Ta?t:h,y:p}:fa(r-h)<Ta&&u-g>Ta?{x:h,y:fa(t-h)<Ta?e:g}:fa(u-g)<Ta&&r-f>Ta?{x:fa(e-g)<Ta?t:f,y:g}:null),i.site,null)),++c)}function Ir(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,s=r.y-a,l=i.x-o,f=i.y-a,h=2*(c*f-s*l);if(!(h>=-qa)){var g=c*c+s*s,p=l*l+f*f,v=(f*g-s*p)/h,d=(c*p-l*g)/h,f=d+a,m=ts.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,x=Qc._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Qc.insert(y,m),y||(Kc=m)}}}}function $r(n){var t=n.circle;t&&(t.P||(Kc=t.N),Qc.remove(t),ts.push(t),tu(t),n.circle=null)}function Xr(n){for(var t,e=Jc,r=Fe(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||fa(t.a.x-t.b.x)<Ta&&fa(t.a.y-t.b.y)<Ta)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],s=t[1][1],l=n.l,f=n.r,h=l.x,g=l.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=s)return}else i={x:d,y:c};e={x:d,y:s}}else{if(i){if(i.y<c)return}else i={x:d,y:s};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=s)return}else i={x:(c-u)/r,y:c};e={x:(s-u)/r,y:s}}else{if(i){if(i.y<c)return}else i={x:(s-u)/r,y:s};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Jr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Wr(n,t,e,r){var u=new Jr(n,t);return Jc.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Wc[n.i].edges.push(new Qr(u,n,t)),Wc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Jr(n,null);return r.a=t,r.b=e,Jc.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for(Jc=[],Wc=new Array(n.length),Gc=new nu,Qc=new nu;;)if(u=Kc,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Wc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&(Xr(t),Yr(t));var o={cells:Wc,edges:Jc};return Gc=Qc=Jc=Wc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function su(n){return n.y}function lu(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t){n=Go.rgb(n),t=Go.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return\"#\"+Mt(Math.round(e+i*n))+Mt(Math.round(r+o*n))+Mt(Math.round(u+a*n))}}function gu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=du(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function pu(n,t){return t-=n=+n,function(e){return n+t*e}}function vu(n,t){var e,r,u,i,o,a=0,c=0,s=[],l=[];for(n+=\"\",t+=\"\",rs.lastIndex=0,r=0;e=rs.exec(t);++r)e.index&&s.push(t.substring(a,c=e.index)),l.push({i:s.length,x:e[0]}),s.push(null),a=rs.lastIndex;for(a<t.length&&s.push(t.substring(a)),r=0,i=l.length;(e=rs.exec(n))&&i>r;++r)if(o=l[r],o.x==e[0]){if(o.i)if(null==s[o.i+1])for(s[o.i-1]+=o.x,s.splice(o.i,1),u=r+1;i>u;++u)l[u].i--;else for(s[o.i-1]+=o.x+s[o.i+1],s.splice(o.i,2),u=r+1;i>u;++u)l[u].i-=2;else if(null==s[o.i+1])s[o.i]=o.x;else for(s[o.i]=o.x+s[o.i+1],s.splice(o.i+1,1),u=r+1;i>u;++u)l[u].i--;l.splice(r,1),i--,r--}else o.x=pu(parseFloat(e[0]),parseFloat(o.x));for(;i>r;)o=l.pop(),null==s[o.i+1]?s[o.i]=o.x:(s[o.i]=o.x+s[o.i+1],s.splice(o.i+1,1)),i--;return 1===s.length?null==s[0]?(o=l[0].x,function(n){return o(n)+\"\"}):function(){return t}:function(n){for(r=0;i>r;++r)s[(o=l[r]).i]=o.x(n);return s.join(\"\")}}function du(n,t){for(var e,r=Go.interpolators.length;--r>=0&&!(e=Go.interpolators[r](n,t)););return e}function mu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(du(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function yu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function Mu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function bu(n){return n*n*n}function wu(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Su(n){return function(t){return Math.pow(t,n)}}function ku(n){return 1-Math.cos(n*La)}function Eu(n){return Math.pow(2,10*(n-1))}function Nu(n){return 1-Math.sqrt(1-n*n)}function Au(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Ca*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Ca/t)}}function Cu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Lu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Tu(n,t){n=Go.hcl(n),t=Go.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ct(e+i*n,r+o*n,u+a*n)+\"\"}}function qu(n,t){n=Go.hsl(n),t=Go.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return it(e+i*n,r+o*n,u+a*n)+\"\"}}function zu(n,t){n=Go.lab(n),t=Go.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ft(e+i*n,r+o*n,u+a*n)+\"\"}}function Ru(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Du(n){var t=[n.a,n.b],e=[n.c,n.d],r=Uu(t),u=Pu(t,e),i=Uu(ju(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ra,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ra:0}function Pu(n,t){return n[0]*t[0]+n[1]*t[1]}function Uu(n){var t=Math.sqrt(Pu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function ju(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Hu(n,t){var e,r=[],u=[],i=Go.transform(n),o=Go.transform(t),a=i.translate,c=o.translate,s=i.rotate,l=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push(\"translate(\",null,\",\",null,\")\"),u.push({i:1,x:pu(a[0],c[0])},{i:3,x:pu(a[1],c[1])})):c[0]||c[1]?r.push(\"translate(\"+c+\")\"):r.push(\"\"),s!=l?(s-l>180?l+=360:l-s>180&&(s+=360),u.push({i:r.push(r.pop()+\"rotate(\",null,\")\")-2,x:pu(s,l)})):l&&r.push(r.pop()+\"rotate(\"+l+\")\"),f!=h?u.push({i:r.push(r.pop()+\"skewX(\",null,\")\")-2,x:pu(f,h)}):h&&r.push(r.pop()+\"skewX(\"+h+\")\"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+\"scale(\",null,\",\",null,\")\"),u.push({i:e-4,x:pu(g[0],p[0])},{i:e-2,x:pu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+\"scale(\"+p+\")\"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join(\"\")}}function Fu(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return(e-n)*t}}function Ou(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return Math.max(0,Math.min(1,(e-n)*t))}}function Yu(n){for(var t=n.source,e=n.target,r=Zu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Iu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Zu(n,t){if(n===t)return n;for(var e=Iu(n),r=Iu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Vu(n){n.fixed|=2}function $u(n){n.fixed&=-7}function Xu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Bu(n){n.fixed&=-5}function Ju(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Ju(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var s=t*e[n.point.index];n.charge+=n.pointCharge=s,r+=s*n.point.x,u+=s*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Wu(n,t){return Go.rebind(n,t,\"sort\",\"children\",\"value\"),n.nodes=n,n.links=ni,n}function Gu(n){return n.children}function Ku(n){return n.value}function Qu(n,t){return t.value-n.value}function ni(n){return Go.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ti(n){return n.x}function ei(n){return n.y}function ri(n,t,e){n.y0=t,n.y=e}function ui(n){return Go.range(n.length)}function ii(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function oi(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function ai(n){return n.reduce(ci,0)}function ci(n,t){return n+t[1]}function si(n,t){return li(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function li(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function fi(n){return[Go.min(n),Go.max(n)]}function hi(n,t){return n.parent==t.parent?1:2}function gi(n){var t=n.children;return t&&t.length?t[0]:n._tree.thread}function pi(n){var t,e=n.children;return e&&(t=e.length)?e[t-1]:n._tree.thread}function vi(n,t){var e=n.children;if(e&&(u=e.length))for(var r,u,i=-1;++i<u;)t(r=vi(e[i],t),n)>0&&(n=r);return n}function di(n,t){return n.x-t.x}function mi(n,t){return t.x-n.x}function yi(n,t){return n.depth-t.depth}function xi(n,t){function e(n,r){var u=n.children;if(u&&(o=u.length))for(var i,o,a=null,c=-1;++c<o;)i=u[c],e(i,a),a=i;t(n,r)}e(n,null)}function Mi(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i]._tree,t.prelim+=e,t.mod+=e,e+=t.shift+(r+=t.change)}function _i(n,t,e){n=n._tree,t=t._tree;var r=e/(t.number-n.number);n.change+=r,t.change-=r,t.shift+=e,t.prelim+=e,t.mod+=e}function bi(n,t,e){return n._tree.ancestor.parent==t.parent?n._tree.ancestor:e}function wi(n,t){return n.value-t.value}function Si(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function ki(n,t){n._pack_next=t,t._pack_prev=n}function Ei(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Ni(n){function t(n){l=Math.min(n.x-n.r,l),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(s=e.length)){var e,r,u,i,o,a,c,s,l=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(Ai),r=e[0],r.x=-r.r,r.y=0,t(r),s>1&&(u=e[1],u.x=u.r,u.y=0,t(u),s>2))for(i=e[2],Ti(r,u,i),t(i),Si(r,i),r._pack_prev=i,Si(i,u),u=r._pack_next,o=3;s>o;o++){Ti(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(Ei(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!Ei(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?ki(r,u=a):ki(r=c,u),o--):(Si(r,i),u=i,t(i))}var m=(l+f)/2,y=(h+g)/2,x=0;for(o=0;s>o;o++)i=e[o],i.x-=m,i.y-=y,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=x,e.forEach(Ci)}}function Ai(n){n._pack_next=n._pack_prev=n}function Ci(n){delete n._pack_next,delete n._pack_prev}function Li(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)Li(u[i],t,e,r)}function Ti(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),s=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+s*i,e.y=n.y+c*i-s*u}else e.x=n.x+r,e.y=n.y}function qi(n){return 1+Go.max(n,function(n){return n.y})}function zi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Ri(n){var t=n.children;return t&&t.length?Ri(t[0]):n}function Di(n){var t,e=n.children;return e&&(t=e.length)?Di(e[t-1]):n}function Pi(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Ui(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function ji(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Hi(n){return n.rangeExtent?n.rangeExtent():ji(n.range())}function Fi(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Oi(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Yi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ps}function Ii(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=Go.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Zi(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Ii:Fi,c=r?Ou:Fu;return o=u(n,t,c,e),a=u(t,n,c,du),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Ru)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Bi(n,t)},i.tickFormat=function(t,e){return Ji(n,t,e)},i.nice=function(t){return $i(n,t),u()},i.copy=function(){return Zi(n,t,e,r)},u()}function Vi(n,t){return Go.rebind(n,t,\"range\",\"rangeRound\",\"interpolate\",\"clamp\")}function $i(n,t){return Oi(n,Yi(Xi(n,t)[2]))}function Xi(n,t){null==t&&(t=10);var e=ji(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Bi(n,t){return Go.range.apply(Go,Xi(n,t))}function Ji(n,t,e){var r=Xi(n,t);if(e){var u=rc.exec(e);if(u.shift(),\"s\"===u[8]){var i=Go.formatPrefix(Math.max(fa(r[0]),fa(r[1])));return u[7]||(u[7]=\".\"+Wi(i.scale(r[2]))),u[8]=\"f\",e=Go.format(u.join(\"\")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]=\".\"+Gi(u[8],r)),e=u.join(\"\")}else e=\",.\"+Wi(r[2])+\"f\";return Go.format(e)}function Wi(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Gi(n,t){var e=Wi(t[2]);return n in vs?Math.abs(e-Wi(Math.max(fa(t[0]),fa(t[1]))))+ +(\"e\"!==n):e-2*(\"%\"===n)}function Ki(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Oi(r.map(u),e?Math:ms);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=ji(r),o=[],a=n[0],c=n[1],s=Math.floor(u(a)),l=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(l-s)){if(e){for(;l>s;s++)for(var h=1;f>h;h++)o.push(i(s)*h);o.push(i(s))}else for(o.push(i(s));s++<l;)for(var h=f-1;h>0;h--)o.push(i(s)*h);for(s=0;o[s]<a;s++);for(l=o.length;o[l-1]>c;l--);o=o.slice(s,l)}return o},o.tickFormat=function(n,t){if(!arguments.length)return ds;arguments.length<2?t=ds:\"function\"!=typeof t&&(t=Go.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):\"\"}},o.copy=function(){return Ki(n.copy(),t,e,r)},Vi(o,n)}function Qi(n,t,e){function r(t){return n(u(t))}var u=no(t),i=no(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Bi(e,n)},r.tickFormat=function(n,t){return Ji(e,n,t)},r.nice=function(n){return r.domain($i(e,n))},r.exponent=function(o){return arguments.length?(u=no(t=o),i=no(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Qi(n.copy(),t,e)},Vi(r,n)}function no(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function to(n,t){function e(e){return i[((u.get(e)||(\"range\"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return Go.range(n.length).map(function(n){return t+e*n})}var u,i,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new o;for(var i,a=-1,c=r.length;++a<c;)u.has(i=r[a])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,a=0,t={t:\"range\",a:arguments},e):i},e.rangePoints=function(u,o){arguments.length<2&&(o=0);var c=u[0],s=u[1],l=(s-c)/(Math.max(1,n.length-1)+o);return i=r(n.length<2?(c+s)/2:c+l*o/2,l),a=0,t={t:\"rangePoints\",a:arguments},e},e.rangeBands=function(u,o,c){arguments.length<2&&(o=0),arguments.length<3&&(c=o);var s=u[1]<u[0],l=u[s-0],f=u[1-s],h=(f-l)/(n.length-o+2*c);return i=r(l+h*c,h),s&&i.reverse(),a=h*(1-o),t={t:\"rangeBands\",a:arguments},e},e.rangeRoundBands=function(u,o,c){arguments.length<2&&(o=0),arguments.length<3&&(c=o);var s=u[1]<u[0],l=u[s-0],f=u[1-s],h=Math.floor((f-l)/(n.length-o+2*c)),g=f-l-(n.length-o)*h;return i=r(l+Math.round(g/2),h),s&&i.reverse(),a=Math.round(h*(1-o)),t={t:\"rangeRoundBands\",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return ji(t.a[0])},e.copy=function(){return to(n,t)},e.domain(n)}function eo(t,e){function r(){var n=0,r=e.length;for(i=[];++n<r;)i[n-1]=Go.quantile(t,n/r);return u}function u(n){return isNaN(n=+n)?void 0:e[Go.bisect(i,n)]}var i;return u.domain=function(e){return arguments.length?(t=e.filter(function(n){return!isNaN(n)}).sort(n),r()):t},u.range=function(n){return arguments.length?(e=n,r()):e},u.quantiles=function(){return i},u.invertExtent=function(n){return n=e.indexOf(n),0>n?[0/0,0/0]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},u.copy=function(){return eo(t,e)},r()}function ro(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return ro(n,t,e)},u()}function uo(n,t){function e(e){return e>=e?t[Go.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return uo(n,t)},e}function io(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Bi(n,t)},t.tickFormat=function(t,e){return Ji(n,t,e)},t.copy=function(){return io(n)},t}function oo(n){return n.innerRadius}function ao(n){return n.outerRadius}function co(n){return n.startAngle}function so(n){return n.endAngle}function lo(n){function t(t){function o(){s.push(\"M\",i(n(l),a))}for(var c,s=[],l=[],f=-1,h=t.length,g=Et(e),p=Et(r);++f<h;)u.call(this,c=t[f],f)?l.push([+g.call(this,c,f),+p.call(this,c,f)]):l.length&&(o(),l=[]);return l.length&&o(),s.length?s.join(\"\"):null}var e=Nr,r=Ar,u=Ne,i=fo,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o=\"function\"==typeof n?i=n:(i=Ss.get(n)||fo).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function fo(n){return n.join(\"L\")}function ho(n){return fo(n)+\"Z\"}function go(n){for(var t=0,e=n.length,r=n[0],u=[r[0],\",\",r[1]];++t<e;)u.push(\"H\",(r[0]+(r=n[t])[0])/2,\"V\",r[1]);return e>1&&u.push(\"H\",r[0]),u.join(\"\")}function po(n){for(var t=0,e=n.length,r=n[0],u=[r[0],\",\",r[1]];++t<e;)u.push(\"V\",(r=n[t])[1],\"H\",r[0]);return u.join(\"\")}function vo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],\",\",r[1]];++t<e;)u.push(\"H\",(r=n[t])[0],\"V\",r[1]);return u.join(\"\")}function mo(n,t){return n.length<4?fo(n):n[1]+Mo(n.slice(1,n.length-1),_o(n,t))}function yo(n,t){return n.length<3?fo(n):n[0]+Mo((n.push(n[0]),n),_o([n[n.length-2]].concat(n,[n[1]]),t))}function xo(n,t){return n.length<3?fo(n):n[0]+Mo(n,_o(n,t))}function Mo(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return fo(n);var e=n.length!=t.length,r=\"\",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+=\"Q\"+(i[0]-2*o[0]/3)+\",\"+(i[1]-2*o[1]/3)+\",\"+i[0]+\",\"+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+=\"C\"+(u[0]+o[0])+\",\"+(u[1]+o[1])+\",\"+(i[0]-a[0])+\",\"+(i[1]-a[1])+\",\"+i[0]+\",\"+i[1];for(var s=2;s<t.length;s++,c++)i=n[c],a=t[s],r+=\"S\"+(i[0]-a[0])+\",\"+(i[1]-a[1])+\",\"+i[0]+\",\"+i[1]}if(e){var l=n[c];r+=\"Q\"+(i[0]+2*a[0]/3)+\",\"+(i[1]+2*a[1]/3)+\",\"+l[0]+\",\"+l[1]}return r}function _o(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function bo(n){if(n.length<3)return fo(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,\",\",i,\"L\",Eo(Ns,o),\",\",Eo(Ns,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),No(c,o,a);return n.pop(),c.push(\"L\",r),c.join(\"\")}function wo(n){if(n.length<4)return fo(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(Eo(Ns,i)+\",\"+Eo(Ns,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),No(e,i,o);return e.join(\"\")}function So(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[Eo(Ns,o),\",\",Eo(Ns,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),No(t,o,a);return t.join(\"\")}function ko(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,s=-1;++s<=e;)r=n[s],u=s/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return bo(n)}function Eo(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function No(n,t,e){n.push(\"C\",Eo(ks,t),\",\",Eo(ks,e),\",\",Eo(Es,t),\",\",Eo(Es,e),\",\",Eo(Ns,t),\",\",Eo(Ns,e))}function Ao(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Co(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=Ao(u,i);++t<e;)r[t]=(o+(o=Ao(u=i,i=n[t+1])))/2;return r[t]=o,r}function Lo(n){for(var t,e,r,u,i=[],o=Co(n),a=-1,c=n.length-1;++a<c;)t=Ao(n[a],n[a+1]),fa(t)<Ta?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function To(n){return n.length<3?fo(n):n[0]+Mo(n,Lo(n))}function qo(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]+bs,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function zo(n){function t(t){function c(){v.push(\"M\",a(n(m),f),l,s(n(d.reverse()),f),\"Z\")}for(var h,g,p,v=[],d=[],m=[],y=-1,x=t.length,M=Et(e),_=Et(u),b=e===r?function(){return g}:Et(r),w=u===i?function(){return p}:Et(i);++y<x;)o.call(this,h=t[y],y)?(d.push([g=+M.call(this,h,y),p=+_.call(this,h,y)]),m.push([+b.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(\"\"):null}var e=Nr,r=Nr,u=0,i=Ar,o=Ne,a=fo,c=a.key,s=a,l=\"L\",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c=\"function\"==typeof n?a=n:(a=Ss.get(n)||fo).key,s=a.reverse||a,l=a.closed?\"M\":\"L\",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Ro(n){return n.radius}function Do(n){return[n.x,n.y]}function Po(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]+bs;return[e*Math.cos(r),e*Math.sin(r)]}}function Uo(){return 64}function jo(){return\"circle\"}function Ho(n){var t=Math.sqrt(n/Aa);return\"M0,\"+t+\"A\"+t+\",\"+t+\" 0 1,1 0,\"+-t+\"A\"+t+\",\"+t+\" 0 1,1 0,\"+t+\"Z\"}function Fo(n,t){return da(n,zs),n.id=t,n}function Oo(n,t,e,r){var u=n.id;return P(n,\"function\"==typeof e?function(n,i,o){n.__transition__[u].tween.set(t,r(e.call(n,n.__data__,i,o)))}:(e=r(e),function(n){n.__transition__[u].tween.set(t,e)}))}function Yo(n){return null==n&&(n=\"\"),function(){this.textContent=n}}function Io(n,t,e,r){var u=n.__transition__||(n.__transition__={active:0,count:0}),i=u[e];if(!i){var a=r.time;i=u[e]={tween:new o,time:a,ease:r.ease,delay:r.delay,duration:r.duration},++u.count,Go.timer(function(r){function o(r){return u.active>e?s():(u.active=e,i.event&&i.event.start.call(n,l,t),i.tween.forEach(function(e,r){(r=r.call(n,l,t))&&v.push(r)}),Go.timer(function(){return p.c=c(r||1)?Ne:c,1},0,a),void 0)}function c(r){if(u.active!==e)return s();for(var o=r/g,a=f(o),c=v.length;c>0;)v[--c].call(n,a);return o>=1?(i.event&&i.event.end.call(n,l,t),s()):void 0}function s(){return--u.count?delete u[e]:delete n.__transition__,1}var l=n.__data__,f=i.ease,h=i.delay,g=i.duration,p=nc,v=[];return p.t=h+a,r>=h?o(r-h):(p.c=o,void 0)\n},0,a)}}function Zo(n,t){n.attr(\"transform\",function(n){return\"translate(\"+t(n)+\",0)\"})}function Vo(n,t){n.attr(\"transform\",function(n){return\"translate(0,\"+t(n)+\")\"})}function $o(n){return n.toISOString()}function Xo(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=Go.bisect(Ys,u);return i==Ys.length?[t.year,Xi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Ys[i-1]<Ys[i]/u?i-1:i]:[Vs,Xi(n,e)[2]]}return r.invert=function(t){return Bo(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Bo)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Bo(+e+1),t).length}var i=r.domain(),o=ji(i),a=null==n?u(o,10):\"number\"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Oi(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Bo(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Bo(+t+1);return t}}:n))},r.ticks=function(n,t){var e=ji(r.domain()),i=null==n?u(e,10):\"number\"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Bo(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Xo(n.copy(),t,e)},Vi(r,n)}function Bo(n){return new Date(n)}function Jo(n){return JSON.parse(n.responseText)}function Wo(n){var t=na.createRange();return t.selectNode(na.body),t.createContextualFragment(n.responseText)}var Go={version:\"3.4.4\"};Date.now||(Date.now=function(){return+new Date});var Ko=[].slice,Qo=function(n){return Ko.call(n)},na=document,ta=na.documentElement,ea=window;try{Qo(ta.childNodes)[0].nodeType}catch(ra){Qo=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{na.createElement(\"div\").style.setProperty(\"opacity\",0,\"\")}catch(ua){var ia=ea.Element.prototype,oa=ia.setAttribute,aa=ia.setAttributeNS,ca=ea.CSSStyleDeclaration.prototype,sa=ca.setProperty;ia.setAttribute=function(n,t){oa.call(this,n,t+\"\")},ia.setAttributeNS=function(n,t,e){aa.call(this,n,t,e+\"\")},ca.setProperty=function(n,t,e){sa.call(this,n,t+\"\",e)}}Go.ascending=n,Go.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},Go.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},Go.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},Go.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=u=n[i])&&e>=e);)e=u=void 0;for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o&&!(null!=(e=u=t.call(n,n[i],i))&&e>=e);)e=void 0;for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},Go.sum=function(n,t){var e,r=0,u=n.length,i=-1;if(1===arguments.length)for(;++i<u;)isNaN(e=+n[i])||(r+=e);else for(;++i<u;)isNaN(e=+t.call(n,n[i],i))||(r+=e);return r},Go.mean=function(n,e){var r,u=n.length,i=0,o=-1,a=0;if(1===arguments.length)for(;++o<u;)t(r=n[o])&&(i+=(r-i)/++a);else for(;++o<u;)t(r=e.call(n,n[o],o))&&(i+=(r-i)/++a);return a?i:void 0},Go.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},Go.median=function(e,r){return arguments.length>1&&(e=e.map(r)),e=e.filter(t),e.length?Go.quantile(e.sort(n),.5):void 0};var la=e(n);Go.bisectLeft=la.left,Go.bisect=Go.bisectRight=la.right,Go.bisector=function(t){return e(1===t.length?function(e,r){return n(t(e),r)}:t)},Go.shuffle=function(n){for(var t,e,r=n.length;r;)e=0|Math.random()*r--,t=n[r],n[r]=n[e],n[e]=t;return n},Go.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},Go.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},Go.zip=function(){if(!(u=arguments.length))return[];for(var n=-1,t=Go.min(arguments,r),e=new Array(t);++n<t;)for(var u,i=-1,o=e[n]=new Array(u);++i<u;)o[i]=arguments[i][n];return e},Go.transpose=function(n){return Go.zip.apply(Go,n)},Go.keys=function(n){var t=[];for(var e in n)t.push(e);return t},Go.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},Go.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Go.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var fa=Math.abs;Go.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),1/0===(t-n)/e)throw new Error(\"infinite range\");var r,i=[],o=u(fa(e)),a=-1;if(n*=o,t*=o,e*=o,0>e)for(;(r=n+e*++a)>t;)i.push(r/o);else for(;(r=n+e*++a)<t;)i.push(r/o);return i},Go.map=function(n){var t=new o;if(n instanceof o)n.forEach(function(n,e){t.set(n,e)});else for(var e in n)t.set(e,n[e]);return t},i(o,{has:a,get:function(n){return this[ha+n]},set:function(n,t){return this[ha+n]=t},remove:c,keys:s,values:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},entries:function(){var n=[];return this.forEach(function(t,e){n.push({key:t,value:e})}),n},size:l,empty:f,forEach:function(n){for(var t in this)t.charCodeAt(0)===ga&&n.call(this,t.substring(1),this[t])}});var ha=\"\\x00\",ga=ha.charCodeAt(0);Go.nest=function(){function n(t,a,c){if(c>=i.length)return r?r.call(u,a):e?a.sort(e):a;for(var s,l,f,h,g=-1,p=a.length,v=i[c++],d=new o;++g<p;)(h=d.get(s=v(l=a[g])))?h.push(l):d.set(s,[l]);return t?(l=t(),f=function(e,r){l.set(e,n(t,r,c))}):(l={},f=function(e,r){l[e]=n(t,r,c)}),d.forEach(f),l}function t(n,e){if(e>=i.length)return n;var r=[],u=a[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(Go.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return a[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},Go.set=function(n){var t=new h;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},i(h,{has:a,add:function(n){return this[ha+n]=!0,n},remove:function(n){return n=ha+n,n in this&&delete this[n]},values:s,size:l,empty:f,forEach:function(n){for(var t in this)t.charCodeAt(0)===ga&&n.call(this,t.substring(1))}}),Go.behavior={},Go.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=g(n,t,t[e]);return n};var pa=[\"webkit\",\"ms\",\"moz\",\"Moz\",\"o\",\"O\"];Go.dispatch=function(){for(var n=new d,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=m(n);return n},d.prototype.on=function(n,t){var e=n.indexOf(\".\"),r=\"\";if(e>=0&&(r=n.substring(e+1),n=n.substring(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},Go.event=null,Go.requote=function(n){return n.replace(va,\"\\\\$&\")};var va=/[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g,da={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},ma=function(n,t){return t.querySelector(n)},ya=function(n,t){return t.querySelectorAll(n)},xa=ta[p(ta,\"matchesSelector\")],Ma=function(n,t){return xa.call(n,t)};\"function\"==typeof Sizzle&&(ma=function(n,t){return Sizzle(n,t)[0]||null},ya=Sizzle,Ma=Sizzle.matchesSelector),Go.selection=function(){return Sa};var _a=Go.selection.prototype=[];_a.select=function(n){var t,e,r,u,i=[];n=b(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,s=r.length;++c<s;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&\"__data__\"in u&&(e.__data__=u.__data__)):t.push(null)}return _(i)},_a.selectAll=function(n){var t,e,r=[];n=w(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=Qo(n.call(e,e.__data__,a,u))),t.parentNode=e);return _(r)};var ba={svg:\"http://www.w3.org/2000/svg\",xhtml:\"http://www.w3.org/1999/xhtml\",xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};Go.ns={prefix:ba,qualify:function(n){var t=n.indexOf(\":\"),e=n;return t>=0&&(e=n.substring(0,t),n=n.substring(t+1)),ba.hasOwnProperty(e)?{space:ba[e],local:n}:n}},_a.attr=function(n,t){if(arguments.length<2){if(\"string\"==typeof n){var e=this.node();return n=Go.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(S(t,n[t]));return this}return this.each(S(n,t))},_a.classed=function(n,t){if(arguments.length<2){if(\"string\"==typeof n){var e=this.node(),r=(n=N(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute(\"class\");++u<r;)if(!E(n[u]).test(t))return!1;return!0}for(t in n)this.each(A(t,n[t]));return this}return this.each(A(n,t))},_a.style=function(n,t,e){var r=arguments.length;if(3>r){if(\"string\"!=typeof n){2>r&&(t=\"\");for(e in n)this.each(L(e,n[e],t));return this}if(2>r)return ea.getComputedStyle(this.node(),null).getPropertyValue(n);e=\"\"}return this.each(L(n,t,e))},_a.property=function(n,t){if(arguments.length<2){if(\"string\"==typeof n)return this.node()[n];for(t in n)this.each(T(t,n[t]));return this}return this.each(T(n,t))},_a.text=function(n){return arguments.length?this.each(\"function\"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?\"\":t}:null==n?function(){this.textContent=\"\"}:function(){this.textContent=n}):this.node().textContent},_a.html=function(n){return arguments.length?this.each(\"function\"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?\"\":t}:null==n?function(){this.innerHTML=\"\"}:function(){this.innerHTML=n}):this.node().innerHTML},_a.append=function(n){return n=q(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},_a.insert=function(n,t){return n=q(n),t=b(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},_a.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},_a.data=function(n,t){function e(n,e){var r,u,i,a=n.length,f=e.length,h=Math.min(a,f),g=new Array(f),p=new Array(f),v=new Array(a);if(t){var d,m=new o,y=new o,x=[];for(r=-1;++r<a;)d=t.call(u=n[r],u.__data__,r),m.has(d)?v[r]=u:m.set(d,u),x.push(d);for(r=-1;++r<f;)d=t.call(e,i=e[r],r),(u=m.get(d))?(g[r]=u,u.__data__=i):y.has(d)||(p[r]=z(i)),y.set(d,i),m.remove(d);for(r=-1;++r<a;)m.has(x[r])&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=z(i);for(;f>r;++r)p[r]=z(e[r]);for(;a>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,c.push(p),s.push(g),l.push(v)}var r,u,i=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++i<a;)(u=r[i])&&(n[i]=u.__data__);return n}var c=U([]),s=_([]),l=_([]);if(\"function\"==typeof n)for(;++i<a;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<a;)e(r=this[i],n);return s.enter=function(){return c},s.exit=function(){return l},s},_a.datum=function(n){return arguments.length?this.property(\"__data__\",n):this.property(\"__data__\")},_a.filter=function(n){var t,e,r,u=[];\"function\"!=typeof n&&(n=R(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return _(u)},_a.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},_a.sort=function(n){n=D.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},_a.each=function(n){return P(this,function(t,e,r){n.call(t,t.__data__,e,r)})},_a.call=function(n){var t=Qo(arguments);return n.apply(t[0]=this,t),this},_a.empty=function(){return!this.node()},_a.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},_a.size=function(){var n=0;return this.each(function(){++n}),n};var wa=[];Go.selection.enter=U,Go.selection.enter.prototype=wa,wa.append=_a.append,wa.empty=_a.empty,wa.node=_a.node,wa.call=_a.call,wa.size=_a.size,wa.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var s=-1,l=u.length;++s<l;)(i=u[s])?(t.push(r[s]=e=n.call(u.parentNode,i.__data__,s,a)),e.__data__=i.__data__):t.push(null)}return _(o)},wa.insert=function(n,t){return arguments.length<2&&(t=j(this)),_a.insert.call(this,n,t)},_a.transition=function(){for(var n,t,e=Cs||++Rs,r=[],u=Ls||{time:Date.now(),ease:wu,delay:0,duration:250},i=-1,o=this.length;++i<o;){r.push(n=[]);for(var a=this[i],c=-1,s=a.length;++c<s;)(t=a[c])&&Io(t,c,e,u),n.push(t)}return Fo(r,e)},_a.interrupt=function(){return this.each(H)},Go.select=function(n){var t=[\"string\"==typeof n?ma(n,na):n];return t.parentNode=ta,_([t])},Go.selectAll=function(n){var t=Qo(\"string\"==typeof n?ya(n,na):n);return t.parentNode=ta,_([t])};var Sa=Go.select(ta);_a.on=function(n,t,e){var r=arguments.length;if(3>r){if(\"string\"!=typeof n){2>r&&(t=!1);for(e in n)this.each(F(e,n[e],t));return this}if(2>r)return(r=this.node()[\"__on\"+n])&&r._;e=!1}return this.each(F(n,t,e))};var ka=Go.map({mouseenter:\"mouseover\",mouseleave:\"mouseout\"});ka.forEach(function(n){\"on\"+n in na&&ka.remove(n)});var Ea=\"onselectstart\"in na?null:p(ta.style,\"userSelect\"),Na=0;Go.mouse=function(n){return Z(n,x())},Go.touches=function(n,t){return arguments.length<2&&(t=x().touches),t?Qo(t).map(function(t){var e=Z(n,t);return e.identifier=t.identifier,e}):[]},Go.behavior.drag=function(){function n(){this.on(\"mousedown.drag\",u).on(\"touchstart.drag\",i)}function t(n,t,u,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-x[0],e=r[1]-x[1],p|=n|e,x=r,g({type:\"drag\",x:r[0]+s[0],y:r[1]+s[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&Go.event.target===f),g({type:\"dragend\"}))}var s,l=this,f=Go.event.target,h=l.parentNode,g=e.of(l,arguments),p=0,v=n(),d=\".drag\"+(null==v?\"\":\"-\"+v),m=Go.select(u()).on(i+d,a).on(o+d,c),y=I(),x=t(h,v);r?(s=r.apply(l,arguments),s=[s.x-x[0],s.y-x[1]]):s=[0,0],g({type:\"dragstart\"})}}var e=M(n,\"drag\",\"dragstart\",\"dragend\"),r=null,u=t(v,Go.mouse,X,\"mousemove\",\"mouseup\"),i=t(V,Go.touch,$,\"touchmove\",\"touchend\");return n.origin=function(t){return arguments.length?(r=t,n):r},Go.rebind(n,e,\"on\")};var Aa=Math.PI,Ca=2*Aa,La=Aa/2,Ta=1e-6,qa=Ta*Ta,za=Aa/180,Ra=180/Aa,Da=Math.SQRT2,Pa=2,Ua=4;Go.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=Q(v),o=i/(Pa*h)*(e*nt(Da*t+v)-K(v));return[r+o*s,u+o*l,i*e/Q(Da*t+v)]}return[r+n*s,u+n*l,i*Math.exp(Da*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],s=o-r,l=a-u,f=s*s+l*l,h=Math.sqrt(f),g=(c*c-i*i+Ua*f)/(2*i*Pa*h),p=(c*c-i*i-Ua*f)/(2*c*Pa*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Da;return e.duration=1e3*y,e},Go.behavior.zoom=function(){function n(n){n.on(N,s).on(Fa+\".zoom\",f).on(A,h).on(\"dblclick.zoom\",g).on(L,l)}function t(n){return[(n[0]-S.x)/S.k,(n[1]-S.y)/S.k]}function e(n){return[n[0]*S.k+S.x,n[1]*S.k+S.y]}function r(n){S.k=Math.max(E[0],Math.min(E[1],n))}function u(n,t){t=e(t),S.x+=n[0]-t[0],S.y+=n[1]-t[1]}function i(){_&&_.domain(x.range().map(function(n){return(n-S.x)/S.k}).map(x.invert)),w&&w.domain(b.range().map(function(n){return(n-S.y)/S.k}).map(b.invert))}function o(n){n({type:\"zoomstart\"})}function a(n){i(),n({type:\"zoom\",scale:S.k,translate:[S.x,S.y]})}function c(n){n({type:\"zoomend\"})}function s(){function n(){l=1,u(Go.mouse(r),g),a(s)}function e(){f.on(A,ea===r?h:null).on(C,null),p(l&&Go.event.target===i),c(s)}var r=this,i=Go.event.target,s=T.of(r,arguments),l=0,f=Go.select(ea).on(A,n).on(C,e),g=t(Go.mouse(r)),p=I();H.call(r),o(s)}function l(){function n(){var n=Go.touches(g);return h=S.k,n.forEach(function(n){n.identifier in v&&(v[n.identifier]=t(n))}),n}function e(){for(var t=Go.event.changedTouches,e=0,i=t.length;i>e;++e)v[t[e].identifier]=null;var o=n(),c=Date.now();if(1===o.length){if(500>c-m){var s=o[0],l=v[s.identifier];r(2*S.k),u(s,l),y(),a(p)}m=c}else if(o.length>1){var s=o[0],f=o[1],h=s[0]-f[0],g=s[1]-f[1];d=h*h+g*g}}function i(){for(var n,t,e,i,o=Go.touches(g),c=0,s=o.length;s>c;++c,i=null)if(e=o[c],i=v[e.identifier]){if(t)break;n=e,t=i}if(i){var l=(l=e[0]-n[0])*l+(l=e[1]-n[1])*l,f=d&&Math.sqrt(l/d);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],r(f*h)}m=null,u(n,t),a(p)}function f(){if(Go.event.touches.length){for(var t=Go.event.changedTouches,e=0,r=t.length;r>e;++e)delete v[t[e].identifier];for(var u in v)return void n()}b.on(x,null),w.on(N,s).on(L,l),k(),c(p)}var h,g=this,p=T.of(g,arguments),v={},d=0,x=\".zoom-\"+Go.event.changedTouches[0].identifier,M=\"touchmove\"+x,_=\"touchend\"+x,b=Go.select(Go.event.target).on(M,i).on(_,f),w=Go.select(g).on(N,null).on(L,e),k=I();H.call(g),e(),o(p)}function f(){var n=T.of(this,arguments);d?clearTimeout(d):(H.call(this),o(n)),d=setTimeout(function(){d=null,c(n)},50),y();var e=v||Go.mouse(this);p||(p=t(e)),r(Math.pow(2,.002*ja())*S.k),u(e,p),a(n)}function h(){p=null}function g(){var n=T.of(this,arguments),e=Go.mouse(this),i=t(e),s=Math.log(S.k)/Math.LN2;o(n),r(Math.pow(2,Go.event.shiftKey?Math.ceil(s)-1:Math.floor(s)+1)),u(e,i),a(n),c(n)}var p,v,d,m,x,_,b,w,S={x:0,y:0,k:1},k=[960,500],E=Ha,N=\"mousedown.zoom\",A=\"mousemove.zoom\",C=\"mouseup.zoom\",L=\"touchstart.zoom\",T=M(n,\"zoomstart\",\"zoom\",\"zoomend\");return n.event=function(n){n.each(function(){var n=T.of(this,arguments),t=S;Cs?Go.select(this).transition().each(\"start.zoom\",function(){S=this.__chart__||{x:0,y:0,k:1},o(n)}).tween(\"zoom:zoom\",function(){var e=k[0],r=k[1],u=e/2,i=r/2,o=Go.interpolateZoom([(u-S.x)/S.k,(i-S.y)/S.k,e/S.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),c=e/r[2];this.__chart__=S={x:u-r[0]*c,y:i-r[1]*c,k:c},a(n)}}).each(\"end.zoom\",function(){c(n)}):(this.__chart__=S,o(n),a(n),c(n))})},n.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},i(),n):[S.x,S.y]},n.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},i(),n):S.k},n.scaleExtent=function(t){return arguments.length?(E=null==t?Ha:[+t[0],+t[1]],n):E},n.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],n):v},n.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],n):k},n.x=function(t){return arguments.length?(_=t,x=t.copy(),S={x:0,y:0,k:1},n):_},n.y=function(t){return arguments.length?(w=t,b=t.copy(),S={x:0,y:0,k:1},n):w},Go.rebind(n,T,\"on\")};var ja,Ha=[0,1/0],Fa=\"onwheel\"in na?(ja=function(){return-Go.event.deltaY*(Go.event.deltaMode?120:1)},\"wheel\"):\"onmousewheel\"in na?(ja=function(){return Go.event.wheelDelta},\"mousewheel\"):(ja=function(){return-Go.event.detail},\"MozMousePixelScroll\");et.prototype.toString=function(){return this.rgb()+\"\"},Go.hsl=function(n,t,e){return 1===arguments.length?n instanceof ut?rt(n.h,n.s,n.l):_t(\"\"+n,bt,rt):rt(+n,+t,+e)};var Oa=ut.prototype=new et;Oa.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),rt(this.h,this.s,this.l/n)},Oa.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),rt(this.h,this.s,n*this.l)},Oa.rgb=function(){return it(this.h,this.s,this.l)},Go.hcl=function(n,t,e){return 1===arguments.length?n instanceof at?ot(n.h,n.c,n.l):n instanceof lt?ht(n.l,n.a,n.b):ht((n=wt((n=Go.rgb(n)).r,n.g,n.b)).l,n.a,n.b):ot(+n,+t,+e)};var Ya=at.prototype=new et;Ya.brighter=function(n){return ot(this.h,this.c,Math.min(100,this.l+Ia*(arguments.length?n:1)))},Ya.darker=function(n){return ot(this.h,this.c,Math.max(0,this.l-Ia*(arguments.length?n:1)))},Ya.rgb=function(){return ct(this.h,this.c,this.l).rgb()},Go.lab=function(n,t,e){return 1===arguments.length?n instanceof lt?st(n.l,n.a,n.b):n instanceof at?ct(n.l,n.c,n.h):wt((n=Go.rgb(n)).r,n.g,n.b):st(+n,+t,+e)};var Ia=18,Za=.95047,Va=1,$a=1.08883,Xa=lt.prototype=new et;Xa.brighter=function(n){return st(Math.min(100,this.l+Ia*(arguments.length?n:1)),this.a,this.b)},Xa.darker=function(n){return st(Math.max(0,this.l-Ia*(arguments.length?n:1)),this.a,this.b)},Xa.rgb=function(){return ft(this.l,this.a,this.b)},Go.rgb=function(n,t,e){return 1===arguments.length?n instanceof xt?yt(n.r,n.g,n.b):_t(\"\"+n,yt,it):yt(~~n,~~t,~~e)};var Ba=xt.prototype=new et;Ba.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),yt(Math.min(255,~~(t/n)),Math.min(255,~~(e/n)),Math.min(255,~~(r/n)))):yt(u,u,u)},Ba.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),yt(~~(n*this.r),~~(n*this.g),~~(n*this.b))},Ba.hsl=function(){return bt(this.r,this.g,this.b)},Ba.toString=function(){return\"#\"+Mt(this.r)+Mt(this.g)+Mt(this.b)};var Ja=Go.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ja.forEach(function(n,t){Ja.set(n,dt(t))}),Go.functor=Et,Go.xhr=At(Nt),Go.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Ct(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'\"'+n.replace(/\\\"/g,'\"\"')+'\"':n}var a=new RegExp('[\"'+n+\"\\n]\"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function(\"d\",\"return {\"+n.map(function(n,t){return JSON.stringify(n)+\": d[\"+t+\"]\"}).join(\",\")+\"}\");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(l>=s)return o;if(u)return u=!1,i;var t=l;if(34===n.charCodeAt(t)){for(var e=t;e++<s;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}l=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++l):10===r&&(u=!0),n.substring(t+1,e).replace(/\"\"/g,'\"')}for(;s>l;){var r=n.charCodeAt(l++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(l)&&(++l,++a);else if(r!==c)continue;return n.substring(t,l-a)}return n.substring(t)}for(var r,u,i={},o={},a=[],s=n.length,l=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();(!t||(h=t(h,f++)))&&a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new h,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join(\"\\n\")},e.formatRows=function(n){return n.map(i).join(\"\\n\")},e},Go.csv=Go.dsv(\",\",\"text/csv\"),Go.tsv=Go.dsv(\"\t\",\"text/tab-separated-values\"),Go.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=x().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return Z(n,r)};var Wa,Ga,Ka,Qa,nc,tc=ea[p(ea,\"requestAnimationFrame\")]||function(n){setTimeout(n,17)};Go.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Ga?Ga.n=i:Wa=i,Ga=i,Ka||(Qa=clearTimeout(Qa),Ka=1,tc(Tt))},Go.timer.flush=function(){qt(),zt()},Go.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var ec=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\\xb5\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"].map(Dt);Go.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=Go.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),ec[8+e/3]};var rc=/(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i,uc=Go.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=Go.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),ic=Go.time={},oc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ac.setUTCDate.apply(this._,arguments)},setDay:function(){ac.setUTCDay.apply(this._,arguments)},setFullYear:function(){ac.setUTCFullYear.apply(this._,arguments)},setHours:function(){ac.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ac.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ac.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ac.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ac.setUTCSeconds.apply(this._,arguments)},setTime:function(){ac.setTime.apply(this._,arguments)}};var ac=Date.prototype;ic.year=Ht(function(n){return n=ic.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ic.years=ic.year.range,ic.years.utc=ic.year.utc.range,ic.day=Ht(function(n){var t=new oc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ic.days=ic.day.range,ic.days.utc=ic.day.utc.range,ic.dayOfYear=function(n){var t=ic.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},[\"sunday\",\"monday\",\"tuesday\",\"wednesday\",\"thursday\",\"friday\",\"saturday\"].forEach(function(n,t){t=7-t;var e=ic[n]=Ht(function(n){return(n=ic.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ic.year(n).getDay();return Math.floor((ic.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ic[n+\"s\"]=e.range,ic[n+\"s\"].utc=e.utc.range,ic[n+\"OfYear\"]=function(n){var e=ic.year(n).getDay();return Math.floor((ic.dayOfYear(n)+(e+t)%7)/7)}}),ic.week=ic.sunday,ic.weeks=ic.sunday.range,ic.weeks.utc=ic.sunday.utc.range,ic.weekOfYear=ic.sundayOfYear;var cc={\"-\":\"\",_:\" \",0:\"0\"},sc=/^\\s*\\d+/,lc=/^%/;Go.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var fc=Go.locale({decimal:\".\",thousands:\",\",grouping:[3],currency:[\"$\",\"\"],dateTime:\"%a %b %e %X %Y\",date:\"%m/%d/%Y\",time:\"%H:%M:%S\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});Go.format=fc.numberFormat,Go.geo={},ce.prototype={s:0,t:0,add:function(n){se(n,this.t,hc),se(hc.s,this.s,this),this.s?this.t+=hc.t:this.s=hc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hc=new ce;Go.geo.stream=function(n,t){n&&gc.hasOwnProperty(n.type)?gc[n.type](n,t):le(n,t)};var gc={Feature:function(n,t){le(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)le(e[r].geometry,t)}},pc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)le(e[r],t)}};Go.geo.area=function(n){return vc=0,Go.geo.stream(n,mc),vc};var vc,dc=new ce,mc={sphere:function(){vc+=4*Aa},point:v,lineStart:v,lineEnd:v,polygonStart:function(){dc.reset(),mc.lineStart=ge},polygonEnd:function(){var n=2*dc;vc+=0>n?4*Aa+n:n,mc.lineStart=mc.lineEnd=mc.point=v}};Go.geo.bounds=function(){function n(n,t){x.push(M=[l=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*za,e*za]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);xe(o),o=Me(o);var c=t-p,s=c>0?1:-1,v=o[0]*Ra*s,d=fa(c)>180;if(d^(v>s*p&&s*t>v)){var y=o[1]*Ra;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>s*p&&s*t>v)){var y=-o[1]*Ra;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(l,t)>a(l,h)&&(h=t):a(t,h)>a(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>p?a(l,t)>a(l,h)&&(h=t):a(t,h)>a(l,h)&&(l=t)}else n(t,e);m=r,p=t}function e(){_.point=t}function r(){M[0]=l,M[1]=h,_.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=fa(r)>180?r+(r>0?360:-360):r}else v=n,d=e;mc.point(n,e),t(n,e)}function i(){mc.lineStart()}function o(){u(v,d),mc.lineEnd(),fa(y)>Ta&&(l=-(h=180)),M[0]=l,M[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function s(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var l,f,h,g,p,v,d,m,y,x,M,_={point:n,lineStart:e,lineEnd:r,polygonStart:function(){_.point=u,_.lineStart=i,_.lineEnd=o,y=0,mc.polygonStart()},polygonEnd:function(){mc.polygonEnd(),_.point=n,_.lineStart=e,_.lineEnd=r,0>dc?(l=-(h=180),f=-(g=90)):y>Ta?g=90:-Ta>y&&(f=-90),M[0]=l,M[1]=h\n}};return function(n){g=h=-(l=f=1/0),x=[],Go.geo.stream(n,_);var t=x.length;if(t){x.sort(c);for(var e,r=1,u=x[0],i=[u];t>r;++r)e=x[r],s(e[0],u)||s(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,l=e[0],h=u[1])}return x=M=null,1/0===l||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[l,f],[h,g]]}}(),Go.geo.centroid=function(n){yc=xc=Mc=_c=bc=wc=Sc=kc=Ec=Nc=Ac=0,Go.geo.stream(n,Cc);var t=Ec,e=Nc,r=Ac,u=t*t+e*e+r*r;return qa>u&&(t=wc,e=Sc,r=kc,Ta>xc&&(t=Mc,e=_c,r=bc),u=t*t+e*e+r*r,qa>u)?[0/0,0/0]:[Math.atan2(e,t)*Ra,G(r/Math.sqrt(u))*Ra]};var yc,xc,Mc,_c,bc,wc,Sc,kc,Ec,Nc,Ac,Cc={sphere:v,point:be,lineStart:Se,lineEnd:ke,polygonStart:function(){Cc.lineStart=Ee},polygonEnd:function(){Cc.lineStart=Se}},Lc=Te(Ne,Pe,je,[-Aa,-Aa/2]),Tc=1e9;Go.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Oe(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(Go.geo.conicEqualArea=function(){return Ie(Ze)}).raw=Ze,Go.geo.albers=function(){return Go.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Go.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=Go.geo.albers(),o=Go.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Go.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var s=i.scale(),l=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[l-.455*s,f-.238*s],[l+.455*s,f+.238*s]]).stream(c).point,r=o.translate([l-.307*s,f+.201*s]).clipExtent([[l-.425*s+Ta,f+.12*s+Ta],[l-.214*s-Ta,f+.234*s-Ta]]).stream(c).point,u=a.translate([l-.205*s,f+.212*s]).clipExtent([[l-.214*s+Ta,f+.166*s+Ta],[l-.115*s-Ta,f+.234*s-Ta]]).stream(c).point,n},n.scale(1070)};var qc,zc,Rc,Dc,Pc,Uc,jc={point:v,lineStart:v,lineEnd:v,polygonStart:function(){zc=0,jc.lineStart=Ve},polygonEnd:function(){jc.lineStart=jc.lineEnd=jc.point=v,qc+=fa(zc/2)}},Hc={point:$e,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Fc={point:Je,lineStart:We,lineEnd:Ge,polygonStart:function(){Fc.lineStart=Ke},polygonEnd:function(){Fc.point=Je,Fc.lineStart=We,Fc.lineEnd=Ge}};Go.geo.path=function(){function n(n){return n&&(\"function\"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),Go.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return qc=0,Go.geo.stream(n,u(jc)),qc},n.centroid=function(n){return Mc=_c=bc=wc=Sc=kc=Ec=Nc=Ac=0,Go.geo.stream(n,u(Fc)),Ac?[Ec/Ac,Nc/Ac]:kc?[wc/kc,Sc/kc]:bc?[Mc/bc,_c/bc]:[0/0,0/0]},n.bounds=function(n){return Pc=Uc=-(Rc=Dc=1/0),Go.geo.stream(n,u(Hc)),[[Rc,Dc],[Pc,Uc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):Nt,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new Xe:new Qe(n),\"function\"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a=\"function\"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(Go.geo.albersUsa()).context(null)},Go.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Go.geo.projection=ur,Go.geo.projectionMutator=ir,(Go.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,Go.geo.rotation=function(n){function t(t){return t=n(t[0]*za,t[1]*za),t[0]*=Ra,t[1]*=Ra,t}return n=sr(n[0]%360*za,n[1]*za,n.length>2?n[2]*za:0),t.invert=function(t){return t=n.invert(t[0]*za,t[1]*za),t[0]*=Ra,t[1]*=Ra,t},t},cr.invert=ar,Go.geo.circle=function(){function n(){var n=\"function\"==typeof r?r.apply(this,arguments):r,t=sr(-n[0]*za,-n[1]*za,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ra,n[1]*=Ra}}),{type:\"Polygon\",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*za,u*za),n):t},n.precision=function(r){return arguments.length?(e=gr(t*za,(u=+r)*za),n):u},n.angle(90)},Go.geo.distance=function(n,t){var e,r=(t[0]-n[0])*za,u=n[1]*za,i=t[1]*za,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),s=Math.cos(u),l=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=s*l-c*f*a)*e),c*l+s*f*a)},Go.geo.graticule=function(){function n(){return{type:\"MultiLineString\",coordinates:t()}}function t(){return Go.range(Math.ceil(i/d)*d,u,d).map(h).concat(Go.range(Math.ceil(s/m)*m,c,m).map(g)).concat(Go.range(Math.ceil(r/p)*p,e,p).filter(function(n){return fa(n%d)>Ta}).map(l)).concat(Go.range(Math.ceil(a/v)*v,o,v).filter(function(n){return fa(n%m)>Ta}).map(f))}var e,r,u,i,o,a,c,s,l,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:\"LineString\",coordinates:n}})},n.outline=function(){return{type:\"Polygon\",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(s).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],s=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),s>c&&(t=s,s=c,c=t),n.precision(y)):[[i,s],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,l=vr(a,o,90),f=dr(r,e,y),h=vr(s,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Ta],[180,90-Ta]]).minorExtent([[-180,-80-Ta],[180,80+Ta]])},Go.geo.greatArc=function(){function n(){return{type:\"LineString\",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return Go.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t=\"function\"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e=\"function\"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},Go.geo.interpolate=function(n,t){return xr(n[0]*za,n[1]*za,t[0]*za,t[1]*za)},Go.geo.length=function(n){return Oc=0,Go.geo.stream(n,Yc),Oc};var Oc,Yc={sphere:v,point:v,lineStart:Mr,lineEnd:v,polygonStart:v,polygonEnd:v},Ic=_r(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Go.geo.azimuthalEqualArea=function(){return ur(Ic)}).raw=Ic;var Zc=_r(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},Nt);(Go.geo.azimuthalEquidistant=function(){return ur(Zc)}).raw=Zc,(Go.geo.conicConformal=function(){return Ie(br)}).raw=br,(Go.geo.conicEquidistant=function(){return Ie(wr)}).raw=wr;var Vc=_r(function(n){return 1/n},Math.atan);(Go.geo.gnomonic=function(){return ur(Vc)}).raw=Vc,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-La]},(Go.geo.mercator=function(){return kr(Sr)}).raw=Sr;var $c=_r(function(){return 1},Math.asin);(Go.geo.orthographic=function(){return ur($c)}).raw=$c;var Xc=_r(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Go.geo.stereographic=function(){return ur(Xc)}).raw=Xc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-La]},(Go.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[-n[1],n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},n.rotate([0,0])}).raw=Er,Go.geom={},Go.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=Et(e),i=Et(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(Lr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var s=Cr(a),l=Cr(c),f=l[0]===s[0],h=l[l.length-1]===s[s.length-1],g=[];for(t=s.length-1;t>=0;--t)g.push(n[a[s[t]][2]]);for(t=+f;t<l.length-h;++t)g.push(n[a[l[t]][2]]);return g}var e=Nr,r=Ar;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},Go.geom.polygon=function(n){return da(n,Bc),n};var Bc=Go.geom.polygon.prototype=[];Bc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Bc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Bc.clip=function(n){for(var t,e,r,u,i,o,a=zr(n),c=-1,s=this.length-zr(this),l=this[s-1];++c<s;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Tr(o,l,u)?(Tr(i,l,u)||n.push(qr(i,o,l,u)),n.push(o)):Tr(i,l,u)&&n.push(qr(i,o,l,u)),i=o;a&&n.push(n[0]),l=u}return n};var Jc,Wc,Gc,Kc,Qc,ns=[],ts=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ir),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return n.C=!1,void 0;do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},Go.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,s=e.site,l=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):s.x>=r&&s.x<=i&&s.y>=u&&s.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];l.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Ta)*Ta,y:Math.round(o(n,t)/Ta)*Ta,i:t}})}var r=Nr,u=Ar,i=r,o=u,a=es;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Ir),c=-1,s=a.length,l=a[s-1].edge,f=l.l===o?l.r:l.l;++c<s;)u=l,i=f,l=a[c].edge,f=l.l===o?l.r:l.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=Et(r=n),t):r},t.y=function(n){return arguments.length?(o=Et(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?es:n,t):a===es?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===es?null:a&&a[1]},t)};var es=[[-1e6,-1e6],[1e6,1e6]];Go.geom.delaunay=function(n){return Go.geom.voronoi().triangles(n)},Go.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,l=n.y;if(null!=c)if(fa(c-e)+fa(l-r)<.01)s(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,s(n,f,c,l,u,i,o,a),s(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else s(n,t,e,r,u,i,o,a)}function s(n,t,e,r,u,o,a,c){var s=.5*(u+a),l=.5*(o+c),f=e>=s,h=r>=l,g=(h<<1)+f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=lu()),f?u=s:a=s,h?o=l:c=l,i(n,t,e,r,u,o,a,c)}var l,f,h,g,p,v,d,m,y,x=Et(a),M=Et(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)l=n[g],l.x<v&&(v=l.x),l.y<d&&(d=l.y),l.x>m&&(m=l.x),l.y>y&&(y=l.y),f.push(l.x),h.push(l.y);else for(g=0;p>g;++g){var _=+x(l=n[g],g),b=+M(l,g);v>_&&(v=_),d>b&&(d=b),_>m&&(m=_),b>y&&(y=b),f.push(_),h.push(b)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=lu();if(k.add=function(n){i(k,n,+x(n,++g),+M(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=l=null,k}var o,a=Nr,c=Ar;return(o=arguments.length)?(a=cu,c=su,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},Go.interpolateRgb=hu,Go.interpolateObject=gu,Go.interpolateNumber=pu,Go.interpolateString=vu;var rs=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g;Go.interpolate=du,Go.interpolators=[function(n,t){var e=typeof t;return(\"string\"===e?Ja.has(t)||/^(#|rgb\\(|hsl\\()/.test(t)?hu:vu:t instanceof et?hu:Array.isArray(t)?mu:\"object\"===e&&isNaN(t)?gu:pu)(n,t)}],Go.interpolateArray=mu;var us=function(){return Nt},is=Go.map({linear:us,poly:Su,quad:function(){return _u},cubic:function(){return bu},sin:function(){return ku},exp:function(){return Eu},circle:function(){return Nu},elastic:Au,back:Cu,bounce:function(){return Lu}}),os=Go.map({\"in\":Nt,out:xu,\"in-out\":Mu,\"out-in\":function(n){return Mu(xu(n))}});Go.ease=function(n){var t=n.indexOf(\"-\"),e=t>=0?n.substring(0,t):n,r=t>=0?n.substring(t+1):\"in\";return e=is.get(e)||us,r=os.get(r)||Nt,yu(r(e.apply(null,Ko.call(arguments,1))))},Go.interpolateHcl=Tu,Go.interpolateHsl=qu,Go.interpolateLab=zu,Go.interpolateRound=Ru,Go.transform=function(n){var t=na.createElementNS(Go.ns.prefix.svg,\"g\");return(Go.transform=function(n){if(null!=n){t.setAttribute(\"transform\",n);var e=t.transform.baseVal.consolidate()}return new Du(e?e.matrix:as)})(n)},Du.prototype.toString=function(){return\"translate(\"+this.translate+\")rotate(\"+this.rotate+\")skewX(\"+this.skew+\")scale(\"+this.scale+\")\"};var as={a:1,b:0,c:0,d:1,e:0,f:0};Go.interpolateTransform=Hu,Go.layout={},Go.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},Go.layout.chord=function(){function n(){var n,s,f,h,g,p={},v=[],d=Go.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(s=0,g=-1;++g<i;)s+=u[h][g];v.push(s),m.push(Go.range(i)),n+=s}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(Ca-l*i)/n,s=0,h=-1;++h<i;){for(f=s,g=-1;++g<i;){var y=d[h],x=m[y][g],M=u[y][x],_=s,b=s+=M*n;p[y+\"-\"+x]={index:y,subindex:x,startAngle:_,endAngle:b,value:M}}r[y]={index:y,startAngle:f,endAngle:s,value:(s-f)/n},s+=l}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+\"-\"+g],S=p[g+\"-\"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,s={},l=0;return s.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,s):u},s.padding=function(n){return arguments.length?(l=n,e=r=null,s):l},s.sortGroups=function(n){return arguments.length?(o=n,e=r=null,s):o},s.sortSubgroups=function(n){return arguments.length?(a=n,e=null,s):a},s.sortChords=function(n){return arguments.length?(c=n,e&&t(),s):c},s.chords=function(){return e||n(),e},s.groups=function(){return r||n(),r},s},Go.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var s=t.charge/c;n.px-=i*s,n.py-=o*s}return!0}if(t.point&&c&&p>c){var s=t.pointCharge/c;n.px-=i*s,n.py-=o*s}}return!t.charge}}function t(n){n.px=Go.event.x,n.py=Go.event.y,a.resume()}var e,r,u,i,o,a={},c=Go.dispatch(\"start\",\"tick\",\"end\"),s=[1,1],l=.9,f=cs,h=ss,g=-30,p=ls,v=.1,d=.64,m=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:\"end\",alpha:r=0}),!0;var t,e,a,f,h,p,d,x,M,_=m.length,b=y.length;for(e=0;b>e;++e)a=y[e],f=a.source,h=a.target,x=h.x-f.x,M=h.y-f.y,(p=x*x+M*M)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,x*=p,M*=p,h.x-=x*(d=f.weight/(h.weight+f.weight)),h.y-=M*d,f.x+=x*(d=1-d),f.y+=M*d);if((d=r*v)&&(x=s[0]/2,M=s[1]/2,e=-1,d))for(;++e<_;)a=m[e],a.x+=(x-a.x)*d,a.y+=(M-a.y)*d;if(g)for(Ju(t=Go.geom.quadtree(m),r,o),e=-1;++e<_;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<_;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*l,a.y-=(a.py-(a.py=a.y))*l);c.tick({type:\"tick\",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(s=n,a):s},a.linkDistance=function(n){return arguments.length?(f=\"function\"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h=\"function\"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(l=+n,a):l},a.charge=function(n){return arguments.length?(g=\"function\"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:\"start\",alpha:r=n}),Go.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;s>a;++a){var u=y[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,s=o.length;++a<s;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,l=y.length,p=s[0],v=s[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=y[t],\"number\"==typeof r.source&&(r.source=m[r.source]),\"number\"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n(\"x\",p)),isNaN(r.y)&&(r.y=n(\"y\",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],\"function\"==typeof f)for(t=0;l>t;++t)u[t]=+f.call(this,y[t],t);else for(t=0;l>t;++t)u[t]=f;if(i=[],\"function\"==typeof h)for(t=0;l>t;++t)i[t]=+h.call(this,y[t],t);else for(t=0;l>t;++t)i[t]=h;if(o=[],\"function\"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=Go.behavior.drag().origin(Nt).on(\"dragstart.force\",Vu).on(\"drag.force\",t).on(\"dragend.force\",$u)),arguments.length?(this.on(\"mouseover.force\",Xu).on(\"mouseout.force\",Bu).call(e),void 0):e},Go.rebind(a,c,\"on\")};var cs=20,ss=1,ls=1/0;Go.layout.hierarchy=function(){function n(t,o,a){var c=u.call(e,t,o);if(t.depth=o,a.push(t),c&&(s=c.length)){for(var s,l,f=-1,h=t.children=new Array(s),g=0,p=o+1;++f<s;)l=h[f]=n(c[f],p,a),l.parent=t,g+=l.value;r&&h.sort(r),i&&(t.value=g)}else delete t.children,i&&(t.value=+i.call(e,t,o)||0);return t}function t(n,r){var u=n.children,o=0;if(u&&(a=u.length))for(var a,c=-1,s=r+1;++c<a;)o+=t(u[c],s);else i&&(o=+i.call(e,n,r)||0);return i&&(n.value=o),o}function e(t){var e=[];return n(t,0,e),e}var r=Qu,u=Gu,i=Ku;return e.sort=function(n){return arguments.length?(r=n,e):r},e.children=function(n){return arguments.length?(u=n,e):u},e.value=function(n){return arguments.length?(i=n,e):i},e.revalue=function(n){return t(n,0),n},e},Go.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,s=-1;for(r=t.value?r/t.value:0;++s<o;)n(a=i[s],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=Go.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Wu(e,r)},Go.layout.pie=function(){function n(i){var o=i.map(function(e,r){return+t.call(n,e,r)}),a=+(\"function\"==typeof r?r.apply(this,arguments):r),c=((\"function\"==typeof u?u.apply(this,arguments):u)-a)/Go.sum(o),s=Go.range(i.length);null!=e&&s.sort(e===fs?function(n,t){return o[t]-o[n]}:function(n,t){return e(i[n],i[t])});var l=[];return s.forEach(function(n){var t;l[n]={data:i[n],value:t=o[n],startAngle:a,endAngle:a+=t*c}}),l}var t=Number,e=fs,r=0,u=Ca;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n};var fs={};Go.layout.stack=function(){function n(a,c){var s=a.map(function(e,r){return t.call(n,e,r)}),l=s.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,l,c);s=Go.permute(s,f),l=Go.permute(l,f);var h,g,p,v=r.call(n,l,c),d=s.length,m=s[0].length;for(g=0;m>g;++g)for(u.call(n,s[0][g],p=v[g],l[0][g][1]),h=1;d>h;++h)u.call(n,s[h][g],p+=l[h-1][g][1],l[h][g][1]);return a}var t=Nt,e=ui,r=ii,u=ri,i=ti,o=ei;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e=\"function\"==typeof t?t:hs.get(t)||ui,n):e},n.offset=function(t){return arguments.length?(r=\"function\"==typeof t?t:gs.get(t)||ii,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var hs=Go.map({\"inside-out\":function(n){var t,e,r=n.length,u=n.map(oi),i=n.map(ai),o=Go.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,s=[],l=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],s.push(e)):(c+=i[e],l.push(e));return l.reverse().concat(s)},reverse:function(n){return Go.range(n.length).reverse()},\"default\":ui}),gs=Go.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,s,l=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=s=0,e=1;h>e;++e){for(t=0,u=0;l>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];l>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,s>c&&(s=c)}for(e=0;h>e;++e)g[e]-=s;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ii});Go.layout.histogram=function(){function n(n,i){for(var o,a,c=[],s=n.map(e,this),l=r.call(this,s,i),f=u.call(this,l,s,i),i=-1,h=s.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=s[i],a>=l[0]&&a<=l[1]&&(o=c[Go.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=fi,u=si;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Et(t),n):r},n.bins=function(t){return arguments.length?(u=\"number\"==typeof t?function(n){return li(n,t)}:Et(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},Go.layout.tree=function(){function n(n,i){function o(n,t){var r=n.children,u=n._tree;if(r&&(i=r.length)){for(var i,a,s,l=r[0],f=l,h=-1;++h<i;)s=r[h],o(s,a),f=c(s,a,f),a=s;Mi(n);var g=.5*(l._tree.prelim+s._tree.prelim);t?(u.prelim=t._tree.prelim+e(n,t),u.mod=u.prelim-g):u.prelim=g}else t&&(u.prelim=t._tree.prelim+e(n,t))}function a(n,t){n.x=n._tree.prelim+t;var e=n.children;if(e&&(r=e.length)){var r,u=-1;for(t+=n._tree.mod;++u<r;)a(e[u],t)}}function c(n,t,r){if(t){for(var u,i=n,o=n,a=t,c=n.parent.children[0],s=i._tree.mod,l=o._tree.mod,f=a._tree.mod,h=c._tree.mod;a=pi(a),i=gi(i),a&&i;)c=gi(c),o=pi(o),o._tree.ancestor=n,u=a._tree.prelim+f-i._tree.prelim-s+e(a,i),u>0&&(_i(bi(a,n,r),n,u),s+=u,l+=u),f+=a._tree.mod,s+=i._tree.mod,h+=c._tree.mod,l+=o._tree.mod;a&&!pi(o)&&(o._tree.thread=a,o._tree.mod+=f-l),i&&!gi(c)&&(c._tree.thread=i,c._tree.mod+=s-h,r=n)}return r}var s=t.call(this,n,i),l=s[0];xi(l,function(n,t){n._tree={ancestor:n,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),o(l),a(l,-l._tree.prelim);var f=vi(l,mi),h=vi(l,di),g=vi(l,yi),p=f.x-e(f,h)/2,v=h.x+e(h,f)/2,d=g.depth||1;return xi(l,u?function(n){n.x*=r[0],n.y=n.depth*r[1],delete n._tree}:function(n){n.x=(n.x-p)/(v-p)*r[0],n.y=n.depth/d*r[1],delete n._tree}),s}var t=Go.layout.hierarchy().sort(null).value(null),e=hi,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Wu(n,t)},Go.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],s=u[1],l=null==t?Math.sqrt:\"function\"==typeof t?t:function(){return t};if(a.x=a.y=0,xi(a,function(n){n.r=+l(n.value)}),xi(a,Ni),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/s))/2;xi(a,function(n){n.r+=f}),xi(a,Ni),xi(a,function(n){n.r-=f})}return Li(a,c/2,s/2,t?1:1/Math.max(2*a.r/c,2*a.r/s)),o}var t,e=Go.layout.hierarchy().sort(wi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||\"function\"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Wu(n,e)},Go.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],s=0;xi(c,function(n){var t=n.children;t&&t.length?(n.x=zi(t),n.y=qi(t)):(n.x=o?s+=e(n,o):0,n.y=0,o=n)});var l=Ri(c),f=Di(c),h=l.x-e(l,f)/2,g=f.x+e(f,l)/2;return xi(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=Go.layout.hierarchy().sort(null).value(null),e=hi,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Wu(n,t)},Go.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,s=f(e),l=[],h=i.slice(),p=1/0,v=\"slice\"===g?s.dx:\"dice\"===g?s.dy:\"slice-dice\"===g?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(n(h,s.dx*s.dy/e.value),l.area=0;(c=h.length)>0;)l.push(o=h[c-1]),l.area+=o.area,\"squarify\"!==g||(a=r(l,v))<=p?(h.pop(),p=a):(l.area-=l.pop().area,u(l,v,s,!1),v=Math.min(s.dx,s.dy),l.length=l.area=0,p=1/0);l.length&&(u(l,v,s,!0),l.length=l.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,s=e.y,l=t?c(n.area/t):0;if(t==e.dx){for((r||l>e.dy)&&(l=e.dy);++i<o;)u=n[i],u.x=a,u.y=s,u.dy=l,a+=u.dx=Math.min(e.x+e.dx-a,l?c(u.area/l):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=l,e.dy-=l}else{for((r||l>e.dx)&&(l=e.dx);++i<o;)u=n[i],u.x=a,u.y=s,u.dx=l,s+=u.dy=Math.min(e.y+e.dy-s,l?c(u.area/l):0);u.z=!1,u.dy+=e.y+e.dy-s,e.x+=l,e.dx-=l}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=s[0],i.dy=s[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=Go.layout.hierarchy(),c=Math.round,s=[1,1],l=null,f=Pi,h=!1,g=\"squarify\",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(s=n,i):s},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Pi(t):Ui(t,\"number\"==typeof e?[e,e,e,e]:e)}function e(t){return Ui(t,n)}if(!arguments.length)return l;var r;return f=null==(l=n)?Pi:\"function\"==(r=typeof n)?t:\"number\"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+\"\",i):g},Wu(i,a)},Go.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=Go.random.normal.apply(Go,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=Go.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},Go.scale={};var ps={floor:Nt,ceil:Nt};Go.scale.linear=function(){return Zi([0,1],[0,1],du,!1)};var vs={s:1,g:1,p:1,r:1,e:1};Go.scale.log=function(){return Ki(Go.scale.linear().domain([0,1]),10,!0,[1,10])};var ds=Go.format(\".0e\"),ms={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};Go.scale.pow=function(){return Qi(Go.scale.linear(),1,[0,1])},Go.scale.sqrt=function(){return Go.scale.pow().exponent(.5)},Go.scale.ordinal=function(){return to([],{t:\"range\",a:[[]]})},Go.scale.category10=function(){return Go.scale.ordinal().range(ys)},Go.scale.category20=function(){return Go.scale.ordinal().range(xs)},Go.scale.category20b=function(){return Go.scale.ordinal().range(Ms)},Go.scale.category20c=function(){return Go.scale.ordinal().range(_s)};var ys=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mt),xs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mt),Ms=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mt),_s=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mt);Go.scale.quantile=function(){return eo([],[])\n},Go.scale.quantize=function(){return ro(0,1,[0,1])},Go.scale.threshold=function(){return uo([.5],[0,1])},Go.scale.identity=function(){return io([0,1])},Go.svg={},Go.svg.arc=function(){function n(){var n=t.apply(this,arguments),i=e.apply(this,arguments),o=r.apply(this,arguments)+bs,a=u.apply(this,arguments)+bs,c=(o>a&&(c=o,o=a,a=c),a-o),s=Aa>c?\"0\":\"1\",l=Math.cos(o),f=Math.sin(o),h=Math.cos(a),g=Math.sin(a);return c>=ws?n?\"M0,\"+i+\"A\"+i+\",\"+i+\" 0 1,1 0,\"+-i+\"A\"+i+\",\"+i+\" 0 1,1 0,\"+i+\"M0,\"+n+\"A\"+n+\",\"+n+\" 0 1,0 0,\"+-n+\"A\"+n+\",\"+n+\" 0 1,0 0,\"+n+\"Z\":\"M0,\"+i+\"A\"+i+\",\"+i+\" 0 1,1 0,\"+-i+\"A\"+i+\",\"+i+\" 0 1,1 0,\"+i+\"Z\":n?\"M\"+i*l+\",\"+i*f+\"A\"+i+\",\"+i+\" 0 \"+s+\",1 \"+i*h+\",\"+i*g+\"L\"+n*h+\",\"+n*g+\"A\"+n+\",\"+n+\" 0 \"+s+\",0 \"+n*l+\",\"+n*f+\"Z\":\"M\"+i*l+\",\"+i*f+\"A\"+i+\",\"+i+\" 0 \"+s+\",1 \"+i*h+\",\"+i*g+\"L0,0\"+\"Z\"}var t=oo,e=ao,r=co,u=so;return n.innerRadius=function(e){return arguments.length?(t=Et(e),n):t},n.outerRadius=function(t){return arguments.length?(e=Et(t),n):e},n.startAngle=function(t){return arguments.length?(r=Et(t),n):r},n.endAngle=function(t){return arguments.length?(u=Et(t),n):u},n.centroid=function(){var n=(t.apply(this,arguments)+e.apply(this,arguments))/2,i=(r.apply(this,arguments)+u.apply(this,arguments))/2+bs;return[Math.cos(i)*n,Math.sin(i)*n]},n};var bs=-La,ws=Ca-Ta;Go.svg.line=function(){return lo(Nt)};var Ss=Go.map({linear:fo,\"linear-closed\":ho,step:go,\"step-before\":po,\"step-after\":vo,basis:bo,\"basis-open\":wo,\"basis-closed\":So,bundle:ko,cardinal:xo,\"cardinal-open\":mo,\"cardinal-closed\":yo,monotone:To});Ss.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var ks=[0,2/3,1/3,0],Es=[0,1/3,2/3,0],Ns=[0,1/6,2/3,1/6];Go.svg.line.radial=function(){var n=lo(qo);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},po.reverse=vo,vo.reverse=po,Go.svg.area=function(){return zo(Nt)},Go.svg.area.radial=function(){var n=zo(qo);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},Go.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),s=t(this,o,n,a);return\"M\"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,s)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+u(s.r,s.p1,c.r,c.p0))+\"Z\"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)+bs,l=s.call(n,u,r)+bs;return{r:i,a0:o,a1:l,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(l),i*Math.sin(l)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return\"A\"+n+\",\"+n+\" 0 \"+ +(e>Aa)+\",1 \"+t}function u(n,t,e,r){return\"Q 0,0 \"+r}var i=mr,o=yr,a=Ro,c=co,s=so;return n.radius=function(t){return arguments.length?(a=Et(t),n):a},n.source=function(t){return arguments.length?(i=Et(t),n):i},n.target=function(t){return arguments.length?(o=Et(t),n):o},n.startAngle=function(t){return arguments.length?(c=Et(t),n):c},n.endAngle=function(t){return arguments.length?(s=Et(t),n):s},n},Go.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),\"M\"+c[0]+\"C\"+c[1]+\" \"+c[2]+\" \"+c[3]}var t=mr,e=yr,r=Do;return n.source=function(e){return arguments.length?(t=Et(e),n):t},n.target=function(t){return arguments.length?(e=Et(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},Go.svg.diagonal.radial=function(){var n=Go.svg.diagonal(),t=Do,e=n.projection;return n.projection=function(n){return arguments.length?e(Po(t=n)):t},n},Go.svg.symbol=function(){function n(n,r){return(As.get(t.call(this,n,r))||Ho)(e.call(this,n,r))}var t=jo,e=Uo;return n.type=function(e){return arguments.length?(t=Et(e),n):t},n.size=function(t){return arguments.length?(e=Et(t),n):e},n};var As=Go.map({circle:Ho,cross:function(n){var t=Math.sqrt(n/5)/2;return\"M\"+-3*t+\",\"+-t+\"H\"+-t+\"V\"+-3*t+\"H\"+t+\"V\"+-t+\"H\"+3*t+\"V\"+t+\"H\"+t+\"V\"+3*t+\"H\"+-t+\"V\"+t+\"H\"+-3*t+\"Z\"},diamond:function(n){var t=Math.sqrt(n/(2*qs)),e=t*qs;return\"M0,\"+-t+\"L\"+e+\",0\"+\" 0,\"+t+\" \"+-e+\",0\"+\"Z\"},square:function(n){var t=Math.sqrt(n)/2;return\"M\"+-t+\",\"+-t+\"L\"+t+\",\"+-t+\" \"+t+\",\"+t+\" \"+-t+\",\"+t+\"Z\"},\"triangle-down\":function(n){var t=Math.sqrt(n/Ts),e=t*Ts/2;return\"M0,\"+e+\"L\"+t+\",\"+-e+\" \"+-t+\",\"+-e+\"Z\"},\"triangle-up\":function(n){var t=Math.sqrt(n/Ts),e=t*Ts/2;return\"M0,\"+-e+\"L\"+t+\",\"+e+\" \"+-t+\",\"+e+\"Z\"}});Go.svg.symbolTypes=As.keys();var Cs,Ls,Ts=Math.sqrt(3),qs=Math.tan(30*za),zs=[],Rs=0;zs.call=_a.call,zs.empty=_a.empty,zs.node=_a.node,zs.size=_a.size,Go.transition=function(n){return arguments.length?Cs?n.transition():n:Sa.transition()},Go.transition.prototype=zs,zs.select=function(n){var t,e,r,u=this.id,i=[];n=b(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]);for(var c=this[o],s=-1,l=c.length;++s<l;)(r=c[s])&&(e=n.call(r,r.__data__,s,o))?(\"__data__\"in r&&(e.__data__=r.__data__),Io(e,s,u,r.__transition__[u]),t.push(e)):t.push(null)}return Fo(i,u)},zs.selectAll=function(n){var t,e,r,u,i,o=this.id,a=[];n=w(n);for(var c=-1,s=this.length;++c<s;)for(var l=this[c],f=-1,h=l.length;++f<h;)if(r=l[f]){i=r.__transition__[o],e=n.call(r,r.__data__,f,c),a.push(t=[]);for(var g=-1,p=e.length;++g<p;)(u=e[g])&&Io(u,g,o,i),t.push(u)}return Fo(a,o)},zs.filter=function(n){var t,e,r,u=[];\"function\"!=typeof n&&(n=R(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Fo(u,this.id)},zs.tween=function(n,t){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(n):P(this,null==t?function(t){t.__transition__[e].tween.remove(n)}:function(r){r.__transition__[e].tween.set(n,t)})},zs.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+=\"\",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+=\"\",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o=\"transform\"==n?Hu:du,a=Go.ns.qualify(n);return Oo(this,\"attr.\"+n,t,a.local?i:u)},zs.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=Go.ns.qualify(n);return this.tween(\"attr.\"+n,u.local?r:e)},zs.style=function(n,t,e){function r(){this.style.removeProperty(n)}function u(t){return null==t?r:(t+=\"\",function(){var r,u=ea.getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=du(u,t),function(t){this.style.setProperty(n,r(t),e)})})}var i=arguments.length;if(3>i){if(\"string\"!=typeof n){2>i&&(t=\"\");for(e in n)this.style(e,n[e],t);return this}e=\"\"}return Oo(this,\"style.\"+n,t,u)},zs.styleTween=function(n,t,e){function r(r,u){var i=t.call(this,r,u,ea.getComputedStyle(this,null).getPropertyValue(n));return i&&function(t){this.style.setProperty(n,i(t),e)}}return arguments.length<3&&(e=\"\"),this.tween(\"style.\"+n,r)},zs.text=function(n){return Oo(this,\"text\",n,Yo)},zs.remove=function(){return this.each(\"end.transition\",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},zs.ease=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:(\"function\"!=typeof n&&(n=Go.ease.apply(Go,arguments)),P(this,function(e){e.__transition__[t].ease=n}))},zs.delay=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:P(this,\"function\"==typeof n?function(e,r,u){e.__transition__[t].delay=+n.call(e,e.__data__,r,u)}:(n=+n,function(e){e.__transition__[t].delay=n}))},zs.duration=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:P(this,\"function\"==typeof n?function(e,r,u){e.__transition__[t].duration=Math.max(1,n.call(e,e.__data__,r,u))}:(n=Math.max(1,n),function(e){e.__transition__[t].duration=n}))},zs.each=function(n,t){var e=this.id;if(arguments.length<2){var r=Ls,u=Cs;Cs=e,P(this,function(t,r,u){Ls=t.__transition__[e],n.call(t,t.__data__,r,u)}),Ls=r,Cs=u}else P(this,function(r){var u=r.__transition__[e];(u.event||(u.event=Go.dispatch(\"start\",\"end\"))).on(n,t)});return this},zs.transition=function(){for(var n,t,e,r,u=this.id,i=++Rs,o=[],a=0,c=this.length;c>a;a++){o.push(n=[]);for(var t=this[a],s=0,l=t.length;l>s;s++)(e=t[s])&&(r=Object.create(e.__transition__[u]),r.delay+=r.duration,Io(e,s,i,r)),n.push(e)}return Fo(o,i)},Go.svg.axis=function(){function n(n){n.each(function(){var n,s=Go.select(this),l=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):Nt:t,p=s.selectAll(\".tick\").data(h,f),v=p.enter().insert(\"g\",\".domain\").attr(\"class\",\"tick\").style(\"opacity\",Ta),d=Go.transition(p.exit()).style(\"opacity\",Ta).remove(),m=Go.transition(p.order()).style(\"opacity\",1),y=Hi(f),x=s.selectAll(\".domain\").data([0]),M=(x.enter().append(\"path\").attr(\"class\",\"domain\"),Go.transition(x));v.append(\"line\"),v.append(\"text\");var _=v.select(\"line\"),b=m.select(\"line\"),w=p.select(\"text\").text(g),S=v.select(\"text\"),k=m.select(\"text\");switch(r){case\"bottom\":n=Zo,_.attr(\"y2\",u),S.attr(\"y\",Math.max(u,0)+o),b.attr(\"x2\",0).attr(\"y2\",u),k.attr(\"x\",0).attr(\"y\",Math.max(u,0)+o),w.attr(\"dy\",\".71em\").style(\"text-anchor\",\"middle\"),M.attr(\"d\",\"M\"+y[0]+\",\"+i+\"V0H\"+y[1]+\"V\"+i);break;case\"top\":n=Zo,_.attr(\"y2\",-u),S.attr(\"y\",-(Math.max(u,0)+o)),b.attr(\"x2\",0).attr(\"y2\",-u),k.attr(\"x\",0).attr(\"y\",-(Math.max(u,0)+o)),w.attr(\"dy\",\"0em\").style(\"text-anchor\",\"middle\"),M.attr(\"d\",\"M\"+y[0]+\",\"+-i+\"V0H\"+y[1]+\"V\"+-i);break;case\"left\":n=Vo,_.attr(\"x2\",-u),S.attr(\"x\",-(Math.max(u,0)+o)),b.attr(\"x2\",-u).attr(\"y2\",0),k.attr(\"x\",-(Math.max(u,0)+o)).attr(\"y\",0),w.attr(\"dy\",\".32em\").style(\"text-anchor\",\"end\"),M.attr(\"d\",\"M\"+-i+\",\"+y[0]+\"H0V\"+y[1]+\"H\"+-i);break;case\"right\":n=Vo,_.attr(\"x2\",u),S.attr(\"x\",Math.max(u,0)+o),b.attr(\"x2\",u).attr(\"y2\",0),k.attr(\"x\",Math.max(u,0)+o).attr(\"y\",0),w.attr(\"dy\",\".32em\").style(\"text-anchor\",\"start\"),M.attr(\"d\",\"M\"+i+\",\"+y[0]+\"H0V\"+y[1]+\"H\"+i)}if(f.rangeBand){var E=f,N=E.rangeBand()/2;l=f=function(n){return E(n)+N}}else l.rangeBand?l=f:d.call(n,f);v.call(n,l),m.call(n,f)})}var t,e=Go.scale.linear(),r=Ds,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Ps?t+\"\":Ds,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Ds=\"bottom\",Ps={top:1,right:1,bottom:1,left:1};Go.svg.brush=function(){function n(i){i.each(function(){var i=Go.select(this).style(\"pointer-events\",\"all\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\").on(\"mousedown.brush\",u).on(\"touchstart.brush\",u),o=i.selectAll(\".background\").data([0]);o.enter().append(\"rect\").attr(\"class\",\"background\").style(\"visibility\",\"hidden\").style(\"cursor\",\"crosshair\"),i.selectAll(\".extent\").data([0]).enter().append(\"rect\").attr(\"class\",\"extent\").style(\"cursor\",\"move\");var a=i.selectAll(\".resize\").data(p,Nt);a.exit().remove(),a.enter().append(\"g\").attr(\"class\",function(n){return\"resize \"+n}).style(\"cursor\",function(n){return Us[n]}).append(\"rect\").attr(\"x\",function(n){return/[ew]$/.test(n)?-3:null}).attr(\"y\",function(n){return/^[ns]/.test(n)?-3:null}).attr(\"width\",6).attr(\"height\",6).style(\"visibility\",\"hidden\"),a.style(\"display\",n.empty()?\"none\":null);var l,f=Go.transition(i),h=Go.transition(o);c&&(l=Hi(c),h.attr(\"x\",l[0]).attr(\"width\",l[1]-l[0]),e(f)),s&&(l=Hi(s),h.attr(\"y\",l[0]).attr(\"height\",l[1]-l[0]),r(f)),t(f)})}function t(n){n.selectAll(\".resize\").attr(\"transform\",function(n){return\"translate(\"+l[+/e$/.test(n)]+\",\"+f[+/^s/.test(n)]+\")\"})}function e(n){n.select(\".extent\").attr(\"x\",l[0]),n.selectAll(\".extent,.n>rect,.s>rect\").attr(\"width\",l[1]-l[0])}function r(n){n.select(\".extent\").attr(\"y\",f[0]),n.selectAll(\".extent,.e>rect,.w>rect\").attr(\"height\",f[1]-f[0])}function u(){function u(){32==Go.event.keyCode&&(A||(x=null,L[0]-=l[1],L[1]-=f[1],A=2),y())}function p(){32==Go.event.keyCode&&2==A&&(L[0]+=l[1],L[1]+=f[1],A=0,y())}function v(){var n=Go.mouse(_),u=!1;M&&(n[0]+=M[0],n[1]+=M[1]),A||(Go.event.altKey?(x||(x=[(l[0]+l[1])/2,(f[0]+f[1])/2]),L[0]=l[+(n[0]<x[0])],L[1]=f[+(n[1]<x[1])]):x=null),E&&d(n,c,0)&&(e(S),u=!0),N&&d(n,s,1)&&(r(S),u=!0),u&&(t(S),w({type:\"brush\",mode:A?\"move\":\"resize\"}))}function d(n,t,e){var r,u,a=Hi(t),c=a[0],s=a[1],p=L[e],v=e?f:l,d=v[1]-v[0];return A&&(c-=p,s-=d+p),r=(e?g:h)?Math.max(c,Math.min(s,n[e])):n[e],A?u=(r+=p)+d:(x&&(p=Math.max(c,Math.min(s,2*x[e]-r))),r>p?(u=r,r=p):u=p),v[0]!=r||v[1]!=u?(e?o=null:i=null,v[0]=r,v[1]=u,!0):void 0}function m(){v(),S.style(\"pointer-events\",\"all\").selectAll(\".resize\").style(\"display\",n.empty()?\"none\":null),Go.select(\"body\").style(\"cursor\",null),T.on(\"mousemove.brush\",null).on(\"mouseup.brush\",null).on(\"touchmove.brush\",null).on(\"touchend.brush\",null).on(\"keydown.brush\",null).on(\"keyup.brush\",null),C(),w({type:\"brushend\"})}var x,M,_=this,b=Go.select(Go.event.target),w=a.of(_,arguments),S=Go.select(_),k=b.datum(),E=!/^(n|s)$/.test(k)&&c,N=!/^(e|w)$/.test(k)&&s,A=b.classed(\"extent\"),C=I(),L=Go.mouse(_),T=Go.select(ea).on(\"keydown.brush\",u).on(\"keyup.brush\",p);if(Go.event.changedTouches?T.on(\"touchmove.brush\",v).on(\"touchend.brush\",m):T.on(\"mousemove.brush\",v).on(\"mouseup.brush\",m),S.interrupt().selectAll(\"*\").interrupt(),A)L[0]=l[0]-L[0],L[1]=f[0]-L[1];else if(k){var q=+/w$/.test(k),z=+/^n/.test(k);M=[l[1-q]-L[0],f[1-z]-L[1]],L[0]=l[q],L[1]=f[z]}else Go.event.altKey&&(x=L.slice());S.style(\"pointer-events\",\"none\").selectAll(\".resize\").style(\"display\",null),Go.select(\"body\").style(\"cursor\",b.style(\"cursor\")),w({type:\"brushstart\"}),v()}var i,o,a=M(n,\"brushstart\",\"brush\",\"brushend\"),c=null,s=null,l=[0,0],f=[0,0],h=!0,g=!0,p=js[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:l,y:f,i:i,j:o},e=this.__chart__||t;this.__chart__=t,Cs?Go.select(this).transition().each(\"start.brush\",function(){i=e.i,o=e.j,l=e.x,f=e.y,n({type:\"brushstart\"})}).tween(\"brush:brush\",function(){var e=mu(l,t.x),r=mu(f,t.y);return i=o=null,function(u){l=t.x=e(u),f=t.y=r(u),n({type:\"brush\",mode:\"resize\"})}}).each(\"end.brush\",function(){i=t.i,o=t.j,n({type:\"brush\",mode:\"resize\"}),n({type:\"brushend\"})}):(n({type:\"brushstart\"}),n({type:\"brush\",mode:\"resize\"}),n({type:\"brushend\"}))})},n.x=function(t){return arguments.length?(c=t,p=js[!c<<1|!s],n):c},n.y=function(t){return arguments.length?(s=t,p=js[!c<<1|!s],n):s},n.clamp=function(t){return arguments.length?(c&&s?(h=!!t[0],g=!!t[1]):c?h=!!t:s&&(g=!!t),n):c&&s?[h,g]:c?h:s?g:null},n.extent=function(t){var e,r,u,a,h;return arguments.length?(c&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),i=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(h=e,e=r,r=h),(e!=l[0]||r!=l[1])&&(l=[e,r])),s&&(u=t[0],a=t[1],c&&(u=u[1],a=a[1]),o=[u,a],s.invert&&(u=s(u),a=s(a)),u>a&&(h=u,u=a,a=h),(u!=f[0]||a!=f[1])&&(f=[u,a])),n):(c&&(i?(e=i[0],r=i[1]):(e=l[0],r=l[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(h=e,e=r,r=h))),s&&(o?(u=o[0],a=o[1]):(u=f[0],a=f[1],s.invert&&(u=s.invert(u),a=s.invert(a)),u>a&&(h=u,u=a,a=h))),c&&s?[[e,u],[r,a]]:c?[e,r]:s&&[u,a])},n.clear=function(){return n.empty()||(l=[0,0],f=[0,0],i=o=null),n},n.empty=function(){return!!c&&l[0]==l[1]||!!s&&f[0]==f[1]},Go.rebind(n,a,\"on\")};var Us={n:\"ns-resize\",e:\"ew-resize\",s:\"ns-resize\",w:\"ew-resize\",nw:\"nwse-resize\",ne:\"nesw-resize\",se:\"nwse-resize\",sw:\"nesw-resize\"},js=[[\"n\",\"e\",\"s\",\"w\",\"nw\",\"ne\",\"se\",\"sw\"],[\"e\",\"w\"],[\"n\",\"s\"],[]],Hs=ic.format=fc.timeFormat,Fs=Hs.utc,Os=Fs(\"%Y-%m-%dT%H:%M:%S.%LZ\");Hs.iso=Date.prototype.toISOString&&+new Date(\"2000-01-01T00:00:00.000Z\")?$o:Os,$o.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},$o.toString=Os.toString,ic.second=Ht(function(n){return new oc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ic.seconds=ic.second.range,ic.seconds.utc=ic.second.utc.range,ic.minute=Ht(function(n){return new oc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ic.minutes=ic.minute.range,ic.minutes.utc=ic.minute.utc.range,ic.hour=Ht(function(n){var t=n.getTimezoneOffset()/60;return new oc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ic.hours=ic.hour.range,ic.hours.utc=ic.hour.utc.range,ic.month=Ht(function(n){return n=ic.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ic.months=ic.month.range,ic.months.utc=ic.month.utc.range;var Ys=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Is=[[ic.second,1],[ic.second,5],[ic.second,15],[ic.second,30],[ic.minute,1],[ic.minute,5],[ic.minute,15],[ic.minute,30],[ic.hour,1],[ic.hour,3],[ic.hour,6],[ic.hour,12],[ic.day,1],[ic.day,2],[ic.week,1],[ic.month,1],[ic.month,3],[ic.year,1]],Zs=Hs.multi([[\".%L\",function(n){return n.getMilliseconds()}],[\":%S\",function(n){return n.getSeconds()}],[\"%I:%M\",function(n){return n.getMinutes()}],[\"%I %p\",function(n){return n.getHours()}],[\"%a %d\",function(n){return n.getDay()&&1!=n.getDate()}],[\"%b %d\",function(n){return 1!=n.getDate()}],[\"%B\",function(n){return n.getMonth()}],[\"%Y\",Ne]]),Vs={range:function(n,t,e){return Go.range(Math.ceil(n/e)*e,+t,e).map(Bo)},floor:Nt,ceil:Nt};Is.year=ic.year,ic.scale=function(){return Xo(Go.scale.linear(),Is,Zs)};var $s=Is.map(function(n){return[n[0].utc,n[1]]}),Xs=Fs.multi([[\".%L\",function(n){return n.getUTCMilliseconds()}],[\":%S\",function(n){return n.getUTCSeconds()}],[\"%I:%M\",function(n){return n.getUTCMinutes()}],[\"%I %p\",function(n){return n.getUTCHours()}],[\"%a %d\",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],[\"%b %d\",function(n){return 1!=n.getUTCDate()}],[\"%B\",function(n){return n.getUTCMonth()}],[\"%Y\",Ne]]);$s.year=ic.year.utc,ic.scale.utc=function(){return Xo(Go.scale.linear(),$s,Xs)},Go.text=At(function(n){return n.responseText}),Go.json=function(n,t){return Ct(n,\"application/json\",Jo,t)},Go.html=function(n,t){return Ct(n,\"text/html\",Wo,t)},Go.xml=At(function(n){return n.responseXML}),\"function\"==typeof define&&define.amd?define(Go):\"object\"==typeof module&&module.exports?module.exports=Go:this.d3=Go}();", "src/lib/pythonds/trees/binaryTree.py": "# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\nclass BinaryTree:\n    \"\"\"\n    A recursive implementation of Binary Tree\n    Using links and Nodes approach.\n    \"\"\"    \n    def __init__(self,rootObj):\n        self.key = rootObj\n        self.leftChild = None\n        self.rightChild = None\n\n    def insertLeft(self,newNode):\n        if self.leftChild == None:\n            self.leftChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.left = self.leftChild\n            self.leftChild = t\n    \n    def insertRight(self,newNode):\n        if self.rightChild == None:\n            self.rightChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.right = self.rightChild\n            self.rightChild = t\n\n    def isLeaf(self):\n        return ((not self.leftChild) and (not self.rightChild))\n\n    def getRightChild(self):\n        return self.rightChild\n\n    def getLeftChild(self):\n        return self.leftChild\n\n    def setRootVal(self,obj):\n        self.key = obj\n\n    def getRootVal(self,):\n        return self.key\n\n    def inorder(self):\n        if self.leftChild:\n            self.leftChild.inorder()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.inorder()\n\n    def postorder(self):\n        if self.leftChild:\n            self.leftChild.postorder()\n        if self.rightChild:\n            self.rightChild.postorder()\n        print(self.key)\n\n\n    def preorder(self):\n        print(self.key)\n        if self.leftChild:\n            self.leftChild.preorder()\n        if self.rightChild:\n            self.rightChild.preorder()\n\n    def printexp(self):\n        if self.leftChild:\n            print('(')\n            self.leftChild.printexp()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.printexp()\n            print(')')\n\n    def postordereval(self):\n        opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n        res1 = None\n        res2 = None\n        if self.leftChild:\n            res1 = self.leftChild.postordereval()  #// \\label{peleft}\n        if self.rightChild:\n            res2 = self.rightChild.postordereval() #// \\label{peright}\n        if res1 and res2:\n            return opers[self.key](res1,res2) #// \\label{peeval}\n        else:\n            return self.key\n\ndef inorder(tree):\n    if tree != None:\n        inorder(tree.getLeftChild())\n        print(tree.getRootVal())\n        inorder(tree.getRightChild())\n\ndef printexp(tree):\n    if tree.leftChild:\n        print('(')\n        printexp(tree.getLeftChild())\n    print(tree.getRootVal())\n    if tree.rightChild:\n        printexp(tree.getRightChild())\n        print(')') \n\ndef printexp(tree):\n    sVal = \"\"\n    if tree:\n        sVal = '(' + printexp(tree.getLeftChild())\n        sVal = sVal + str(tree.getRootVal())\n        sVal = sVal + printexp(tree.getRightChild()) + ')'\n    return sVal\n\ndef postordereval(tree):\n    opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n    res1 = None\n    res2 = None\n    if tree:\n        res1 = postordereval(tree.getLeftChild())  #// \\label{peleft}\n        res2 = postordereval(tree.getRightChild()) #// \\label{peright}\n        if res1 and res2:\n            return opers[tree.getRootVal()](res1,res2) #// \\label{peeval}\n        else:\n            return tree.getRootVal()\n\ndef height(tree):\n    if tree == None:\n        return -1\n    else:\n        return 1 + max(height(tree.leftChild),height(tree.rightChild))\n\n# t = BinaryTree(7)\n# t.insertLeft(3)\n# t.insertRight(9)\n# inorder(t)\n# import operator\n# x = BinaryTree('*')\n# x.insertLeft('+')\n# l = x.getLeftChild()\n# l.insertLeft(4)\n# l.insertRight(5)\n# x.insertRight(7)\n# print(printexp(x))\n# print(postordereval(x))\n# print(height(x))\n", "src/lib/webgl/math.js": "var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // todo; should probably put this in a math package\n    mod.Mat44 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                        self.stack = [];\n                    });\n\n                $loc.push = new Sk.builtin.func(function(self)\n                    {\n                        self.stack.push(self.elements.slice(0));\n                    });\n\n                $loc.pop = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = self.stack.pop();\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0, 0.0,\n                                         0.0, 0.0, 1.0, 0.0,\n                                         0.0, 0.0, 0.0, 1.0];\n                    });\n\n                $loc.transform3 = new Sk.builtin.func(function(self, v)\n                    {\n                        var e = self.elements;\n                        return Sk.misceval.callsim(mod.Vec3,\n                            e[0] * v.x + e[4] * v.y + e[8] * v.z,\n                            e[1] * v.x + e[5] * v.y + e[9] * v.z,\n                            e[2] * v.x + e[6] * v.y + e[10] * v.z);\n                    });\n\n                $loc.scale = new Sk.builtin.func(function(self, sx, sy, sz)\n                        {\n                            self.elements[0*4+0] *= sx;\n                            self.elements[0*4+1] *= sx;\n                            self.elements[0*4+2] *= sx;\n                            self.elements[0*4+3] *= sx;\n\n                            self.elements[1*4+0] *= sy;\n                            self.elements[1*4+1] *= sy;\n                            self.elements[1*4+2] *= sy;\n                            self.elements[1*4+3] *= sy;\n\n                            self.elements[2*4+0] *= sz;\n                            self.elements[2*4+1] *= sz;\n                            self.elements[2*4+2] *= sz;\n                            self.elements[2*4+3] *= sz;\n\n                            return self;\n                        });\n\n                $loc.translate = new Sk.builtin.func(function(self, tx, ty, tz)\n                        {\n                            self.elements[3*4+0] += self.elements[0*4+0] * tx + self.elements[1*4+0] * ty + self.elements[2*4+0] * tz;\n                            self.elements[3*4+1] += self.elements[0*4+1] * tx + self.elements[1*4+1] * ty + self.elements[2*4+1] * tz;\n                            self.elements[3*4+2] += self.elements[0*4+2] * tx + self.elements[1*4+2] * ty + self.elements[2*4+2] * tz;\n                            self.elements[3*4+3] += self.elements[0*4+3] * tx + self.elements[1*4+3] * ty + self.elements[2*4+3] * tz;\n                            return self;\n                        });\n\n                $loc.rotate = new Sk.builtin.func(function(self, angle, x, y, z)\n                        {\n                            var mag = Math.sqrt(x*x + y*y + z*z);\n                            var sinAngle = Math.sin(angle * Math.PI / 180.0);\n                            var cosAngle = Math.cos(angle * Math.PI / 180.0);\n\n                            if (mag > 0)\n                            {\n                                var xx, yy, zz, xy, yz, zx, xs, ys, zs;\n                                var oneMinusCos;\n                                var rotMat;\n\n                                x /= mag;\n                                y /= mag;\n                                z /= mag;\n\n                                xx = x * x;\n                                yy = y * y;\n                                zz = z * z;\n                                xy = x * y;\n                                yz = y * z;\n                                zx = z * x;\n                                xs = x * sinAngle;\n                                ys = y * sinAngle;\n                                zs = z * sinAngle;\n                                oneMinusCos = 1.0 - cosAngle;\n\n                                rotMat = Sk.misceval.callsim(mod.Mat44);\n\n                                rotMat.elements[0*4+0] = (oneMinusCos * xx) + cosAngle;\n                                rotMat.elements[0*4+1] = (oneMinusCos * xy) - zs;\n                                rotMat.elements[0*4+2] = (oneMinusCos * zx) + ys;\n                                rotMat.elements[0*4+3] = 0.0;\n\n                                rotMat.elements[1*4+0] = (oneMinusCos * xy) + zs;\n                                rotMat.elements[1*4+1] = (oneMinusCos * yy) + cosAngle;\n                                rotMat.elements[1*4+2] = (oneMinusCos * yz) - xs;\n                                rotMat.elements[1*4+3] = 0.0;\n\n                                rotMat.elements[2*4+0] = (oneMinusCos * zx) - ys;\n                                rotMat.elements[2*4+1] = (oneMinusCos * yz) + xs;\n                                rotMat.elements[2*4+2] = (oneMinusCos * zz) + cosAngle;\n                                rotMat.elements[2*4+3] = 0.0;\n\n                                rotMat.elements[3*4+0] = 0.0;\n                                rotMat.elements[3*4+1] = 0.0;\n                                rotMat.elements[3*4+2] = 0.0;\n                                rotMat.elements[3*4+3] = 1.0;\n\n                                rotMat = rotMat.multiply(self);\n                                self.elements = rotMat.elements;\n                            }\n                            return self;\n                        });\n\n                $loc.multiply = new Sk.builtin.func(function(self, right)\n                        {\n                            var tmp = Sk.misceval.callsim(mod.Mat44);\n\n                            for (var i = 0; i < 4; i++)\n                            {\n                                tmp.elements[i*4+0] =\n                                (self.elements[i*4+0] * right.elements[0*4+0]) +\n                                (self.elements[i*4+1] * right.elements[1*4+0]) +\n                                (self.elements[i*4+2] * right.elements[2*4+0]) +\n                                (self.elements[i*4+3] * right.elements[3*4+0]) ;\n\n                                tmp.elements[i*4+1] =\n                                (self.elements[i*4+0] * right.elements[0*4+1]) +\n                                (self.elements[i*4+1] * right.elements[1*4+1]) +\n                                (self.elements[i*4+2] * right.elements[2*4+1]) +\n                                (self.elements[i*4+3] * right.elements[3*4+1]) ;\n\n                                tmp.elements[i*4+2] =\n                                (self.elements[i*4+0] * right.elements[0*4+2]) +\n                                (self.elements[i*4+1] * right.elements[1*4+2]) +\n                                (self.elements[i*4+2] * right.elements[2*4+2]) +\n                                (self.elements[i*4+3] * right.elements[3*4+2]) ;\n\n                                tmp.elements[i*4+3] =\n                                (self.elements[i*4+0] * right.elements[0*4+3]) +\n                                (self.elements[i*4+1] * right.elements[1*4+3]) +\n                                (self.elements[i*4+2] * right.elements[2*4+3]) +\n                                (self.elements[i*4+3] * right.elements[3*4+3]) ;\n                            }\n\n                            self.elements = tmp.elements;\n                            return self;\n                        });\n\n                /* Following gluLookAt implementation is adapted from\n                 * the Mesa 3D Graphics library. http://www.mesa3d.org\n                 */\n                // todo; rewrite this with proper vec/mat ops\n                $loc.lookAt = new Sk.builtin.func(function(self, eyeX, eyeY, eyeZ,\n                                                                 centerX, centerY, centerZ,\n                                                                 upX, upY, upZ)\n                        {\n                            /* Z vector */\n                            var z = [\n                                eyeX - centerX,\n                                eyeY - centerY,\n                                eyeZ - centerZ\n                            ];\n                            var mag = Math.sqrt(z[0] * z[0] + z[1] * z[1] + z[2] * z[2]);\n                            if (mag)\n                            {\n                                z[0] /= mag;\n                                z[1] /= mag;\n                                z[2] /= mag;\n                            }\n\n                            /* Y vector */\n                            var y = [ upX, upY, upZ ];\n\n                            /* X vector = Y cross Z */\n                            var x = [];\n                            x[0] = y[1] * z[2] - y[2] * z[1];\n                            x[1] = -y[0] * z[2] + y[2] * z[0];\n                            x[2] = y[0] * z[1] - y[1] * z[0];\n\n                            /* Recompute Y = Z cross X */\n                            y[0] = z[1] * x[2] - z[2] * x[1];\n                            y[1] = -z[0] * x[2] + z[2] * x[0];\n                            y[2] = z[0] * x[1] - z[1] * x[0];\n\n                            /* mpichler, 19950515 */\n                            /* cross product gives area of parallelogram, which is < 1.0 for\n                            * non-perpendicular unit-length vectors; so normalize x, y here\n                            */\n\n                            mag = Math.sqrt(x[0] * x[0] + x[1] * x[1] + x[2] * x[2]);\n                            if (mag) {\n                                x[0] /= mag;\n                                x[1] /= mag;\n                                x[2] /= mag;\n                            }\n\n                            mag = Math.sqrt(y[0] * y[0] + y[1] * y[1] + y[2] * y[2]);\n                            if (mag) {\n                                y[0] /= mag;\n                                y[1] /= mag;\n                                y[2] /= mag;\n                            }\n\n                            var lookAt = Sk.misceval.callsim(mod.Mat44);\n                            lookAt.elements[0 * 4 + 0] = x[0];\n                            lookAt.elements[1 * 4 + 0] = x[1];\n                            lookAt.elements[2 * 4 + 0] = x[2];\n                            lookAt.elements[3 * 4 + 0] = 0.;\n                            lookAt.elements[0 * 4 + 1] = y[0];\n                            lookAt.elements[1 * 4 + 1] = y[1];\n                            lookAt.elements[2 * 4 + 1] = y[2];\n                            lookAt.elements[3 * 4 + 1] = 0.;\n                            lookAt.elements[0 * 4 + 2] = z[0];\n                            lookAt.elements[1 * 4 + 2] = z[1];\n                            lookAt.elements[2 * 4 + 2] = z[2];\n                            lookAt.elements[3 * 4 + 2] = 0.;\n                            lookAt.elements[0 * 4 + 3] = 0.;\n                            lookAt.elements[1 * 4 + 3] = 0.;\n                            lookAt.elements[2 * 4 + 3] = 0.;\n                            lookAt.elements[3 * 4 + 3] = 1.;\n\n                            // log(lookAt.elements);\n\n                            lookAt = lookAt.multiply(self);\n                            self.elements = lookAt.elements;\n                            self.translate(-eyeX, -eyeY, -eyeZ);\n\n                            // log(this.elements);\n\n                            return self;\n                        });\n            },\n            'Mat44', []);\n\n    // todo; should probably put this in a math package\n    mod.Mat33 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0,\n                                         0.0, 0.0, 1.0];\n                    });\n            },\n            'Mat33', []);\n\n    mod.Vec3 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, x, y, z)\n                    {\n                        self.x = x;\n                        self.y = y;\n                        self.z = z;\n                    });\n                $loc.__sub__ = new Sk.builtin.func(function(self, other)\n                    {\n                        return Sk.misceval.callsim(mod.Vec3, self.x - other.x, self.y - other.y, self.z - other.z);\n                    });\n            },\n            'Vec3', []);\n    \n    mod.cross = new Sk.builtin.func(function(v1, v2)\n            {\n                goog.asserts.assert(v1 instanceof mod.Vec3 && v2 instanceof mod.Vec3);\n                return Sk.misceval.callsim(mod.Vec3,\n                    v1.y * v2.z - v1.z * v2.y,\n                    v1.z * v2.x - v1.x * v2.z,\n                    v1.x * v2.y - v1.y * v2.x);\n            });\n\n    return mod;\n};\n", "src/lib/pythonds/graphs/__init__.py": "\n\nfrom .adjGraph import Graph\nfrom .adjGraph import Vertex\nfrom .priorityQueue import PriorityQueue\n", "src/lib/pythonds/graphs/priorityQueue.py": "# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \nimport unittest\n\n# this implementation of binary heap takes key value pairs,\n# we will assume that the keys are all comparable\n\nclass PriorityQueue:\n    def __init__(self):\n        self.heapArray = [(0,0)]\n        self.currentSize = 0\n\n    def buildHeap(self,alist):\n        self.currentSize = len(alist)\n        self.heapArray = [(0,0)]\n        for i in alist:\n            self.heapArray.append(i)\n        i = len(alist) // 2            \n        while (i > 0):\n            self.percDown(i)\n            i = i - 1\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapArray[i][0] > self.heapArray[mc][0]:\n                tmp = self.heapArray[i]\n                self.heapArray[i] = self.heapArray[mc]\n                self.heapArray[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i*2 > self.currentSize:\n            return -1\n        else:\n            if i*2 + 1 > self.currentSize:\n                return i*2\n            else:\n                if self.heapArray[i*2][0] < self.heapArray[i*2+1][0]:\n                    return i*2\n                else:\n                    return i*2+1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapArray[i][0] < self.heapArray[i//2][0]:\n               tmp = self.heapArray[i//2]\n               self.heapArray[i//2] = self.heapArray[i]\n               self.heapArray[i] = tmp\n            i = i//2\n \n    def add(self,k):\n        self.heapArray.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapArray[1][1]\n        self.heapArray[1] = self.heapArray[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapArray.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if self.currentSize == 0:\n            return True\n        else:\n            return False\n\n    def decreaseKey(self,val,amt):\n        # this is a little wierd, but we need to find the heap thing to decrease by\n        # looking at its value\n        done = False\n        i = 1\n        myKey = 0\n        while not done and i <= self.currentSize:\n            if self.heapArray[i][1] == val:\n                done = True\n                myKey = i\n            else:\n                i = i + 1\n        if myKey > 0:\n            self.heapArray[myKey] = (amt,self.heapArray[myKey][1])\n            self.percUp(myKey)\n            \n    def __contains__(self,vtx):\n        for pair in self.heapArray:\n            if pair[1] == vtx:\n                return True\n        return False\n        \nclass TestBinHeap(unittest.TestCase):\n    def setUp(self):\n        self.theHeap = PriorityQueue()\n        self.theHeap.add((2,'x'))\n        self.theHeap.add((3,'y'))\n        self.theHeap.add((5,'z'))\n        self.theHeap.add((6,'a'))\n        self.theHeap.add((4,'d'))\n\n\n    def testInsert(self):\n        assert self.theHeap.currentSize == 5\n\n    def testDelmin(self):\n        assert self.theHeap.delMin() == 'x'\n        assert self.theHeap.delMin() == 'y'\n    \n    def testDecKey(self):\n        self.theHeap.decreaseKey('d',1)\n        assert self.theHeap.delMin() == 'd'\n        \nif __name__ == '__main__':\n    unittest.main()\n", "src/lib/pythonds/__init__.py": "", "src/lib/pythonds/basic/deque.py": "# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#deque.py\n\n\nclass Deque:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def addFront(self, item):\n        self.items.append(item)\n\n    def addRear(self, item):\n        self.items.insert(0,item)\n\n    def removeFront(self):\n        return self.items.pop()\n\n    def removeRear(self):\n        return self.items.pop(0)\n\n    def size(self):\n        return len(self.items)\n", "src/lib/processing/__init__.js": "var $builtinmodule = function(name)\n{\n    var mod = {};\n    var imList = [];\n    var looping = true;\n\n    // We need this to store a reference to the actual processing object which is not created\n    // until the run function is called.  Even then the processing object is passed by the\n    // processing-js sytem as a parameter to the sketchProc function.  Why not set it to None here\n    //\n\n    // See:  http://processingjs.org/reference/\n\n    mod.processing = null\n    mod.p = null\n\n    mod.CENTER = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.RADIUS = Sk.builtin.assk$(2, Sk.builtin.nmber.int$);\n    mod.CORNERS = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.CORNER = Sk.builtin.assk$(0, Sk.builtin.nmber.int$);\n    mod.RGB = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.HSB = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.CMYK = Sk.builtin.assk$(5, Sk.builtin.nmber.int$);\n    mod.MITER = new Sk.builtin.str('miter');\n    mod.BEVEL = new Sk.builtin.str('bevel');\n    mod.ROUND = new Sk.builtin.str('round');\n    mod.SQUARE = new Sk.builtin.str('butt');\n    mod.PROJECT = new Sk.builtin.str('square');\n\n// 2D - Primitives\n    mod.line = new Sk.builtin.func(function(x1, y1, x2, y2) {\n        mod.processing.line(x1.v, y1.v, x2.v, y2.v);\n    });\n    \n    mod.ellipse = new Sk.builtin.func(function(x,y,r1,r2) {\n        mod.processing.ellipse(x.v,y.v,r1.v,r2.v)\n        \n    });\n\n    mod.text = new Sk.builtin.func(function(theText, x, y) {\n        mod.processing.text(theText.v, x.v, y.v);\n    });\n\n    mod.point = new Sk.builtin.func(function(x1,y1) {\n        mod.processing.point(x1.v,y1.v)\n    });\n        \n    mod.arc = new Sk.builtin.func(function(x, y, width, height, start, stop) {\n        mod.processing.arc(x.v, y.v, width.v, height.v, start.v, stop.v)\n    });\n\n    mod.quad = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3, x4, y4) {\n        mod.processing.quad(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v, x4.v, y4.v)\n    });\n            \n    mod.rect = new Sk.builtin.func(function(x, y, width, height, radius) {\n        if (typeof(radius) == 'undefined') {\n            var rad = 0\n        } else {\n            var rad = radius.v\n        }\n        mod.processing.rect(x.v, y.v, width.v, height.v, rad)\n    });\n    \n    mod.triangle = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3) {\n            mod.processing.triangle(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v)\n        });\n            \n\n    // 3D Primitives\n\n    // todo:  box, sphere, sphereDetail\n\n    // Color\n    mod.background = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.background(r.v,g,b)\n        \n    });\n\n    mod.fill = new Sk.builtin.func(function(r,g,b) {\n        // r will be either:\n        //      a number in which case the fill will be grayscale\n        //      a color object\n        // g, and b may be undefined.  If they hold values it will\n        // be assumed that we have an r,g,b color tuple\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n    \n        mod.processing.fill(r.v,g,b)\n        \n    });\n\n\n    mod.stroke = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.stroke(r.v,g,b)\n        \n    });\n\n    mod.noStroke = new Sk.builtin.func(function() {\n        mod.processing.noStroke()\n    });\n    \n\n    mod.colorMode = new Sk.builtin.func(function(model, maxV) {\n        if (typeof(maxV) === 'undefined')\n            maxV = 255\n        else\n            maxV = maxV.v\n        mod.processing.colorMode(model.v, maxV)\n    });\n\n    mod.noFill = new Sk.builtin.func(function() {\n            mod.processing.noFill()\n        });\n            \n\n    // Environment\n\n    mod.loop = new Sk.builtin.func(function() {\n            if (mod.processing === null) {\n                throw new Sk.builtin.Exception(\"Loop should be called in setup\")\n            }\n            looping = true;\n            mod.processing.loop()\n        });\n            \n    mod.noLoop = new Sk.builtin.func(function() {\n        if (mod.processing === null) {\n            throw new Sk.builtin.Exception(\"noLoop should be called in setup\")\n        }\n        looping = false;\n        mod.processing.noLoop()\n    });\n    \n    mod.frameRate = new Sk.builtin.func(function(fr) {\n        mod.processing.frameRate(fr.v)\n        \n    });\n\n    mod.size = new Sk.builtin.func(function(h,w) {\n        mod.processing.size(h.v,w.v)\n        \n    });\n\n    mod.exitp = new Sk.builtin.func(function(h,w) {\n        mod.processing.exit()\n    });\n\n\n    mod.mouseX = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseX, Sk.builtin.nmber.int$);\n        \n    });\n\n    mod.mouseY = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseY, Sk.builtin.nmber.int$);\n        \n    });\n\n    // Attributes\n    mod.rectMode = new Sk.builtin.func(function(mode) {\n        mod.processing.rectMode(mode.v)\n    });\n\n    mod.strokeWeight = new Sk.builtin.func(function(wt) {\n        mod.processing.strokeWeight(wt.v)\n        \n    });\n\n    mod.smooth = new Sk.builtin.func(function() {\n        mod.processing.smooth()\n    });\n\n    mod.noSmooth = new Sk.builtin.func(function() {\n        mod.processing.noSmooth()\n        });\n            \n    mod.ellipseMode = new Sk.builtin.func(function(mode) {\n        mod.processing.ellipseMode(mode.v)\n        });\n\n    mod.strokeCap = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeCap(mode.v)\n        });\n\n    mod.strokeJoin = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeJoin(mode.v)\n    });\n    \n\n\n    // Transforms\n\n    mod.rotate = new Sk.builtin.func(function(rads) {\n        // rotation in radians\n        mod.processing.rotate(rads.v)\n        \n    });\n\n    mod.scale = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.scale(sx.v, sy, sz)\n    });\n\n    mod.translate = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.translate(sx.v, sy, sz)\n    });\n\n    // todo:  applyMatrix, popMatrix, printMatrix??, pushMatrix, resetMatrix, rotate{X,Y,Z}\n    \n\n    //  //////////////////////////////////////////////////////////////////////\n    //  Run\n    // \n    //  Create the processing context and setup of calls to setup, draw etc.\n    //\n    //\n    //  //////////////////////////////////////////////////////////////////////    \n    mod.run = new Sk.builtin.func(function() {\n        function sketchProc(processing) {\n            mod.processing = processing\n\n            // processing.setup = function() {\n            //     if Sk.globals['setup']\n            //         Sk.misceval.callsim(Sk.globals['setup'])\n            // }\n\n            \n            processing.draw = function() {\n                // if there are pending image loads then just use the natural looping calls to \n                // retry until all the images are loaded.  If noLoop was called in setup then make\n                // sure to revert to that after all the images in hand.\n                var wait = false\n                for (var i in imList) {\n                    if (imList[i].width == 0) {\n                        wait = true\n                    }\n                }\n                if (wait == true) {\n                    if (looping == true) \n                        return\n                    else {\n                        processing.loop()\n                        return\n                    }\n\n                } else {\n                    if (looping == false)\n                        processing.noLoop()\n                }\n\n                mod.frameCount = processing.frameCount  \n                if (Sk.globals['draw'])\n                    Sk.misceval.callsim(Sk.globals['draw'])\n            }\n            \n            var callBacks = ['setup', 'mouseMoved','mouseClicked', 'mouseDragged', 'mouseMoved', 'mouseOut',\n             'mouseOver', 'mousePressed', 'mouseReleased', 'keyPressed', 'keyReleased', 'keyTyped'\n             ];\n\n             for(var cb in callBacks) {\n                if (Sk.globals[callBacks[cb]]) {\n                    console.log('defining ' + callBacks[cb])                    \n                    processing[callBacks[cb]] = new Function(\"Sk.misceval.callsim(Sk.globals['\"+callBacks[cb]+\"']);\")\n                }\n            }\n        }\n        \n        var canvas = document.getElementById(Sk.canvas)\n        $(canvas).show()\n        mod.p = new Processing(canvas, sketchProc)\n\n        \n    });\n\n    var mouseClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'x') \n                return mod.processing.mouseX;\n            else if (key == 'y') \n                return mod.processing.mouseY;\n            else if (key == 'px')\n                return mod.processing.pmouseX;\n            else if (key == 'py')\n                return mod.processing.pmouseY;\n            else if (key == 'pressed')\n                return mod.processing.mousePressed;\n            else if (key == 'button')\n                return mod.processing.mouseButton\n        });\n\n\n    }\n\n\n    mod.Mouse = Sk.misceval.buildClass(mod, mouseClass, 'Mouse', []);\n\n    mod.mouse = Sk.misceval.callsim(mod.Mouse)\n\n    var keyboardClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'key') {\n                console.log(mod.processing.key)\n                return new Sk.builtin.str(mod.processing.key.toString())\n            }\n            else if (key == 'keyCode') \n                return mod.processing.keyCode\n            else if (key == 'keyPressed')\n                return new Sk.builtin.str(mod.processing.keyPressed) // todo bool\n        });\n\n\n    }\n\n    mod.Keyboard = Sk.misceval.buildClass(mod,keyboardClass,'Keyboard', [])\n\n    mod.keyboard = Sk.misceval.callsim(mod.Keyboard)\n\n\n\n    var environmentClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'frameCount') \n                return mod.processing.frameCount\n            else if (key == 'frameRate') \n                return mod.processing.frameRate\n            else if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'online')\n                return mod.processing.online\n            else if (key == 'focused')\n                return mod.processing.focused\n        });\n\n\n    }\n\n    mod.Environment = Sk.misceval.buildClass(mod,environmentClass,'Environment', [])\n\n    mod.environment = Sk.misceval.callsim(mod.Environment)\n\n    var screenClass = function($gbl, $loc) {\n\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            self.pixels = null;\n        });\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'pixels')\n                if (self.pixels == null) {\n                    self.pixels = new Sk.builtin.list(mod.processing.pixels.toArray())\n                }\n                return self.pixels\n        });\n\n    }\n\n    mod.Screen = Sk.misceval.buildClass(mod,screenClass,'Screen', [])\n\n    mod.screen = Sk.misceval.callsim(mod.Screen)\n\n    mod.loadPixels = new Sk.builtin.func(function() {\n        mod.processing.loadPixels()\n        console.log(mod.processing.pixels)\n    });\n    \n\n    var colorClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self, val1, val2, val3, alpha) {\n            if (typeof(val2) !== 'undefined')\n                val2 = val2.v\n            if (typeof(val3) !== 'undefined')\n                val3 = val3.v\n            if (typeof(alpha) !== 'undefined')\n                alpha = alpha.v\n            self.v = mod.processing.color(val1.v, val2, val3, alpha)\n        })\n    \n    }\n\n    mod.color = Sk.misceval.buildClass(mod,colorClass,'color', [])\n\n    mod.red = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.red(clr.v), Sk.builtin.nmber.int$);\n    });\n    \n    mod.green = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.green(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    mod.blue = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.blue(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    // Image class and functions\n    //\n    var imageClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self,im) {\n            self.v = im\n            self.width = Sk.builtin.assk$(im.width, Sk.builtin.nmber.int$);\n            self.height = Sk.builtin.assk$(im.height, Sk.builtin.nmber.int$);\n        })\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'width') return self.v.width;\n            if (key == 'height') return self.v.height;\n        });\n    \n    }\n\n    mod.PImage = Sk.misceval.buildClass(mod,imageClass,'PImage', [])\n\n    mod.loadImage = new Sk.builtin.func(function(imfile) {\n        var i = mod.processing.loadImage(imfile.v);\n        imList.push(i);\n        return Sk.misceval.callsim(mod.PImage,i);\n    });\n    \n\n    mod.image = new Sk.builtin.func(function(im,x,y) {\n        if (im.v.width > 0)\n            mod.processing.image(im.v,x.v,y.v,im.v.width,im.v.height)\n    });\n\n    mod.get = new Sk.builtin.func(function(x,y) {\n        var clr = mod.processing.get(x.v,y.v)\n        return Sk.misceval.callsim(mod.color,\n            Sk.builtin.assk$(mod.processing.red(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.green(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.blue(clr), Sk.builtin.nmber.int$));\n    });\n\n    mod.set = new Sk.builtin.func(function(x, y, color) {\n        mod.processing.set(x.v, y.v, color.v)\n    });\n    \n// todo  -- add a color class for creating color objects.\n\n\n    return mod;\n}\n", "src/lib/webgl/models.js": "// most of this file is from/based on 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var Buffer = function(array, opt_target) {\n        var target = opt_target || gl.ARRAY_BUFFER;\n        var buf = gl.createBuffer();\n        this.target = target;\n        this.buf = buf;\n        this.set(array);\n        this.numComponents_ = array.numComponents;\n        this.numElements_ = array.numElements;\n        this.totalComponents_ = this.numComponents_ * this.numElements_;\n        if (array.buffer instanceof Float32Array) {\n            this.type_ = gl.FLOAT;\n        } else if (array.buffer instanceof Uint8Array) {\n            this.type_ = gl.UNSIGNED_BYTE;\n        } else if (array.buffer instanceof Int8Array) {\n            this.type_ = gl._BYTE;\n        } else if (array.buffer instanceof Uint16Array) {\n            this.type_ = gl.UNSIGNED_SHORT;\n        } else if (array.buffer instanceof Int16Array) {\n            this.type_ = gl.SHORT;\n        } else {\n            throw(\"unhandled type:\" + (typeof array.buffer));\n        }\n    };\n\n    Buffer.prototype.set = function(array) {\n        gl.bindBuffer(this.target, this.buf);\n        gl.bufferData(this.target, array.buffer, gl.STATIC_DRAW);\n    }\n\n    Buffer.prototype.type = function() {\n        return this.type_;\n    };\n\n    Buffer.prototype.numComponents = function() {\n        return this.numComponents_;\n    };\n\n    Buffer.prototype.numElements = function() {\n        return this.numElements_;\n    };\n\n    Buffer.prototype.totalComponents = function() {\n        return this.totalComponents_;\n    };\n\n    Buffer.prototype.buffer = function() {\n        return this.buf;\n    };\n\n    Buffer.prototype.stride = function() {\n        return 0;\n    };\n\n    Buffer.prototype.offset = function() {\n        return 0;\n    };\n\n\n\n    mod.Model = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, shader, arrays, textures)\n                    {\n                        self.buffers = {};\n                        var setBuffer = function(name, array)\n                        {\n                            var target = (name == 'indices') ? gl.ELEMENT_ARRAY_BUFFER : gl.ARRAY_BUFFER;\n                            b = self.buffers[name];\n                            if (!b)\n                                b = new Buffer(array, target);\n                            else\n                                b.set(array);\n                            self.buffers[name] = b;\n                        };\n                        for (name in arrays)\n                            setBuffer(name, arrays[name]);\n\n                        var textureUnits = {};\n                        var unit = 0;\n                        for (var texture in textures)\n                        {\n                            textureUnits[texture] = unit++;\n                        }\n\n                        self.mode = gl.TRIANGLES;\n                        self.textures = textures.v;\n                        self.textureUnits = textureUnits;\n                        self.shader = shader;\n                    });\n\n                /**\n                * Sets up the shared parts of drawing this model. Uses the\n                * program, binds the buffers, sets the textures.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.drawPrep = new Sk.builtin.func(function(self, uniforms)\n                    {\n                        var shader = self.shader;\n                        var buffers = self.buffers;\n                        var textures = self.textures;\n\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n\n                        Sk.misceval.callsim(shader.use, shader);\n\n                        for (var buffer in buffers) {\n                            var b = buffers[buffer];\n                            if (buffer == 'indices') {\n                                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, b.buffer());\n                            } else {\n                                var attrib = shader.attrib[buffer];\n                                if (attrib) {\n                                    attrib(b);\n                                }\n                            }\n                        }\n\n                        for (var texture in textures) {\n                            var unit = self.textureUnits[texture];\n                            shader.setUniform$impl(shader, textuer, unit);\n                            textures[texture].bindToUnit(unit);\n                        }\n\n                        for (var uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n                    });\n\n                /**\n                * Draws this model.\n                *\n                * After calling tdl.models.Model.drawPrep you can call this\n                * function multiple times to draw this model.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.draw = new Sk.builtin.func(function(self, uniforms, opt_textures)\n                    {\n                        var shader = self.shader;\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n                        for (uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n\n                        if (opt_textures) {\n                            for (var texture in opt_textures) {\n                                var unit = self.textureUnits[texture];\n                                shader.setUniform$impl(shader, texture, unit);\n                                opt_textures[texture].bindToUnit(unit);\n                            }\n                        }\n\n                        var buffers = self.buffers;\n                        gl.drawElements(self.mode, buffers.indices.totalComponents(), gl.UNSIGNED_SHORT, 0);\n                    });\n            },\n            'Model', []);\n\n    return mod;\n};\n", "src/lib/pythonds/trees/__init__.py": "\n# from .binaryTree import BinaryTree\n# from .balance import AVLTree\n# from .bst import BinarySearchTree\n# from .binheap import BinHeap\n\n\n", "src/lib/matplotlib/pyplot/__init__.js": "/**\n\tMade by Michael Ebert for skulpt, see this modules at https://github.com/waywaaard/skulpt\n\n\tmatplotlib.pyplot inspired by https://github.com/rameshvs/jsplotlib, though heavily modified.\n\n  jsplotlib for supporting plot commands and kwargs for the matplotlib skulpt module\n  Supports:\n    - kwargs\n    - all color specs\n    - color cycle\n    - rc params\n    - ., o, x, s markers\n    - resize function for markers\n    - -, --, .- line styles\n    - various Line2D attributes\n    - auto scaling for axes\n**/\nvar jsplotlib = {\n  // empty object creation\n};\n\njsplotlib.rc = {\n  \"lines.linewidth\": 1.0,\n  \"lines.linestyle\": \"-\",\n  \"lines.color\": \"blue\",\n  \"lines.marker\": \"None\",\n  \"lines.markeredgewidth\": 0.5,\n  \"lines.markersize\": 6,\n  \"lines.dash_joinstyle\": \"miter\",\n  \"lines.dash_capstyle\": \"butt\",\n  \"lines.solid_jointyle\": \"miter\",\n  \"lines.solid_capstyle\": \"projecting\",\n  \"lines.antialiased\": true,\n  \"patch.linewidth\": 1.0,\n  \"patch.facecolor\": \"blue\",\n  \"patch.edgecolor\": \"black\",\n  \"patch.antialiased\": true,\n  \"text.color\": \"black\",\n  \"axes.hold\": true, // whether to clear the axes by default on\n  \"axes.facecolor\": \"white\", // axes background color\n  \"axes.edgecolor\": \"black\", // axes edge color\n  \"axes.grid\": false,\n  \"axes.titlesize\": \"large\",\n  \"axes.labelsize\": \"medium\",\n  \"axes.labelweigth\": \"normal\",\n  \"axes.labelcolor\": \"black\",\n  \"axes.axisbelow\": false,\n  \"axes.color_cycle\": [\"b\", \"g\", \"r\", \"c\", \"m\", \"y\", \"k\"]\n};\n\nvar chart_counter = 0; // for creating unique ids\n\n/** Line2D class for encapsulating all line relevant attributes and methods\n\t\tRebuilds partial matplotlib.Line2D functionality. Does not inherit from\n\t\tabstract Artist class. Rather more a data representation.\n **/\njsplotlib.Line2D = function(xdata, ydata, linewidth, linestyle, color, marker,\n  markersize, markeredgewidth, markeredgecolor, markerfacecolor,\n  markerfacecoloralt, fillstyle, antialiased, dash_capstyle,\n  solid_capstyle, dash_joinstyle, solid_joinstyle, pickradius,\n  drawstyle, markevery, kwargs) {\n\n  var that = {};\n  that._x = xdata;\n  that._y = ydata;\n  that._linewidth = linewidth || null;\n  that._linestyle = linestyle || null;\n  that._color = color || null;\n  that._marker = marker || null;\n  that._markersize = markersize || null;\n  that._markeredgewidth = markeredgewidth || null;\n  that._markeredgecolor = markeredgecolor || null;\n  that._markerfacecolor = markerfacecolor || null;\n  that._markerfacecoloralt = markerfacecoloralt || 'none';\n  that._fillstyle = fillstyle || 'full';\n  that._antialiased = antialiased || null;\n  that._dash_capstyle = dash_capstyle || null;\n  that._solid_capstyle = solid_capstyle || null;\n  that._dash_joinstyle = dash_joinstyle || null;\n  that._solid_joinstyle = solid_joinstyle || null;\n  that._pickradius = pickradius || 5;\n  that._drawstyle = drawstyle || null;\n  that._markevery = markevery || null;\n  //kwargs\n\n\t// if only y provided, create Array from 1 to N\n\tif (!that._x || that._x.length === 0) {\n\t\tthat._x = jsplotlib.linspace(1, that._y.length, that._y.length);\n\t}\n\n  that.antialiased = function(a) {\n    if (a)\n      this._antialiased = a;\n    return this;\n  };\n\n  that.markerfacecoloralt = function(mfca) {\n    if (mfca)\n      this._markerfacecoloralt = mfca;\n    return this;\n  };\n\n  that.pickradius = function(pr) {\n    if (pr)\n      this._pickradius = pr;\n    return this;\n  };\n\n  that.drawstyle = function(ds) {\n    if (ds)\n      this._drawstyle = ds;\n    return this;\n  };\n\n  that.markevery = function(me) {\n    if (me)\n      this._markevery = me;\n    return this;\n  };\n\n  that.color = function(cs) {\n    if (cs)\n      this._color = jsplotlib.color_to_hex(cs);\n    return this;\n  };\n\n  that.alpha = function(a) {\n    if (a)\n      this._alpha = a;\n    return this;\n  };\n\n  /* supports butt, round, projecting*/\n  that.dash_capstyle = function(dcs) {\n    if (dcs)\n      this._dash_capstyle = dcs;\n    return this;\n  };\n\n  /* supports butt, round, projecting*/\n  that.solid_capstyle = function(scs) {\n    if (scs)\n      this._solid_capstyle = scs;\n    return this;\n  };\n\n  /* supports miter, round, bevel' */\n  that.solid_jointyle = function(sjs) {\n    if (sjs)\n      this._solid_joinstyle = sjs;\n    return this;\n  };\n\n  /* supports miter, round, bevel' */\n  that.dash_joinstyle = function(djs) {\n    if (djs)\n      this._dash_joinstyle = djs;\n    return this;\n  };\n\n  /* random float */\n  that.markersize = function(ms) {\n    if (ms)\n      this._markersize = ms;\n    return this;\n  };\n\n  that.marker = function(ms) {\n    if (ms)\n      this._marker = ms;\n    return this;\n  };\n\n  that.markerfacecolor = function(mfc) {\n    if (mfc)\n      this._markerfacecolor = jsplotlib.color_to_hex(mfc);\n    return this;\n  };\n\n  that.markeredgecolor = function(mec) {\n    if (mec)\n      this._markeredgecolor = jsplotlib.color_to_hex(mec);\n    return this;\n  };\n\n  that.markeredgewidth = function(mec) {\n    if (mec)\n      this._markeredgewidth = mec;\n    return this;\n  };\n\n  that.linestyle = function(ls) {\n    if (ls)\n      ls = ls.trim();\n    this._linestyle = ls;\n    return this;\n  };\n\n  that.linewidth = function(lw) {\n    if (lw)\n      this._linewidth = lw;\n    return this;\n  };\n\n  that.line_id = function(lid) {\n    this._line_id = lid;\n    return this;\n  };\n\n  that.xrange = function(min, max, N) {\n    this._x = jsplotlib.linspace(min, max, N);\n    return this;\n  };\n\n  that.yrange = function(min, max, N) {\n    this._y = jsplotlib.linspace(min, max, N);\n    return this;\n  };\n\n  /**\n    Updates possible attributes provided as kwargs\n  **/\n  that.update = function(kwargs) {\n    // we assume key value pairs\n    if (kwargs && typeof kwargs === \"object\") {\n      for (var key in kwargs) {\n        if (kwargs.hasOwnProperty(key)) {\n          var val = kwargs[key];\n\n          switch (key) {\n            case 'linewidth':\n              this.linewidth(val);\n              break;\n            case 'linestyle':\n              this.linestyle(val);\n              break;\n            case 'color':\n              val = jsplotlib.to_rgb(val);\n              this.color(val);\n              break;\n            case 'marker':\n              this.marker(val);\n              break;\n\t\t\t\t\t\tcase 'markersize':\n\t\t\t\t\t\t\tthis.markersize(val);\n\t\t\t\t\t\t\tbreak;\n            case 'markeredgewidth':\n              this.markeredgewidth(val);\n              break;\n            case 'markeredgecolor':\n              val = jsplotlib.to_rgb(val);\n              this.markeredgecolor(val);\n              break;\n            case 'markerfacecolor':\n              val = jsplotlib.to_rgb(val);\n              this.markerfacecolor(val);\n              break;\n            case 'markerfacecoloralt':\n              val = jsplotlib.to_rgb(val);\n              this.markerfacecoloralt(val);\n              break;\n            case 'fillstyle':\n              this.fillstyle(val);\n              break;\n            case 'antialiased':\n              this.antialiased(val);\n              break;\n            case 'dash_capstyle':\n              this.dash_capstyle(val);\n              break;\n            case 'solid_capstyle':\n              this.solid_capstyle(val);\n              break;\n            case 'dash_joinstyle':\n              this.dash_joinstyle(val);\n              break;\n            case 'solid_jointyle':\n              this.solid_jointyle(val);\n              break;\n            case 'pickradius':\n              this.pickradius(val);\n              break;\n            case 'drawstyle':\n              this.drawstyle(val);\n              break;\n            case 'markevery':\n              this.markevery(val);\n              break;\n          }\n        }\n      }\n    }\n\n    return this;\n  };\n\n  that.draw = function(parent_chart) {\n    // should be called in the pplot command\n    // each plot call adds a new line to our existing plot\n    // object and draws them all, when show is called\n    // this._init_common();\n    var number_of_points = this._y.length || this._x.length; // implement need to move those from the original construct_graph class to lines\n    if (!this._linestyle && !this._marker) {\n      this._linestyle = jsplotlib.rc['lines.linestyle'];\n    }\n\n    /*\n    if (!this._marker && !this._linestyle) {\n      this._marker = jsplotlib.rc['lines.marker'];\n    }\n    */\n\n    if (!this._color) {\n      this._color = jsplotlib.color_to_hex(parent_chart.get_next_color());\n    }\n\n    // set defaults for all attributes\n    if (!this._markersize) {\n      this._markersize = jsplotlib.rc['lines.markersize'];\n    }\n\n    if (!this._markeredgecolor) {\n      this._markeredgecolor = 'k';\n    }\n\n    if (!this._linewidth) {\n      this._linewidth = jsplotlib.rc['lines.linewidth'];\n    }\n\n    if (!this._dash_capstyle) {\n      this._dash_capstyle = \"butt\";\n    }\n\n    if (!this._solid_capstyle) {\n      this._solid_capstyle = \"butt\";\n    }\n\n    if (!this._solid_joinstyle) {\n      this._solid_joinstyle = \"miter\";\n    }\n\n    if (!this._dash_joinstyle) {\n      this._dash_joinstyle = \"miter\";\n    }\n\n    // default markerfacecolor is linecolor\n    if (!this._markerfacecolor) {\n      this._markerfacecolor = jsplotlib.color_to_hex(this._color);\n    }\n\n    if (!this._markeredgewidth) {\n      this._markeredgewidth = 0.75;\n    }\n\n    if (!this._alpha) {\n      this._alpha = 1;\n    }\n\n    // local storage for drawing\n    var x = this._x;\n    var y = this._y;\n\n    // create array of point pairs with optional s value\n    // from [x1,x2], [y1, y2], [s1, s2]\n    // to [[x1,y1,s1],[x2,y2,s2]]\n    var xys = d3.zip(x, y);\n    var pairs = d3.zip(xys.slice(0, -1), xys.slice(1));\n    var xscale = parent_chart.get_xscale(); // should come from axis o.O\n    var yscale = parent_chart.get_yscale();\n\n    var xformat = parent_chart._xaxis._formatter || function(x) {\n        return x;\n      };\n\n    var yformat = parent_chart._yaxis._formatter || function(x) {\n        return x;\n      };\n\n    // this adds the line to the chart\n    this._line = parent_chart.chart.append(\"svg:g\").attr(\"id\", this._line_id);\n    this._line_containers = this._line.selectAll(\"g.pplot_lines\").data(pairs).enter()\n      .append(\"g\").attr(\"class\", \"pplot_lines\");\n\n    // set appropriate line style\n    if (this._linestyle === \"-\") {\n      this._lines = this._line_containers.append(\"line\")\n        .attr(\"x1\", function(d) {\n          return xscale(d[0][0]);\n        })\n        .attr(\"x2\", function(d) {\n          return xscale(d[1][0]);\n        })\n        .attr(\"y1\", function(d) {\n          return yscale(d[0][1]);\n        })\n        .attr(\"y2\", function(d) {\n          return yscale(d[1][1]);\n        })\n        .style(\"stroke\", jsplotlib.color_to_hex(this._color))\n        .style(\"stroke-linecap\", this._solid_capstyle)\n        .style(\"stroke-linejoin\", this._solid_joinstyle)\n        .style(\"stroke-opacity\", this._alpha)\n        .style(\"stroke-width\", this._linewidth);\n    } else if (this._linestyle === \"--\") {\n      this._lines = this._line_containers.append(\"line\")\n        .attr(\"x1\", function(d) {\n          return xscale(d[0][0]);\n        })\n        .attr(\"x2\", function(d) {\n          return xscale(d[1][0]);\n        })\n        .attr(\"y1\", function(d) {\n          return yscale(d[0][1]);\n        })\n        .attr(\"y2\", function(d) {\n          return yscale(d[1][1]);\n        })\n        .style(\"stroke\", jsplotlib.color_to_hex(this._color))\n        .style(\"stroke-width\", this._linewidth)\n        .style(\"stroke-linecap\", this._dash_capstyle)\n        .style(\"stroke-linejoin\", this._dash_joinstyle)\n        .style(\"stroke-opacity\", this._alpha)\n        .style(\"stroke-dasharray\", \"5,5\");\n    } else if (this._linestyle === \":\") {\n      this._lines = this._line_containers.append(\"line\")\n        .attr(\"x1\", function(d) {\n          return xscale(d[0][0]);\n        })\n        .attr(\"x2\", function(d) {\n          return xscale(d[1][0]);\n        })\n        .attr(\"y1\", function(d) {\n          return yscale(d[0][1]);\n        })\n        .attr(\"y2\", function(d) {\n          return yscale(d[1][1]);\n        })\n        .style(\"stroke\", jsplotlib.color_to_hex(this._color))\n        .style(\"stroke-width\", this._linewidth)\n        .style(\"stroke-dasharray\", \"2,5\")\n        .style(\"stroke-linejoin\", this._dash_joinstyle)\n        .style(\"stroke-opacity\", this._alpha)\n        .style(\"stroke-linecap\", \"round\");\n    } else if (this._linestyle === \"-.\") {\n      this._lines = this._line_containers.append(\"line\")\n        .attr(\"x1\", function(d) {\n          return xscale(d[0][0]);\n        })\n        .attr(\"x2\", function(d) {\n          return xscale(d[1][0]);\n        })\n        .attr(\"y1\", function(d) {\n          return yscale(d[0][1]);\n        })\n        .attr(\"y2\", function(d) {\n          return yscale(d[1][1]);\n        })\n        .style(\"stroke\", jsplotlib.color_to_hex(this._color))\n        .style(\"stroke-width\", this._linewidth)\n        .style(\"stroke-linecap\", this._dash_capstyle)\n        .style(\"stroke-linejoin\", this._dash_joinstyle)\n        .style(\"stroke-opacity\", this._alpha)\n        .style(\"stroke-dasharray\", \"5, 5, 2, 5\");\n    }\n\n    // append points\n    this._points = parent_chart.chart.selectAll(\"g.pplot_points\" + this._line_id)\n      .data(xys).enter().append(\"g\")\n      .attr(\"x\", function(d) {\n        return d[0];\n      })\n      .attr(\"y\", function(d) {\n        return d[1];\n      })\n    //.attr(\"s\", function(d) {\n    //  return d[2];\n    //})\n    .attr(\"class\", \"pplot_points\" + this._line_id);\n\n    // init hover popups\n    /*\n    $(\"#\" + chart.attr(\"id\") + \" g.pplot_points\" + this._line_id).tipsy({\n      gravity: \"nw\",\n      html: true,\n      title: function() {\n        var d = this.__data__;\n        var output = \"(\" + xformat(d[0]) + \",\" + yformat(d[1]) + \")\";\n        return output;\n      }\n    }); */\n\n    // set appropriate marker styles\n    // http://matplotlib.org/api/markers_api.html\n    var marker_size = this._markersize; // store for nested call\n    switch (this._marker) {\n      case undefined:\n      case \" \":\n      case \"None\":\n      case \"\":\n        break;\n      case \".\":\n        this._markers = this._points.append(\"circle\").attr(\"cx\", function(d) {\n          return xscale(d[0]);\n        }).attr(\"cy\", function(d) {\n          return yscale(d[1]);\n        }).attr(\"r\", function(d) {\n          return 1;\n        });\n        break;\n      case \"o\":\n        this._markers = this._points.append(\"circle\").attr(\"cx\", function(d) {\n          return xscale(d[0]);\n        }).attr(\"cy\", function(d) {\n          return yscale(d[1]);\n        }).attr(\"r\", function(d) {\n          return marker_size;\n        });\n        break;\n      case \"x\":\n        this._points.append(\"line\").attr(\"x1\", function(d) {\n          return xscale(d[0]) - marker_size;\n        }).attr(\"x2\", function(d) {\n          return xscale(d[0]) + marker_size;\n        }).attr(\"y1\", function(d) {\n          return yscale(d[1]) - marker_size;\n        }).attr(\"y2\", function(d) {\n          return yscale(d[1]) + marker_size;\n        });\n        this._points.append(\"line\").attr(\"x1\", function(d) {\n          return xscale(d[0]) + marker_size;\n        }).attr(\"x2\", function(d) {\n          return xscale(d[0]) - marker_size;\n        }).attr(\"y1\", function(d) {\n          return yscale(d[1]) - marker_size;\n        }).attr(\"y2\", function(d) {\n          return yscale(d[1]) + marker_size;\n        });\n        this._markers = this._points.selectAll(\"line\");\n        break;\n      case 's':\n        this._points.append(\"rect\")\n          .attr(\"x\", function(d) {\n            return xscale(d[0]) - marker_size / 2;\n          })\n          .attr(\"y\", function(d) {\n            return yscale(d[1]) - marker_size / 2;\n          })\n          .attr(\"width\", function(d) {\n            return marker_size;\n          })\n          .attr(\"height\", function(d) {\n            return marker_size;\n          });\n        this._markers = this._points.selectAll(\"rect\");\n        break;\n    }\n\n    // resize function only supports 'o'\n    var resize_function = function(resize_amount) {\n      return function() {\n        var marker = d3.select(this);\n        if (marker.attr(\"r\")) {\n          marker.attr(\"r\", marker.attr(\"r\") * resize_amount);\n        } else if (marker.attr(\"width\") && marker.attr(\"height\")) {\n          // resizes square marker\n          var old_marker_size = parseFloat(marker.attr(\"width\"));\n          var new_marker_size = old_marker_size * resize_amount;\n          var diff_marker_size = (new_marker_size - old_marker_size) / 2;\n\n          var new_x = parseFloat(marker.attr(\"x\")) - diff_marker_size;\n          var new_y = parseFloat(marker.attr(\"y\")) - diff_marker_size;\n          marker.attr(\"width\", new_marker_size);\n          marker.attr(\"height\", new_marker_size);\n          marker.attr(\"x\", new_x);\n          marker.attr(\"y\", new_y);\n        } else {\n          return true;\n        }\n      };\n    };\n\n    // add marker attributes\n    if (this._markers) {\n      this._markers\n        .style(\"stroke\", jsplotlib.color_to_hex(this._markeredgecolor))\n        .style(\"stroke-width\", this._markeredgewidth)\n        .style(\"stroke-opacity\", this._alpha)\n        .style(\"fill\", jsplotlib.color_to_hex(this._markerfacecolor))\n        .on(\"mouseover\", resize_function(1.25))\n        .on(\"mouseout\", resize_function(0.8));\n    }\n\n    return this;\n  };\n\n  return that;\n};\n\njsplotlib.plot = function(chart) {\n  /*\n    list of responsibilites\n     - holds all lines\n     - updates axis\n     - construct axis\n     - knows color_cycle\n     - scatter? s() functions?\n  */\n\n  // store chart object and append own methods\n  var that = {\n    chart: chart\n  };\n\n  that.axes_colorcycle_position = 0;\n  that.line_count = 0;\n  that._lines = []; // we support multiple lines\n\n  that.add_line = function(line) {\n    if (line) {\n      this._lines.push(line);\n      line._line_id = this.line_count++;\n      this._update_limits();\n    }\n\n    return this;\n  };\n\n  // set graph attributes\n  that._chartheight = parseInt(chart.attr(\"height\"), 10);\n  that._chartwidth = parseInt(chart.attr(\"width\"));\n  that._title_string = \"\";\n  that._title_size = 0;\n  that._xaxis = jsplotlib.construct_axis(that, \"x\");\n  that._yaxis = jsplotlib.construct_axis(that, \"y\");\n  that._axes = [that._xaxis, that._yaxis];\n\n  // returns the next color in the cycle\n  that.get_next_color = function() {\n    var cs = jsplotlib.rc['axes.color_cycle'][this.axes_colorcycle_position];\n    this.axes_colorcycle_position = (this.axes_colorcycle_position + 1) %\n      jsplotlib.rc['axes.color_cycle'].length;\n    return cs;\n  };\n\n  // setter functions\n  that.xlabel = function(xl) {\n    this._xaxis.set_label(xl);\n    return this;\n  };\n\n  that.ylabel = function(yl) {\n    this._yaxis.set_label(yl);\n    return this;\n  };\n\n  that.xaxis_off = function() {\n    this._xaxis._turn_off();\n    return this;\n  };\n\n  that.yaxis_off = function() {\n    this._yaxis._turn_off();\n    return this;\n  };\n\n  that.xaxis_on = function() {\n    this._xaxis._turn_on();\n    return this;\n  };\n\n  that.yaxis_on = function() {\n    this._yaxis._turn_on();\n    return this;\n  };\n\n  that.axis_on = function() {\n    this.yaxis_on();\n    this.xaxis_on();\n    return this;\n  };\n\n  that.axis_off = function() {\n    this.yaxis_off();\n    this.xaxis_off();\n    return this;\n  };\n\n  that.title = function(title_string) {\n    this._title_string = title_string;\n    this._title_size = this._chartheight * 0.1;\n    this._title_transform_string = \"translate(\" + this._chartwidth / 2 + \",\" +\n      this._title_size / 2 + \")\";\n    return this;\n  };\n\n  // sets the ylimits based on a minmax array/tuple\n  that._ylimits = function(min_max_tuple) {\n    this._yaxis._set_data_range(min_max_tuple);\n    return this;\n  };\n\n  that._xlimits = function(min_max_tuple) {\n    this._xaxis._set_data_range(min_max_tuple);\n    return this;\n  };\n\n  that._update_limits = function() {\n    var i;\n    var xs = []; // all x-values\n    var ys = []; // all y-values\n\n    // calculate limits\n    for (i = 0; i < this._lines.length; i++) {\n      xs = xs.concat(this._lines[i]._x);\n      ys = ys.concat(this._lines[i]._y);\n    }\n\n    this._xlimits([d3.min(xs), d3.max(xs)]);\n    this._ylimits([d3.min(ys), d3.max(ys)]);\n\n    return this;\n  };\n\n  that.yformat = function(formatter) {\n    this._yaxis._set_formatter(formatter);\n    return this;\n  };\n\n  that.xformat = function(formatter) {\n    this._xaxis._set_formatter(formatter);\n    return this;\n  };\n\n  that.get_yscale = function() {\n    return this._yaxis.get_scale();\n  };\n\n  that.get_xscale = function() {\n    return this._xaxis.get_scale();\n  };\n\n  // creates axes\n  that._init_common = function() {\n    for (var i = 0; i < 2; i++) {\n      this._axes[i]._init(this);\n    }\n    this._height = this._chartheight - this._xaxis._size;\n    this._width = this._chartwidth - this._yaxis._size;\n    return this;\n  };\n\n  // draw axes and append graph title\n  that._draw_axes = function() {\n    for (var i = 0; i < this._axes.length; i++) {\n      this._axes[i]._draw_axis(this);\n      this._axes[i]._draw_label(this);\n    }\n\n    var myselector = \"#\" + chart.attr(\"id\") + \" .axis line, #\" + chart.attr(\n      \"id\") + \" .axis path\";\n    $(myselector).css(\"fill\", \"none\").css(\"stroke\", \"#000\");\n    d3.svg.axis(chart);\n    if (this._title_string !== \"\") {\n      that.chart.append(\"svg:g\").attr(\"class\", \"graph_title\").attr(\n        \"transform\", this._title_transform_string).append(\"text\").append(\n        \"tspan\").attr(\"text-anchor\", \"middle\").attr(\"class\", \"graph_title\").attr(\n        \"writing-mode\", \"rl-tb\").text(this._title_string);\n    }\n    return this;\n  };\n\n  // resize function for the chart\n  var chart_id = that.chart.attr(\"id\");\n  that.resize_function = function(resize_amount, direction) {\n    return function() {\n      var node = this;\n      while (node.id !== chart_id) {\n        node.parentNode.appendChild(node);\n        node = node.parentNode;\n      }\n      var object = d3.select(this);\n      var x0 = parseInt(object.attr(\"x\") || \"0\", 10);\n      var width0 = parseInt(object.attr(\"width\"), 10);\n      var y0 = parseInt(object.attr(\"y\") || \"0\", 10);\n      var height0 = parseInt(object.attr(\"height\"), 10);\n      var newwidth, newheight, newx, newy;\n      if (direction === \"grow\") {\n        object.attr(\"x_orig\", x0).attr(\"y_orig\", y0).attr(\"width_orig\",\n          width0).attr(\"height_orig\", height0);\n        newwidth = width0 * resize_amount;\n        newheight = height0 * resize_amount;\n        newx = x0 - (resize_amount - 1) * width0 / 2;\n        newy = y0 - (resize_amount - 1) * height0 / 2;\n      } else if (direction === \"shrink\") {\n        newwidth = object.attr(\"width_orig\");\n        newheight = object.attr(\"height_orig\");\n        newx = object.attr(\"x_orig\");\n        newy = object.attr(\"y_orig\");\n      }\n      object.attr(\"x\", newx).attr(\"y\", newy).attr(\"height\", newheight).attr(\n        \"width\", newwidth);\n    };\n  };\n  /**\n   Draws the lines. Lines are resonsible for their drawing. Here we just initialize\n   the axes and the scaling.\n  **/\n  that.draw = function() {\n    var i;\n\n    this._init_common(); //\n\n    // draw lines\n    for (i = 0; i < this._lines.length; i++) {\n      this._lines[i].draw(this);\n    }\n\n    this._draw_axes();\n  };\n\n  that.update = function(kwargs) {\n    var i;\n\n\t\t// pass to lines\n    for (i = 0; i < this._lines.length; i++) {\n      this._lines[i].update(kwargs);\n    }\n\n\t\t// update own kwargs\n\t\tif (kwargs && typeof kwargs === \"object\") {\n      for (var key in kwargs) {\n        if (kwargs.hasOwnProperty(key)) {\n          var val = kwargs[key];\n\n          switch (key) {\n            case 'title':\n              this.title(val);\n              break;\n            case 'xlabel':\n\t\t\t\t\t\t\tthis.xlabel(val);\n              break;\n            case 'ylabel':\n\t\t\t\t\t\t\tthis.ylabel(val);\n\t\t\t\t\t\t\tbreak;\n          }\n        }\n      }\n    }\n\n    return this;\n  };\n\n  return that;\n};\n\n\n\n/** List of all supported line styles **/\njsplotlib.Line2D.lineStyles = {\n  '-': '_draw_solid',\n  '--': '_draw_dashed',\n  '-.': '_draw_dash_dot',\n  ':': '_draw_dotted',\n  'None': '_draw_nothing',\n  ' ': '_draw_nothing',\n  '': '_draw_nothing',\n};\n\njsplotlib.Line2D.lineMarkers = {\n  '.': 'point',\n  ',': 'pixel',\n  'o': 'circle',\n  'v': 'triangle_down',\n  '^': 'triangle_up',\n  '<': 'triangle_left',\n  '>': 'triangle_right',\n  '1': 'tri_down',\n  '2': 'tri_up',\n  '3': 'tri_left',\n  '4': 'tri_right',\n  '8': 'octagon',\n  's': 'square',\n  'p': 'pentagon',\n  '*': 'star',\n  'h': 'hexagon1',\n  'H': 'hexagon2',\n  '+': 'plus',\n  'x': 'x',\n  'D': 'diamond',\n  'd': 'thin_diamond',\n  '|': 'vline',\n  '_': 'hline',\n  //TICKLEFT: 'tickleft',\n  //TICKRIGHT: 'tickright',\n  //TICKUP: 'tickup',\n  //TICKDOWN: 'tickdown',\n  //CARETLEFT: 'caretleft',\n  //CARETRIGHT: 'caretright',\n  //CARETUP: 'caretup',\n  //CARETDOWN: 'caretdown',\n  \"None\": 'nothing',\n  //Sk.builtin.none.none$: 'nothing',\n  ' ': 'nothing',\n  '': 'nothing'\n};\n\n/**\n Color short keys\n**/\njsplotlib.colors = {\n  'b': 'blue',\n  'g': 'green',\n  'r': 'red',\n  'c': 'cyan',\n  'm': 'magenta',\n  'y': 'yellow',\n  'k': 'black',\n  'w': 'white'\n};\n\n/**\n Mapping of all possible CSS colors, that are supported by matplotlib\n**/\njsplotlib.cnames = {\n  'aliceblue': '#F0F8FF',\n  'antiquewhite': '#FAEBD7',\n  'aqua': '#00FFFF',\n  'aquamarine': '#7FFFD4',\n  'azure': '#F0FFFF',\n  'beige': '#F5F5DC',\n  'bisque': '#FFE4C4',\n  'black': '#000000',\n  'blanchedalmond': '#FFEBCD',\n  'blue': '#0000FF',\n  'blueviolet': '#8A2BE2',\n  'brown': '#A52A2A',\n  'burlywood': '#DEB887',\n  'cadetblue': '#5F9EA0',\n  'chartreuse': '#7FFF00',\n  'chocolate': '#D2691E',\n  'coral': '#FF7F50',\n  'cornflowerblue': '#6495ED',\n  'cornsilk': '#FFF8DC',\n  'crimson': '#DC143C',\n  'cyan': '#00FFFF',\n  'darkblue': '#00008B',\n  'darkcyan': '#008B8B',\n  'darkgoldenrod': '#B8860B',\n  'darkgray': '#A9A9A9',\n  'darkgreen': '#006400',\n  'darkkhaki': '#BDB76B',\n  'darkmagenta': '#8B008B',\n  'darkolivegreen': '#556B2F',\n  'darkorange': '#FF8C00',\n  'darkorchid': '#9932CC',\n  'darkred': '#8B0000',\n  'darksage': '#598556',\n  'darksalmon': '#E9967A',\n  'darkseagreen': '#8FBC8F',\n  'darkslateblue': '#483D8B',\n  'darkslategray': '#2F4F4F',\n  'darkturquoise': '#00CED1',\n  'darkviolet': '#9400D3',\n  'deeppink': '#FF1493',\n  'deepskyblue': '#00BFFF',\n  'dimgray': '#696969',\n  'dodgerblue': '#1E90FF',\n  'firebrick': '#B22222',\n  'floralwhite': '#FFFAF0',\n  'forestgreen': '#228B22',\n  'fuchsia': '#FF00FF',\n  'gainsboro': '#DCDCDC',\n  'ghostwhite': '#F8F8FF',\n  'gold': '#FFD700',\n  'goldenrod': '#DAA520',\n  'gray': '#808080',\n  'green': '#008000',\n  'greenyellow': '#ADFF2F',\n  'honeydew': '#F0FFF0',\n  'hotpink': '#FF69B4',\n  'indianred': '#CD5C5C',\n  'indigo': '#4B0082',\n  'ivory': '#FFFFF0',\n  'khaki': '#F0E68C',\n  'lavender': '#E6E6FA',\n  'lavenderblush': '#FFF0F5',\n  'lawngreen': '#7CFC00',\n  'lemonchiffon': '#FFFACD',\n  'lightblue': '#ADD8E6',\n  'lightcoral': '#F08080',\n  'lightcyan': '#E0FFFF',\n  'lightgoldenrodyellow': '#FAFAD2',\n  'lightgreen': '#90EE90',\n  'lightgray': '#D3D3D3',\n  'lightpink': '#FFB6C1',\n  'lightsage': '#BCECAC',\n  'lightsalmon': '#FFA07A',\n  'lightseagreen': '#20B2AA',\n  'lightskyblue': '#87CEFA',\n  'lightslategray': '#778899',\n  'lightsteelblue': '#B0C4DE',\n  'lightyellow': '#FFFFE0',\n  'lime': '#00FF00',\n  'limegreen': '#32CD32',\n  'linen': '#FAF0E6',\n  'magenta': '#FF00FF',\n  'maroon': '#800000',\n  'mediumaquamarine': '#66CDAA',\n  'mediumblue': '#0000CD',\n  'mediumorchid': '#BA55D3',\n  'mediumpurple': '#9370DB',\n  'mediumseagreen': '#3CB371',\n  'mediumslateblue': '#7B68EE',\n  'mediumspringgreen': '#00FA9A',\n  'mediumturquoise': '#48D1CC',\n  'mediumvioletred': '#C71585',\n  'midnightblue': '#191970',\n  'mintcream': '#F5FFFA',\n  'mistyrose': '#FFE4E1',\n  'moccasin': '#FFE4B5',\n  'navajowhite': '#FFDEAD',\n  'navy': '#000080',\n  'oldlace': '#FDF5E6',\n  'olive': '#808000',\n  'olivedrab': '#6B8E23',\n  'orange': '#FFA500',\n  'orangered': '#FF4500',\n  'orchid': '#DA70D6',\n  'palegoldenrod': '#EEE8AA',\n  'palegreen': '#98FB98',\n  'paleturquoise': '#AFEEEE',\n  'palevioletred': '#DB7093',\n  'papayawhip': '#FFEFD5',\n  'peachpuff': '#FFDAB9',\n  'peru': '#CD853F',\n  'pink': '#FFC0CB',\n  'plum': '#DDA0DD',\n  'powderblue': '#B0E0E6',\n  'purple': '#800080',\n  'red': '#FF0000',\n  'rosybrown': '#BC8F8F',\n  'royalblue': '#4169E1',\n  'saddlebrown': '#8B4513',\n  'salmon': '#FA8072',\n  'sage': '#87AE73',\n  'sandybrown': '#FAA460',\n  'seagreen': '#2E8B57',\n  'seashell': '#FFF5EE',\n  'sienna': '#A0522D',\n  'silver': '#C0C0C0',\n  'skyblue': '#87CEEB',\n  'slateblue': '#6A5ACD',\n  'slategray': '#708090',\n  'snow': '#FFFAFA',\n  'springgreen': '#00FF7F',\n  'steelblue': '#4682B4',\n  'tan': '#D2B48C',\n  'teal': '#008080',\n  'thistle': '#D8BFD8',\n  'tomato': '#FF6347',\n  'turquoise': '#40E0D0',\n  'violet': '#EE82EE',\n  'wheat': '#F5DEB3',\n  'white': '#FFFFFF',\n  'whitesmoke': '#F5F5F5',\n  'yellow': '#FFFF00',\n  'yellowgreen': '#9ACD32'\n};\n\njsplotlib.color_to_hex = function(color) {\n  // is color a shortcut?\n  if (jsplotlib.colors[color])\n    color = jsplotlib.colors[color];\n\n  // is inside cnames array?\n  if (jsplotlib.cnames[color])\n    return jsplotlib.cnames[color];\n\n  // check if it is already a hex value\n  if(typeof color == \"string\") {\n    var match = color.match(/^#(?:[0-9a-fA-F]{3}){1,2}$/);\n    if (match && match.length === 1)\n\t\t\treturn match[0];\n  }\n\n  // add rgb colors here\n  if (Array.isArray(color) && color.length === 3) {\n    return jsplotlib.rgb2hex(color);\n  }\n\n  // back to default\n  return jsplotlib.cnames[jsplotlib.rc['lines.color']];\n};\n\njsplotlib.get_color = function(cs) {\n  return jsplotlib.colors[cs] ? jsplotlib.colors[cs] : jsplotlib.colors.b;\n};\n\n/**\n Creates the d3 svg element at the specified dom element with given width and height\n**/\njsplotlib.make_chart = function(width, height, insert_container, insert_mode,\n  attributes) {\n  chart_counter++;\n  var DEFAULT_PADDING = 10;\n  insert_container = insert_container || \"body\";\n  width = width - 2 * DEFAULT_PADDING || 500;\n  height = height - 2 * DEFAULT_PADDING || 200;\n  attributes = attributes || {};\n\n  // create id, if not given\n  if (!('id' in attributes)) {\n    attributes.id = 'chart' + chart_counter;\n  }\n\n  var chart;\n  if (!insert_mode) {\n    chart = d3.select(insert_container).append('svg');\n  } else {\n    chart = d3.select(insert_container).insert('svg', insert_mode);\n  }\n\n  // set css classes\n  chart.attr('class', 'chart');\n  chart.attr('width', width);\n  chart.attr('height', height);\n  chart.attr('chart_count', chart_counter);\n  // set additional given attributes\n  for (var attribute in attributes) {\n    if (attributes.hasOwnProperty(attribute)) {\n      chart.attr(attribute, attributes[attribute]);\n    }\n  }\n\n  $('.chart#' + attributes.id).css('padding', DEFAULT_PADDING + 'px');\n  return chart;\n};\n\n/**\n Creates x or y axis and auto scales them\n**/\njsplotlib.construct_axis = function() {\n  var axis_count = 0;\n  return function(parent_graph, x_or_y) {\n    var that = {};\n    that._id = \"axis\" + axis_count++;\n    that._will_draw_label = false;\n    that._will_draw_axis = true;\n    that._x_or_y = x_or_y;\n    that._size = 0;\n    that._label_offset = 0;\n    that._label_string = \"\";\n    if (x_or_y === \"x\") {\n      that._axis_proportion = 0.12;\n      that._label_proportion = 0.12;\n    } else if (x_or_y === \"y\") {\n      that._axis_proportion = 0.07;\n      that._label_proportion = 0.05;\n    } else {\n      throw \"Invalid axis type (must be x or y): \" + this._x_or_y;\n    }\n    that._proportion = that._axis_proportion;\n    that.n_ticks = 4;\n    that.set_n_ticks = function(n) {\n      this.n_ticks = n;\n    };\n    that.set_label = function(label_string) {\n      this._label_string = label_string;\n      this._will_draw_label = true;\n      this._proportion = this._axis_proportion + this._label_proportion;\n      return this;\n    };\n    that._turn_off = function() {\n      this._will_draw_axis = false;\n      return this;\n    };\n    that._turn_on = function() {\n      this._will_draw_axis = true;\n      return this;\n    };\n    that.set_bar_limits = function(minmaxplus) {\n      var min = minmaxplus[0];\n      var oldmax = minmaxplus[1];\n      var plus = minmaxplus[2];\n      var newmax;\n      if (oldmax instanceof Date) {\n        newmax = new Date(oldmax.getTime() + plus);\n      } else {\n        newmax = oldmax + plus;\n      }\n      this._set_data_range([min, newmax]);\n    };\n\n    that._set_data_range = function(minmax) {\n      this._min = minmax[0];\n      this._max = minmax[1];\n      if (this._min instanceof Date || this._max instanceof Date) {\n        this._scale = d3.time.scale();\n        this._min = new Date(this._min);\n        this._max = new Date(this._max);\n      } else {\n        this._scale = d3.scale.linear();\n      }\n      this._domain = [this._min, this._max];\n      return this;\n    };\n    that._set_formatter = function(formatter) {\n      this._formatter = formatter;\n      return this;\n    };\n    that.get_scale = function() {\n      if (this._x_or_y === \"x\") {\n        this._range = [parent_graph._yaxis._size, parent_graph._chartwidth];\n      } else if (this._x_or_y === \"y\") {\n        this._range = [parent_graph._height, parent_graph._title_size];\n      }\n      this._scale\n        .domain(this._domain)\n        .range(this._range);\n      return this._scale;\n    };\n    that._init = function(chart) {\n      var dimension;\n      if (this._will_draw_axis) {\n        if (this._x_or_y === \"x\") {\n          dimension = parent_graph._chartheight;\n        } else if (this._x_or_y === \"y\") {\n          dimension = parent_graph._chartwidth;\n        } else {\n          throw \"Invalid axis type (must be x or y): \" + this._x_or_y;\n        }\n        this._size = dimension * this._proportion;\n        this._label_offset = this._size * this._label_proportion;\n      } else {\n        this._size = 0;\n      }\n      return this;\n    };\n    that._compute_transform_string = function() {\n      var offset_h, offset_v;\n      var offset_label_h, offset_label_v;\n      var label_rotation = \"\";\n      if (this._x_or_y === \"x\") {\n        offset_h = 0;\n        offset_v = parent_graph._height;\n        offset_label_h = parent_graph._yaxis._size + parent_graph._chartwidth /\n          2;\n        offset_label_v = parent_graph._height + this._size - this._label_offset;\n        this._writing_mode = \"lr-tb\";\n        this._orientation = \"bottom\";\n      } else if (this._x_or_y === \"y\") {\n        offset_h = this._size;\n        offset_v = 0;\n        offset_label_h = this._label_offset;\n        offset_label_v = parent_graph._chartheight / 2;\n        label_rotation = \"rotate(180)\";\n        this._writing_mode = \"tb-rl\";\n        this._orientation = \"left\";\n      } else {\n        throw \"Invalid axis type (must be x or y): \" + this._x_or_y;\n      }\n      this._transform_string = \"translate(\" + offset_h + \",\" + offset_v +\n        \")scale(1,1)\";\n      this._label_transform_string = \"translate(\" + offset_label_h + \",\" +\n        offset_label_v + \")\" + label_rotation;\n    };\n    that._draw_axis = function() {\n      if (this._will_draw_axis) {\n        this._formatter = this._formatter || this.get_scale().tickFormat(this\n          .n_ticks);\n        this._compute_transform_string();\n        this._axis = d3.svg.axis().scale(this.get_scale()).ticks(this.n_ticks)\n          .orient(this._orientation).tickSubdivide(0).tickFormat(this._formatter);\n        parent_graph.chart.append(\"svg:g\").attr(\"id\", this._id).attr(\"class\",\n          this._x_or_y + \" axis\").attr(\"transform\", this._transform_string).call(\n          this._axis);\n      }\n    };\n    that._draw_label = function() {\n      this._compute_transform_string();\n      if (this._will_draw_axis && this._will_draw_label) {\n        parent_graph.chart.append(\"svg:g\").attr(\"class\", this._x_or_y +\n          \" axis_label\").attr(\"transform\", this._label_transform_string).append(\n          \"text\").append(\"tspan\").attr(\"text-anchor\", \"middle\").attr(\"class\",\n          this._x_or_y + \" axis_label\").attr(\"writing-mode\", this._writing_mode)\n          .text(this._label_string);\n      }\n    };\n    return that;\n  };\n}();\n\njsplotlib.parse_marker = function(style) {\n  if (!style) return \"x\";\n  switch (style) {\n    case '.':\n      return \".\";\n    case ',':\n      return \"x\";\n    case 'o':\n      return \"o\";\n    case 'v':\n      return \"x\";\n    case '^':\n      return \"x\";\n    case '<':\n      return \"x\";\n    case '>':\n      return \"x\";\n    case '1':\n      return \"x\";\n    case '2':\n      return \"x\";\n    case '3':\n      return \"x\";\n    case '4':\n      return \"x\";\n    case 's':\n      return \"s\";\n    case 'p':\n      return \"x\";\n    case '*':\n      return \"x\";\n    case 'h':\n      return \"x\";\n    case 'H':\n      return \"x\";\n    case '+':\n      return \"x\";\n    case 'x':\n      return \"x\";\n    case 'D':\n      return \"x\";\n    case 'd':\n      return \"x\";\n    case '|':\n      return \"x\";\n    case '_':\n      return \"x\";\n    default:\n      return \"\";\n  }\n};\n\n/**\nProcess a MATLAB style color/line style format string.  Return a\n(*linestyle*, *color*) tuple as a result of the processing.  Default\nvalues are ('-', 'b').  Example format strings include:\n\n* 'ko': black circles\n* '.b': blue dots\n* 'r--': red dashed lines\n\n.. seealso::\n\n\t:func:`~matplotlib.Line2D.lineStyles` and\n\t:func:`~matplotlib.pyplot.colors`\n\t\tfor all possible styles and color format string.\n**/\njsplotlib._process_plot_format = function(fmt) {\n  var linestyle = null;\n  var marker = null;\n  var color = null;\n\n  // Is fmt just a colorspec\n  try {\n    color = jsplotlib.to_rgb(fmt);\n    if (color) {\n      return {\n        'linestyle': linestyle,\n        'marker': marker,\n        'color': color\n      };\n    }\n  } catch (e) {}\n\n  // handle the multi char special cases and strip them for the string\n  if (fmt.search(/--/) >= 0) {\n    linestyle = '--';\n    fmt = fmt.replace(/--/, '');\n  }\n  if (fmt.search(/-\\./) >= 0) {\n    linestyle = '-.';\n    fmt = fmt.replace(/-\\./, '');\n  }\n  if (fmt.search(/ /) >= 0) {\n    linestyle = '';\n    fmt = fmt.replace(/ /, '');\n  }\n\n  var i;\n  for (i = 0; i < fmt.length; i++) {\n    var c = fmt.charAt(i);\n    if (jsplotlib.Line2D.lineStyles[c]) {\n      if (linestyle) {\n        throw new Sk.builtin.ValueError('Illegal format string \"' + fmt +\n          '\"; two linestyle symbols');\n      }\n      linestyle = c;\n    } else if (jsplotlib.Line2D.lineMarkers[c]) {\n      if (marker) {\n        throw new Sk.builtin.ValueError('Illegal format string \"' + fmt +\n          '\"; two marker symbols');\n      }\n      marker = c;\n    } else if (jsplotlib.colors[c]) {\n      if (color) {\n        throw new Sk.builtin.ValueError('Illegal format string \"' + fmt +\n          '\"; two color symbols');\n      }\n      color = c;\n    } else {\n      throw new Sk.builtin.ValueError('Unrecognized character ' + c +\n        ' in format string');\n    }\n  }\n\n  if (!linestyle && !marker) {\n    // use defaults --> rcParams['lines.linestyle']\n    linestyle = '-';\n  }\n  if (!linestyle) {\n    linestyle = ' ';\n  }\n  if (!marker) {\n    marker = '';\n  }\n\n  return {\n    'linestyle': linestyle,\n    'marker': marker,\n    'color': color\n  };\n};\n\n/**\n https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/colors.py\n http://matplotlib.org/api/colors_api.html\n\n  Returns an *RGB* tuple of three floats from 0-1.\n\n  *arg* can be an *RGB* or *RGBA* sequence or a string in any of\n  several forms:\n\n      1) a letter from the set 'rgbcmykw'\n      2) a hex color string, like '#00FFFF'\n      3) a standard name, like 'aqua'\n      4) a string representation of a float, like '0.4',\n         indicating gray on a 0-1 scale\n\n  if *arg* is *RGBA*, the *A* will simply be discarded.\n**/\njsplotlib.to_rgb = function(fmt) {\n  if (!fmt) return null;\n\n  var color = null;\n\n  if (typeof fmt == \"string\") {\n    fmt_lower = fmt.toLowerCase();\n\n    if (jsplotlib.colors[fmt_lower])\n      return jsplotlib.hex2color(jsplotlib.cnames[jsplotlib.colors[fmt_lower]]);\n\n    // is inside cnames array?\n    if (jsplotlib.cnames[fmt_lower])\n      return jsplotlib.hex2color(jsplotlib.cnames[fmt_lower]);\n\n    if (fmt_lower.indexOf('#') === 0) {\n      return jsplotlib.hex2color(fmt_lower);\n    }\n\n    // is it simple grey shade?\n    var fl = parseFloat(fmt_lower);\n    if (isNaN(fl)) {\n      throw new Sk.builtin.ValueError('cannot convert argument to rgb sequence');\n    }\n\n    if (fl < 0 || fl > 1) {\n      throw new Sk.builtin.ValueError('gray (string) must be in range 0-1');\n    }\n\n    return [fl, fl, fl];\n  }\n\n  // check if its a color tuple [r,g,b, [a]] with values from [0-1]\n  if (Array.isArray(fmt)) {\n    if (fmt.length > 4 || fmt.length < 3)\n      throw new Sk.builtin.ValueError('sequence length is ' + fmt.length +\n        '; must be 3 or 4');\n\n    color = fmt.slice(0, 3);\n    var i;\n\n    for (i = 0; i < 3; i++) {\n      var fl_rgb = parseFloat(fmt);\n\n      if (fl_rgb < 0 || fl_rgb > 1)\n        throw new Sk.builtin.ValueError(\n          'number in rbg sequence outside 0-1 range');\n    }\n  }\n\n  return color;\n};\n\n/**\n  Take a hex string *s* and return the corresponding rgb 3-tuple\n  Example: #efefef -> (0.93725, 0.93725, 0.93725)\n**/\njsplotlib.hex2color = function(s) {\n  if (!s || typeof s != \"string\") {\n    throw new Sk.builtin.TypeError(\"hex2color requires a string argument\");\n  }\n  // check if it is a hex value\n  var i;\n  var s_copy = s;\n  var hex_tuple = [];\n  for (i = 0; i < 3; i++) {\n    var match = s_copy.match(/(?:[0-9a-fA-F]){1,2}$/);\n    if (match && match.length === 1) {\n      hex_tuple.push(match[0]);\n      s_copy = s_copy.substring(0, match.index);\n    }\n  }\n  //var match = s.match(/^#(?:[0-9a-fA-F]{3}){1,2}$/);\n  if (hex_tuple.length === 3) {\n    // yeah positiv --> convert into right color spec\n    var color = [];\n    color[0] = parseInt(hex_tuple[0], 16) / 255.0;\n    color[1] = parseInt(hex_tuple[1], 16) / 255.0;\n    color[2] = parseInt(hex_tuple[2], 16) / 255.0;\n\n    return color.reverse();\n  } else {\n    throw new Sk.builtin.ValueError('invalid hex color string \"' + s + '\"');\n  }\n};\n\n/**\n  Expects and rgb tuple with values [0,1]\n**/\njsplotlib.rgb2hex = function(rgb) {\n  if (!rgb) return null;\n\n  if (rgb.length && rgb.length >= 3) {\n    var i;\n    // some hacky code to rebuild string format :(\n    var hex_str = '#';\n    for (i = 0; i < 3; i++) {\n      var val = Math.round(rgb[i] * 255).toString(16);\n      hex_str += val.length == 2 ? val : '0' + val;\n    }\n\n    return hex_str;\n  }\n};\n\njsplotlib.linspace = function(min, max, N) {\n  var newscale = d3.scale.linear().domain([1, N]).range([min, max]);\n  var data = [];\n  for (var i = 1; i <= N; i++) {\n    var output = newscale(i);\n    if (min instanceof Date) {\n      output = new Date(output);\n    }\n    data.push(output);\n  }\n  return data;\n};\n\njsplotlib.range = function(N) {\n  var l = [];\n  for (var i = 0; i < N; i++) {\n    l.push(i);\n  }\n  return l;\n};\n\njsplotlib.ones = function(N) {\n  var l = [];\n  for (var i = 0; i < N; i++) {\n    l.push(1);\n  }\n  return l;\n};\n\nvar $builtinmodule = function(name) {\n  var mod = {};\n  var chart;\n  var plot; // TODO, we should support multiple lines here\n  var canvas;\n\n\t// import numpy\n\tvar CLASS_NDARRAY = \"numpy.ndarray\"; // maybe make identifier accessible in numpy module\n\tvar np = Sk.importModule(\"numpy\");\n\tvar ndarray_f = np['$d'].array.func_code;\n\tvar getitem_f = np['$d'][CLASS_NDARRAY]['__getitem__'].func_code;\n\tvar ndarray = Sk.misceval.callsim(np['$d'].array.func_code, new Sk.builtin.list([1,2,3,4]));\n\n  var create_chart = function() {\n    /* test if Canvas ist available should be moved to create_chart function */\n    if (Sk.canvas === undefined) {\n      throw new Sk.builtin.NameError(\n        \"Can not resolve drawing area. Sk.canvas is undefined!\");\n    }\n\n    if (!chart) {\n      $('#' + Sk.canvas).empty();\n      chart = jsplotlib.make_chart(400, 400, \"#\" + Sk.canvas);\n    }\n  };\n\n  var plot_f = function(kwa) {\n    // http://matplotlib.org/api/pyplot_api.html\n    // http://matplotlib.org/api/artist_api.html#matplotlib.lines.Line2D\n    //debugger;\n    Sk.builtin.pyCheckArgs(\"plotk\", arguments, 1, Infinity, true, false);\n    args = Array.prototype.slice.call(arguments, 1);\n    kwargs = new Sk.builtins.dict(kwa); // is pretty useless for handling kwargs\n    kwargs = Sk.ffi.remapToJs(kwargs); // create a proper dict\n\n    // try parsing plot args\n    // possible xdata, ydata, stylestring\n    // or x1, y1, stylestring1, x2, y2, stylestring2\n    // or ydata, stylestring\n    /*\n\t\t\tplot(x, y)        # plot x and y using default line style and color\n\t\t\tplot(x, y, 'bo')  # plot x and y using blue circle markers\n\t\t\tplot(y)           # plot y using x as index array 0..N-1\n\t\t\tplot(y, 'r+')     # ditto, but with red plusses\n\t\t*/\n\n    // variable definitions for args\n    var xdata = [];\n    var ydata = [];\n    var stylestring = []; // we support only one at the moment\n    var i = 0;\n    var lines = 0;\n    var xdata_not_ydata_flag = true;\n\t\tvar slice = new Sk.builtin.slice(0, undefined, 1); // getting complete first dimension of ndarray\n\n    for (i = 0; i < args.length; i++) {\n      if (args[i] instanceof Sk.builtin.list || Sk.abstr.typeName(args[i]) === CLASS_NDARRAY) {\n\t\t\t\t// special treatment for ndarrays, though we allow basic lists too\n\t\t\t\tvar _unpacked;\n\t\t\t\tif(Sk.abstr.typeName(args[i]) === CLASS_NDARRAY) {\n\t\t\t\t\t// we get the first dimension, no 2-dim data\n\t\t\t\t\t_unpacked = Sk.ffi.unwrapn(args[i]);\n\t\t\t\t\tvar first_dim_size = 0;\n\t\t\t\t\tif(_unpacked && _unpacked.shape && _unpacked.shape[0]){\n\t\t\t\t\t\tfirst_dim_size = _unpacked.shape[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Sk.builtin.ValueError('args contain \"' + CLASS_NDARRAY + '\" without elements or malformed shape.');\n\t\t\t\t\t}\n\t\t\t\t\t_unpacked = _unpacked.buffer.slice(0, first_dim_size); // buffer array of first dimension\n          _unpacked = _unpacked.map(function(x) { return Sk.ffi.remapToJs(x);})\n\t\t\t\t} else {\n\t\t\t\t\t_unpacked = Sk.ffi.remapToJs(args[i]);\n\t\t\t\t}\n\n        // unwraps x and y, but no 2-dim-data\n        if (xdata_not_ydata_flag) {\n          xdata.push(_unpacked);\n          xdata_not_ydata_flag = false;\n        } else {\n          ydata.push(_unpacked);\n          xdata_not_ydata_flag = true;\n        }\n      } else if (Sk.builtin.checkString(args[i])) {\n        stylestring.push(Sk.ffi.remapToJs(args[i]));\n      } else {\n        throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(args[i]) +\n          \"' is not supported for *args[\" + i + \"].\");\n      }\n    }\n\n    /* handle special cases\n\t\t\tonly supplied y\n\t\t\tonly supplied 1 array and stylestring\n\t\t*/\n    if ((args.length === 1) || (args.length === 2 && (xdata.length === 1 &&\n      ydata.length === 0))) {\n      // only y supplied\n      xdata.forEach(function(element) {\n        ydata.push(element);\n      });\n      xdata[0] = [];\n    }\n\n    // empty canvas from previous plots\n    create_chart();\n    // create new plot instance, should be replaced with Line2D and then added to the plot\n    if (!plot) {\n      plot = jsplotlib.plot(chart);\n    }\n\n    // create line objects\n    var line;\n\n    if (xdata.length === 1 && ydata.length === 1 && stylestring.length === 0) {\n      // handle case for plot(x, y)\n      line = new jsplotlib.Line2D(xdata[0], ydata[0]);\n      plot.add_line(line);\n    } else if (xdata.length === ydata.length && xdata.length === stylestring.length) {\n      for (i = 0; i < xdata.length; i++) {\n        line = new jsplotlib.Line2D(xdata[i], ydata[i]);\n        var ftm_tuple = jsplotlib._process_plot_format(stylestring[i]);\n        line.update({\n          'linestyle': ftm_tuple.linestyle,\n          'marker': jsplotlib.parse_marker(ftm_tuple.marker),\n          'color': ftm_tuple.color\n        });\n\t\t\t\tplot.add_line(line);\n      }\n    } else {\n\t\t\tthrow new Sk.builtin.ValueError('Cannot parse given combination of \"*args\"!');\n\t\t}\n\n    // set kwargs that apply for all lines\n    plot.update(kwargs);\n\n    // result\n    var result = [];\n\n    return new Sk.builtins.tuple(result);\n  };\n  plot_f.co_kwargs = true;\n  mod.plot = new Sk.builtin.func(plot_f);\n\n  var show_f = function() {\n    // call drawing routine\n    if (plot && plot.draw) {\n      plot.draw();\n    } else {\n      throw new Sk.builtin.ValueError(\n        \"Can not call show without any plot created.\");\n    }\n\n    $('#' + Sk.canvas).show();\n  };\n  mod.show = new Sk.builtin.func(show_f);\n\n  var title_f = function(label, fontdict, loc) {\n    Sk.builtin.pyCheckArgs(\"title\", arguments, 1, 3);\n\n    if (!Sk.builtin.checkString(label)) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(label) +\n        \"' is not supported for title.\");\n    }\n\n    var label_unwrap = Sk.ffi.remapToJs(label);\n\n\t\tcreate_chart();\n    // create new plot instance, should be replaced with Line2D and then added to the plot\n    if (!plot) {\n      plot = jsplotlib.plot(chart);\n    }\n\n    if (plot && plot.title) {\n      plot.title(label_unwrap);\n    }\n\n    return new Sk.builtin.str(label_unwrap);\n  };\n\n  title_f.co_varnames = ['label', 'fontdict', 'loc', ];\n  title_f.$defaults = [null, Sk.builtin.none.none$, Sk.builtin.none.none$,\n    Sk.builtin.none.none$\n  ];\n  mod.title = new Sk.builtin.func(title_f);\n\n  var axis_f = function(label, fontdict, loc) {\n    Sk.builtin.pyCheckArgs(\"axis\", arguments, 0, 3);\n\n    // when called without any arguments it should return the current axis limits\n\n    if (plot && plot._axes) {\n      console.log(plot._axes);\n    }\n\n    // >>> axis(v)\n    // sets the min and max of the x and y axes, with\n    // ``v = [xmin, xmax, ymin, ymax]``.::\n\n    //The xmin, xmax, ymin, ymax tuple is returned\n    var res;\n\n    return Sk.ffi.remapToPy([]);\n  };\n\n  axis_f.co_varnames = ['label', 'fontdict', 'loc', ];\n  axis_f.$defaults = [null, Sk.builtin.none.none$, Sk.builtin.none.none$,\n    Sk.builtin.none.none$\n  ];\n  mod.axis = new Sk.builtin.func(axis_f);\n\n  var xlabel_f = function(s, fontdict, loc) {\n    Sk.builtin.pyCheckArgs(\"xlabel\", arguments, 1, 3);\n\n    if (!Sk.builtin.checkString(s)) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(s) +\n        \"' is not supported for s.\");\n    }\n\n\t\tcreate_chart();\n    // create new plot instance, should be replaced with Line2D and then added to the plot\n    if (!plot) {\n      plot = jsplotlib.plot(chart);\n    }\n\n    if (plot && plot.xlabel) {\n      plot.xlabel(Sk.ffi.remapToJs(s));\n    }\n  };\n\n  xlabel_f.co_varnames = ['s', 'fontdict', 'loc', ];\n  xlabel_f.$defaults = [null, Sk.builtin.none.none$, Sk.builtin.none.none$,\n    Sk.builtin.none.none$\n  ];\n  mod.xlabel = new Sk.builtin.func(xlabel_f);\n\n  var ylabel_f = function(s, fontdict, loc) {\n    Sk.builtin.pyCheckArgs(\"ylabel\", arguments, 1, 3);\n\n    if (!Sk.builtin.checkString(s)) {\n      throw new Sk.builtin.TypeError(\"'\" + Sk.abstr.typeName(s) +\n        \"' is not supported for s.\");\n    }\n\n\t\tcreate_chart();\n    // create new plot instance, should be replaced with Line2D and then added to the plot\n    if (!plot) {\n      plot = jsplotlib.plot(chart);\n    }\n\n    if (plot && plot.ylabel) {\n      plot.ylabel(Sk.ffi.remapToJs(s));\n    }\n  };\n\n  ylabel_f.co_varnames = ['s', 'fontdict', 'loc', ];\n  ylabel_f.$defaults = [null, Sk.builtin.none.none$, Sk.builtin.none.none$,\n    Sk.builtin.none.none$\n  ];\n  mod.ylabel = new Sk.builtin.func(ylabel_f);\n\n  // Clear the current figure\n  var clf_f = function() {\n    // clear all\n    chart = null;\n    plot = null;\n\n    if (Sk.canvas !== undefined) {\n      $('#' + Sk.canvas).empty();\n    }\n  };\n\n  mod.clf = new Sk.builtin.func(clf_f);\n\n  /* list of not implemented methods */\n  mod.findobj = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"findobj is not yet implemented\");\n  });\n  mod.switch_backend = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"switch_backend is not yet implemented\");\n  });\n  mod.isinteractive = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"isinteractive is not yet implemented\");\n  });\n  mod.ioff = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"ioff is not yet implemented\");\n  });\n  mod.ion = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"ion is not yet implemented\");\n  });\n  mod.pause = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"pause is not yet implemented\");\n  });\n  mod.rc = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"rc is not yet implemented\");\n  });\n  mod.rc_context = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"rc_context is not yet implemented\");\n  });\n  mod.rcdefaults = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"rcdefaults is not yet implemented\");\n  });\n  mod.gci = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"gci is not yet implemented\");\n  });\n  mod.sci = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"sci is not yet implemented\");\n  });\n  mod.xkcd = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"xkcd is not yet implemented\");\n  });\n  mod.figure = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"figure is not yet implemented\");\n  });\n  mod.gcf = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"gcf is not yet implemented\");\n  });\n  mod.get_fignums = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"get_fignums is not yet implemented\");\n  });\n  mod.get_figlabels = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"get_figlabels is not yet implemented\");\n  });\n  mod.get_current_fig_manager = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"get_current_fig_manager is not yet implemented\");\n  });\n  mod.connect = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"connect is not yet implemented\");\n  });\n  mod.disconnect = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"disconnect is not yet implemented\");\n  });\n  mod.close = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"close is not yet implemented\");\n  });\n  mod.savefig = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"savefig is not yet implemented\");\n  });\n  mod.ginput = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"ginput is not yet implemented\");\n  });\n  mod.waitforbuttonpress = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"waitforbuttonpress is not yet implemented\");\n  });\n  mod.figtext = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"figtext is not yet implemented\");\n  });\n  mod.suptitle = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"suptitle is not yet implemented\");\n  });\n  mod.figimage = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"figimage is not yet implemented\");\n  });\n  mod.figlegend = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"figlegend is not yet implemented\");\n  });\n  mod.hold = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"hold is not yet implemented\");\n  });\n  mod.ishold = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"ishold is not yet implemented\");\n  });\n  mod.over = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"over is not yet implemented\");\n  });\n  mod.delaxes = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"delaxes is not yet implemented\");\n  });\n  mod.sca = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"sca is not yet implemented\");\n  });\n  mod.gca = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"gca is not yet implemented\");\n  });\n  mod.subplot = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"subplot is not yet implemented\");\n  });\n  mod.subplots = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"subplots is not yet implemented\");\n  });\n  mod.subplot2grid = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"subplot2grid is not yet implemented\");\n  });\n  mod.twinx = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"twinx is not yet implemented\");\n  });\n  mod.twiny = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"twiny is not yet implemented\");\n  });\n  mod.subplots_adjust = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"subplots_adjust is not yet implemented\");\n  });\n  mod.subplot_tool = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"subplot_tool is not yet implemented\");\n  });\n  mod.tight_layout = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"tight_layout is not yet implemented\");\n  });\n  mod.box = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"box is not yet implemented\");\n  });\n  mod.xlim = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"xlim is not yet implemented\");\n  });\n  mod.ylim = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"ylim is not yet implemented\");\n  });\n  mod.xscale = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"xscale is not yet implemented\");\n  });\n  mod.yscale = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"yscale is not yet implemented\");\n  });\n  mod.xticks = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"xticks is not yet implemented\");\n  });\n  mod.yticks = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"yticks is not yet implemented\");\n  });\n  mod.minorticks_on = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"minorticks_on is not yet implemented\");\n  });\n  mod.minorticks_off = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"minorticks_off is not yet implemented\");\n  });\n  mod.rgrids = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"rgrids is not yet implemented\");\n  });\n  mod.thetagrids = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"thetagrids is not yet implemented\");\n  });\n  mod.plotting = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"plotting is not yet implemented\");\n  });\n  mod.get_plot_commands = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"get_plot_commands is not yet implemented\");\n  });\n  mod.colors = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"colors is not yet implemented\");\n  });\n  mod.colormaps = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"colormaps is not yet implemented\");\n  });\n  mod._setup_pyplot_info_docstrings = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"_setup_pyplot_info_docstrings is not yet implemented\");\n  });\n  mod.colorbar = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"colorbar is not yet implemented\");\n  });\n  mod.clim = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"clim is not yet implemented\");\n  });\n  mod.set_cmap = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"set_cmap is not yet implemented\");\n  });\n  mod.imread = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"imread is not yet implemented\");\n  });\n  mod.imsave = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"imsave is not yet implemented\");\n  });\n  mod.matshow = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"matshow is not yet implemented\");\n  });\n  mod.polar = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"polar is not yet implemented\");\n  });\n  mod.plotfile = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"plotfile is not yet implemented\");\n  });\n  mod._autogen_docstring = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"_autogen_docstring is not yet implemented\");\n  });\n  mod.acorr = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"acorr is not yet implemented\");\n  });\n  mod.arrow = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"arrow is not yet implemented\");\n  });\n  mod.axhline = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"axhline is not yet implemented\");\n  });\n  mod.axhspan = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"axhspan is not yet implemented\");\n  });\n  mod.axvline = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"axvline is not yet implemented\");\n  });\n  mod.axvspan = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"axvspan is not yet implemented\");\n  });\n  mod.bar = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"bar is not yet implemented\");\n  });\n  mod.barh = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"barh is not yet implemented\");\n  });\n  mod.broken_barh = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"broken_barh is not yet implemented\");\n  });\n  mod.boxplot = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"boxplot is not yet implemented\");\n  });\n  mod.cohere = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"cohere is not yet implemented\");\n  });\n  mod.clabel = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"clabel is not yet implemented\");\n  });\n  mod.contour = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"contour is not yet implemented\");\n  });\n  mod.contourf = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"contourf is not yet implemented\");\n  });\n  mod.csd = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"csd is not yet implemented\");\n  });\n  mod.errorbar = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"errorbar is not yet implemented\");\n  });\n  mod.eventplot = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"eventplot is not yet implemented\");\n  });\n  mod.fill = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"fill is not yet implemented\");\n  });\n  mod.fill_between = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"fill_between is not yet implemented\");\n  });\n  mod.fill_betweenx = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"fill_betweenx is not yet implemented\");\n  });\n  mod.hexbin = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"hexbin is not yet implemented\");\n  });\n  mod.hist = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"hist is not yet implemented\");\n  });\n  mod.hist2d = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"hist2d is not yet implemented\");\n  });\n  mod.hlines = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"hlines is not yet implemented\");\n  });\n  mod.loglog = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"loglog is not yet implemented\");\n  });\n  mod.magnitude_spectrum = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"magnitude_spectrum is not yet implemented\");\n  });\n  mod.pcolor = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"pcolor is not yet implemented\");\n  });\n  mod.pcolormesh = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"pcolormesh is not yet implemented\");\n  });\n  mod.phase_spectrum = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"phase_spectrum is not yet implemented\");\n  });\n  mod.pie = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"pie is not yet implemented\");\n  });\n  mod.plot_date = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"plot_date is not yet implemented\");\n  });\n  mod.psd = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"psd is not yet implemented\");\n  });\n  mod.quiver = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"quiver is not yet implemented\");\n  });\n  mod.quiverkey = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"quiverkey is not yet implemented\");\n  });\n  mod.scatter = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"scatter is not yet implemented\");\n  });\n  mod.semilogx = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"semilogx is not yet implemented\");\n  });\n  mod.semilogy = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"semilogy is not yet implemented\");\n  });\n  mod.specgram = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"specgram is not yet implemented\");\n  });\n  mod.stackplot = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"stackplot is not yet implemented\");\n  });\n  mod.stem = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"stem is not yet implemented\");\n  });\n  mod.step = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"step is not yet implemented\");\n  });\n  mod.streamplot = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"streamplot is not yet implemented\");\n  });\n  mod.tricontour = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"tricontour is not yet implemented\");\n  });\n  mod.tricontourf = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"tricontourf is not yet implemented\");\n  });\n  mod.tripcolor = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"tripcolor is not yet implemented\");\n  });\n  mod.triplot = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"triplot is not yet implemented\");\n  });\n  mod.vlines = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"vlines is not yet implemented\");\n  });\n  mod.xcorr = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"xcorr is not yet implemented\");\n  });\n  mod.barbs = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"barbs is not yet implemented\");\n  });\n  mod.cla = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"cla is not yet implemented\");\n  });\n  mod.grid = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"grid is not yet implemented\");\n  });\n  mod.legend = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"legend is not yet implemented\");\n  });\n  mod.table = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"table is not yet implemented\");\n  });\n  mod.text = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"text is not yet implemented\");\n  });\n  mod.annotate = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"annotate is not yet implemented\");\n  });\n  mod.ticklabel_format = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"ticklabel_format is not yet implemented\");\n  });\n  mod.locator_params = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"locator_params is not yet implemented\");\n  });\n  mod.tick_params = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"tick_params is not yet implemented\");\n  });\n  mod.margins = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"margins is not yet implemented\");\n  });\n  mod.autoscale = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"autoscale is not yet implemented\");\n  });\n  mod.autumn = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"autumn is not yet implemented\");\n  });\n  mod.cool = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"cool is not yet implemented\");\n  });\n  mod.copper = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"copper is not yet implemented\");\n  });\n  mod.flag = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"flag is not yet implemented\");\n  });\n  mod.gray = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"gray is not yet implemented\");\n  });\n  mod.hot = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"hot is not yet implemented\");\n  });\n  mod.hsv = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"hsv is not yet implemented\");\n  });\n  mod.jet = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\"jet is not yet implemented\");\n  });\n  mod.pink = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"pink is not yet implemented\");\n  });\n  mod.prism = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"prism is not yet implemented\");\n  });\n  mod.spring = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"spring is not yet implemented\");\n  });\n  mod.summer = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"summer is not yet implemented\");\n  });\n  mod.winter = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"winter is not yet implemented\");\n  });\n  mod.spectral = new Sk.builtin.func(function() {\n    throw new Sk.builtin.NotImplementedError(\n      \"spectral is not yet implemented\");\n  });\n\n  return mod;\n};\n", "src/builtin/this.py": "s = \"\"\"Gur Mra bs Clguba, ol Gvz Crgref\n\nOrnhgvshy vf orggre guna htyl.\nRkcyvpvg vf orggre guna vzcyvpvg.\nFvzcyr vf orggre guna pbzcyrk.\nPbzcyrk vf orggre guna pbzcyvpngrq.\nSyng vf orggre guna arfgrq.\nFcnefr vf orggre guna qrafr.\nErnqnovyvgl pbhagf.\nFcrpvny pnfrf nera'g fcrpvny rabhtu gb oernx gur ehyrf.\nNygubhtu cenpgvpnyvgl orngf chevgl.\nReebef fubhyq arire cnff fvyragyl.\nHayrff rkcyvpvgyl fvyraprq.\nVa gur snpr bs nzovthvgl, ershfr gur grzcgngvba gb thrff.\nGurer fubhyq or bar-- naq cersrenoyl bayl bar --boivbhf jnl gb qb vg.\nNygubhtu gung jnl znl abg or boivbhf ng svefg hayrff lbh'er Qhgpu.\nAbj vf orggre guna arire.\nNygubhtu arire vf bsgra orggre guna *evtug* abj.\nVs gur vzcyrzragngvba vf uneq gb rkcynva, vg'f n onq vqrn.\nVs gur vzcyrzragngvba vf rnfl gb rkcynva, vg znl or n tbbq vqrn.\nAnzrfcnprf ner bar ubaxvat terng vqrn -- yrg'f qb zber bs gubfr!\"\"\"\n\nd = {}\nfor c in (65, 97):\n    for i in range(26):\n        d[chr(i+c)] = chr((i+13) % 26 + c)\n\nprint \"\".join([d.get(c, c) for c in s])\n", "src/lib/webgl/primitives.js": "// most of this file is from 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n\n\n    /**\n     * AttribBuffer manages a TypedArray as an array of vectors.\n     *\n     * @param {number} numComponents Number of components per\n     *     vector.\n     * @param {number|!Array.<number>} numElements Number of vectors or the data.\n     * @param {string} opt_type The type of the TypedArray to\n     *     create. Default = 'Float32Array'.\n     * @param {!Array.<number>} opt_data The data for the array.\n     */\n    var AttribBuffer = function(\n            numComponents, numElements, opt_type) {\n        opt_type = opt_type || 'Float32Array';\n        var type = window[opt_type];\n        if (numElements.length) {\n            this.buffer = new type(numElements);\n            numElements = this.buffer.length / numComponents;\n            this.cursor = numElements;\n        } else {\n            this.buffer = new type(numComponents * numElements);\n            this.cursor = 0;\n        }\n        this.numComponents = numComponents;\n        this.numElements = numElements;\n        this.type = opt_type;\n    };\n\n    AttribBuffer.prototype.stride = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.offset = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.getElement = function(index) {\n        var offset = index * this.numComponents;\n        var value = [];\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            value.push(this.buffer[offset + ii]);\n        }\n        return value;\n    };\n\n    AttribBuffer.prototype.setElement = function(index, value) {\n        var offset = index * this.numComponents;\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            this.buffer[offset + ii] = value[ii];\n        }\n    };\n\n    AttribBuffer.prototype.clone = function() {\n        var copy = new AttribBuffer(\n                this.numComponents, this.numElements, this.type);\n        copy.pushArray(this);\n        return copy;\n    }\n\n    AttribBuffer.prototype.push = function(value) {\n        this.setElement(this.cursor++, value);\n    };\n\n    AttribBuffer.prototype.pushArray = function(array) {\n        //  this.buffer.set(array, this.cursor * this.numComponents);\n        //  this.cursor += array.numElements;\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            this.push(array.getElement(ii));\n        }\n    };\n\n    AttribBuffer.prototype.pushArrayWithOffset =\n    function(array, offset) {\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            var elem = array.getElement(ii);\n            for (var jj = 0; jj < offset.length; ++jj) {\n                elem[jj] += offset[jj];\n            }\n            this.push(elem);\n        }\n    };\n\n    /**\n    * Computes the extents\n    * @param {!AttribBuffer} positions The positions\n    * @return {!{min: !tdl.math.Vector3, max:!tdl.math.Vector3}}\n    *     The min and max extents.\n    */\n    AttribBuffer.prototype.computeExtents = function() {\n        var numElements = this.numElements;\n        var numComponents = this.numComponents;\n        var minExtent = this.getElement(0);\n        var maxExtent = this.getElement(0);\n        for (var ii = 1; ii < numElements; ++ii) {\n            var element = this.getElement(ii);\n            for (var jj = 0; jj < numComponents; ++jj) {\n                minExtent[jj] = Math.min(minExtent[jj], element[jj]);\n                maxExtent[jj] = Math.max(maxExtent[jj], element[jj]);\n            }\n        }\n        return {min: minExtent, max: maxExtent};\n    };\n\n\n    /**\n     * Creates the vertices and indices for a cube. The\n     * cube will be created around the origin. (-size / 2, size / 2)\n     *\n     * @param {number} size Width, height and depth of the cube.\n     * @return {!Object.<string, !tdl.primitives.AttribBuffer>} The\n     *         created plane vertices.\n     */\n    mod.createCube = new Sk.builtin.func(function(size)\n            {\n                var CUBE_FACE_INDICES_ = [\n                    [3, 7, 5, 1],\n                    [0, 4, 6, 2],\n                    [6, 7, 3, 2],\n                    [0, 1, 5, 4],\n                    [5, 7, 6, 4],\n                    [2, 3, 1, 0]\n                ];\n\n                var k = size / 2;\n\n                var cornerVertices = [\n                        [-k, -k, -k],\n                        [+k, -k, -k],\n                        [-k, +k, -k],\n                        [+k, +k, -k],\n                        [-k, -k, +k],\n                        [+k, -k, +k],\n                        [-k, +k, +k],\n                        [+k, +k, +k]\n                    ];\n\n                var faceNormals = [\n                        [+1, +0, +0],\n                        [-1, +0, +0],\n                        [+0, +1, +0],\n                        [+0, -1, +0],\n                        [+0, +0, +1],\n                        [+0, +0, -1]\n                    ];\n\n                var uvCoords = [\n                        [0, 0],\n                        [1, 0],\n                        [1, 1],\n                        [0, 1]\n                    ];\n\n                var numVertices = 6 * 4;\n                var positions = new AttribBuffer(3, numVertices);\n                var normals = new AttribBuffer(3, numVertices);\n                var texCoords = new AttribBuffer(2, numVertices);\n                var indices = new AttribBuffer(3, 6 * 2, 'Uint16Array');\n\n                for (var f = 0; f < 6; ++f) {\n                    var faceIndices = CUBE_FACE_INDICES_[f];\n                    for (var v = 0; v < 4; ++v) {\n                        var position = cornerVertices[faceIndices[v]];\n                        var normal = faceNormals[f];\n                        var uv = uvCoords[v];\n\n                        // Each face needs all four vertices because the normals and texture\n                        // coordinates are not all the same.\n                        positions.push(position);\n                        normals.push(normal);\n                        texCoords.push(uv);\n\n                    }\n                    // Two triangles make a square face.\n                    var offset = 4 * f;\n                    indices.push([offset + 0, offset + 1, offset + 2]);\n                    indices.push([offset + 0, offset + 2, offset + 3]);\n                }\n\n                return {\n                        position: positions,\n                        normal: normals,\n                        texCoord: texCoords,\n                        indices: indices\n                };\n            });\n\n    return mod;\n};\n", "src/lib/document/__init__.js": "var $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.getElementById = new Sk.builtin.func(function(id) {\n        var result = document.getElementById(id.v);\n        if (result) {\n            return Sk.misceval.callsim(mod.Element,result);\n        }\n        return Sk.builtin.none.none$;\n    });\n\n    mod.createElement = new Sk.builtin.func(function(eName) {\n            var r = document.createElement(eName.v);\n            if (r) {\n                return Sk.misceval.callsim(mod.Element,r);\n            }\n        });\n\n\n    mod.getElementsByTagName = new Sk.builtin.func(function(tag) {\n        var r = document.getElementsByTagName(tag.v)\n        var reslist = [];\n        for (var i = r.length - 1; i >= 0; i--) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]))\n        }\n        return new Sk.builtin.list(reslist)\n    });\n\n    mod.getElementsByClassName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByClassName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n    \n    mod.getElementsByName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n        \n    mod.currentDiv = new Sk.builtin.func(function() {\n        if (Sk.divid !== undefined) {\n            return new Sk.builtin.str(Sk.divid)\n        }\n        else {\n            throw new Sk.builtin.AttributeError(\"There is no value set for divid\");\n        }\n    })\n    var elementClass = function($gbl, $loc) {\n        /*\n            Notes:  self['$d'] is the dictionary used by the GenericGetAttr mechanism for an object.\n                    for various reasons  if you create a class in Javascript and have self.xxxx instance\n                    variables, you cannot say instance.xxx and get the value of the instance variable unless \n                    it is stored in the self['$d'] object.  This seems like a duplication of storage to me\n                    but that is how it works right now  (5/2013)\n\n                    Writing your own __getattr__ is also an option but this gets very tricky when an attr is \n                    a method...\n        */\n        $loc.__init__ = new Sk.builtin.func(function(self,elem) {\n            self.v = elem\n            self.innerHTML = elem.innerHTML\n            self.innerText = elem.innerText\n            if (elem.value !== undefined) {\n                self.value = elem.value\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('value'), new Sk.builtin.str(self.value))                \n            }\n\n            if (elem.checked !== undefined) {\n                self.checked = elem.checked\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('checked'), new Sk.builtin.str(self.checked))                \n            }\n\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), new Sk.builtin.str(self.innerHTML))\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), new Sk.builtin.str(self.innerText))            \n\n        })\n\n        $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n        $loc.__setattr__ = new Sk.builtin.func(function(self,key,value) {\n            if (key === 'innerHTML') {\n                self.innerHTML = value\n                self.v.innerHTML = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), value)                \n            }\n            if (key === 'innerText') {\n                self.innerText = value\n                self.v.innerText = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), value)            \n            }\n        });\n\n\n        $loc.appendChild = new Sk.builtin.func(function(self,ch) {\n            self.v.appendChild(ch.v);\n        });\n\n        $loc.removeChild = new Sk.builtin.func(function(self,node) {\n            self.v.removeChild(node.v)\n        })\n\n        // getCSS\n                    \n        $loc.getCSS = new Sk.builtin.func(function(self,key) {\n            return new Sk.builtin.str(self.v.style[key.v]);\n        });\n    \n\n        $loc.setCSS = new Sk.builtin.func(function(self,attr,value) {\n            self.v.style[attr.v] = value.v\n\n        })\n\n        $loc.getAttribute = new Sk.builtin.func(function(self,key) {\n            var res = self.v.getAttribute(key.v)\n            if (res) {\n                return new Sk.builtin.str(res)\n            } else {\n                return Sk.builtin.none.none$;\n            }\n        });\n\n        $loc.setAttribute = new Sk.builtin.func(function(self,attr,value) {\n                self.v.setAttribute(attr.v,value.v)\n        });\n            \n        $loc.getProperty = new Sk.builtin.func(function(self,key) {\n            var res = self.v[key.v]\n            if (res) {\n                return new Sk.builtin.str(res)\n            } else {\n                return Sk.builtin.none.none$;\n            }\n        });\n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            console.log(self.v.tagName);\n            return new Sk.builtin.str(self.v.tagName)\n        })\n\n        $loc.__repr__ = new Sk.builtin.func(function(self) {\n            return new Sk.builtin.str('[DOM Element]')\n        })\n\n    \n    };\n\n    mod.Element = Sk.misceval.buildClass(mod,elementClass,'Element', []);\n\n    return mod;\n\n}   ", "src/lib/webgl/matrix4.js": "// more from 'tdl'\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var temp0v3_ = new Float32Array(3);\n    var temp1v3_ = new Float32Array(3);\n    var temp2v3_ = new Float32Array(3);\n\n    var temp0v4_ = new Float32Array(4);\n    var temp1v4_ = new Float32Array(4);\n    var temp2v4_ = new Float32Array(4);\n\n    var temp0m4_ = new Float32Array(16);\n    var temp1m4_ = new Float32Array(16);\n    var temp2m4_ = new Float32Array(16);\n\n    var normalize = function(dst, a) {\n        var n = 0.0;\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            n += a[i] * a[i];\n        n = Math.sqrt(n);\n        if (n > 0.00001) {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = a[i] / n;\n        } else {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = 0;\n        }\n        return dst;\n    };\n\n    var cross = function(dst, a, b) {\n        dst[0] = a[1] * b[2] - a[2] * b[1];\n        dst[1] = a[2] * b[0] - a[0] * b[2];\n        dst[2] = a[0] * b[1] - a[1] * b[0];\n        return dst;\n    };\n\n    var subVector = function(dst, a, b) {\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            dst[i] = a[i] - b[i];\n        return dst;\n    };\n\n    var dot = function(a, b) {\n        return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\n    };\n\n    mod.lookAt = new Sk.builtin.func(function(view, eye, target, up)\n            {\n                var t0 = temp0v3_;\n                var t1 = temp1v3_;\n                var t2 = temp2v3_;\n\n                var vz = normalize(t0, subVector(t0, eye.v, target.v));\n                var vx = normalize(t1, cross(t1, up.v, vz));\n                var vy = cross(t2, vz, vx);\n\n                var dst = view.v;\n                dst[ 0] = vx[0];\n                dst[ 1] = vy[0];\n                dst[ 2] = vz[0];\n                dst[ 3] = 0;\n                dst[ 4] = vx[1];\n                dst[ 5] = vy[1];\n                dst[ 6] = vz[1];\n                dst[ 7] = 0;\n                dst[ 8] = vx[2];\n                dst[ 9] = vy[2];\n                dst[10] = vz[2];\n                dst[11] = 0;\n                dst[12] = -dot(vx, eye.v);\n                dst[13] = -dot(vy, eye.v);\n                dst[14] = -dot(vz, eye.v);\n                dst[15] = 1;\n\n                return view;\n            });\n\n    mod.perspective = new Sk.builtin.func(function(proj, angle, aspect, near, far)\n            {\n                var f = Math.tan(Math.PI * 0.5 - 0.5 * (angle * Math.PI / 180));\n                var rangeInv = 1.0 / (near - far);\n\n                var dst = proj.v;\n\n                dst[0]  = f / aspect;\n                dst[1]  = 0;\n                dst[2]  = 0;\n                dst[3]  = 0;\n\n                dst[4]  = 0;\n                dst[5]  = f;\n                dst[6]  = 0;\n                dst[7]  = 0;\n\n                dst[8]  = 0;\n                dst[9]  = 0;\n                dst[10] = (near + far) * rangeInv;\n                dst[11] = -1;\n\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = near * far * rangeInv * 2;\n                dst[15] = 0;\n\n                return proj;\n            });\n\n    // builds, not appending\n    mod.rotationY = new Sk.builtin.func(function(target, angle)\n            {\n                var dst = target.v;\n                var c = Math.cos(angle * Math.PI / 180);\n                var s = Math.sin(angle * Math.PI / 180);\n\n                dst[ 0] = c;\n                dst[ 1] = 0;\n                dst[ 2] = -s;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = s;\n                dst[ 9] = 0;\n                dst[10] = c;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n\n                return target;\n            });\n\n    mod.identity = new Sk.builtin.func(function(target)\n            {\n                var dst = target.v;\n                dst[ 0] = 1;\n                dst[ 1] = 0;\n                dst[ 2] = 0;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = 0;\n                dst[ 9] = 0;\n                dst[10] = 1;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n                return target;\n            });\n\n    // row major\n    mod.mul = new Sk.builtin.func(function(target, x, y)\n            {\n                var dst = target.v;\n                var a = x.v;\n                var b = y.v;\n                var a00 = a[0];\n                var a01 = a[1];\n                var a02 = a[2];\n                var a03 = a[3];\n                var a10 = a[ 4 + 0];\n                var a11 = a[ 4 + 1];\n                var a12 = a[ 4 + 2];\n                var a13 = a[ 4 + 3];\n                var a20 = a[ 8 + 0];\n                var a21 = a[ 8 + 1];\n                var a22 = a[ 8 + 2];\n                var a23 = a[ 8 + 3];\n                var a30 = a[12 + 0];\n                var a31 = a[12 + 1];\n                var a32 = a[12 + 2];\n                var a33 = a[12 + 3];\n                var b00 = b[0];\n                var b01 = b[1];\n                var b02 = b[2];\n                var b03 = b[3];\n                var b10 = b[ 4 + 0];\n                var b11 = b[ 4 + 1];\n                var b12 = b[ 4 + 2];\n                var b13 = b[ 4 + 3];\n                var b20 = b[ 8 + 0];\n                var b21 = b[ 8 + 1];\n                var b22 = b[ 8 + 2];\n                var b23 = b[ 8 + 3];\n                var b30 = b[12 + 0];\n                var b31 = b[12 + 1];\n                var b32 = b[12 + 2];\n                var b33 = b[12 + 3];\n                dst[ 0] = a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30;\n                dst[ 1] = a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31;\n                dst[ 2] = a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32;\n                dst[ 3] = a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33;\n                dst[ 4] = a10 * b00 + a11 * b10 + a12 * b20 + a13 * b30;\n                dst[ 5] = a10 * b01 + a11 * b11 + a12 * b21 + a13 * b31;\n                dst[ 6] = a10 * b02 + a11 * b12 + a12 * b22 + a13 * b32;\n                dst[ 7] = a10 * b03 + a11 * b13 + a12 * b23 + a13 * b33;\n                dst[ 8] = a20 * b00 + a21 * b10 + a22 * b20 + a23 * b30;\n                dst[ 9] = a20 * b01 + a21 * b11 + a22 * b21 + a23 * b31;\n                dst[10] = a20 * b02 + a21 * b12 + a22 * b22 + a23 * b32;\n                dst[11] = a20 * b03 + a21 * b13 + a22 * b23 + a23 * b33;\n                dst[12] = a30 * b00 + a31 * b10 + a32 * b20 + a33 * b30;\n                dst[13] = a30 * b01 + a31 * b11 + a32 * b21 + a33 * b31;\n                dst[14] = a30 * b02 + a31 * b12 + a32 * b22 + a33 * b32;\n                dst[15] = a30 * b03 + a31 * b13 + a32 * b23 + a33 * b33;\n                return target;\n            });\n\n    mod.invert = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                var m00 = m[0 * 4 + 0];\n                var m01 = m[0 * 4 + 1];\n                var m02 = m[0 * 4 + 2];\n                var m03 = m[0 * 4 + 3];\n                var m10 = m[1 * 4 + 0];\n                var m11 = m[1 * 4 + 1];\n                var m12 = m[1 * 4 + 2];\n                var m13 = m[1 * 4 + 3];\n                var m20 = m[2 * 4 + 0];\n                var m21 = m[2 * 4 + 1];\n                var m22 = m[2 * 4 + 2];\n                var m23 = m[2 * 4 + 3];\n                var m30 = m[3 * 4 + 0];\n                var m31 = m[3 * 4 + 1];\n                var m32 = m[3 * 4 + 2];\n                var m33 = m[3 * 4 + 3];\n                var tmp_0  = m22 * m33;\n                var tmp_1  = m32 * m23;\n                var tmp_2  = m12 * m33;\n                var tmp_3  = m32 * m13;\n                var tmp_4  = m12 * m23;\n                var tmp_5  = m22 * m13;\n                var tmp_6  = m02 * m33;\n                var tmp_7  = m32 * m03;\n                var tmp_8  = m02 * m23;\n                var tmp_9  = m22 * m03;\n                var tmp_10 = m02 * m13;\n                var tmp_11 = m12 * m03;\n                var tmp_12 = m20 * m31;\n                var tmp_13 = m30 * m21;\n                var tmp_14 = m10 * m31;\n                var tmp_15 = m30 * m11;\n                var tmp_16 = m10 * m21;\n                var tmp_17 = m20 * m11;\n                var tmp_18 = m00 * m31;\n                var tmp_19 = m30 * m01;\n                var tmp_20 = m00 * m21;\n                var tmp_21 = m20 * m01;\n                var tmp_22 = m00 * m11;\n                var tmp_23 = m10 * m01;\n\n                var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\n                    (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n                var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\n                    (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n                var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\n                    (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n                var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\n                    (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n\n                var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n\n                dst[ 0] = d * t0;\n                dst[ 1] = d * t1;\n                dst[ 2] = d * t2;\n                dst[ 3] = d * t3;\n                dst[ 4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\n                        (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\n                dst[ 5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\n                        (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\n                dst[ 6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\n                        (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\n                dst[ 7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\n                        (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\n                dst[ 8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\n                        (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\n                dst[ 9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\n                        (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\n                dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\n                        (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\n                dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\n                        (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\n                dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\n                        (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\n                dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\n                        (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\n                dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\n                        (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\n                dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\n                        (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\n                return target;\n            });\n\n    mod.transpose = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                for (var j = 0; j < 4; ++j) {\n                    for (var i = 0; i < 4; ++i)\n                    dst[j * 4 + i] = m[i * 4 + j];\n                }\n                return dst;\n            });\n\n    return mod;\n};\n", "src/lib/re/__init__.js": "var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // Constants (mostly unsupported)\n    mod.I = 2;\n    mod.IGNORECASE = 2;\n    // mod.L = 4;\n    // mod.LOCALE = 4;\n    mod.M = 8;\n    mod.MULTILINE = 8;\n    // mod.S = 16;\n    // mod.DOTALL = 16;\n    // mod.U = 32;\n    // mod.UNICODE = 32;\n    // mod.X = 64;\n    // mod.VERBOSE = 64;\n\n    var validGroups = [\"(?:\", \"(?=\", \"(?!\"];\n\n    var convert = function(pattern) {\n        var newpattern;\n        var match;\n        var i;\n\n        // Look for disallowed constructs\n        match = pattern.match(/\\(\\?./g);\n        if (match) {\n            for (i=0; i<match.length; i++) {\n                if (validGroups.indexOf(match[i]) == -1) {\n                    throw new Sk.builtin.ValueError(\"Disallowed group in pattern: '\"\n                                                    + match[i] + \"'\");\n                };\n            };\n        };\n\n        newpattern = pattern.replace('/\\\\/g', '\\\\\\\\');\n        newpattern = pattern.replace(/([^\\\\]){,(?![^\\[]*\\])/g, '$1{0,');\n\n        return newpattern;\n    };\n\n    var getFlags = function(flags) {\n        var jsflags = \"g\";\n        if ((flags & mod.IGNORECASE) == mod.IGNORECASE) {\n            jsflags += \"i\";\n        };\n        if ((flags & mod.MULTILINE) == mod.MULTILINE) {\n            jsflags += \"m\";\n        }; \n        return jsflags;\n    };\n\n    mod.split = Sk.nativejs.func(function split(pattern, string, maxsplit, flags) {\n        Sk.builtin.pyCheckArgs(\"split\", arguments, 2, 4);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError(\"pattern must be a string\");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError(\"string must be a string\");\n        };\n        if (maxsplit === undefined) {\n            maxsplit = 0;\n        };\n        if (!Sk.builtin.checkNumber(maxsplit)) {\n            throw new Sk.builtin.TypeError(\"maxsplit must be a number\");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError(\"flags must be a number\");\n        };\n\n\tmaxsplit = Sk.builtin.asnum$(maxsplit);\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print(\"Pat: \" + pat);\n        //print(\"Str: \" + str);\n\n        var captured = !(pat.match(/^\\(.*\\)$/) === null);\n        //print(\"Captured: \", captured);\n\n        var jsflags = getFlags(flags);\n        //print(\"Flags: \", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n        var result = [];\n        var match;\n        var index = 0;\n        var splits = 0;\n        while ((match = regex.exec(str)) != null) {\n            //print(\"Matched '\" + match[0] + \"' at position \" + match.index + \n            //      \"; next search at \" + regex.lastIndex);\n            if (match.index === regex.lastIndex) {\n                // empty match\n                break;\n            };\n            result.push(new Sk.builtin.str(str.substring(index, match.index)));\n            if (captured) {\n                // Add matching pattern, too\n                result.push(new Sk.builtin.str(match[0]));\n            };\n            index = regex.lastIndex;\n            splits += 1;\n            if (maxsplit && (splits >= maxsplit)) {\n                break;\n            };\n        };\n        result.push(new Sk.builtin.str(str.substring(index)));\n\n        return new Sk.builtin.list(result);\n    });\n\n    mod.findall = Sk.nativejs.func(function findall(pattern, string, flags) {\n        Sk.builtin.pyCheckArgs(\"findall\", arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError(\"pattern must be a string\");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError(\"string must be a string\");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError(\"flags must be a number\");\n        };\n\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print(\"Pat: \" + pat);\n        //print(\"Str: \" + str);\n\n        var jsflags = getFlags(flags);\n        //print(\"Flags: \", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n        if (pat.match(/\\$/)) {\n\t    var newline_at_end = new RegExp(/\\n$/);\n\t    if (str.match(newline_at_end)) {\n\t        str = str.slice(0,-1);\n\t    }\n        }\n\n        var result = [];\n        var match;\n        while ((match = regex.exec(str)) != null) {\n            //print(\"Matched '\" + match[0] + \"' at position \" + match.index + \n            //      \"; next search at \" + regex.lastIndex);\n            // print(\"match: \" + JSON.stringify(match));\n            if (match.length < 2) {\n                result.push(new Sk.builtin.str(match[0]));\n            } else if (match.length == 2) {\n                result.push(new Sk.builtin.str(match[1]));\n            } else {\n                var groups = [];\n                for (var i=1; i<match.length; i++) {\n                    groups.push(new Sk.builtin.str(match[i]));  \n                };\n                result.push(new Sk.builtin.tuple(groups));\n            };\n            if (match.index === regex.lastIndex) {\n                regex.lastIndex += 1;\n            };\n        };\n\n        return new Sk.builtin.list(result);\n    });\n\n\n    var matchobj = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,thematch, pattern, string) {\n            self.thematch = thematch;\n\t    self.re = pattern;\n\t    self.string = string;\n        });\n\n\t$loc.groups = new Sk.builtin.func(function(self) {\n\t    return new Sk.builtin.tuple(self.thematch.v.slice(1))\n\t});\n\n\t$loc.group = new Sk.builtin.func(function(self,grpnum) {\n\t    if (grpnum === undefined) {\n                grpnum = 0;\n            }\n            else {\n                grpnum = Sk.builtin.asnum$(grpnum);\n            }\n\t    if(grpnum >= self.thematch.v.length) {\n\t\tthrow new Sk.builtin.IndexError(\"Index out of range: \" + grpnum);\n\t\t}\n\t    return self.thematch.v[grpnum]\n\t});\n\n    }\n\n    mod.MatchObject = Sk.misceval.buildClass(mod, matchobj, 'MatchObject', []);\n\n    // Internal function to return a Python list of strings \n    // From a JS regular expression string\n    mod._findre = function(res, string) {\n\tres = res.replace(/([^\\\\]){,(?![^\\[]*\\])/g, '$1{0,');\n        var re = eval(res);\n\tvar patt = new RegExp('\\n$');\n\tif (string.v.match(patt))\n\t    var matches = string.v.slice(0,-1).match(re);\n\telse\n            var matches = string.v.match(re);\n        retval = new Sk.builtin.list();\n        if ( matches == null ) return retval;\n        for (var i = 0; i < matches.length; ++i) {\n            var sitem = new Sk.builtin.str(matches[i]);\n            retval.v.push(sitem);\n        }\n        return retval;\n    }\n\n    mod.search = new Sk.builtin.func(function(pattern, string, flags) {\n\tSk.builtin.pyCheckArgs('search', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError(\"pattern must be a string\");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError(\"string must be a string\");\n        };\n\tif (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError(\"flags must be a number\");\n        };\n        var res = \"/\"+pattern.v.replace(/\\//g,\"\\\\/\")+\"/\";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    mod.match = new Sk.builtin.func(function(pattern, string, flags) {\n\tSk.builtin.pyCheckArgs('match', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError(\"pattern must be a string\");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError(\"string must be a string\");\n        };\n\tif (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError(\"flags must be a number\");\n        };\n        var res = \"/^\"+pattern.v.replace(/\\//g,\"\\\\/\")+\"/\";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    return mod;\n}\n", "src/lib/unittest/gui.py": "import document\nfrom unittest import TestCase\n\nclass TestCaseGui(TestCase):\n\tdef __init__(self):\n\t\tTestCase.__init__(self)\n\n\t\tself.divid = document.currentDiv()\n\t\tself.mydiv = document.getElementById(self.divid)\n\t\tres = document.getElementById(self.divid+'_unit_results')\n\t\tif res:\n\t\t\tself.resdiv = res\n\t\t\tres.innerHTML = ''\n\t\telse:\n\t\t\tself.resdiv = document.createElement('div')\n\t\t\tself.resdiv.setAttribute('id',self.divid+'_unit_results')\n\t\t\tself.resdiv.setAttribute('class','unittest-results')\n\t\tself.mydiv.appendChild(self.resdiv)\n\n\n\tdef main(self):\n\t\tl = document.createElement('ul')\n\t\tself.resdiv.appendChild(l)\n\t\tself.resList = l\n\n\t\tfor func in self.tlist:\n\t\t\ttry:\n\t\t\t\tself.setup()\n\t\t\t\tfunc()\n\t\t\t\tself.tearDown()\n\t\t\texcept:\n\t\t\t\tself.appendResult('Error')\n\t\t\t\tself.numFailed += 1\n\t\tself.showSummary()\n\n\tdef appendResult(self,res,actual,expected,feedback):\n\t\tif res == 'Error':\n\t\t\tmsg = 'Error'\n\t\telif res:\n\t\t\tmsg = 'Pass'\n\t\t\tself.numPassed += 1\n\t\telse:\n\t\t\tmsg = 'Fail: expected %s  %s ' % (str(actual),str(expected)) + feedback\n\t\t\tself.numFailed += 1\n\n\t\tpTag = document.createElement('li')\n\t\tpTag.innerHTML = msg\n\t\tself.resList.appendChild(pTag)\n\n\n\n\tdef showSummary(self):\n\t\tpct = self.numPassed / (self.numPassed+self.numFailed) * 100\n\t\tpTag = document.createElement('p')\n\t\tpTag.innerHTML = \"You passed: \" + str(pct) + \"% of the tests\"\n\t\tself.resdiv.appendChild(pTag)\n\t\tif pct < 90:\n\t\t\tself.resdiv.setCSS('background-color','#de8e96')\n\t\telse:\n\t\t\tself.resdiv.setCSS('background-color','#83d382')\n", "src/lib/urllib/__init__.js": "var $builtinmodule = function(name)\n{\n  var urllib = {};\n\n  return urllib;\n};\n", "src/lib/random/__init__.js": "\n/*\n  I've wrapped Makoto Matsumoto and Takuji Nishimura's code in a namespace\n  so it's better encapsulated. Now you can have multiple random number generators\n  and they won't stomp all over eachother's state.\n  \n  If you want to use this as a substitute for Math.random(), use the random()\n  method like so:\n  \n  var m = new MersenneTwister();\n  var randomNumber = m.random();\n  \n  You can also call the other genrand_{foo}() methods on the instance.\n\n  If you want to use a specific seed in order to get a repeatable random\n  sequence, pass an integer into the constructor:\n\n  var m = new MersenneTwister(123);\n\n  and that will always produce the same random sequence.\n\n  Sean McCullough (banksean@gmail.com)\n*/\n\n/* \n   A C-program for MT19937, with initialization improved 2002/1/26.\n   Coded by Takuji Nishimura and Makoto Matsumoto.\n \n   Before using, initialize the state by using init_genrand(seed)  \n   or init_by_array(init_key, key_length).\n \n   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,\n   All rights reserved.                          \n \n   Redistribution and use in source and binary forms, with or without\n   modification, are permitted provided that the following conditions\n   are met:\n \n     1. Redistributions of source code must retain the above copyright\n        notice, this list of conditions and the following disclaimer.\n \n     2. Redistributions in binary form must reproduce the above copyright\n        notice, this list of conditions and the following disclaimer in the\n        documentation and/or other materials provided with the distribution.\n \n     3. The names of its contributors may not be used to endorse or promote \n        products derived from this software without specific prior written \n        permission.\n \n   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n   \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n \n \n   Any feedback is very welcome.\n   http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html\n   email: m-mat @ math.sci.hiroshima-u.ac.jp (remove space)\n*/\n\nvar MersenneTwister = function(seed) {\n  if (seed == undefined) {\n    seed = new Date().getTime();\n  } \n  /* Period parameters */  \n  this.N = 624;\n  this.M = 397;\n  this.MATRIX_A = 0x9908b0df;   /* constant vector a */\n  this.UPPER_MASK = 0x80000000; /* most significant w-r bits */\n  this.LOWER_MASK = 0x7fffffff; /* least significant r bits */\n \n  this.mt = new Array(this.N); /* the array for the state vector */\n  this.mti=this.N+1; /* mti==N+1 means mt[N] is not initialized */\n\n  this.init_genrand(seed);\n}  \n \n/* initializes mt[N] with a seed */\nMersenneTwister.prototype.init_genrand = function(s) {\n  this.mt[0] = s >>> 0;\n  for (this.mti=1; this.mti<this.N; this.mti++) {\n      var s = this.mt[this.mti-1] ^ (this.mt[this.mti-1] >>> 30);\n   this.mt[this.mti] = (((((s & 0xffff0000) >>> 16) * 1812433253) << 16) + (s & 0x0000ffff) * 1812433253)\n  + this.mti;\n      /* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */\n      /* In the previous versions, MSBs of the seed affect   */\n      /* only MSBs of the array mt[].                        */\n      /* 2002/01/09 modified by Makoto Matsumoto             */\n      this.mt[this.mti] >>>= 0;\n      /* for >32 bit machines */\n  }\n}\n \n/* initialize by an array with array-length */\n/* init_key is the array for initializing keys */\n/* key_length is its length */\n/* slight change for C++, 2004/2/26 */\nMersenneTwister.prototype.init_by_array = function(init_key, key_length) {\n  var i, j, k;\n  this.init_genrand(19650218);\n  i=1; j=0;\n  k = (this.N>key_length ? this.N : key_length);\n  for (; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30)\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1664525) << 16) + ((s & 0x0000ffff) * 1664525)))\n      + init_key[j] + j; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++; j++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n    if (j>=key_length) j=0;\n  }\n  for (k=this.N-1; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30);\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1566083941) << 16) + (s & 0x0000ffff) * 1566083941))\n      - i; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n  }\n\n  this.mt[0] = 0x80000000; /* MSB is 1; assuring non-zero initial array */ \n}\n \n/* generates a random number on [0,0xffffffff]-interval */\nMersenneTwister.prototype.genrand_int32 = function() {\n  var y;\n  var mag01 = new Array(0x0, this.MATRIX_A);\n  /* mag01[x] = x * MATRIX_A  for x=0,1 */\n\n  if (this.mti >= this.N) { /* generate N words at one time */\n    var kk;\n\n    if (this.mti == this.N+1)   /* if init_genrand() has not been called, */\n      this.init_genrand(5489); /* a default initial seed is used */\n\n    for (kk=0;kk<this.N-this.M;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+this.M] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    for (;kk<this.N-1;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+(this.M-this.N)] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    y = (this.mt[this.N-1]&this.UPPER_MASK)|(this.mt[0]&this.LOWER_MASK);\n    this.mt[this.N-1] = this.mt[this.M-1] ^ (y >>> 1) ^ mag01[y & 0x1];\n\n    this.mti = 0;\n  }\n\n  y = this.mt[this.mti++];\n\n  /* Tempering */\n  y ^= (y >>> 11);\n  y ^= (y << 7) & 0x9d2c5680;\n  y ^= (y << 15) & 0xefc60000;\n  y ^= (y >>> 18);\n\n  return y >>> 0;\n}\n \n/* generates a random number on [0,0x7fffffff]-interval */\nMersenneTwister.prototype.genrand_int31 = function() {\n  return (this.genrand_int32()>>>1);\n}\n \n/* generates a random number on [0,1]-real-interval */\nMersenneTwister.prototype.genrand_real1 = function() {\n  return this.genrand_int32()*(1.0/4294967295.0); \n  /* divided by 2^32-1 */ \n}\n\n/* generates a random number on [0,1)-real-interval */\nMersenneTwister.prototype.random = function() {\n  return this.genrand_int32()*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on (0,1)-real-interval */\nMersenneTwister.prototype.genrand_real3 = function() {\n  return (this.genrand_int32() + 0.5)*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on [0,1) with 53-bit resolution*/\nMersenneTwister.prototype.genrand_res53 = function() { \n  var a=this.genrand_int32()>>>5, b=this.genrand_int32()>>>6; \n  return(a*67108864.0+b)*(1.0/9007199254740992.0); \n} \n\n/* These real versions are due to Isaku Wada, 2002/01/09 added */\n\n\n\nvar $builtinmodule = function(name)\n{\n\n    var mod = {};\n\n    var myGenerator = new MersenneTwister();\n\n    mod.seed = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"seed\", arguments, 0, 1);\n\tx = Sk.builtin.asnum$(x);\n\n        if (arguments.length > 0)\n            myGenerator = new MersenneTwister(x);\n        else\n            myGenerator = new MersenneTwister();\n\n\treturn Sk.builtin.none.none$;\n    });\n\n    mod.random = new Sk.builtin.func(function() {\n        Sk.builtin.pyCheckArgs(\"random\", arguments, 0, 0);\n\n\treturn new Sk.builtin.nmber(myGenerator.genrand_res53(), Sk.builtin.nmber.float$);\n    });\n\n    var toInt = function(num) {\n        return num | 0;\n    };\n\n    var randrange = function(start, stop, step) {\n        // Ported from CPython 2.7\n        var width, n, ret;\n\n        if (!Sk.builtin.checkInt(start)) {\n            throw new Sk.builtin.ValueError(\"non-integer first argument for randrange()\");\n        };\n\n        if (stop === undefined) {\n            // Random in [0, start)\n            ret = toInt(myGenerator.genrand_res53() * start);\n\t    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n        };\n\n        if (!Sk.builtin.checkInt(stop)) {\n            throw new Sk.builtin.ValueError(\"non-integer stop for randrange()\");\n        };\n\n        if (step === undefined) {\n            step = 1;\n        };\n\n        width = stop - start;\n\n        if ((step == 1) && (width > 0)) {\n            // Random in [start, stop), must use toInt on product for correct results with negative ranges\n            ret = start + toInt(myGenerator.genrand_res53() * width);\n\t    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n        };\n\n        if (step == 1) {\n            throw new Sk.builtin.ValueError(\"empty range for randrange() (\" + start + \", \" + stop + \", \" + width + \")\");\n        };\n\n        if (!Sk.builtin.checkInt(step)) {\n            throw new Sk.builtin.ValueError(\"non-integer step for randrange()\");\n        };\n\n        if (step > 0) {\n            n = toInt((width + step - 1) / step);\n        } else if (step < 0) {\n            n = toInt((width + step + 1) / step);\n        } else {\n            throw new Sk.builtin.ValueError(\"zero step for randrange()\");\n        };\n\n        if (n <= 0) {\n            throw new Sk.builtin.ValueError(\"empty range for randrange()\");\n        };\n\n        // Random in range(start, stop, step)\n        ret = start + (step * toInt(myGenerator.genrand_res53() * n));\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n    };\n\n    mod.randint = new Sk.builtin.func(function(a, b) {\n        Sk.builtin.pyCheckArgs(\"randint\", arguments, 2, 2);\n\n\ta = Sk.builtin.asnum$(a);\n\tb = Sk.builtin.asnum$(b);\n        return randrange(a, b+1);\n    });\n\n    mod.randrange = new Sk.builtin.func(function(start, stop, step) {\n        Sk.builtin.pyCheckArgs(\"randrange\", arguments, 1, 3);\n\n\tstart = Sk.builtin.asnum$(start);\n\tstop = Sk.builtin.asnum$(stop);\n\tstep = Sk.builtin.asnum$(step);\n        return randrange(start, stop, step);\n    });\n\n    mod.choice = new Sk.builtin.func(function(seq) {\n        Sk.builtin.pyCheckArgs(\"choice\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"seq\", \"sequence\", Sk.builtin.checkSequence(seq));\n\n        if (seq.sq$length !== undefined) {\n            var r = toInt(myGenerator.genrand_res53() * seq.sq$length());\n            return seq.mp$subscript(r);\n        } else {\n            throw new Sk.builtin.TypeError(\"object has no length\");\n        }\n    });\n\n    mod.shuffle = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"shuffle\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"sequence\", Sk.builtin.checkSequence(x));\n\n        if (x.sq$length !== undefined) {\n            if (x.mp$ass_subscript !== undefined) {\n                for (var i = x.sq$length() - 1; i > 0; i -= 1) {\n                    var r = toInt(myGenerator.genrand_res53() * (i + 1));\n                    var tmp = x.mp$subscript(r);\n                    x.mp$ass_subscript(r, x.mp$subscript(i));\n                    x.mp$ass_subscript(i, tmp);\n                };\n            } else {\n                throw new Sk.builtin.TypeError(\"object is immutable\");\n            };\n        } else {\n            throw new Sk.builtin.TypeError(\"object has no length\");\n        };        \n\n\treturn Sk.builtin.none.none$;\n    });\n\n    return mod;\n}\n", "src/lib/webgl/__init__.js": "var $builtinmodule = function(name)\n{\n  var mod = {};\n\n  var makeFailHTML = function(msg) {\n    return '' +\n      '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\n      '<td align=\"center\">' +\n      '<div style=\"display: table-cell; vertical-align: middle;\">' +\n      '<div style=\"\">' + msg + '</div>' +\n      '</div>' +\n      '</td></tr></table>';\n  };\n\n  var GET_A_WEBGL_BROWSER = '' +\n    'This page requires a browser that supports WebGL.<br/>' +\n    '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\n\n  var NEED_HARDWARE = '' +\n    \"It doesn't appear your computer can support WebGL.<br/>\" +\n    '<a href=\"http://get.webgl.org\">Click here for more information.</a>';\n  \n  var create3DContext = function(canvas) {\n    var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n    var gl = null;\n    for (var ii = 0; ii < names.length; ++ii) {\n      try {\n        gl = canvas.getContext(names[ii]);\n      }\n      catch(e) {\n      }\n      if (gl) {\n          break;\n      }\n    }\n    if (gl) {\n      // Disallow selection by default. This keeps the cursor from changing to an\n      // I-beam when the user clicks and drags. It's easier on the eyes.\n      function returnFalse() {\n        return false;\n      }\n\n      canvas.onselectstart = returnFalse;\n      canvas.onmousedown = returnFalse;\n    }\n    return gl;\n  };\n\n  var setupWebGL = function(canvasContainerId, opt_canvas) {\n    var container = document.getElementById(canvasContainerId);\n    var context;\n    if (!opt_canvas) {\n      opt_canvas = container.getElementsByTagName(\"canvas\")[0];\n    }\n    if (!opt_canvas) {\n        // this browser doesn't support the canvas tag at all. Not even 2d.\n      container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      return;\n    }\n\n    var gl = create3DContext(opt_canvas);\n    if (!gl) {\n      // TODO(gman): fix to official way to detect that it's the user's machine, not the browser.\n      var browserStrings = navigator.userAgent.match(/(\\w+\\/.*? )/g);\n      var browsers = {};\n      try {\n        for (var b = 0; b < browserStrings.length; ++b) {\n          var parts = browserStrings[b].match(/(\\w+)/g);\n          var bb = [];\n          for (var ii = 1; ii < parts.length; ++ii) {\n            bb.push(parseInt(parts[ii]));\n          }\n          browsers[parts[0]] = bb;\n        }\n      }\n      catch (e) {\n      }\n      if (browsers.Chrome &&\n           (browsers.Chrome[0] > 7 ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] > 0) ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] == 0 && browsers.Chrome[2] >= 521))) {\n        container.innerHTML = makeFailHTML(NEED_HARDWARE);\n      }\n      else {\n        container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      }\n    }\n    return gl;\n  };\n\n  /**\n   * The Context encapsulates the underlying WebGL native JavaScript API.\n   */\n  mod.Context = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(\n      function(self, canvasid) {\n        var canvas = document.getElementById(canvasid.v);\n        var gl = setupWebGL(canvasid.v, canvas)\n        if (!gl) {\n          throw new Error(\"Your browser does not appear to support WebGL.\");\n        }\n\n        self.gl = gl;\n\n        // Copy symbolic constants and functions from native WebGL, encapsulating where necessary.       \n        for (var k in gl.__proto__) {\n          if (typeof gl.__proto__[k] === 'number') {\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), gl.__proto__[k]);\n          }\n          else if (typeof gl.__proto__[k] === \"function\") {\n            switch(k) {\n              case 'bufferData': {\n              }\n              break;\n              case 'clearColor': {\n              }\n              break;\n              case 'drawArrays': {\n              }\n              break;\n              case 'getAttribLocation': {\n              }\n              break;\n              case 'getUniformLocation': {\n              }\n              break;\n              case 'shaderSource': {\n              }\n              break;\n              case 'uniformMatrix4fv': {\n              }\n              break;\n              case 'vertexAttribPointer': {\n              }\n              break;\n              case 'viewport': {\n              }\n              break;\n              default: {\n                (function(key) {\n                  Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), new Sk.builtin.func(function() {\n                    var f = gl.__proto__[key];\n                    return f.apply(gl, arguments);\n                  }));\n                 }(k));\n              }\n            }\n          }\n        }\n\n        gl.clearColor(100.0/255.0, 149.0/255.0, 237.0/255.0, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n    );\n\n    $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n    $loc.bufferData = new Sk.builtin.func(\n      function(self, target, data, usage) {\n        self.gl.bufferData(target, data.v, usage);\n      }\n    );\n\n    $loc.clearColor = new Sk.builtin.func(\n      function(self, red, green, blue, alpha) {\n        self.gl.clearColor(Sk.builtin.asnum$(red), Sk.builtin.asnum$(green), Sk.builtin.asnum$(blue), Sk.builtin.asnum$(alpha));\n      }\n    );\n\n    $loc.getAttribLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getAttribLocation(program, name.v);\n      }\n    );\n\n    $loc.getUniformLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getUniformLocation(program, name.v);\n      }\n    );\n\n    $loc.shaderSource = new Sk.builtin.func(\n      function(self, shader, src) {\n        self.gl.shaderSource(shader, src.v);\n      }\n    );\n\n    $loc.drawArrays = new Sk.builtin.func(\n      function(self, mode, first, count) {\n        self.gl.drawArrays(Sk.builtin.asnum$(mode), Sk.builtin.asnum$(first), Sk.builtin.asnum$(count));\n      }\n    );\n\n    $loc.vertexAttribPointer = new Sk.builtin.func(\n      function(self, index, size, type, normalized, stride, dunno) {\n        self.gl.vertexAttribPointer(index, Sk.builtin.asnum$(size), Sk.builtin.asnum$(type), normalized, Sk.builtin.asnum$(stride), Sk.builtin.asnum$(dunno));\n      }\n    );\n\n    $loc.viewport = new Sk.builtin.func(\n      function(self, x, y, width, height) {\n        self.gl.viewport(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y), Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n      }\n    );\n\n    $loc.uniformMatrix4fv = new Sk.builtin.func(\n      function(self, location, transpose, values) {\n//        console.log(\"location  \" + (typeof location));\n//        console.log(\"transpose \" + (typeof transpose));\n//        console.log(\"values.v  \" + (typeof values.v));\n        self.gl.uniformMatrix4fv(Sk.builtin.asnum$(location), transpose, values.v);\n      }\n    );\n\n    $loc.setDrawFunc = new Sk.builtin.func(function(self, func) {\n      var startTime = (new Date()).getTime();\n      var intervalId = setInterval(\n        function() {\n          Sk.misceval.callsim(func, self, (new Date()).getTime() - startTime);\n        }, 1000.0 / 60.0); // 60 fps\n    });\n\n  }, 'Context', []);\n\n  mod.Float32Array = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      if (typeof data === \"number\") {\n        self.v = new Float32Array(data);\n      }\n      else {\n        self.v = new Float32Array(Sk.ffi.remapToJs(data));\n      }\n    });\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Float32Array', []);\n\n  /**\n   * A 4x4 (mutable) matrix suitable for OpenGL.\n   *\n   * Mutability is chosen for performance.\n   * The inderlying implementation is Float32Array.\n   * The indexing of the elements is\n   * 0 4  8 12\n   * 1 5  9 13\n   * 2 6 10 14\n   * 3 7 11 15\n   */\n  mod.Matrix4x4 = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      self.v = new Float32Array(Sk.ffi.remapToJs(data));\n    });\n\n    $loc.identity = new Sk.builtin.func(\n      function(self) {\n\n        var m = self.v;\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = 0;\n        m[15] = 1;\n      }\n    );\n\n    $loc.perspective = new Sk.builtin.func(\n      function(self, fov, aspect, near, far) {\n        \n        var t = Math.tan(Math.PI * 0.5 - 0.5 * (Sk.builtin.asnum$(fov) * Math.PI / 180));\n        var a = Sk.builtin.asnum$(aspect)\n        var n = Sk.builtin.asnum$(near)\n        var f = Sk.builtin.asnum$(far)\n        var k = 1.0 / (n - f);\n\n        var m = self.v;\n\n        m[0]  = t / a;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = t;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = (n + f) * k;\n        m[11] = -1;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = n * f * k * 2;\n        m[15] = 0;\n      }\n    );\n\n    $loc.translate = new Sk.builtin.func(\n      function(self, translation) {\n\n        var m = self.v;\n        var t = Sk.ffi.remapToJs(translation);\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = t[0];\n        m[13] = t[1];\n        m[14] = t[2];\n        m[15] = 1;\n      }\n    );\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Matrix4x4', []);\n\n  return mod;\n};", "src/lib/math/__init__.js": "var $builtinmodule = function(name)\n{\n    var mod = {};\n\tif(typeof mathjs == 'function')\n\t{ \n\t\t// load mathjs instance\n\t\tvar math = mathjs();\n\t}\n\telse\n\t{\n\t\tprint(\"mathjs not included and callable\");\n\t\tvar math = Math;\n\t}\n\t\n    mod.pi = Sk.builtin.assk$(math.PI, Sk.builtin.nmber.float$);\n    mod.e =  Sk.builtin.assk$(math.E, Sk.builtin.nmber.float$);\n\n\t\n//\tRNL\tadded\n    mod.fabs = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"fabs\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(math.abs(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs(\"asin\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"rad\", \"number\", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(math.asin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.acos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs(\"acos\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"rad\", \"number\", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(math.acos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs(\"atan\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"rad\", \"number\", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(math.atan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan2 = new Sk.builtin.func(function(y, x) {\n        Sk.builtin.pyCheckArgs(\"atan2\", arguments, 2, 2);\n        Sk.builtin.pyCheckType(\"y\", \"number\", Sk.builtin.checkNumber(y));\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(math.atan2(Sk.builtin.asnum$(y), Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs(\"sin\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"rad\", \"number\", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(math.sin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.cos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs(\"cos\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"rad\", \"number\", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(math.cos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.tan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs(\"tan\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"rad\", \"number\", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(math.tan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asinh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs(\"asinh\", arguments, 1, 1);\n\tSk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar L = x + math.sqrt(x*x+1);\n\n\treturn new Sk.builtin.nmber(math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.acosh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs(\"acosh\", arguments, 1, 1);\n\tSk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar L = x + math.sqrt(x*x-1);\n\n\treturn new Sk.builtin.nmber(math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.atanh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs(\"atanh\", arguments, 1, 1);\n\tSk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar L = (1+x)/(1-x);\n\n\treturn new Sk.builtin.nmber(math.log(L)/2, Sk.builtin.nmber.float$);\n    });\n\n    mod.sinh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs(\"sinh\", arguments, 1, 1);\n\tSk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar e = math.E;\n\tvar p = math.pow(e, x);\n\tvar n = 1/p;\n\tvar result = (p-n)/2;\n\n\treturn new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.cosh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs(\"cosh\", arguments, 1, 1);\n\tSk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar e = math.E;\n\tvar p = math.pow(e, x);\n\tvar n = 1/p;\n\tvar result = (p+n)/2;\n\n\treturn new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.tanh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs(\"tanh\", arguments, 1, 1);\n\tSk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar e = math.E;\n\tvar p = math.pow(e, x);\n\tvar n = 1/p;\n\tvar result = ((p-n)/2)/((p+n)/2);\n\n\treturn new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.ceil = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"ceil\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(math.ceil(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.floor = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"floor\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(math.floor(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sqrt = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"sqrt\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(math.sqrt(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.trunc = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"trunc\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n        return new Sk.builtin.nmber(Sk.builtin.asnum$(x)|0, Sk.builtin.nmber.int$);\n    });\n\n    mod.log = new Sk.builtin.func(function(x, base) {\n        Sk.builtin.pyCheckArgs(\"log\", arguments, 1, 2);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n        if (base === undefined) {\n\t    return new Sk.builtin.nmber(math.log(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n        } else {\n            Sk.builtin.pyCheckType(\"base\", \"number\", Sk.builtin.checkNumber(base));\n            var ret = math.log(Sk.builtin.asnum$(x)) / math.log(Sk.builtin.asnum$(base));\n\t    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n        }\n    });\n\n    mod.log10 = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"log10\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n        var ret = math.log(Sk.builtin.asnum$(x)) / math.log(10);\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.exp = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs(\"exp\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(math.exp(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.pow = new Sk.builtin.func(function(x,y) {\n        Sk.builtin.pyCheckArgs(\"pow\", arguments, 2, 2);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n        Sk.builtin.pyCheckType(\"y\", \"number\", Sk.builtin.checkNumber(y));\n\n\treturn new Sk.builtin.nmber(math.pow(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y)), Sk.builtin.nmber.float$);\n    });\n\n    mod.radians = new Sk.builtin.func(function(deg) {\n        Sk.builtin.pyCheckArgs(\"radians\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"deg\", \"number\", Sk.builtin.checkNumber(deg));\n\n\tvar ret = math.PI / 180.0 * Sk.builtin.asnum$(deg);\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.degrees = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs(\"degrees\", arguments, 1, 1);\n        Sk.builtin.pyCheckType(\"rad\", \"number\", Sk.builtin.checkNumber(rad));\n\n\tvar ret = 180.0 / math.PI * Sk.builtin.asnum$(rad);\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.hypot = new Sk.builtin.func(function(x, y) {\n\tSk.builtin.pyCheckArgs(\"hypot\", arguments, 2, 2);\n        Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\tSk.builtin.pyCheckType(\"y\", \"number\", Sk.builtin.checkNumber(y));\n\n\t\tx = Sk.builtin.asnum$(x);\n\t\ty = Sk.builtin.asnum$(y);\n\treturn new Sk.builtin.nmber(math.sqrt((x*x)+(y*y)), Sk.builtin.nmber.float$);\n    });\n\n\tmod.factorial = new Sk.builtin.func(function(x) {\n\t    Sk.builtin.pyCheckArgs(\"factorial\", arguments, 1, 1);\n            Sk.builtin.pyCheckType(\"x\", \"number\", Sk.builtin.checkNumber(x));\n\n\t\tx = math.floor(Sk.builtin.asnum$(x));\n\t\tvar r = 1;\n\t\tfor (var i = 2; i <= x; i++)\n\t\t\tr *= i;\n\t\treturn new Sk.builtin.nmber(r, Sk.builtin.nmber.int$);\n\t});\n\n    return mod;\n}"}}